define(function(){"use strict";function C(e){return null!=e}function o(e){var t;this.name="DeveloperError",this.message=e;try{throw new Error}catch(e){t=e.stack}this.stack=t}C(Object.create)&&((o.prototype=Object.create(Error.prototype)).constructor=o),o.prototype.toString=function(){var e=this.name+": "+this.message;return C(this.stack)&&(e+="\n"+this.stack.toString()),e},o.throwInstantiationError=function(){throw new o("This function defines an interface and should not be called directly.")};var i={};function r(e,t,r){return"Expected "+r+" to be typeof "+t+", actual typeof was "+e}function M(e,t){return null!=e?e:t}function t(e){null==e&&(e=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,this.init_genrand(e)}i.typeOf={},i.defined=function(e,t){if(!C(t))throw new o(e+" is required, actual value was undefined")},i.typeOf.func=function(e,t){if("function"!=typeof t)throw new o(r(typeof t,"function",e))},i.typeOf.string=function(e,t){if("string"!=typeof t)throw new o(r(typeof t,"string",e))},i.typeOf.number=function(e,t){if("number"!=typeof t)throw new o(r(typeof t,"number",e))},i.typeOf.number.lessThan=function(e,t,r){if(i.typeOf.number(e,t),r<=t)throw new o("Expected "+e+" to be less than "+r+", actual value was "+t)},i.typeOf.number.lessThanOrEquals=function(e,t,r){if(i.typeOf.number(e,t),r<t)throw new o("Expected "+e+" to be less than or equal to "+r+", actual value was "+t)},i.typeOf.number.greaterThan=function(e,t,r){if(i.typeOf.number(e,t),t<=r)throw new o("Expected "+e+" to be greater than "+r+", actual value was "+t)},i.typeOf.number.greaterThanOrEquals=function(e,t,r){if(i.typeOf.number(e,t),t<r)throw new o("Expected "+e+" to be greater than or equal to"+r+", actual value was "+t)},i.typeOf.object=function(e,t){if("object"!=typeof t)throw new o(r(typeof t,"object",e))},i.typeOf.bool=function(e,t){if("boolean"!=typeof t)throw new o(r(typeof t,"boolean",e))},i.typeOf.number.equals=function(e,t,r,n){if(i.typeOf.number(e,r),i.typeOf.number(t,n),r!==n)throw new o(e+" must be equal to "+t+", the actual values are "+r+" and "+n)},M.EMPTY_OBJECT=Object.freeze({}),t.prototype.init_genrand=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0}},t.prototype.genrand_int32=function(){var e,t,r=new Array(0,this.MATRIX_A);if(this.mti>=this.N){for(this.mti==this.N+1&&this.init_genrand(5489),t=0;t<this.N-this.M;t++)e=this.mt[t]&this.UPPER_MASK|this.mt[t+1]&this.LOWER_MASK,this.mt[t]=this.mt[t+this.M]^e>>>1^r[1&e];for(;t<this.N-1;t++)e=this.mt[t]&this.UPPER_MASK|this.mt[t+1]&this.LOWER_MASK,this.mt[t]=this.mt[t+(this.M-this.N)]^e>>>1^r[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^r[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0},t.prototype.random=function(){return this.genrand_int32()*(1/4294967296)};var q={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,EPSILON21:1e-21,GRAVITATIONALPARAMETER:3986004418e5,SOLAR_RADIUS:6955e5,LUNAR_RADIUS:1737400,SIXTY_FOUR_KILOBYTES:65536,FOUR_GIGABYTES:4294967296};q.sign=M(Math.sign,function(e){return 0===(e=+e)||e!=e?e:0<e?1:-1}),q.signNotZero=function(e){return e<0?-1:1},q.toSNorm=function(e,t){return t=M(t,255),Math.round((.5*q.clamp(e,-1,1)+.5)*t)},q.fromSNorm=function(e,t){return t=M(t,255),q.clamp(e,0,t)/t*2-1},q.normalize=function(e,t,r){return 0===(r=Math.max(r-t,0))?0:q.clamp((e-t)/r,0,1)},q.sinh=M(Math.sinh,function(e){return(Math.exp(e)-Math.exp(-e))/2}),q.cosh=M(Math.cosh,function(e){return(Math.exp(e)+Math.exp(-e))/2}),q.lerp=function(e,t,r){return(1-r)*e+r*t},q.PI=Math.PI,q.ONE_OVER_PI=1/Math.PI,q.PI_OVER_TWO=Math.PI/2,q.PI_OVER_THREE=Math.PI/3,q.PI_OVER_FOUR=Math.PI/4,q.PI_OVER_SIX=Math.PI/6,q.THREE_PI_OVER_TWO=3*Math.PI/2,q.TWO_PI=2*Math.PI,q.ONE_OVER_TWO_PI=1/(2*Math.PI),q.RADIANS_PER_DEGREE=Math.PI/180,q.DEGREES_PER_RADIAN=180/Math.PI,q.RADIANS_PER_ARCSECOND=q.RADIANS_PER_DEGREE/3600,q.toRadians=function(e){return e*q.RADIANS_PER_DEGREE},q.toDegrees=function(e){return e*q.DEGREES_PER_RADIAN},q.convertLongitudeRange=function(e){var t=q.TWO_PI,e=e-Math.floor(e/t)*t;return e<-Math.PI?e+t:e>=Math.PI?e-t:e},q.clampToLatitudeRange=function(e){return q.clamp(e,-1*q.PI_OVER_TWO,q.PI_OVER_TWO)},q.negativePiToPi=function(e){return q.zeroToTwoPi(e+q.PI)-q.PI},q.zeroToTwoPi=function(e){var t=q.mod(e,q.TWO_PI);return Math.abs(t)<q.EPSILON14&&Math.abs(e)>q.EPSILON14?q.TWO_PI:t},q.mod=function(e,t){return(e%t+t)%t},q.equalsEpsilon=function(e,t,r,n){r=M(r,0),n=M(n,r);var i=Math.abs(e-t);return i<=n||i<=r*Math.max(Math.abs(e),Math.abs(t))},q.lessThan=function(e,t,r){return e-t<-r},q.lessThanOrEquals=function(e,t,r){return e-t<r},q.greaterThan=function(e,t,r){return r<e-t},q.greaterThanOrEquals=function(e,t,r){return-r<e-t};var a=[1];q.factorial=function(e){var t=a.length;if(t<=e)for(var r=a[t-1],n=t;n<=e;n++){var i=r*n;a.push(i),r=i}return a[e]},q.incrementWrap=function(e,t,r){return r=M(r,0),e=t<++e?r:e},q.isPowerOfTwo=function(e){return 0!==e&&0==(e&e-1)},q.nextPowerOfTwo=function(e){return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e},q.clamp=function(e,t,r){return e<t?t:r<e?r:e};var n=new t;function G(e,t,r){this.x=M(e,0),this.y=M(t,0),this.z=M(r,0)}q.setRandomNumberSeed=function(e){n=new t(e)},q.nextRandomNumber=function(){return n.random()},q.randomBetween=function(e,t){return q.nextRandomNumber()*(t-e)+e},q.acosClamped=function(e){return Math.acos(q.clamp(e,-1,1))},q.asinClamped=function(e){return Math.asin(q.clamp(e,-1,1))},q.chordLength=function(e,t){return 2*t*Math.sin(.5*e)},q.logBase=function(e,t){return Math.log(e)/Math.log(t)},q.cbrt=M(Math.cbrt,function(e){var t=Math.pow(Math.abs(e),1/3);return e<0?-t:t}),q.log2=M(Math.log2,function(e){return Math.log(e)*Math.LOG2E}),q.fog=function(e,t){t*=e;return 1-Math.exp(-t*t)},q.fastApproximateAtan=function(e){return e*(-.1784*Math.abs(e)-.0663*e*e+1.0301)},q.fastApproximateAtan2=function(e,t){var r=Math.abs(e),n=Math.abs(t),i=Math.max(r,n);n=Math.min(r,n);r=q.fastApproximateAtan(n/i);return r=Math.abs(t)>Math.abs(e)?q.PI_OVER_TWO-r:r,r=e<0?q.PI-r:r,r=t<0?-r:r},G.fromSpherical=function(e,t){C(t)||(t=new G);var r=e.clock,n=e.cone,i=M(e.magnitude,1),e=i*Math.sin(n);return t.x=e*Math.cos(r),t.y=e*Math.sin(r),t.z=i*Math.cos(n),t},G.fromElements=function(e,t,r,n){return C(n)?(n.x=e,n.y=t,n.z=r,n):new G(e,t,r)},G.fromCartesian4=G.clone=function(e,t){if(C(e))return C(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t):new G(e.x,e.y,e.z)},G.packedLength=3,G.pack=function(e,t,r){return r=M(r,0),t[r++]=e.x,t[r++]=e.y,t[r]=e.z,t},G.unpack=function(e,t,r){return t=M(t,0),(r=!C(r)?new G:r).x=e[t++],r.y=e[t++],r.z=e[t],r},G.packArray=function(e,t){var r=e.length,n=3*r;if(C(t)){if(!Array.isArray(t)&&t.length!==n)throw new o("If result is a typed array, it must have exactly array.length * 3 elements");t.length!==n&&(t.length=n)}else t=new Array(n);for(var i=0;i<r;++i)G.pack(e[i],t,3*i);return t},G.unpackArray=function(e,t){var r=e.length;C(t)?t.length=r/3:t=new Array(r/3);for(var n=0;n<r;n+=3){var i=n/3;t[i]=G.unpack(e,n,t[i])}return t},G.fromArray=G.unpack,G.maximumComponent=function(e){return Math.max(e.x,e.y,e.z)},G.minimumComponent=function(e){return Math.min(e.x,e.y,e.z)},G.minimumByComponent=function(e,t,r){return r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r.z=Math.min(e.z,t.z),r},G.maximumByComponent=function(e,t,r){return r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r.z=Math.max(e.z,t.z),r},G.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z},G.magnitude=function(e){return Math.sqrt(G.magnitudeSquared(e))};var s=new G;G.distance=function(e,t){return G.subtract(e,t,s),G.magnitude(s)},G.distanceSquared=function(e,t){return G.subtract(e,t,s),G.magnitudeSquared(s)},G.normalize=function(e,t){var r=G.magnitude(e);return 0!=r?(t.x=e.x/r,t.y=e.y/r,t.z=e.z/r):G.clone(e,t),Math.abs(t.x)<q.EPSILON8&&(t.x=0),Math.abs(t.y)<q.EPSILON8&&(t.y=0),Math.abs(t.z)<q.EPSILON8&&(t.z=0),t},G.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},G.multiplyComponents=function(e,t,r){return r.x=e.x*t.x,r.y=e.y*t.y,r.z=e.z*t.z,r},G.divideComponents=function(e,t,r){return r.x=e.x/t.x,r.y=e.y/t.y,r.z=e.z/t.z,r},G.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r},G.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r},G.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r},G.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r},G.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t},G.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t};var u=new G;G.lerp=function(e,t,r,n){return G.multiplyByScalar(t,r,u),n=G.multiplyByScalar(e,1-r,n),G.add(u,n,n)};var c=new G,l=new G;G.angleBetween=function(e,t){G.normalize(e,c),G.normalize(t,l);e=G.dot(c,l),t=G.magnitude(G.cross(c,l,c));return Math.atan2(t,e)};var f=new G;G.mostOrthogonalAxis=function(e,t){e=G.normalize(e,f);return G.abs(e,e),t=e.x<=e.y?e.x<=e.z?G.clone(G.UNIT_X,t):G.clone(G.UNIT_Z,t):e.y<=e.z?G.clone(G.UNIT_Y,t):G.clone(G.UNIT_Z,t)},G.projectVector=function(e,t,r){e=G.dot(e,t)/G.dot(t,t);return G.multiplyByScalar(t,e,r)},G.equals=function(e,t){return e===t||C(e)&&C(t)&&Math.abs(e.x-t.x)<1e-10&&Math.abs(e.y-t.y)<1e-10&&Math.abs(e.z-t.z)<1e-10},G.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]&&e.z===t[r+2]},G.equalsEpsilon=function(e,t,r,n){return e===t||C(e)&&C(t)&&q.equalsEpsilon(e.x,t.x,r,n)&&q.equalsEpsilon(e.y,t.y,r,n)&&q.equalsEpsilon(e.z,t.z,r,n)},G.cross=function(e,t,r){var n=e.x,i=e.y,o=e.z,a=t.x,s=t.y,e=t.z,t=o*a-n*e,a=n*s-i*a;return r.x=i*e-o*s,r.y=t,r.z=a,r},G.midpoint=function(e,t,r){return r.x=.5*(e.x+t.x),r.y=.5*(e.y+t.y),r.z=.5*(e.z+t.z),r},G.fromDegrees=function(e,t,r,n,i){return e=q.toRadians(e),t=q.toRadians(t),G.fromRadians(e,t,r,n,i)};var h=new G,m=new G,d=new G(40680631590769,40680631590769,40408299984661.445);G.fromRadians=function(e,t,r,n,i){r=M(r,0);var o=C(n)?n.radiiSquared:d,n=Math.cos(t);h.x=n*Math.cos(e),h.y=n*Math.sin(e),h.z=Math.sin(t),h=G.normalize(h,h),G.multiplyComponents(o,h,m);o=Math.sqrt(G.dot(h,m));return m=G.divideByScalar(m,o,m),h=G.multiplyByScalar(h,r,h),C(i)||(i=new G),G.add(m,h,i)},G.fromDegreesArray=function(e,t,r){var n=e.length;C(r)?r.length=n/2:r=new Array(n/2);for(var i=0;i<n;i+=2){var o=e[i],a=e[i+1],s=i/2;r[s]=G.fromDegrees(o,a,0,t,r[s])}return r},G.fromRadiansArray=function(e,t,r){var n=e.length;C(r)?r.length=n/2:r=new Array(n/2);for(var i=0;i<n;i+=2){var o=e[i],a=e[i+1],s=i/2;r[s]=G.fromRadians(o,a,0,t,r[s])}return r},G.fromDegreesArrayHeights=function(e,t,r){var n=e.length;C(r)?r.length=n/3:r=new Array(n/3);for(var i=0;i<n;i+=3){var o=e[i],a=e[i+1],s=e[i+2],u=i/3;r[u]=G.fromDegrees(o,a,s,t,r[u])}return r},G.fromRadiansArrayHeights=function(e,t,r){var n=e.length;C(r)?r.length=n/3:r=new Array(n/3);for(var i=0;i<n;i+=3){var o=e[i],a=e[i+1],s=e[i+2],u=i/3;r[u]=G.fromRadians(o,a,s,t,r[u])}return r},G.ZERO=Object.freeze(new G(0,0,0)),G.UNIT_X=Object.freeze(new G(1,0,0)),G.UNIT_Y=Object.freeze(new G(0,1,0)),G.UNIT_Z=Object.freeze(new G(0,0,1)),G.prototype.clone=function(e){return G.clone(this,e)},G.prototype.equals=function(e){return G.equals(this,e)},G.prototype.equalsEpsilon=function(e,t,r){return G.equalsEpsilon(this,e,t,r)},G.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},G.prototype.applyMatrix4=function(e,t,r){C(r)||(r=new G);var n=e.x,i=e.y,o=e.z,e=1/(t[3]*n+t[7]*i+t[11]*o+t[15]);return r.x=(t[0]*n+t[4]*i+t[8]*o+t[12])*e,r.y=(t[1]*n+t[5]*i+t[9]*o+t[13])*e,r.z=(t[2]*n+t[6]*i+t[10]*o+t[14])*e,r},G.prototype.set=function(e,t,r){this.x=e,this.y=t,this.z=r},G.prototype.fromArray=function(e,t){return this.x=e[t=void 0===t?0:t],this.y=e[t+1],this.z=e[t+2],this},G.prototype.toArray=function(e,t){return(e=void 0===e?[]:e)[t=void 0===t?0:t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e};var I=new G,w=new G;function p(e,t,r,n,i){var o=e.x,a=e.y,s=e.z,u=t.x,c=t.y,t=t.z,l=o*o*u*u,f=a*a*c*c,h=s*s*t*t,u=l+f+h,c=Math.sqrt(1/u),t=G.multiplyByScalar(e,c,I);if(u<n)return isFinite(c)?G.clone(t,i):void 0;var m=r.x,d=r.y,p=r.z,r=w;r.x=t.x*m*2,r.y=t.y*d*2,r.z=t.z*p*2;var E=(1-c)*G.magnitude(e)/(.5*G.magnitude(r)),_=0;do{var y,T,g,R,A,S,O,_=(O=l*(R=(y=1/(1+(E-=_)*m))*y)+f*(A=(T=1/(1+E*d))*T)+h*(S=(g=1/(1+E*p))*g)-1)/(-2*(l*(R*y)*m+f*(A*T)*d+h*(S*g)*p))}while(Math.abs(O)>q.EPSILON12);return C(i)?(i.x=o*y,i.y=a*T,i.z=s*g,i):new G(o*y,a*T,s*g)}function E(e,t,r){this.longitude=M(e,0),this.latitude=M(t,0),this.height=M(r,0)}E.fromRadians=function(e,t,r,n){return r=M(r,0),C(n)?(n.longitude=e,n.latitude=t,n.height=r,n):new E(e,t,r)},E.fromDegrees=function(e,t,r,n){return e=q.toRadians(e),t=q.toRadians(t),E.fromRadians(e,t,r,n)};var _=new G,y=new G,T=new G,g=new G(1/6378137,1/6378137,1/6356752.314245179),R=new G(1/40680631590769,1/40680631590769,1/40408299984661.445),A=q.EPSILON1;function S(e,t,r,n){t=M(t,0),r=M(r,0),n=M(n,0),e._radii=new G(t,r,n),e._radiiSquared=new G(t*t,r*r,n*n),e._radiiToTheFourth=new G(t*t*t*t,r*r*r*r,n*n*n*n),e._oneOverRadii=new G(0===t?0:1/t,0===r?0:1/r,0===n?0:1/n),e._oneOverRadiiSquared=new G(0===t?0:1/(t*t),0===r?0:1/(r*r),0===n?0:1/(n*n)),e._minimumRadius=Math.min(t,r,n),e._maximumRadius=Math.max(t,r,n),e._centerToleranceSquared=q.EPSILON1,0!==e._radiiSquared.z&&(e._squaredXOverSquaredZ=e._radiiSquared.x/e._radiiSquared.z)}function j(e,t,r){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,S(this,e,t,r)}E.fromCartesian=function(e,t,r){var n=C(t)?t.oneOverRadii:g,i=C(t)?t.oneOverRadiiSquared:R,n=p(e,n,i,C(t)?t._centerToleranceSquared:A,y);if(C(n)){t=G.multiplyComponents(n,i,_),t=G.normalize(t,t),i=G.subtract(e,n,T),n=Math.atan2(t.y,t.x),t=Math.asin(t.z),i=q.sign(G.dot(i,e))*G.magnitude(i);return C(r)?(r.longitude=n,r.latitude=t,r.height=i,r):new E(n,t,i)}},E.toCartesian=function(e,t,r){return G.fromRadians(e.longitude,e.latitude,e.height,t,r)},E.clone=function(e,t){if(C(e))return C(t)?(t.longitude=e.longitude,t.latitude=e.latitude,t.height=e.height,t):new E(e.longitude,e.latitude,e.height)},E.equals=function(e,t){return e===t||C(e)&&C(t)&&e.longitude===t.longitude&&e.latitude===t.latitude&&e.height===t.height},E.equalsEpsilon=function(e,t,r){return r=M(r,0),e===t||C(e)&&C(t)&&Math.abs(e.longitude-t.longitude)<=r&&Math.abs(e.latitude-t.latitude)<=r&&Math.abs(e.height-t.height)<=r},E.ZERO=Object.freeze(new E(0,0,0)),E.prototype.clone=function(e){return E.clone(this,e)},E.prototype.equals=function(e){return E.equals(this,e)},E.prototype.equalsEpsilon=function(e,t){return E.equalsEpsilon(this,e,t)},E.prototype.toString=function(){return"("+this.longitude+", "+this.latitude+", "+this.height+")"},E.geodeticParallelLength=function(e,t,r){return e*r*Math.cos(t)},E.geodeticCircleRadians=function(e,t,r,n){n=Math.cos(t)*Math.cos(n)*Math.cos(e-r)+Math.sin(t)*Math.sin(n);return Math.abs(Math.acos(n))},E.add=function(e,t,r){return r.longitude=e.longitude+t.longitude,r.latitude=e.latitude+t.latitude,r.height=e.height+t.height,r},E.subtract=function(e,t,r){return r.longitude=e.longitude-t.longitude,r.latitude=e.latitude-t.latitude,r.height=e.height-t.height,r},E.multiplyByScalar=function(e,t,r){return r.longitude=e.longitude*t,r.latitude=e.latitude*t,r.height=e.height*t,r},E.divideByScalar=function(e,t,r){return r.longitude=e.longitude/t,r.latitude=e.latitude/t,r.height=e.height/t,r},E.distance=function(e,t){e=new Cartesian2(e.longitude,e.latitude),t=new Cartesian2(t.longitude,t.latitude);return Cartesian2.distance(e,t)},Object.defineProperties(j.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),j.clone=function(e,t){if(C(e)){var r=e._radii;return C(t)?(G.clone(r,t._radii),G.clone(e._radiiSquared,t._radiiSquared),G.clone(e._radiiToTheFourth,t._radiiToTheFourth),G.clone(e._oneOverRadii,t._oneOverRadii),G.clone(e._oneOverRadiiSquared,t._oneOverRadiiSquared),t._minimumRadius=e._minimumRadius,t._maximumRadius=e._maximumRadius,t._centerToleranceSquared=e._centerToleranceSquared,t):new j(r.x,r.y,r.z)}},j.fromCartesian3=function(e,t){return C(t)||(t=new j),C(e)&&S(t,e.x,e.y,e.z),t},j.WGS84=Object.freeze(new j(6378137,6378137,6356752.314245179)),j.UNIT_SPHERE=Object.freeze(new j(1,1,1)),j.MOON=Object.freeze(new j(q.LUNAR_RADIUS,q.LUNAR_RADIUS,q.LUNAR_RADIUS)),j.DATUM_PLANE=-100,j.prototype.clone=function(e){return j.clone(this,e)},j.packedLength=G.packedLength,j.pack=function(e,t,r){return r=M(r,0),G.pack(e._radii,t,r),t},j.unpack=function(e,t,r){t=M(t,0);t=G.unpack(e,t);return j.fromCartesian3(t,r)},j.prototype.geocentricSurfaceNormal=G.normalize,j.prototype.geodeticSurfaceNormalCartographic=function(e,t){var r=e.longitude,n=e.latitude,i=Math.cos(n),e=i*Math.cos(r),r=i*Math.sin(r),n=Math.sin(n);return(t=!C(t)?new G:t).x=e,t.y=r,t.z=n,G.normalize(t,t)},j.prototype.geodeticSurfaceNormal=function(e,t){if(!G.equalsEpsilon(e,G.ZERO,q.EPSILON14))return C(t)||(t=new G),t=G.multiplyComponents(e,this._oneOverRadiiSquared,t),G.normalize(t,t)};var O=new G,N=new G;j.prototype.cartographicToCartesian=function(e,t){var r=O,n=N;this.geodeticSurfaceNormalCartographic(e,r),G.multiplyComponents(this._radiiSquared,r,n);var i=Math.sqrt(G.dot(r,n));return G.divideByScalar(n,i,n),G.multiplyByScalar(r,e.height,r),C(t)||(t=new G),G.add(n,r,t)},j.prototype.cartographicArrayToCartesianArray=function(e,t){var r=e.length;C(t)?t.length=r:t=new Array(r);for(var n=0;n<r;n++)t[n]=this.cartographicToCartesian(e[n],t[n]);return t};var x=new G,v=new G,b=new G;j.prototype.cartesianToCartographic=function(e,t){var r=this.scaleToGeodeticSurface(e,v);if(C(r)){var n=this.geodeticSurfaceNormal(r,x),i=G.subtract(e,r,b),r=Math.atan2(n.y,n.x),n=Math.asin(n.z),i=q.sign(G.dot(i,e))*G.magnitude(i);return C(t)?(t.longitude=r,t.latitude=n,t.height=i,t):new E(r,n,i)}},j.prototype.cartesianArrayToCartographicArray=function(e,t){var r=e.length;C(t)?t.length=r:t=new Array(r);for(var n=0;n<r;++n)t[n]=this.cartesianToCartographic(e[n],t[n]);return t},j.prototype.scaleToGeodeticSurface=function(e,t){return p(e,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,t)},j.prototype.scaleToGeocentricSurface=function(e,t){C(t)||(t=new G);var r=e.x,n=e.y,i=e.z,o=this._oneOverRadiiSquared,o=1/Math.sqrt(r*r*o.x+n*n*o.y+i*i*o.z);return G.multiplyByScalar(e,o,t)},j.prototype.transformPositionToScaledSpace=function(e,t){return C(t)||(t=new G),G.multiplyComponents(e,this._oneOverRadii,t)},j.prototype.transformPositionFromScaledSpace=function(e,t){return C(t)||(t=new G),G.multiplyComponents(e,this._radii,t)},j.prototype.equals=function(e){return this===e||C(e)&&G.equals(this._radii,e._radii)},j.prototype.toString=function(){return this._radii.toString()},j.prototype.getSurfaceNormalIntersectionWithZAxis=function(e,t,r){t=M(t,0);var n=this._squaredXOverSquaredZ;if((r=!C(r)?new G:r).x=0,r.y=0,r.z=e.z*(1-n),!(Math.abs(r.z)>=this._radii.z-t))return r};var P=[.14887433898163,.43339539412925,.67940956829902,.86506336668898,.97390652851717,0],F=[.29552422471475,.26926671930999,.21908636251598,.14945134915058,.066671344308684,0];function U(e,t,r){for(var n=.5*(t+e),i=.5*(t-e),o=0,a=0;a<5;a++){var s=i*P[a];o+=F[a]*(r(n+s)+r(n-s))}return o*=i}function e(e){this._ellipsoid=M(e,j.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}j.prototype.surfaceArea=function(e){for(var t=e.west,i=e.east,r=e.south,n=e.north;i<t;)i+=q.TWO_PI;var e=this._radiiSquared,o=e.x,a=e.y,s=e.z,u=o*a;return U(r,n,function(e){var r=Math.cos(e),n=Math.sin(e);return Math.cos(e)*U(t,i,function(e){var t=Math.cos(e),e=Math.sin(e);return Math.sqrt(u*n*n+s*(a*t*t+o*e*e)*r*r)})})},Object.defineProperties(e.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),e.prototype.project=function(e,t){this._semimajorAxis;var r=e.longitude,n=e.latitude,e=e.height;return C(t)?(t.x=r,t.y=n,t.z=e,t):new G(r,n,e)},e.prototype.unproject=function(e,t){this._oneOverSemimajorAxis;var r=e.x,n=e.y,e=e.z;return C(t)?(t.longitude=r,t.latitude=n,t.height=e,t):new E(r,n,e)};var D=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});function L(e,t){this.start=M(e,0),this.stop=M(t,0)}function B(e,t,r,n,i,o,a,s,u){this[0]=M(e,0),this[1]=M(n,0),this[2]=M(a,0),this[3]=M(t,0),this[4]=M(i,0),this[5]=M(s,0),this[6]=M(r,0),this[7]=M(o,0),this[8]=M(u,0)}B.packedLength=9,B.pack=function(e,t,r){return r=M(r,0),t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t[r++]=e[4],t[r++]=e[5],t[r++]=e[6],t[r++]=e[7],t[r++]=e[8],t},B.unpack=function(e,t,r){return t=M(t,0),(r=!C(r)?new B:r)[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r[4]=e[t++],r[5]=e[t++],r[6]=e[t++],r[7]=e[t++],r[8]=e[t++],r},B.clone=function(e,t){if(C(e))return C(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):new B(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])},B.fromArray=function(e,t,r){return t=M(t,0),(r=!C(r)?new B:r)[0]=e[t],r[1]=e[t+1],r[2]=e[t+2],r[3]=e[t+3],r[4]=e[t+4],r[5]=e[t+5],r[6]=e[t+6],r[7]=e[t+7],r[8]=e[t+8],r},B.fromColumnMajorArray=function(e,t){return B.clone(e,t)},B.fromRowMajorArray=function(e,t){return C(t)?(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t):new B(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},B.fromQuaternion=function(e,t){var r=e.x*e.x,n=e.x*e.y,i=e.x*e.z,o=e.x*e.w,a=e.y*e.y,s=e.y*e.z,u=e.y*e.w,c=e.z*e.z,l=e.z*e.w,f=e.w*e.w,h=r-a-c+f,m=2*(n-l),d=2*(i+u),e=2*(n+l),n=a-r-c+f,l=2*(s-o),u=2*(i-u),o=2*(s+o),f=-r-a+c+f;return C(t)?(t[0]=h,t[1]=e,t[2]=u,t[3]=m,t[4]=n,t[5]=o,t[6]=d,t[7]=l,t[8]=f,t):new B(h,m,d,e,n,l,u,o,f)},B.fromHeadingPitchRoll=function(e,t){var r=Math.cos(-e.pitch),n=Math.cos(-e.heading),i=Math.cos(e.roll),o=Math.sin(-e.pitch),a=Math.sin(-e.heading),s=Math.sin(e.roll),u=r*n,c=-i*a+s*o*n,l=s*a+i*o*n,f=r*a,e=i*n+s*o*a,a=-s*n+i*o*a,o=-o,s=s*r,r=i*r;return C(t)?(t[0]=u,t[1]=f,t[2]=o,t[3]=c,t[4]=e,t[5]=s,t[6]=l,t[7]=a,t[8]=r,t):new B(u,c,l,f,e,a,o,s,r)},B.fromScale=function(e,t){return C(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=e.y,t[5]=0,t[6]=0,t[7]=0,t[8]=e.z,t):new B(e.x,0,0,0,e.y,0,0,0,e.z)},B.fromUniformScale=function(e,t){return C(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=e,t):new B(e,0,0,0,e,0,0,0,e)},B.fromCrossProduct=function(e,t){return C(t)?(t[0]=0,t[1]=e.z,t[2]=-e.y,t[3]=-e.z,t[4]=0,t[5]=e.x,t[6]=e.y,t[7]=-e.x,t[8]=0,t):new B(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0)},B.fromRotationX=function(e,t){var r=Math.cos(e),e=Math.sin(e);return C(t)?(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=r,t[5]=e,t[6]=0,t[7]=-e,t[8]=r,t):new B(1,0,0,0,r,-e,0,e,r)},B.fromRotationY=function(e,t){var r=Math.cos(e),e=Math.sin(e);return C(t)?(t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=1,t[5]=0,t[6]=e,t[7]=0,t[8]=r,t):new B(r,0,e,0,1,0,-e,0,r)},B.fromRotationZ=function(e,t){var r=Math.cos(e),e=Math.sin(e);return C(t)?(t[0]=r,t[1]=e,t[2]=0,t[3]=-e,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new B(r,-e,0,e,r,0,0,0,1)},B.toArray=function(e,t){return C(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},B.getElementIndex=function(e,t){return 3*e+t},B.getColumn=function(e,t,r){var n=3*t,i=e[n],t=e[1+n],n=e[2+n];return r.x=i,r.y=t,r.z=n,r},B.setColumn=function(e,t,r,n){t*=3;return(n=B.clone(e,n))[t]=r.x,n[1+t]=r.y,n[2+t]=r.z,n},B.getRow=function(e,t,r){var n=e[t],i=e[t+3],t=e[t+6];return r.x=n,r.y=i,r.z=t,r},B.setRow=function(e,t,r,n){return(n=B.clone(e,n))[t]=r.x,n[t+3]=r.y,n[t+6]=r.z,n};var z=new G;B.getScale=function(e,t){return t.x=G.magnitude(G.fromElements(e[0],e[1],e[2],z)),t.y=G.magnitude(G.fromElements(e[3],e[4],e[5],z)),t.z=G.magnitude(G.fromElements(e[6],e[7],e[8],z)),t};var H=new G;B.getMaximumScale=function(e){return B.getScale(e,H),G.maximumComponent(H)},B.multiply=function(e,t,r){var n=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],i=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],o=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],a=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],s=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],u=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],c=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],l=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],t=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return r[0]=n,r[1]=i,r[2]=o,r[3]=a,r[4]=s,r[5]=u,r[6]=c,r[7]=l,r[8]=t,r},B.add=function(e,t,r){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r},B.subtract=function(e,t,r){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r},B.multiplyByVector=function(e,t,r){var n=t.x,i=t.y,o=t.z,a=e[0]*n+e[3]*i+e[6]*o,t=e[1]*n+e[4]*i+e[7]*o,o=e[2]*n+e[5]*i+e[8]*o;return r.x=a,r.y=t,r.z=o,r},B.multiplyByScalar=function(e,t,r){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r},B.multiplyByScale=function(e,t,r){return r[0]=e[0]*t.x,r[1]=e[1]*t.x,r[2]=e[2]*t.x,r[3]=e[3]*t.y,r[4]=e[4]*t.y,r[5]=e[5]*t.y,r[6]=e[6]*t.z,r[7]=e[7]*t.z,r[8]=e[8]*t.z,r},B.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t},B.transpose=function(e,t){var r=e[0],n=e[3],i=e[6],o=e[1],a=e[4],s=e[7],u=e[2],c=e[5],e=e[8];return t[0]=r,t[1]=n,t[2]=i,t[3]=o,t[4]=a,t[5]=s,t[6]=u,t[7]=c,t[8]=e,t};var W=new G(1,1,1);B.getRotation=function(e,t){var r=G.divideComponents(W,B.getScale(e,H),H);return t=B.multiplyByScale(e,r,t)};var V=[1,0,0],X=[2,2,1];var Y=new B,k=new B;function K(e){var t;this.name="RuntimeError",this.message=e;try{throw new Error}catch(e){t=e.stack}this.stack=t}function Z(e,t,r,n){this.x=M(e,0),this.y=M(t,0),this.z=M(r,0),this.w=M(n,0)}B.computeEigenDecomposition=function(e,t){for(var r=q.EPSILON20,n=0,i=0,o=(t=!C(t)?{}:t).unitary=B.clone(B.IDENTITY,t.unitary),a=t.diagonal=B.clone(e,t.diagonal),s=r*function(e){for(var t=0,r=0;r<9;++r){var n=e[r];t+=n*n}return Math.sqrt(t)}(a);i<10&&function(e){for(var t=0,r=0;r<3;++r){var n=e[B.getElementIndex(X[r],V[r])];t+=2*n*n}return Math.sqrt(t)}(a)>s;)!function(e,t){for(var r=q.EPSILON15,n=0,i=1,o=0;o<3;++o){var a=Math.abs(e[B.getElementIndex(X[o],V[o])]);n<a&&(i=o,n=a)}var s=1,u=0,c=V[i],l=X[i];Math.abs(e[B.getElementIndex(l,c)])>r&&(u=(r=(r=(e[B.getElementIndex(l,l)]-e[B.getElementIndex(c,c)])/2/e[B.getElementIndex(l,c)])<0?-1/(-r+Math.sqrt(1+r*r)):1/(r+Math.sqrt(1+r*r)))*(s=1/Math.sqrt(1+r*r))),(t=B.clone(B.IDENTITY,t))[B.getElementIndex(c,c)]=t[B.getElementIndex(l,l)]=s,t[B.getElementIndex(l,c)]=u,t[B.getElementIndex(c,l)]=-u}(a,Y),B.transpose(Y,k),B.multiply(a,Y,a),B.multiply(k,a,a),B.multiply(o,Y,o),2<++n&&(++i,n=0);return t},B.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t},B.determinant=function(e){var t=e[0],r=e[3],n=e[6],i=e[1],o=e[4],a=e[7],s=e[2],u=e[5],e=e[8];return t*(o*e-u*a)+i*(u*n-r*e)+s*(r*a-o*n)},B.inverse=function(e,t){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],e=B.determinant(e);return t[0]=a*l-c*s,t[1]=c*i-n*l,t[2]=n*s-a*i,t[3]=u*s-o*l,t[4]=r*l-u*i,t[5]=o*i-r*s,t[6]=o*c-u*a,t[7]=u*n-r*c,t[8]=r*a-o*n,B.multiplyByScalar(t,1/e,t)},B.equals=function(e,t){return e===t||C(e)&&C(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},B.equalsEpsilon=function(e,t,r){return r=M(r,0),e===t||C(e)&&C(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r},B.IDENTITY=Object.freeze(new B(1,0,0,0,1,0,0,0,1)),B.ZERO=Object.freeze(new B(0,0,0,0,0,0,0,0,0)),B.COLUMN0ROW0=0,B.COLUMN0ROW1=1,B.COLUMN0ROW2=2,B.COLUMN1ROW0=3,B.COLUMN1ROW1=4,B.COLUMN1ROW2=5,B.COLUMN2ROW0=6,B.COLUMN2ROW1=7,B.COLUMN2ROW2=8,Object.defineProperties(B.prototype,{length:{get:function(){return B.packedLength}}}),B.prototype.clone=function(e){return B.clone(this,e)},B.prototype.equals=function(e){return B.equals(this,e)},B.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]},B.prototype.equalsEpsilon=function(e,t){return B.equalsEpsilon(this,e,t)},B.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+")\n("+this[1]+", "+this[4]+", "+this[7]+")\n("+this[2]+", "+this[5]+", "+this[8]+")"},C(Object.create)&&((K.prototype=Object.create(Error.prototype)).constructor=K),K.prototype.toString=function(){var e=this.name+": "+this.message;return C(this.stack)&&(e+="\n"+this.stack.toString()),e},Z.fromElements=function(e,t,r,n,i){return C(i)?(i.x=e,i.y=t,i.z=r,i.w=n,i):new Z(e,t,r,n)},Z.fromColor=function(e,t){return C(t)?(t.x=e.red,t.y=e.green,t.z=e.blue,t.w=e.alpha,t):new Z(e.red,e.green,e.blue,e.alpha)},Z.clone=function(e,t){if(C(e))return C(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new Z(e.x,e.y,e.z,e.w)},Z.packedLength=4,Z.pack=function(e,t,r){return r=M(r,0),t[r++]=e.x,t[r++]=e.y,t[r++]=e.z,t[r]=e.w,t},Z.unpack=function(e,t,r){return t=M(t,0),(r=!C(r)?new Z:r).x=e[t++],r.y=e[t++],r.z=e[t++],r.w=e[t],r},Z.packArray=function(e,t){var r=e.length,n=4*r;if(C(t)){if(!Array.isArray(t)&&t.length!==n)throw new o("If result is a typed array, it must have exactly array.length * 4 elements");t.length!==n&&(t.length=n)}else t=new Array(n);for(var i=0;i<r;++i)Z.pack(e[i],t,4*i);return t},Z.unpackArray=function(e,t){var r=e.length;C(t)?t.length=r/4:t=new Array(r/4);for(var n=0;n<r;n+=4){var i=n/4;t[i]=Z.unpack(e,n,t[i])}return t},Z.fromArray=Z.unpack,Z.maximumComponent=function(e){return Math.max(e.x,e.y,e.z,e.w)},Z.minimumComponent=function(e){return Math.min(e.x,e.y,e.z,e.w)},Z.minimumByComponent=function(e,t,r){return r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r.z=Math.min(e.z,t.z),r.w=Math.min(e.w,t.w),r},Z.maximumByComponent=function(e,t,r){return r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r.z=Math.max(e.z,t.z),r.w=Math.max(e.w,t.w),r},Z.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},Z.magnitude=function(e){return Math.sqrt(Z.magnitudeSquared(e))};var J=new Z;Z.distance=function(e,t){return Z.subtract(e,t,J),Z.magnitude(J)},Z.distanceSquared=function(e,t){return Z.subtract(e,t,J),Z.magnitudeSquared(J)},Z.normalize=function(e,t){var r=Z.magnitude(e);return 0!=r?(t.x=e.x/r,t.y=e.y/r,t.z=e.z/r,t.w=e.w/r):Z.clone(e,t),Math.abs(t.x)<q.EPSILON8&&(t.x=0),Math.abs(t.y)<q.EPSILON8&&(t.y=0),Math.abs(t.z)<q.EPSILON8&&(t.z=0),Math.abs(t.w)<q.EPSILON8&&(t.w=0),t},Z.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},Z.multiplyComponents=function(e,t,r){return r.x=e.x*t.x,r.y=e.y*t.y,r.z=e.z*t.z,r.w=e.w*t.w,r},Z.divideComponents=function(e,t,r){return r.x=e.x/t.x,r.y=e.y/t.y,r.z=e.z/t.z,r.w=e.w/t.w,r},Z.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r},Z.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},Z.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},Z.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},Z.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},Z.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t.w=Math.abs(e.w),t};var Q=new Z;Z.lerp=function(e,t,r,n){return Z.multiplyByScalar(t,r,Q),n=Z.multiplyByScalar(e,1-r,n),Z.add(Q,n,n)};var $=new Z;Z.mostOrthogonalAxis=function(e,t){e=Z.normalize(e,$);return Z.abs(e,e),t=e.x<=e.y?e.x<=e.z?e.x<=e.w?Z.clone(Z.UNIT_X,t):Z.clone(Z.UNIT_W,t):e.z<=e.w?Z.clone(Z.UNIT_Z,t):Z.clone(Z.UNIT_W,t):e.y<=e.z?e.y<=e.w?Z.clone(Z.UNIT_Y,t):Z.clone(Z.UNIT_W,t):e.z<=e.w?Z.clone(Z.UNIT_Z,t):Z.clone(Z.UNIT_W,t)},Z.equals=function(e,t){return e===t||C(e)&&C(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},Z.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]&&e.z===t[r+2]&&e.w===t[r+3]},Z.equalsEpsilon=function(e,t,r,n){return e===t||C(e)&&C(t)&&q.equalsEpsilon(e.x,t.x,r,n)&&q.equalsEpsilon(e.y,t.y,r,n)&&q.equalsEpsilon(e.z,t.z,r,n)&&q.equalsEpsilon(e.w,t.w,r,n)},Z.ZERO=Object.freeze(new Z(0,0,0,0)),Z.UNIT_X=Object.freeze(new Z(1,0,0,0)),Z.UNIT_Y=Object.freeze(new Z(0,1,0,0)),Z.UNIT_Z=Object.freeze(new Z(0,0,1,0)),Z.UNIT_W=Object.freeze(new Z(0,0,0,1)),Z.WHITE=Object.freeze(new Z(1,1,1,1)),Z.prototype.clone=function(e){return Z.clone(this,e)},Z.prototype.equals=function(e){return Z.equals(this,e)},Z.prototype.equalsEpsilon=function(e,t,r){return Z.equalsEpsilon(this,e,t,r)},Z.prototype.toString=function(e){if(C(e)&&16==e){var t=parseInt(255*this.x).toString(16),r=parseInt(255*this.y).toString(16),e=parseInt(255*this.z).toString(16);return"00".substring(0,2-t.length)+t+"00".substring(0,2-r.length)+r+"00".substring(0,2-e.length)+e}return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var ee=new Float32Array(1);function te(e,t,r,n,i,o,a,s,u,c,l,f,h,m,d,p){this[0]=M(e,0),this[1]=M(i,0),this[2]=M(u,0),this[3]=M(h,0),this[4]=M(t,0),this[5]=M(o,0),this[6]=M(c,0),this[7]=M(m,0),this[8]=M(r,0),this[9]=M(a,0),this[10]=M(l,0),this[11]=M(d,0),this[12]=M(n,0),this[13]=M(s,0),this[14]=M(f,0),this[15]=M(p,0)}Z.packFloat=function(e,t){if(C(t)||(t=new Z),ee[0]=e,0===(e=ee[0]))return Z.clone(Z.ZERO,t);var r,n=e<0?1:0;isFinite(e)?(e=Math.abs(e),r=Math.floor(q.logBase(e,10))+1,e/=Math.pow(10,r)):(e=.1,r=38);e*=256;return t.x=Math.floor(e),e=256*(e-t.x),t.y=Math.floor(e),e=256*(e-t.y),t.z=Math.floor(e),t.w=2*(r+38)+n,t},Z.unpackFloat=function(e){var t=e.w/2,r=Math.floor(t),n=-(n=2*(n=2*(t-r))-1);if(38<=(r-=38))return n<0?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY;t=n*e.x*(1/256);return t+=n*e.y*(1/65536),(t+=n*e.z*(1/16777216))*Math.pow(10,r)},te.packedLength=16,te.pack=function(e,t,r){return r=M(r,0),t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t[r++]=e[4],t[r++]=e[5],t[r++]=e[6],t[r++]=e[7],t[r++]=e[8],t[r++]=e[9],t[r++]=e[10],t[r++]=e[11],t[r++]=e[12],t[r++]=e[13],t[r++]=e[14],t[r]=e[15],t},te.unpack=function(e,t,r){return t=M(t,0),(r=!C(r)?new te:r)[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r[4]=e[t++],r[5]=e[t++],r[6]=e[t++],r[7]=e[t++],r[8]=e[t++],r[9]=e[t++],r[10]=e[t++],r[11]=e[t++],r[12]=e[t++],r[13]=e[t++],r[14]=e[t++],r[15]=e[t],r},te.clone=function(e,t){if(C(e))return C(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):new te(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},te.fromArray=te.unpack,te.fromColumnMajorArray=function(e,t){return te.clone(e,t)},te.fromRowMajorArray=function(e,t){return C(t)?(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t):new te(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},te.fromRotationTranslation=function(e,t,r){return t=M(t,G.ZERO),C(r)?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=0,r[4]=e[3],r[5]=e[4],r[6]=e[5],r[7]=0,r[8]=e[6],r[9]=e[7],r[10]=e[8],r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,r):new te(e[0],e[3],e[6],t.x,e[1],e[4],e[7],t.y,e[2],e[5],e[8],t.z,0,0,0,1)},te.fromTranslationQuaternionRotationScale=function(e,t,r,n){C(n)||(n=new te);var i=r.x,o=r.y,a=r.z,s=t.x*t.x,u=t.x*t.y,c=t.x*t.z,l=t.x*t.w,f=t.y*t.y,h=t.y*t.z,m=t.y*t.w,d=t.z*t.z,p=t.z*t.w,E=t.w*t.w,_=2*(u-p),r=2*(c+m),t=2*(u+p),u=f-s-d+E,p=2*(h-l),m=2*(c-m),h=2*(h+l),l=-s-f+d+E;return n[0]=(s-f-d+E)*i,n[1]=t*i,n[2]=m*i,n[3]=0,n[4]=_*o,n[5]=u*o,n[6]=h*o,n[7]=0,n[8]=r*a,n[9]=p*a,n[10]=l*a,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,n},te.fromTranslationRotationScale=function(e,t){return te.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t)},te.fromTranslation=function(e,t){return te.fromRotationTranslation(B.IDENTITY,e,t)},te.fromScale=function(e,t){return C(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e.y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e.z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new te(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},te.fromUniformScale=function(e,t){return C(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new te(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)};var re=new G,ne=new G,ie=new G;te.fromObserver=function(e,t){var r=e.position,n=e.direction,i=e.up;G.normalize(n,re),G.normalize(G.cross(re,i,ne),ne),G.normalize(G.cross(ne,re,ie),ie);var o=ne.x,a=ne.y,s=ne.z,u=re.x,c=re.y,l=re.z,f=ie.x,h=ie.y,m=ie.z,d=r.x,e=r.y,n=r.z,i=o*-d+a*-e+s*-n,r=f*-d+h*-e+m*-n,n=u*d+c*e+l*n;return C(t)?(t[0]=o,t[1]=f,t[2]=-u,t[3]=0,t[4]=a,t[5]=h,t[6]=-c,t[7]=0,t[8]=s,t[9]=m,t[10]=-l,t[11]=0,t[12]=i,t[13]=r,t[14]=n,t[15]=1,t):new te(o,a,s,i,f,h,m,r,-u,-c,-l,n,0,0,0,1)},te.computePerspectiveFieldOfView=function(e,t,r,n,i){var o=1/Math.tan(.5*e),e=(n+r)/(r-n),n=2*n*r/(r-n);return i[0]=o/t,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=e,i[11]=-1,i[12]=0,i[13]=0,i[14]=n,i[15]=0,i},te.computeOrthographicOffCenter=function(e,t,r,n,i,o,a){var s=1/(t-e),u=1/(n-r),c=1/(o-i),e=-(t+e)*s,r=-(n+r)*u,i=-(o+i)*c;return u*=2,c*=-2,a[0]=s*=2,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=u,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=c,a[11]=0,a[12]=e,a[13]=r,a[14]=i,a[15]=1,a},te.computePerspectiveOffCenter=function(e,t,r,n,i,o,a){var s=2*i/(n-r),u=(t+e)/(t-e),n=(n+r)/(n-r),r=-(o+i)/(o-i),o=-2*o*i/(o-i);return a[0]=2*i/(t-e),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=s,a[6]=0,a[7]=0,a[8]=u,a[9]=n,a[10]=r,a[11]=-1,a[12]=0,a[13]=0,a[14]=o,a[15]=0,a},te.computeInfinitePerspectiveOffCenter=function(e,t,r,n,i,o){var a=2*i/(n-r),s=(t+e)/(t-e),n=(n+r)/(n-r),r=-2*i;return o[0]=2*i/(t-e),o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a,o[6]=0,o[7]=0,o[8]=s,o[9]=n,o[10]=-1,o[11]=-1,o[12]=0,o[13]=0,o[14]=r,o[15]=0,o},te.computeViewportTransformation=function(e,t,r,n){C(n)||(n=new te),e=M(e,M.EMPTY_OBJECT);var i=M(e.x,0),o=M(e.y,0),a=M(e.width,0),s=M(e.height,0);t=M(t,0);var u=.5*a,e=.5*s,a=.5*((r=M(r,1))-t),s=e,r=a,i=i+u,e=o+e,a=t+a;return n[0]=u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=r,n[11]=0,n[12]=i,n[13]=e,n[14]=a,n[15]=1,n},te.computeView=function(e,t,r,n,i){return i[0]=n.x,i[1]=r.x,i[2]=-t.x,i[3]=0,i[4]=n.y,i[5]=r.y,i[6]=-t.y,i[7]=0,i[8]=n.z,i[9]=r.z,i[10]=-t.z,i[11]=0,i[12]=-G.dot(n,e),i[13]=-G.dot(r,e),i[14]=G.dot(t,e),i[15]=1,i};var oe=new G,ae=new G,se=new G;te.computeViewByLookAt=function(e,t,r,n){var i=oe,o=ae,a=se;return G.subtract(e,t,i),G.normalize(i,i),G.cross(r,i,a),G.normalize(a,a),G.cross(i,a,o),G.normalize(o,o),te.computeView(e,i,o,a,n)},te.computeViewByLookAtEx=function(e,t,r,n){var i=oe,o=ae,a=se;return G.subtract(t,e,i),G.normalize(i,i),G.cross(r,i,a),G.normalize(a,a),G.cross(i,a,o),G.normalize(o,o),te.computeView(e,i,o,a,n)},te.toArray=function(e,t){return C(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},te.getElementIndex=function(e,t){return 4*e+t},te.getColumn=function(e,t,r){var n=4*t,i=e[n],o=e[1+n],t=e[2+n],n=e[3+n];return r.x=i,r.y=o,r.z=t,r.w=n,r},te.setColumn=function(e,t,r,n){t*=4;return(n=te.clone(e,n))[t]=r.x,n[1+t]=r.y,n[2+t]=r.z,n[3+t]=r.w,n},te.setTranslation=function(e,t,r){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=e[15],r};var ue=new G;te.setScale=function(e,t,r){var n=te.getScale(e,ue),n=G.divideComponents(t,n,ue);return te.multiplyByScale(e,n,r)},te.getRow=function(e,t,r){var n=e[t],i=e[t+4],o=e[t+8],t=e[t+12];return r.x=n,r.y=i,r.z=o,r.w=t,r},te.setRow=function(e,t,r,n){return(n=te.clone(e,n))[t]=r.x,n[t+4]=r.y,n[t+8]=r.z,n[t+12]=r.w,n};var ce=new G;te.getScale=function(e,t){return t.x=G.magnitude(G.fromElements(e[0],e[1],e[2],ce)),t.y=G.magnitude(G.fromElements(e[4],e[5],e[6],ce)),t.z=G.magnitude(G.fromElements(e[8],e[9],e[10],ce)),t};var le=new G;te.getMaximumScale=function(e){return te.getScale(e,le),G.maximumComponent(le)},te.multiply=function(e,t,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],m=e[10],d=e[11],p=e[12],E=e[13],_=e[14],y=e[15],T=t[0],g=t[1],R=t[2],A=t[3],S=t[4],O=t[5],I=t[6],w=t[7],N=t[8],x=t[9],C=t[10],M=t[11],v=t[12],b=t[13],P=t[14],F=t[15],U=i*T+u*g+h*R+E*A,D=o*T+c*g+m*R+_*A,L=a*T+l*g+d*R+y*A,z=n*S+s*O+f*I+p*w,e=i*S+u*O+h*I+E*w,t=o*S+c*O+m*I+_*w,S=a*S+l*O+d*I+y*w,O=n*N+s*x+f*C+p*M,I=i*N+u*x+h*C+E*M,w=o*N+c*x+m*C+_*M,C=a*N+l*x+d*C+y*M,M=n*v+s*b+f*P+p*F,E=i*v+u*b+h*P+E*F,_=o*v+c*b+m*P+_*F,F=a*v+l*b+d*P+y*F;return r[0]=n*T+s*g+f*R+p*A,r[1]=U,r[2]=D,r[3]=L,r[4]=z,r[5]=e,r[6]=t,r[7]=S,r[8]=O,r[9]=I,r[10]=w,r[11]=C,r[12]=M,r[13]=E,r[14]=_,r[15]=F,r},te.add=function(e,t,r){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r[9]=e[9]+t[9],r[10]=e[10]+t[10],r[11]=e[11]+t[11],r[12]=e[12]+t[12],r[13]=e[13]+t[13],r[14]=e[14]+t[14],r[15]=e[15]+t[15],r},te.subtract=function(e,t,r){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r[9]=e[9]-t[9],r[10]=e[10]-t[10],r[11]=e[11]-t[11],r[12]=e[12]-t[12],r[13]=e[13]-t[13],r[14]=e[14]-t[14],r[15]=e[15]-t[15],r},te.multiplyTransformation=function(e,t,r){var n=e[0],i=e[1],o=e[2],a=e[4],s=e[5],u=e[6],c=e[8],l=e[9],f=e[10],h=e[12],m=e[13],d=e[14],p=t[0],E=t[1],_=t[2],y=t[4],T=t[5],g=t[6],R=t[8],A=t[9],S=t[10],O=t[12],I=t[13],w=t[14],N=i*p+s*E+l*_,x=o*p+u*E+f*_,e=n*y+a*T+c*g,t=i*y+s*T+l*g,y=o*y+u*T+f*g,T=n*R+a*A+c*S,g=i*R+s*A+l*S,S=o*R+u*A+f*S,h=n*O+a*I+c*w+h,m=i*O+s*I+l*w+m,d=o*O+u*I+f*w+d;return r[0]=n*p+a*E+c*_,r[1]=N,r[2]=x,r[3]=0,r[4]=e,r[5]=t,r[6]=y,r[7]=0,r[8]=T,r[9]=g,r[10]=S,r[11]=0,r[12]=h,r[13]=m,r[14]=d,r[15]=1,r},te.multiplyByMatrix3=function(e,t,r){var n=e[0],i=e[1],o=e[2],a=e[4],s=e[5],u=e[6],c=e[8],l=e[9],f=e[10],h=t[0],m=t[1],d=t[2],p=t[3],E=t[4],_=t[5],y=t[6],T=t[7],g=t[8],R=i*h+s*m+l*d,A=o*h+u*m+f*d,S=n*p+a*E+c*_,t=i*p+s*E+l*_,E=o*p+u*E+f*_,_=n*y+a*T+c*g,l=i*y+s*T+l*g,g=o*y+u*T+f*g;return r[0]=n*h+a*m+c*d,r[1]=R,r[2]=A,r[3]=0,r[4]=S,r[5]=t,r[6]=E,r[7]=0,r[8]=_,r[9]=l,r[10]=g,r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},te.multiplyByTranslation=function(e,t,r){var n=t.x,i=t.y,o=t.z,a=n*e[0]+i*e[4]+o*e[8]+e[12],t=n*e[1]+i*e[5]+o*e[9]+e[13],o=n*e[2]+i*e[6]+o*e[10]+e[14];return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=a,r[13]=t,r[14]=o,r[15]=e[15],r};var fe=new G;te.multiplyByUniformScale=function(e,t,r){return fe.x=t,fe.y=t,fe.z=t,te.multiplyByScale(e,fe,r)},te.multiplyByScale=function(e,t,r){var n=t.x,i=t.y,t=t.z;return 1===n&&1===i&&1===t?te.clone(e,r):(r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=0,r[4]=i*e[4],r[5]=i*e[5],r[6]=i*e[6],r[7]=0,r[8]=t*e[8],r[9]=t*e[9],r[10]=t*e[10],r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=1,r)},te.multiplyByVector=function(e,t,r){var n=t.x,i=t.y,o=t.z,a=C(t.w)?t.w:1,s=e[0]*n+e[4]*i+e[8]*o+e[12]*a,u=e[1]*n+e[5]*i+e[9]*o+e[13]*a,t=e[2]*n+e[6]*i+e[10]*o+e[14]*a,a=e[3]*n+e[7]*i+e[11]*o+e[15]*a;return r.x=s,r.y=u,r.z=t,C(r.w)&&(r.w=a),r},te.multiplyByPointAsVector=function(e,t,r){var n=t.x,i=t.y,o=t.z,a=e[0]*n+e[4]*i+e[8]*o,t=e[1]*n+e[5]*i+e[9]*o,o=e[2]*n+e[6]*i+e[10]*o;return r.x=a,r.y=t,r.z=o,r},te.multiplyByPoint=function(e,t,r){var n=t.x,i=t.y,o=t.z,a=e[0]*n+e[4]*i+e[8]*o+e[12],t=e[1]*n+e[5]*i+e[9]*o+e[13],e=e[2]*n+e[6]*i+e[10]*o+e[14];return r.x=a,r.y=t,r.z=e,r},te.multiplyByScalar=function(e,t,r){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12]*t,r[13]=e[13]*t,r[14]=e[14]*t,r[15]=e[15]*t,r},te.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},te.transpose=function(e,t){var r=e[1],n=e[2],i=e[3],o=e[6],a=e[7],s=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[10]=e[10],t[11]=e[14],t[12]=i,t[13]=a,t[14]=s,t[15]=e[15],t},te.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t[9]=Math.abs(e[9]),t[10]=Math.abs(e[10]),t[11]=Math.abs(e[11]),t[12]=Math.abs(e[12]),t[13]=Math.abs(e[13]),t[14]=Math.abs(e[14]),t[15]=Math.abs(e[15]),t},te.equals=function(e,t){return e===t||C(e)&&C(t)&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[3]===t[3]&&e[7]===t[7]&&e[11]===t[11]&&e[15]===t[15]},te.equalsEpsilon=function(e,t,r){return r=M(r,0),e===t||C(e)&&C(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r&&Math.abs(e[9]-t[9])<=r&&Math.abs(e[10]-t[10])<=r&&Math.abs(e[11]-t[11])<=r&&Math.abs(e[12]-t[12])<=r&&Math.abs(e[13]-t[13])<=r&&Math.abs(e[14]-t[14])<=r&&Math.abs(e[15]-t[15])<=r},te.getTranslation=function(e,t){return t.x=e[12],t.y=e[13],t.z=e[14],t},te.getMatrix3=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t};var he=new B,me=new B,de=new Z,pe=new Z(0,0,0,1);function Ee(e,t,r,n,i,o){this.west=M(e,Math.PI),this.south=M(t,Math.PI/2),this.east=M(r,-Math.PI),this.north=M(n,-Math.PI/2),this.minHeight=M(i,0),this.maxHeight=M(o,0)}te.inverse=function(e,t){var r=e[0],n=e[4],i=e[8],o=e[12],a=e[1],s=e[5],u=e[9],c=e[13],l=e[2],f=e[6],h=e[10],m=e[14],d=e[3],p=e[7],E=e[11],_=e[15],y=h*_,T=m*E,g=f*_,R=m*p,A=f*E,S=h*p,O=l*_,I=m*d,w=l*E,N=h*d,x=l*p,C=f*d,M=y*s+R*u+A*c-(T*s+g*u+S*c),v=T*a+O*u+N*c-(y*a+I*u+w*c),b=g*a+I*s+x*c-(R*a+O*s+C*c),P=S*a+w*s+C*u-(A*a+N*s+x*u),F=T*n+g*i+S*o-(y*n+R*i+A*o),U=y*r+I*i+w*o-(T*r+O*i+N*o),D=R*r+O*n+C*o-(g*r+I*n+x*o),L=A*r+N*n+x*i-(S*r+w*n+C*i),z=(y=i*c)*p+(R=o*s)*E+(A=n*u)*_-((T=o*u)*p+(g=n*c)*E+(S=i*s)*_),u=T*d+(O=r*c)*E+(N=i*a)*_-(y*d+(I=o*a)*E+(w=r*u)*_),_=g*d+I*p+(x=r*s)*_-(R*d+O*p+(C=n*a)*_),p=S*d+w*p+C*E-(A*d+N*p+x*E),E=g*h+S*m+T*f-(A*m+y*f+R*h),T=w*m+y*l+I*h-(O*h+N*m+T*l),I=O*f+C*m+R*l-(x*m+g*l+I*f),l=x*h+A*l+N*f-(w*f+C*h+S*l),o=r*M+n*v+i*b+o*P;return Math.abs(o)<q.EPSILON21&&B.equalsEpsilon(te.getMatrix3(e,he),me,q.EPSILON7)&&Z.equals(te.getRow(e,3,de),pe)?(t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=1):(t[0]=M*(o=1/o),t[1]=v*o,t[2]=b*o,t[3]=P*o,t[4]=F*o,t[5]=U*o,t[6]=D*o,t[7]=L*o,t[8]=z*o,t[9]=u*o,t[10]=_*o,t[11]=p*o,t[12]=E*o,t[13]=T*o,t[14]=I*o,t[15]=l*o),t},te.inverseTransformation=function(e,t){var r=e[0],n=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],c=e[9],l=e[10],f=e[12],h=e[13],m=e[14],d=-r*f-n*h-i*m,e=-o*f-a*h-s*m,m=-u*f-c*h-l*m;return t[0]=r,t[1]=o,t[2]=u,t[3]=0,t[4]=n,t[5]=a,t[6]=c,t[7]=0,t[8]=i,t[9]=s,t[10]=l,t[11]=0,t[12]=d,t[13]=e,t[14]=m,t[15]=1,t},te.IDENTITY=Object.freeze(new te(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),te.ZERO=Object.freeze(new te(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),te.TRANSYZ=Object.freeze(new te(1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1)),te.COLUMN0ROW0=0,te.COLUMN0ROW1=1,te.COLUMN0ROW2=2,te.COLUMN0ROW3=3,te.COLUMN1ROW0=4,te.COLUMN1ROW1=5,te.COLUMN1ROW2=6,te.COLUMN1ROW3=7,te.COLUMN2ROW0=8,te.COLUMN2ROW1=9,te.COLUMN2ROW2=10,te.COLUMN2ROW3=11,te.COLUMN3ROW0=12,te.COLUMN3ROW1=13,te.COLUMN3ROW2=14,te.COLUMN3ROW3=15,Object.defineProperties(te.prototype,{length:{get:function(){return te.packedLength}}}),te.prototype.clone=function(e){return te.clone(this,e)},te.prototype.equals=function(e){return te.equals(this,e)},te.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]&&e[9]===t[r+9]&&e[10]===t[r+10]&&e[11]===t[r+11]&&e[12]===t[r+12]&&e[13]===t[r+13]&&e[14]===t[r+14]&&e[15]===t[r+15]},te.prototype.equalsEpsilon=function(e,t){return te.equalsEpsilon(this,e,t)},te.prototype.toString=function(){return"("+this[0]+", "+this[4]+", "+this[8]+", "+this[12]+")\n("+this[1]+", "+this[5]+", "+this[9]+", "+this[13]+")\n("+this[2]+", "+this[6]+", "+this[10]+", "+this[14]+")\n("+this[3]+", "+this[7]+", "+this[11]+", "+this[15]+")"},te.from_tnbp=function(e,t,r,n,i){return C(i)?(i[0]=e.x,i[4]=t.x,i[8]=r.x,i[12]=n.x,i[1]=e.y,i[5]=t.y,i[9]=r.y,i[13]=n.y,i[2]=e.z,i[6]=t.z,i[10]=r.z,i[14]=n.z,i[3]=0,i[7]=0,i[11]=0,i[15]=1):i=new te(e.x,t.x,r.x,n.x,e.y,t.y,r.y,n.y,e.z,t.z,r.z,n.z,0,0,0,1),i},te.rotate_axis_rh=function(e,t,r){var n=te.clone(te.IDENTITY),i=G.distance(t,e),o=Math.cos(r),a=1-o,s=Math.sin(r),u=(t.x-e.x)/i,r=(t.y-e.y)/i,i=(t.z-e.z)/i;n[0]=u*u*a+o,n[1]=u*r*a-i*s,n[2]=u*i*a+r*s,n[4]=r*u*a+i*s,n[5]=r*r*a+o,n[6]=r*i*a-u*s,n[8]=i*u*a-r*s,n[9]=i*r*a+u*s,n[10]=i*i*a+o;o=te.translation(-e.x,-e.y,-e.z),e=te.translation(e.x,e.y,e.z);return te.multiply(e,te.multiply(n,o,new te),new te)},te.rotate_axis_lh=function(e,t,r){var n=te.clone(te.IDENTITY),i=G.distance(t,e),o=Math.cos(r),a=1-o,s=Math.sin(r),u=(t.x-e.x)/i,r=(t.y-e.y)/i,i=(t.z-e.z)/i;n[0]=u*u*a+o,n[1]=u*r*a+i*s,n[2]=u*i*a-r*s,n[4]=r*u*a-i*s,n[5]=r*r*a+o,n[6]=r*i*a+u*s,n[8]=i*u*a+r*s,n[9]=i*r*a-u*s,n[10]=i*i*a+o;o=te.translation(-e.x,-e.y,-e.z),e=te.translation(e.x,e.y,e.z);return te.multiply(o,te.multiply(n,e,new te),new te)},te.translation=function(e,t,r,n){n=te.clone(te.IDENTITY,n);return n[12]=e,n[13]=t,n[14]=r,n},te.scaling=function(e,t,r,n){n=te.clone(te.IDENTITY,n);return n[0]=e,n[5]=t,n[10]=r,n},te.rotate_y=function(e){var t=te.clone(te.IDENTITY);return t[0]=t[10]=Math.cos(e),t[2]=t[8]=Math.sin(e),t[2]=-t[2],t},te.perspective=function(e,t,r,n,i){var o=1/Math.tan(.5*e),e=n/(n-r),n=n*r/(r-n);return i[0]=o/t,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=e,i[11]=-1,i[12]=0,i[13]=0,i[14]=n,i[15]=0,i},te.prototype.makeRotationAxis=function(e,t,r){C(r)||(r=new te);var n=Math.cos(t),i=Math.sin(t),o=1-n,a=e.x,s=e.y,u=e.z,t=o*a,e=o*s;return r[0]=t*a+n,r[1]=t*s+i*u,r[2]=t*u-i*s,r[3]=0,r[4]=t*s-i*u,r[5]=e*s+n,r[6]=e*u+i*a,r[7]=0,r[8]=t*u+i*s,r[9]=e*u-i*a,r[10]=o*u*u+n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},te.transformNormal=function(e,t,r){C(r)||(r=new G);var n=new G;n.x=t[0]*e.x+t[4]*e.y+t[8]*e.z+t[12],n.y=t[1]*e.x+t[5]*e.y+t[9]*e.z+t[13],n.z=t[2]*e.x+t[6]*e.y+t[10]*e.z+t[14];t=t[3]*e.x+t[7]*e.y+t[11]*e.z+t[15];return n.x*=t=1/t,n.y*=t,n.z*=t,G.clone(n,r),r},te.rotate_normal=function(e,t,r){C(r)||(r=new G);var n=new G;return n.x=t[0]*e.x+t[4]*e.y+t[8]*e.z,n.y=t[1]*e.x+t[5]*e.y+t[9]*e.z,n.z=t[2]*e.x+t[6]*e.y+t[10]*e.z,G.clone(n,r),n},te.fromQuaternion=function(e,t){void 0===t&&(t=new te),t=te.clone(te.IDENTITY,t);var r=e.x*e.x,n=e.x*e.y,i=e.x*e.z,o=e.x*e.w,a=e.y*e.y,s=e.y*e.z,u=e.y*e.w,c=e.z*e.z,e=e.z*e.w;return t[0]=1-2*(a+c),t[1]=2*(n+e),t[2]=2*(i-u),t[4]=2*(n-e),t[5]=1-2*(r+c),t[6]=2*(s+o),t[8]=2*(i+u),t[9]=2*(s-o),t[10]=1-2*(r+a),t[3]=t[7]=t[11]=t[12]=t[13]=t[14]=0,t[15]=1,t},Object.defineProperties(Ee.prototype,{width:{get:function(){return Ee.computeWidth(this)}},height:{get:function(){return Ee.computeHeight(this)}}}),Ee.packedLength=4,Ee.pack=function(e,t,r){return r=M(r,0),t[r++]=e.west,t[r++]=e.south,t[r++]=e.east,t[r]=e.north,t},Ee.unpack=function(e,t,r){return t=M(t,0),(r=!C(r)?new Ee:r).west=e[t++],r.south=e[t++],r.east=e[t++],r.north=e[t],r},Ee.computeWidth=function(e){var t=e.east,e=e.west;return t<e&&(t+=q.TWO_PI),t-e},Ee.computeHeight=function(e){return e.north-e.south},Ee.fromDegrees=function(e,t,r,n,i){return e=q.toRadians(M(e,0)),t=q.toRadians(M(t,0)),r=q.toRadians(M(r,0)),n=q.toRadians(M(n,0)),C(i)?(i.west=e,i.south=t,i.east=r,i.north=n,i):new Ee(e,t,r,n)},Ee.fromRadians=function(e,t,r,n,i){return C(i)?(i.west=M(e,0),i.south=M(t,0),i.east=M(r,0),i.north=M(n,0),i):new Ee(e,t,r,n)},Ee.fromCartographicArray=function(e,t){for(var r=Number.MAX_VALUE,n=-Number.MAX_VALUE,i=Number.MAX_VALUE,o=-Number.MAX_VALUE,a=Number.MAX_VALUE,s=-Number.MAX_VALUE,u=0,c=e.length;u<c;u++)var l=e[u],r=Math.min(r,l.longitude),n=Math.max(n,l.longitude),a=Math.min(a,l.latitude),s=Math.max(s,l.latitude),l=0<=l.longitude?l.longitude:l.longitude+q.TWO_PI,i=Math.min(i,l),o=Math.max(o,l);return o-i<n-r&&(r=i,(n=o)>q.PI&&(n-=q.TWO_PI),r>q.PI&&(r-=q.TWO_PI)),C(t)?(t.west=r,t.south=a,t.east=n,t.north=s,t):new Ee(r,a,n,s)},Ee.fromCartesianArray=function(e,t,r){t=M(t,j.WGS84);for(var n=Number.MAX_VALUE,i=-Number.MAX_VALUE,o=Number.MAX_VALUE,a=-Number.MAX_VALUE,s=Number.MAX_VALUE,u=-Number.MAX_VALUE,c=Number.MAX_VALUE,l=-Number.MAX_VALUE,f=0,h=e.length;f<h;f++)var m=t.cartesianToCartographic(e[f]),n=Math.min(n,m.longitude),i=Math.max(i,m.longitude),s=Math.min(s,m.latitude),u=Math.max(u,m.latitude),c=Math.min(c,m.height),l=Math.max(l,m.height),m=0<=m.longitude?m.longitude:m.longitude+q.TWO_PI,o=Math.min(o,m),a=Math.max(a,m);return a-o<i-n&&(n=o,(i=a)>q.PI&&(i-=q.TWO_PI),n>q.PI&&(n-=q.TWO_PI)),C(r)?(r.west=n,r.south=s,r.east=i,r.north=u,r.minHeight=c,r.maxHeight=l,r):new Ee(n,s,i,u,c,l)},Ee.clone=function(e,t){if(C(e))return C(t)?(t.west=e.west,t.south=e.south,t.east=e.east,t.north=e.north,t.minHeight=e.minHeight,t.maxHeight=e.maxHeight,t):new Ee(e.west,e.south,e.east,e.north,e.minHeight,e.maxHeight)},Ee.equalsEpsilon=function(e,t,r){return r=M(r,0),e===t||C(e)&&C(t)&&Math.abs(e.west-t.west)<=r&&Math.abs(e.south-t.south)<=r&&Math.abs(e.east-t.east)<=r&&Math.abs(e.north-t.north)<=r&&Math.abs(e.minHeight-t.minHeight)<=r&&Math.abs(e.maxHeight-t.maxHeight)<=r},Ee.prototype.clone=function(e){return Ee.clone(this,e)},Ee.prototype.equals=function(e){return Ee.equals(this,e)},Ee.prototype.intersect=function(e){return Ee.intersect(this,e)},Ee.equals=function(e,t){return e===t||C(e)&&C(t)&&e.west===t.west&&e.south===t.south&&e.east===t.east&&e.north===t.north},Ee.prototype.equalsEpsilon=function(e,t){return Ee.equalsEpsilon(this,e,t)},Ee.validate=function(e){},Ee.southwest=function(e,t){return C(t)?(t.longitude=e.west,t.latitude=e.south,t.height=0,t):new E(e.west,e.south)},Ee.northwest=function(e,t){return C(t)?(t.longitude=e.west,t.latitude=e.north,t.height=0,t):new E(e.west,e.north)},Ee.northeast=function(e,t){return C(t)?(t.longitude=e.east,t.latitude=e.north,t.height=0,t):new E(e.east,e.north)},Ee.southeast=function(e,t){return C(t)?(t.longitude=e.east,t.latitude=e.south,t.height=0,t):new E(e.east,e.south)},Ee.center=function(e,t){var r=e.east,n=e.west;r<n&&(r+=q.TWO_PI);r=q.negativePiToPi(.5*(n+r)),e=.5*(e.south+e.north);return C(t)?(t.longitude=r,t.latitude=e,t.height=0,t):new E(r,e)},Ee.intersection=function(e,t,r){var n=e.east,i=e.west,o=t.east,a=t.west;n<i&&0<o?n+=q.TWO_PI:o<a&&0<n&&(o+=q.TWO_PI),n<i&&a<0?a+=q.TWO_PI:o<a&&i<0&&(i+=q.TWO_PI);a=q.negativePiToPi(Math.max(i,a)),n=q.negativePiToPi(Math.min(n,o));if(!((e.west<e.east||t.west<t.east)&&n<=a)){o=Math.max(e.south,t.south),t=Math.min(e.north,t.north);if(!(t<=o))return C(r)?(r.west=a,r.south=o,r.east=n,r.north=t,r):new Ee(a,o,n,t)}},Ee.simpleIntersection=function(e,t,r){var n=Math.max(e.west,t.west),i=Math.max(e.south,t.south),o=Math.min(e.east,t.east),t=Math.min(e.north,t.north);if(!(t<=i||o<=n))return C(r)?(r.west=n,r.south=i,r.east=o,r.north=t,r):new Ee(n,i,o,t)},Ee.union=function(e,t,r){C(r)||(r=new Ee);var n=e.east,i=e.west,o=t.east,a=t.west;n<i&&0<o?n+=q.TWO_PI:o<a&&0<n&&(o+=q.TWO_PI),n<i&&a<0?a+=q.TWO_PI:o<a&&i<0&&(i+=q.TWO_PI);a=q.convertLongitudeRange(Math.min(i,a)),o=q.convertLongitudeRange(Math.max(n,o));return r.west=a,r.south=Math.min(e.south,t.south),r.east=o,r.north=Math.max(e.north,t.north),r},Ee.expand=function(e,t,r){return(r=!C(r)?new Ee:r).west=Math.min(e.west,t.longitude),r.south=Math.min(e.south,t.latitude),r.east=Math.max(e.east,t.longitude),r.north=Math.max(e.north,t.latitude),r},Ee.contains=function(e,t){var r=t.longitude,n=t.latitude,i=e.west,t=e.east;return t<i&&(t+=q.TWO_PI,r<0&&(r+=q.TWO_PI)),(i<r||q.equalsEpsilon(r,i,q.EPSILON14))&&(r<t||q.equalsEpsilon(r,t,q.EPSILON14))&&n>=e.south&&n<=e.north};var _e=new E;function ye(e,t){this.center=G.clone(M(e,G.ZERO)),this.radius=M(t,0)}Ee.subsample=function(e,t,r,n){t=M(t,j.WGS84),r=M(r,0),C(n)||(n=[]);var i=0,o=e.north,a=e.south,s=e.east,u=e.west,c=_e;c.height=r,c.longitude=u,c.latitude=o,n[i]=t.cartographicToCartesian(c,n[i]),i++,c.longitude=s,n[i]=t.cartographicToCartesian(c,n[i]),i++,c.latitude=a,n[i]=t.cartographicToCartesian(c,n[i]),i++,c.longitude=u,n[i]=t.cartographicToCartesian(c,n[i]),i++,c.latitude=o<0?o:0<a?a:0;for(var l=1;l<8;++l)c.longitude=-Math.PI+l*q.PI_OVER_TWO,Ee.contains(e,c)&&(n[i]=t.cartographicToCartesian(c,n[i]),i++);return 0===c.latitude&&(c.longitude=u,n[i]=t.cartographicToCartesian(c,n[i]),i++,c.longitude=s,n[i]=t.cartographicToCartesian(c,n[i]),i++),n.length=i,n},Ee.intersect=function(e,t){return e.north>=t.south&&e.south<=t.north&&e.east>=t.west&&e.west<=t.east},Ee.intersect_lon_lat_region=function(e,t){for(var r=t.get_count(),n=0;n<r;n++)if(Ee.check_rect_line(e,t.getItem(n),t.getItem((n+1)%r)))return!0;return!!t.containRect(e)},Ee.check_rect_line_vertical=function(e,t,r,n,i){if(r<e.longitude&&r<t.longitude)return!1;if(r>e.longitude&&r>t.longitude)return!1;if(e.longitude==t.longitude)return r==e.longitude&&(!(e.latitude<n&&t.latitude<n)&&!(e.latitude>i&&t.latitude>i));e=(t.latitude-e.latitude)*(r-e.longitude)/(t.longitude-e.longitude)+e.latitude;return n<=e&&e<=i},Ee.check_rect_line_horizontal=function(e,t,r,n,i){if(r<e.latitude&&r<t.latitude)return!1;if(r>e.latitude&&r>t.latitude)return!1;if(e.latitude==t.latitude)return r==e.latitude&&(!(e.longitude<n&&t.longitude<n)&&!(e.longitude>i&&t.longitude>i));e=(t.longitude-e.longitude)*(r-e.latitude)/(t.latitude-e.latitude)+e.longitude;return n<=e&&e<=i},Ee.check_rect_line=function(e,t,r){var n=!1;return Ee.containPoint(e,t)||Ee.containPoint(e,r)?n=!0:(n|=Ee.check_rect_line_horizontal(t,r,e.north,e.west,e.east),n|=Ee.check_rect_line_horizontal(t,r,e.south,e.west,e.east),n|=Ee.check_rect_line_vertical(t,r,e.west,e.south,e.north),n|=Ee.check_rect_line_vertical(t,r,e.east,e.south,e.north)),n},Ee.intersectAabb=function(e,t){for(var r=new Ee,n=t.get_corners(),i=new E,o=0;o<8;o++){var a=E.fromCartesian(n[o],void 0,i);Ee.combine(r,a)}return Ee.intersect(e,r)},Ee.fromGeoAabb=function(e){for(var t=new Ee,r=e.get_corners(),n=new E,i=0;i<8;i++){var o=E.fromCartesian(r[i],void 0,n);Ee.combine(t,o)}return t},Ee.containsRect=function(e,t){var r=q.EPSILON6;return t.east<=e.east+r&&t.west>=e.west-r&&t.north<=e.north+r&&t.south>=e.south-r},Ee.combine=function(e,t){e.west>t.longitude&&(e.west=t.longitude),e.east<t.longitude&&(e.east=t.longitude),e.north<t.latitude&&(e.north=t.latitude),e.south>t.latitude&&(e.south=t.latitude),e.maxHeight<t.height&&(e.maxHeight=t.height),e.minHeight>t.height&&(e.minHeight=t.height)},Ee.fromAabb=function(e,t){var r=t.minimum,n=t.maximum,i=n.z/j.WGS84.maximumRadius*1e3,t=r.z/j.WGS84.maximumRadius*1e3,n=n.x/j.WGS84.maximumRadius*1e3,r=r.x/j.WGS84.maximumRadius*1e3;return new Ee(e.longitude+r,e.latitude+t,e.longitude+n,e.latitude+i)},Ee.containPoint=function(e,t){return t.longitude<=e.east&&t.longitude>=e.west&&t.latitude<=e.north&&t.latitude>=e.south},Ee.MAX_VALUE=Object.freeze(new Ee(-Math.PI,-q.PI_OVER_TWO,Math.PI,q.PI_OVER_TWO));var Te=new G,ge=new G,Re=new G,Ae=new G,Se=new G,Oe=new G,Ie=new G,we=new G,Ne=new G,xe=new G,Ce=new G,Me=new G,ve=4/3*q.PI;ye.fromPoints=function(e,t){if(C(t)||(t=new ye),!C(e)||0===e.length)return t.center=G.clone(G.ZERO,t.center),t.radius=0,t;for(var r=G.clone(e[0],Ie),n=G.clone(r,Te),i=G.clone(r,ge),o=G.clone(r,Re),a=G.clone(r,Ae),s=G.clone(r,Se),u=G.clone(r,Oe),c=e.length,l=1;l<c;l++){G.clone(e[l],r);var f=r.x,h=r.y,m=r.z;f<n.x&&G.clone(r,n),f>a.x&&G.clone(r,a),h<i.y&&G.clone(r,i),h>s.y&&G.clone(r,s),m<o.z&&G.clone(r,o),m>u.z&&G.clone(r,u)}var d=G.magnitudeSquared(G.subtract(a,n,we)),p=G.magnitudeSquared(G.subtract(s,i,we)),E=G.magnitudeSquared(G.subtract(u,o,we)),_=n,y=a,T=d;d<p&&(T=p,_=i,y=s),T<E&&(T=E,_=o,y=u);var g=Ne;g.x=.5*(_.x+y.x),g.y=.5*(_.y+y.y),g.z=.5*(_.z+y.z);var R=G.magnitudeSquared(G.subtract(y,g,we)),A=Math.sqrt(R),_=xe;_.x=n.x,_.y=i.y,_.z=o.z;y=Ce;y.x=a.x,y.y=s.y,y.z=u.z;var S=G.midpoint(_,y,Me),O=0;for(l=0;l<c;l++){G.clone(e[l],r);var I=G.magnitude(G.subtract(r,S,we));O<I&&(O=I);var w=G.magnitudeSquared(G.subtract(r,g,we));R<w&&(R=(A=.5*(A+(I=Math.sqrt(w))))*A,g.x=(A*g.x+(w=I-A)*r.x)/I,g.y=(A*g.y+w*r.y)/I,g.z=(A*g.z+w*r.z)/I)}return A<O?(G.clone(g,t.center),t.radius=A):(G.clone(S,t.center),t.radius=O),t};var be=new e,Pe=new G,Fe=new G,Ue=new E,De=new E;ye.fromRectangle2D=function(e,t,r){return ye.fromRectangleWithHeights2D(e,t,0,0,r)},ye.fromRectangleWithHeights2D=function(e,t,r,n,i){if(C(i)||(i=new ye),!C(e))return i.center=G.clone(G.ZERO,i.center),i.radius=0,i;t=M(t,be),Ee.southwest(e,Ue),Ue.height=r,Ee.northeast(e,De),De.height=n;var o=t.project(Ue,Pe),r=t.project(De,Fe),e=r.x-o.x,n=r.y-o.y,t=r.z-o.z;i.radius=.5*Math.sqrt(e*e+n*n+t*t);r=i.center;return r.x=o.x+.5*e,r.y=o.y+.5*n,r.z=o.z+.5*t,i};var Le=[];ye.fromRectangle3D=function(e,t,r,n){if(t=M(t,j.WGS84),r=M(r,0),C(n)||(n=new ye),!C(e))return n.center=G.clone(G.ZERO,n.center),n.radius=0,n;r=Ee.subsample(e,t,r,Le);return ye.fromPoints(r,n)},ye.fromVertices=function(e,t,r,n){if(C(n)||(n=new ye),!C(e)||0===e.length)return n.center=G.clone(G.ZERO,n.center),n.radius=0,n;t=M(t,G.ZERO),r=M(r,3);var i=Ie;i.x=e[0]+t.x,i.y=e[1]+t.y,i.z=e[2]+t.z;for(var o=G.clone(i,Te),a=G.clone(i,ge),s=G.clone(i,Re),u=G.clone(i,Ae),c=G.clone(i,Se),l=G.clone(i,Oe),f=e.length,h=0;h<f;h+=r){var m=e[h]+t.x,d=e[h+1]+t.y,p=e[h+2]+t.z;i.x=m,i.y=d,i.z=p,m<o.x&&G.clone(i,o),m>u.x&&G.clone(i,u),d<a.y&&G.clone(i,a),d>c.y&&G.clone(i,c),p<s.z&&G.clone(i,s),p>l.z&&G.clone(i,l)}var E=G.magnitudeSquared(G.subtract(u,o,we)),_=G.magnitudeSquared(G.subtract(c,a,we)),y=G.magnitudeSquared(G.subtract(l,s,we)),T=o,g=u,R=E;E<_&&(R=_,T=a,g=c),R<y&&(R=y,T=s,g=l);var A=Ne;A.x=.5*(T.x+g.x),A.y=.5*(T.y+g.y),A.z=.5*(T.z+g.z);var S=G.magnitudeSquared(G.subtract(g,A,we)),O=Math.sqrt(S),T=xe;T.x=o.x,T.y=a.y,T.z=s.z;g=Ce;g.x=u.x,g.y=c.y,g.z=l.z;var I=G.midpoint(T,g,Me),w=0;for(h=0;h<f;h+=r){i.x=e[h]+t.x,i.y=e[h+1]+t.y,i.z=e[h+2]+t.z;var N=G.magnitude(G.subtract(i,I,we));w<N&&(w=N);var x=G.magnitudeSquared(G.subtract(i,A,we));S<x&&(S=(O=.5*(O+(N=Math.sqrt(x))))*O,A.x=(O*A.x+(x=N-O)*i.x)/N,A.y=(O*A.y+x*i.y)/N,A.z=(O*A.z+x*i.z)/N)}return O<w?(G.clone(A,n.center),n.radius=O):(G.clone(I,n.center),n.radius=w),n},ye.fromEncodedCartesianVertices=function(e,t,r){if(C(r)||(r=new ye),!C(e)||!C(t)||e.length!==t.length||0===e.length)return r.center=G.clone(G.ZERO,r.center),r.radius=0,r;var n=Ie;n.x=e[0]+t[0],n.y=e[1]+t[1],n.z=e[2]+t[2];for(var i=G.clone(n,Te),o=G.clone(n,ge),a=G.clone(n,Re),s=G.clone(n,Ae),u=G.clone(n,Se),c=G.clone(n,Oe),l=e.length,f=0;f<l;f+=3){var h=e[f]+t[f],m=e[f+1]+t[f+1],d=e[f+2]+t[f+2];n.x=h,n.y=m,n.z=d,h<i.x&&G.clone(n,i),h>s.x&&G.clone(n,s),m<o.y&&G.clone(n,o),m>u.y&&G.clone(n,u),d<a.z&&G.clone(n,a),d>c.z&&G.clone(n,c)}var p=G.magnitudeSquared(G.subtract(s,i,we)),E=G.magnitudeSquared(G.subtract(u,o,we)),_=G.magnitudeSquared(G.subtract(c,a,we)),y=i,T=s,g=p;p<E&&(g=E,y=o,T=u),g<_&&(g=_,y=a,T=c);var R=Ne;R.x=.5*(y.x+T.x),R.y=.5*(y.y+T.y),R.z=.5*(y.z+T.z);var A=G.magnitudeSquared(G.subtract(T,R,we)),S=Math.sqrt(A),y=xe;y.x=i.x,y.y=o.y,y.z=a.z;T=Ce;T.x=s.x,T.y=u.y,T.z=c.z;var O=G.midpoint(y,T,Me),I=0;for(f=0;f<l;f+=3){n.x=e[f]+t[f],n.y=e[f+1]+t[f+1],n.z=e[f+2]+t[f+2];var w=G.magnitude(G.subtract(n,O,we));I<w&&(I=w);var N=G.magnitudeSquared(G.subtract(n,R,we));A<N&&(A=(S=.5*(S+(w=Math.sqrt(N))))*S,R.x=(S*R.x+(N=w-S)*n.x)/w,R.y=(S*R.y+N*n.y)/w,R.z=(S*R.z+N*n.z)/w)}return S<I?(G.clone(R,r.center),r.radius=S):(G.clone(O,r.center),r.radius=I),r},ye.fromCornerPoints=function(e,t,r){C(r)||(r=new ye);e=G.midpoint(e,t,r.center);return r.radius=G.distance(e,t),r},ye.fromEllipsoid=function(e,t){return C(t)||(t=new ye),G.clone(G.ZERO,t.center),t.radius=e.maximumRadius,t};var ze=new G;ye.fromBoundingSpheres=function(e,t){if(C(t)||(t=new ye),!C(e)||0===e.length)return t.center=G.clone(G.ZERO,t.center),t.radius=0,t;var r=e.length;if(1===r)return ye.clone(e[0],t);if(2===r)return ye.union(e[0],e[1],t);for(var n=[],i=0;i<r;i++)n.push(e[i].center);var o=(t=ye.fromPoints(n,t)).center,a=t.radius;for(i=0;i<r;i++)var s=e[i],a=Math.max(a,G.distance(o,s.center,ze)+s.radius);return t.radius=a,t};var Be=new G,qe=new G,Ge=new G;ye.fromOrientedBoundingBox=function(e,t){C(t)||(t=new ye);var r=e.halfAxes,n=B.getColumn(r,0,Be),i=B.getColumn(r,1,qe),r=B.getColumn(r,2,Ge);return G.add(n,i,n),G.add(n,r,n),t.center=G.clone(e.center,t.center),t.radius=G.magnitude(n),t},ye.clone=function(e,t){if(C(e))return C(t)?(t.center=G.clone(e.center,t.center),t.radius=e.radius,t):new ye(e.center,e.radius)},ye.packedLength=4,ye.pack=function(e,t,r){r=M(r,0);var n=e.center;return t[r++]=n.x,t[r++]=n.y,t[r++]=n.z,t[r]=e.radius,t},ye.unpack=function(e,t,r){t=M(t,0);var n=(r=!C(r)?new ye:r).center;return n.x=e[t++],n.y=e[t++],n.z=e[t++],r.radius=e[t],r};var je=new G,He=new G;ye.union=function(e,t,r){C(r)||(r=new ye);var n=e.center,i=e.radius,o=t.center,a=t.radius,s=G.subtract(o,n,je),o=G.magnitude(s);if(o+a<=i)return e.clone(r),r;if(o+i<=a)return t.clone(r),r;a=.5*(i+o+a),o=G.multiplyByScalar(s,(a-i)/o,He);return G.add(o,n,o),G.clone(o,r.center),r.radius=a,r};var We=new G;ye.expand=function(e,t,r){r=ye.clone(e,r);t=G.magnitude(G.subtract(t,r.center,We));return t>r.radius&&(r.radius=t),r},ye.intersectPlane=function(e,t){var r=e.center,n=e.radius,e=t.normal,t=G.dot(e,r)+t.distance;return t<-n?D.OUTSIDE:t<n?D.INTERSECTING:D.INSIDE},ye.intersectRay=function(e,t,r){var n=G.subtract(t.origin,e.center,new G),i=G.dot(n,n),o=i-e.radius*e.radius;if(o<=0){var a=G.dot(n,t.direction),i=Math.sqrt(e.radius*e.radius-(i-a*a));return r=G.multiplyByScalar(t.direction,i-a,r),r=G.subtract(t.origin,r,r),D.INTERSECTING}n=G.dot(t.direction,n);if(0<=n)return D.OUTSIDE;o=n*n-o;if(o<0)return D.OUTSIDE;if(o>=q.EPSILON10){a=-n-Math.sqrt(o);return r=G.multiplyByScalar(t.direction,a,r),r=G.add(t.origin,r,r),D.INTERSECTING}return r=G.multiplyByScalar(t.direction,n,r),r=G.subtract(t.origin,r,r),D.INTERSECTING},ye.transform=function(e,t,r){return(r=!C(r)?new ye:r).center=te.multiplyByPoint(t,e.center,r.center),r.radius=te.getMaximumScale(t)*e.radius,r};var Ve=new G;ye.distanceSquaredTo=function(e,t){t=G.subtract(e.center,t,Ve);return G.magnitudeSquared(t)-e.radius*e.radius},ye.transformWithoutScale=function(e,t,r){return(r=!C(r)?new ye:r).center=te.multiplyByPoint(t,e.center,r.center),r.radius=e.radius,r};var Xe=new G;ye.computePlaneDistances=function(e,t,r,n){C(n)||(n=new L);t=G.subtract(e.center,t,Xe),t=G.dot(r,t);return n.start=t-e.radius,n.stop=t+e.radius,n};for(var Ye=new G,ke=new G,Ke=new G,Ze=new G,Je=new G,Qe=new E,$e=new Array(8),et=0;et<8;++et)$e[et]=new G;var tt=new e;function rt(e,t,r){this.minimum=G.clone(M(e,G.ZERO)),this.maximum=G.clone(M(t,G.ZERO)),r=C(r)?G.clone(r):G.midpoint(this.minimum,this.maximum,new G),this.center=r}ye.projectTo2D=function(e,t,r){var n=(t=M(t,tt)).ellipsoid,i=e.center,o=e.radius,a=G.equals(i,G.ZERO)?G.clone(G.UNIT_X,Ye):n.geodeticSurfaceNormal(i,Ye),s=G.cross(G.UNIT_Z,a,ke);G.normalize(s,s);var u=G.cross(a,s,Ke);G.normalize(u,u),G.multiplyByScalar(a,o,a),G.multiplyByScalar(u,o,u),G.multiplyByScalar(s,o,s);var c=G.negate(u,Je),e=G.negate(s,Ze),l=$e,o=l[0];G.add(a,u,o),G.add(o,s,o),o=l[1],G.add(a,u,o),G.add(o,e,o),o=l[2],G.add(a,c,o),G.add(o,e,o),o=l[3],G.add(a,c,o),G.add(o,s,o),G.negate(a,a),o=l[4],G.add(a,u,o),G.add(o,s,o),o=l[5],G.add(a,u,o),G.add(o,e,o),o=l[6],G.add(a,c,o),G.add(o,e,o),o=l[7],G.add(a,c,o),G.add(o,s,o);for(var f=l.length,h=0;h<f;++h){var m=l[h];G.add(i,m,m);var d=n.cartesianToCartographic(m,Qe);t.project(d,m)}c=(i=(r=ye.fromPoints(l,r)).center).x,s=i.y,o=i.z;return i.x=o,i.y=c,i.z=s,r},ye.isOccluded=function(e,t){return!t.isBoundingSphereVisible(e)},ye.equals=function(e,t){return e===t||C(e)&&C(t)&&G.equals(e.center,t.center)&&e.radius===t.radius},ye.prototype.intersectPlane=function(e){return ye.intersectPlane(this,e)},ye.prototype.intersectRay=function(e,t){return ye.intersectRay(this,e,t)},ye.prototype.distanceSquaredTo=function(e){return ye.distanceSquaredTo(this,e)},ye.prototype.computePlaneDistances=function(e,t,r){return ye.computePlaneDistances(this,e,t,r)},ye.prototype.isOccluded=function(e){return ye.isOccluded(this,e)},ye.prototype.equals=function(e){return ye.equals(this,e)},ye.prototype.clone=function(e){return ye.clone(this,e)},ye.prototype.volume=function(){var e=this.radius;return ve*e*e*e},ye.prototype.project_area=function(e){return this.radius*this.radius*q.PI},ye.prototype.height=function(e){return 2*this.radius},rt.fromPoints=function(e,t){if(C(t)||(t=new rt),!C(e)||0===e.length)return t.minimum=G.clone(G.ZERO,t.minimum),t.maximum=G.clone(G.ZERO,t.maximum),t.center=G.clone(G.ZERO,t.center),t;for(var r=e[0].x,n=e[0].y,i=e[0].z,o=e[0].x,a=e[0].y,s=e[0].z,u=e.length,c=1;c<u;c++)var l=e[c],f=l.x,h=l.y,l=l.z,r=Math.min(f,r),o=Math.max(f,o),n=Math.min(h,n),a=Math.max(h,a),i=Math.min(l,i),s=Math.max(l,s);var m=t.minimum;m.x=r,m.y=n,m.z=i;var d=t.maximum;return d.x=o,d.y=a,d.z=s,t.center=G.midpoint(m,d,t.center),t},rt.clone=function(e,t){if(C(e))return C(t)?(t.minimum=G.clone(e.minimum,t.minimum),t.maximum=G.clone(e.maximum,t.maximum),t.center=G.clone(e.center,t.center),t):new rt(e.minimum,e.maximum,e.center)},rt.equals=function(e,t){return e===t||C(e)&&C(t)&&G.equals(e.center,t.center)&&G.equals(e.minimum,t.minimum)&&G.equals(e.maximum,t.maximum)};var nt=new G;function it(e,t){this.x=M(e,0),this.y=M(t,0)}rt.intersectPlane=function(e,t){nt=G.subtract(e.maximum,e.minimum,nt);var r=G.multiplyByScalar(nt,.5,nt),n=t.normal,r=r.x*Math.abs(n.x)+r.y*Math.abs(n.y)+r.z*Math.abs(n.z),t=G.dot(e.center,n)+t.distance;return 0<t-r?D.INSIDE:t+r<0?D.OUTSIDE:D.INTERSECTING},rt.prototype.clone=function(e){return rt.clone(this,e)},rt.prototype.intersectPlane=function(e){return rt.intersectPlane(this,e)},rt.prototype.equals=function(e){return rt.equals(this,e)},rt.prototype.width=function(){return this.maximum.x-this.minimum.x},rt.prototype.height=function(){return this.maximum.y-this.minimum.y},rt.prototype.length=function(){return this.maximum.z-this.minimum.z},rt.prototype.get_max_radius=function(){return G.distance(this.maximum,this.minimum)},rt.prototype.combine_box=function(e){this.combine_vertex(e.minimum),this.combine_vertex(e.maximum)},rt.prototype.combine_vertex=function(e){e.x<this.minimum.x&&(this.minimum.x=e.x),e.x>this.maximum.x&&(this.maximum.x=e.x),e.y<this.minimum.y&&(this.minimum.y=e.y),e.y>this.maximum.y&&(this.maximum.y=e.y),e.z<this.minimum.z&&(this.minimum.z=e.z),e.z>this.maximum.z&&(this.maximum.z=e.z),this.center=G.midpoint(this.minimum,this.maximum,new G)},rt.prototype.nearest_distance_to_point=function(e){var t=G.clone(e);return G.maximumByComponent(this.minimum,t,t),G.minimumByComponent(this.maximum,t,t),G.distance(t,e)},rt.prototype.nearest_point_to_point=function(e){e=G.clone(e);return G.maximumByComponent(this.minimum,e,e),G.minimumByComponent(this.maximum,e,e),e},rt.prototype.project_area=function(e){var t=this.maximum.x-this.minimum.x,r=this.maximum.y-this.minimum.y,n=this.maximum.z-this.minimum.z;return Math.abs(r*n*e.x)+Math.abs(t*n*e.y)+Math.abs(t*r*e.z)},rt.prototype.get_corners=function(){for(var e=[],t=0;t<8;++t)e.push(new G);return e[0]=G.clone(this.minimum),e[1].x=this.minimum.x,e[1].y=this.maximum.y,e[1].z=this.minimum.z,e[2].x=this.maximum.x,e[2].y=this.maximum.y,e[2].z=this.minimum.z,e[3].x=this.maximum.x,e[3].y=this.minimum.y,e[3].z=this.minimum.z,e[4]=G.clone(this.maximum),e[5].x=this.minimum.x,e[5].y=this.maximum.y,e[5].z=this.maximum.z,e[6].x=this.minimum.x,e[6].y=this.minimum.y,e[6].z=this.maximum.z,e[7].x=this.maximum.x,e[7].y=this.minimum.y,e[7].z=this.maximum.z,e},rt.prototype.transform=function(e,t){for(var r=this.get_corners(),n=new G(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),i=new G(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),o=0;o<8;o++)r[o]=te.multiplyByPoint(e,r[o],r[o]),G.minimumByComponent(r[o],n,n),G.maximumByComponent(r[o],i,i);return C(t)?(t.minimum=n,t.maximum=i,t):t=new rt(n,i)},rt.prototype.is_valid=function(){return!(this.minimum.x>this.maximum.x||this.minimum.y>this.maximum.y||this.minimum.z>this.maximum.z)},rt.intersectRay=function(e,t){var r=new Array(3);G.pack(e.minimum,r);var n=new Array(3);G.pack(e.maximum,n);var i=new Array(3);G.pack(t.origin,i);e=new Array(3);return G.pack(t.direction,e),function(e,t,r,n,i){for(var o,a=!0,s=new Array(3),u=new Array(3),c=new Array(3),l=0;l<3;l++)r[l]<e[l]?(s[l]=1,c[l]=e[l],a=!1):r[l]>t[l]?(s[l]=0,c[l]=t[l],a=!1):s[l]=2;if(a)return i=r,!0;for(l=0;l<3;l++)2!=s[l]&&Math.abs(n[l])>q.EPSILON10?u[l]=(c[l]-r[l])/n[l]:u[l]=-1;for(o=0,l=1;l<3;l++)u[o]<u[l]&&(o=l);if(u[o]<0)return!1;for(l=0;l<3;l++)if(o!=l){if(i[l]=r[l]+u[o]*n[l],i[l]<e[l]||i[l]>t[l])return!1}else i[l]=c[l];return!0}(r,n,i,e,new Array(3))},rt.prototype.intersectRay=function(e){return rt.intersectRay(this,e)},rt.prototype.make_invalid=function(){this.minimum.x=this.minimum.y=this.minimum.z=Number.MAX_VALUE,this.maximum.x=this.maximum.y=this.maximum.z=-Number.MAX_VALUE},rt.prototype.toBoundingSphere=function(e){return new ye(void 0===e?this.center:te.multiplyByPoint(e,this.center,new G),this.get_max_radius()/2)},rt.intersect=function(e,t){return!(t.minimum.x>e.maximum.x||t.maximum.x<e.minimum.x||t.minimum.y>e.maximum.y||t.maximum.y<e.minimum.y||t.minimum.z>e.maximum.z||t.maximum.z<e.minimum.z)&&!(t.minimum.x>e.minimum.x&&t.maximum.x<e.maximum.x&&t.minimum.y>e.minimum.y&&t.maximum.y<e.maximum.y&&t.minimum.z>e.minimum.z&&t.maximum.z<e.maximum.z&&e.minimum.x>t.minimum.x&&e.maximum.x<t.maximum.x&&e.minimum.y>t.minimum.y&&e.maximum.y<t.maximum.y&&e.minimum.z>t.minimum.z&&e.maximum.z<t.maximum.z)},it.fromElements=function(e,t,r){return C(r)?(r.x=e,r.y=t,r):new it(e,t)},it.fromCartesian3=it.clone=function(e,t){if(C(e))return C(t)?(t.x=e.x,t.y=e.y,t):new it(e.x,e.y)},it.fromCartesian4=it.clone,it.packedLength=2,it.pack=function(e,t,r){return r=M(r,0),t[r++]=e.x,t[r]=e.y,t},it.unpack=function(e,t,r){return t=M(t,0),(r=!C(r)?new it:r).x=e[t++],r.y=e[t],r},it.packArray=function(e,t){var r=e.length,n=2*r;if(C(t)){if(!Array.isArray(t)&&t.length!==n)throw new o("If result is a typed array, it must have exactly array.length * 2 elements");t.length!==n&&(t.length=n)}else t=new Array(n);for(var i=0;i<r;++i)it.pack(e[i],t,2*i);return t},it.unpackArray=function(e,t){var r=e.length;C(t)?t.length=r/2:t=new Array(r/2);for(var n=0;n<r;n+=2){var i=n/2;t[i]=it.unpack(e,n,t[i])}return t},it.fromArray=it.unpack,it.maximumComponent=function(e){return Math.max(e.x,e.y)},it.minimumComponent=function(e){return Math.min(e.x,e.y)},it.minimumByComponent=function(e,t,r){return r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r},it.maximumByComponent=function(e,t,r){return r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r},it.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},it.magnitude=function(e){return Math.sqrt(it.magnitudeSquared(e))};var ot=new it;it.distance=function(e,t){return it.subtract(e,t,ot),it.magnitude(ot)},it.distanceSquared=function(e,t){return it.subtract(e,t,ot),it.magnitudeSquared(ot)},it.normalize=function(e,t){var r=it.magnitude(e);return 0!=r?(t.x=e.x/r,t.y=e.y/r):it.clone(e,t),Math.abs(t.x)<q.EPSILON8&&(t.x=0),Math.abs(t.y)<q.EPSILON8&&(t.y=0),t},it.dot=function(e,t){return e.x*t.x+e.y*t.y},it.multiplyComponents=function(e,t,r){return r.x=e.x*t.x,r.y=e.y*t.y,r},it.divideComponents=function(e,t,r){return r.x=e.x/t.x,r.y=e.y/t.y,r},it.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r},it.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r},it.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r},it.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r},it.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t},it.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t};var at=new it;it.lerp=function(e,t,r,n){return it.multiplyByScalar(t,r,at),n=it.multiplyByScalar(e,1-r,n),it.add(at,n,n)};var st=new it,ut=new it;it.angleBetween=function(e,t){return it.normalize(e,st),it.normalize(t,ut),q.acosClamped(it.dot(st,ut))};var ct=new it;it.mostOrthogonalAxis=function(e,t){e=it.normalize(e,ct);return it.abs(e,e),t=e.x<=e.y?it.clone(it.UNIT_X,t):it.clone(it.UNIT_Y,t)},it.equals=function(e,t){return e===t||C(e)&&C(t)&&e.x===t.x&&e.y===t.y},it.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]},it.equalsEpsilon=function(e,t,r,n){return e===t||C(e)&&C(t)&&q.equalsEpsilon(e.x,t.x,r,n)&&q.equalsEpsilon(e.y,t.y,r,n)},it.ZERO=Object.freeze(new it(0,0)),it.UNIT_X=Object.freeze(new it(1,0)),it.UNIT_Y=Object.freeze(new it(0,1)),it.prototype.clone=function(e){return it.clone(this,e)},it.prototype.equals=function(e){return it.equals(this,e)},it.prototype.equalsEpsilon=function(e,t,r){return it.equalsEpsilon(this,e,t,r)},it.prototype.toString=function(){return"("+this.x+", "+this.y+")"},it.prototype.set=function(e,t){this.x=e,this.y=t},it.prototype.fromArray=function(e,t){return this.x=e[t=void 0===t?0:t],this.y=e[t+1],this},it.prototype.toArray=function(e,t){return(e=void 0===e?[]:e)[t=void 0===t?0:t]=this.x,e[t+1]=this.y,e};function lt(e){return"string"==typeof e&&(e=ht.stringToByteArray(e)),lt.update(1,e)}var ft=8,ht={stringToByteArray:function(e){for(var t=e.split(""),r=0,n=t.length;r<n;r++)t[r]=(255&t[r].charCodeAt(0))>>>0;return t}};lt.update=function(e,t){for(var r,n=65535&e,i=e>>>16&65535,o=t.length,a=0;0<o;){for(o-=r=lt.OptimizationParameter<o?lt.OptimizationParameter:o;i+=n+=t[a++],--r;);n%=65521,i%=65521}return(i<<16|n)>>>0},lt.OptimizationParameter=1024;function mt(e){for(var t,r,n,i,o,a,s,u,c,l=e.length,f=0,h=Number.POSITIVE_INFINITY,m=0,d=l;m<d;++m)e[m]>f&&(f=e[m]),e[m]<h&&(h=e[m]);for(t=1<<f,r=new Uint32Array(t),n=1,i=0,o=2;n<=f;){for(m=0;m<l;++m)if(e[m]===n){for(s=i,u=a=0;u<n;++u)a=a<<1|1&s,s>>=1;for(c=n<<16|m,u=a;u<t;u+=o)r[u]=c;++i}++n,i<<=1,o<<=1}return[r,f,h]}function dt(e,t){switch(this.buffer,this.blocks=[],this.bufferSize=32768,this.totalpos=0,this.ip=0,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(e),this.output,this.op,this.bfinal=!1,this.bufferType=dt.BufferType.ADAPTIVE,this.resize=!1,t?(t.index&&(this.ip=t.index),t.bufferSize&&(this.bufferSize=t.bufferSize),t.bufferType&&(this.bufferType=t.bufferType),t.resize&&(this.resize=t.resize)):t={},this.bufferType){case dt.BufferType.BLOCK:this.op=dt.MaxBackwardLength,this.output=new Uint8Array(dt.MaxBackwardLength+this.bufferSize+dt.MaxCopyLength);break;case dt.BufferType.ADAPTIVE:this.op=0,this.output=new Uint8Array(this.bufferSize);break;default:throw new Error("invalid inflate mode")}}dt.BufferType={BLOCK:0,ADAPTIVE:1},dt.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();switch(this.bufferType){case dt.BufferType.BLOCK:return this.concatBufferBlock();case dt.BufferType.ADAPTIVE:return this.concatBufferDynamic();default:throw new Error("invalid inflate mode")}},dt.MaxBackwardLength=32768,dt.MaxCopyLength=258,dt.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dt.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),dt.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),dt.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),dt.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),dt.FixedLiteralLengthTable=function(){for(var e=new Uint8Array(288),t=0,r=e.length;t<r;++t)e[t]=t<=143?8:t<=255?9:t<=279?7:8;return mt(e)}(),dt.FixedDistanceTable=function(){for(var e=new Uint8Array(30),t=0,r=e.length;t<r;++t)e[t]=5;return mt(e)}(),dt.prototype.parseBlock=function(){var e=this.readBits(3);switch(1&e&&(this.bfinal=!0),e>>>=1){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+e)}},dt.prototype.readBits=function(e){var t,r=this.bitsbuf,n=this.bitsbuflen,i=this.input,o=this.ip;if(i.length<=o+(e-n+7>>3))throw new Error("input buffer is broken");for(;n<e;)r|=i[o++]<<n,n+=8;return t=r&(1<<e)-1,n-=e,this.bitsbuf=r>>>=e,this.bitsbuflen=n,this.ip=o,t},dt.prototype.readCodeByTable=function(e){for(var t=this.bitsbuf,r=this.bitsbuflen,n=this.input,i=this.ip,o=n.length,a=e[0],s=e[1];r<s&&!(o<=i);)t|=n[i++]<<r,r+=8;if(r<(a=(e=a[t&(1<<s)-1])>>>16))throw new Error("invalid code length: "+a);return this.bitsbuf=t>>a,this.bitsbuflen=r-a,this.ip=i,65535&e},dt.prototype.parseUncompressedBlock=function(){var e,t,r=this.input,n=this.ip,i=this.output,o=this.op,a=r.length,s=i.length;if(this.bitsbuf=0,this.bitsbuflen=0,a<=n+1)throw new Error("invalid uncompressed block header: LEN");if(e=r[n++]|r[n++]<<8,a<=n+1)throw new Error("invalid uncompressed block header: NLEN");if(e===~(r[n++]|r[n++]<<8))throw new Error("invalid uncompressed block header: length verify");if(n+e>r.length)throw new Error("input buffer is broken");switch(this.bufferType){case dt.BufferType.BLOCK:for(;o+e>i.length;)e-=t=s-o,i.set(r.subarray(n,n+t),o),n+=t,this.op=o+=t,i=this.expandBufferBlock(),o=this.op;break;case dt.BufferType.ADAPTIVE:for(;o+e>i.length;)i=this.expandBufferAdaptive({fixRatio:2});break;default:throw new Error("invalid inflate mode")}i.set(r.subarray(n,n+e),o),o+=e,this.ip=n+=e,this.op=o,this.output=i},dt.prototype.parseFixedHuffmanBlock=function(){switch(this.bufferType){case dt.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(dt.FixedLiteralLengthTable,dt.FixedDistanceTable);break;case dt.BufferType.BLOCK:this.decodeHuffmanBlock(dt.FixedLiteralLengthTable,dt.FixedDistanceTable);break;default:throw new Error("invalid inflate mode")}},dt.prototype.parseDynamicHuffmanBlock=function(){for(var e,t,r,n,i,o,a,s,u=this.readBits(5)+257,c=this.readBits(5)+1,l=this.readBits(4)+4,f=new Uint8Array(dt.Order.length),h=0;h<l;++h)f[dt.Order[h]]=this.readBits(3);for(e=mt(f),n=new Uint8Array(u+c),h=0,s=u+c;h<s;)switch(i=this.readCodeByTable(e)){case 16:for(a=3+this.readBits(2);a--;)n[h++]=o;break;case 17:for(a=3+this.readBits(3);a--;)n[h++]=0;o=0;break;case 18:for(a=11+this.readBits(7);a--;)n[h++]=0;o=0;break;default:o=n[h++]=i}switch(t=mt(n.subarray(0,u)),r=mt(n.subarray(u)),this.bufferType){case dt.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(t,r);break;case dt.BufferType.BLOCK:this.decodeHuffmanBlock(t,r);break;default:throw new Error("invalid inflate mode")}},dt.prototype.decodeHuffmanBlock=function(e,t){var r=this.output,n=this.op;this.currentLitlenTable=e;for(var i,o,a,s,u=r.length-dt.MaxCopyLength,c=dt.LengthCodeTable,l=dt.LengthExtraTable,f=dt.DistCodeTable,h=dt.DistExtraTable;256!==(i=this.readCodeByTable(e));)if(i<256)u<=n&&(this.op=n,r=this.expandBufferBlock(),n=this.op),r[n++]=i;else for(s=c[o=i-257],0<l[o]&&(s+=this.readBits(l[o])),a=f[i=this.readCodeByTable(t)],0<h[i]&&(a+=this.readBits(h[i])),u<=n&&(this.op=n,r=this.expandBufferBlock(),n=this.op);s--;)r[n]=r[n++-a];for(;8<=this.bitsbuflen;)this.bitsbuflen-=8,this.ip--;this.op=n},dt.prototype.decodeHuffmanAdaptive=function(e,t){var r=this.output,n=this.op;this.currentLitlenTable=e;for(var i,o,a,s,u=r.length,c=dt.LengthCodeTable,l=dt.LengthExtraTable,f=dt.DistCodeTable,h=dt.DistExtraTable;256!==(i=this.readCodeByTable(e));)if(i<256)u<=n&&(u=(r=this.expandBufferAdaptive()).length),r[n++]=i;else for(s=c[o=i-257],0<l[o]&&(s+=this.readBits(l[o])),a=f[i=this.readCodeByTable(t)],0<h[i]&&(a+=this.readBits(h[i])),u<n+s&&(u=(r=this.expandBufferAdaptive()).length);s--;)r[n]=r[n++-a];for(;8<=this.bitsbuflen;)this.bitsbuflen-=8,this.ip--;this.op=n},dt.prototype.expandBufferBlock=function(e){var t=new Uint8Array(this.op-dt.MaxBackwardLength),r=this.op-dt.MaxBackwardLength,n=this.output;return t.set(n.subarray(dt.MaxBackwardLength,t.length)),this.blocks.push(t),this.totalpos+=t.length,n.set(n.subarray(r,r+dt.MaxBackwardLength)),this.op=dt.MaxBackwardLength,n},dt.prototype.expandBufferAdaptive=function(e){var t=this.input.length/this.ip+1|0,r=this.input,n=this.output;return e&&("number"==typeof e.fixRatio&&(t=e.fixRatio),"number"==typeof e.addRatio&&(t+=e.addRatio)),t=t<2?(r=(r.length-this.ip)/this.currentLitlenTable[2]/2*258|0)<n.length?n.length+r:n.length<<1:n.length*t,(t=new Uint8Array(t)).set(n),this.output=t,this.output},dt.prototype.concatBufferBlock=function(){var e,t,r,n,i,o=0,a=this.totalpos+(this.op-dt.MaxBackwardLength),s=this.output,u=this.blocks,c=new Uint8Array(a);if(0===u.length)return this.output.subarray(dt.MaxBackwardLength,this.op);for(t=0,r=u.length;t<r;++t)for(n=0,i=(e=u[t]).length;n<i;++n)c[o++]=e[n];for(t=dt.MaxBackwardLength,r=this.op;t<r;++t)c[o++]=s[t];return this.blocks=[],this.buffer=c,this.buffer},dt.prototype.concatBufferDynamic=function(){var e,t=this.op;return this.resize?(e=new Uint8Array(t)).set(this.output.subarray(0,t)):e=this.output.subarray(0,t),this.buffer=e,this.buffer};var pt=function(e,t){var r,n;if(this.input=e,this.ip=0,this.rawinflate,this.verify,t?(t.index&&(this.ip=t.index),t.verify&&(this.verify=t.verify)):t={},r=e[this.ip++],n=e[this.ip++],(15&r)!==ft)throw new Error("unsupported compression method");if(this.method=ft,((r<<8)+n)%31!=0)throw new Error("invalid fcheck flag:"+((r<<8)+n)%31);if(32&n)throw new Error("fdict flag is not supported");this.rawinflate=new dt(e,{index:this.ip,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})};pt.BufferType=dt.BufferType,pt.prototype.decompress=function(){var e=this.input,t=this.rawinflate.decompress();if(this.ip=this.rawinflate.ip,this.verify&&(e[this.ip++]<<24|e[this.ip++]<<16|e[this.ip++]<<8|e[this.ip++])>>>0!==lt(t))throw new Error("invalid adler-32 checksum");return t};var Et,_t,yt={};function Tt(e){this._ellipsoid=M(e,j.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}function gt(e,t,r,n){return Rt(e).then(t,r,n)}function Rt(e){var t,r,e=e instanceof At?e:It(e)?(t=Ot(),e.then(function(e){t.resolve(e)},function(e){t.reject(e)},function(e){t.progress(e)}),t.promise):(r=e,new At(function(e){try{return Rt(e?e(r):r)}catch(e){return St(e)}}));return e}function At(e){this.then=e}function St(r){return new At(function(e,t){try{return t?Rt(t(r)):St(r)}catch(e){return St(e)}})}function Ot(){var e=new At(i),a=[],s=[],n=function(t,r,n){var i=Ot(),o="function"==typeof n?function(e){try{i.progress(n(e))}catch(e){i.progress(e)}}:function(e){i.progress(e)};return a.push(function(e){e.then(t,r).then(i.resolve,i.reject,o)}),s.push(o),i.promise},t=function(e){return Ct(s,e),e},r=function(e){return e=Rt(e),n=e.then,r=Rt,t=Mt,Ct(a,e),s=a=Et,e};return{then:i,resolve:o,reject:u,progress:c,promise:e,resolver:{resolve:o,reject:u,progress:c}};function i(e,t,r){return n(e,t,r)}function o(e){return r(e)}function u(e){return r(St(e))}function c(e){return t(e)}}function It(e){return e&&"function"==typeof e.then}function wt(e,m,d,p,E){return gt(e,function(e){var t,r,n,i,o=e.length>>>0,a=Math.max(0,Math.min(m,o)),s=[],u=o-a+1,c=[],l=Ot();if(a)for(n=l.progress,r=function(e){c.push(e),--u||(t=r=Mt,l.reject(c))},t=function(e){s.push(e),--a||(t=r=Mt,l.resolve(s))},i=0;i<o;++i)i in e&&gt(e[i],h,f,n);else l.resolve(s);return l.then(d,p,E);function f(e){r(e)}function h(e){t(e)}})}function Nt(e,t,r,n){return xt(e,vt).then(t,r,n)}function xt(e,s){return gt(e,function(e){var t,r,n,i=t=e.length>>>0,o=[],a=Ot();if(i)for(r=function(e,t){gt(e,s).then(function(e){o[t]=e,--i||a.resolve(o)},a.reject)},n=0;n<t;n++)n in e?r(e[n],n):--i;else a.resolve(o);return a.promise})}function Ct(e,t){for(var r,n=0;r=e[n++];)r(t)}function Mt(){}function vt(e){return e}yt.Inflate=pt,Object.defineProperties(Tt.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),Tt.mercatorAngleToGeodeticLatitude=function(e){return q.PI_OVER_TWO-2*Math.atan(Math.exp(-e))},Tt.geodeticLatitudeToMercatorAngle=function(e){Tt.MaximumLatitude<e?e=Tt.MaximumLatitude:e<-Tt.MaximumLatitude&&(e=-Tt.MaximumLatitude);e=Math.sin(e);return.5*Math.log((1+e)/(1-e))},Tt.MaximumLatitude=Tt.mercatorAngleToGeodeticLatitude(Math.PI),Tt.prototype.project=function(e,t){var r=this._semimajorAxis,n=e.longitude*r,r=Tt.geodeticLatitudeToMercatorAngle(e.latitude)*r,e=e.height;return C(t)?(t.x=n,t.y=r,t.z=e,t):new G(n,r,e)},Tt.prototype.unproject=function(e,t){var r=this._oneOverSemimajorAxis,n=e.x*r,r=Tt.mercatorAngleToGeodeticLatitude(e.y*r),e=e.z;return C(t)?(t.longitude=n,t.latitude=r,t.height=e,t):new E(n,r,e)},gt.defer=Ot,gt.resolve=Rt,gt.reject=function(e){return gt(e,St)},gt.join=function(){return xt(arguments,vt)},gt.all=Nt,gt.map=xt,gt.reduce=function(e,o){var t=Kt.call(arguments,1);return gt(e,function(e){var i=e.length;return t[0]=function(e,r,n){return gt(e,function(t){return gt(r,function(e){return o(t,e,n,i)})})},Zt.apply(e,t)})},gt.any=function(e,t,r,n){return wt(e,1,function(e){return t?t(e[0]):e[0]},r,n)},gt.some=wt,gt.chain=function(e,t,r){var n=2<arguments.length;return gt(e,function(e){return t.resolve(e=n?r:e),e},function(e){return t.reject(e),St(e)},t.progress)},gt.isPromise=It,At.prototype={always:function(e,t){return this.then(e,e,t)},otherwise:function(e){return this.then(Et,e)},yield:function(e){return this.then(function(){return e})},spread:function(t){return this.then(function(e){return Nt(e,function(e){return t.apply(Et,e)})})}};var bt,Pt,Ft,Ut,Dt,Lt,zt,Bt,qt,Gt,jt,Ht,Wt,Vt,Xt,Yt,kt,Kt=[].slice,Zt=[].reduce||function(e){var t,r=0,n=Object(this),i=n.length>>>0,o=arguments;if(o.length<=1)for(;;){if(r in n){t=n[r++];break}if(++r>=i)throw new TypeError}else t=o[1];for(;r<i;++r)r in n&&(t=e(t,n[r],r,n));return t},Jt={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},Qt={};function $t(e){for(var t=e.split("."),r=0,n=t.length;r<n;++r)t[r]=parseInt(t[r],10);return t}function er(){var e;return C(Pt)||(Pt=!1,ir()||null!==(e=/ Chrome\/([\.0-9]+)/.exec(bt.userAgent))&&(Pt=!0,Ft=$t(e[1]))),Pt}function tr(){var e;return C(Ut)||(Ut=!1,er()||ir()||!/ Safari\/[\.0-9]+/.test(bt.userAgent)||null!==(e=/ Version\/([\.0-9]+)/.exec(bt.userAgent))&&(Ut=!0,Dt=$t(e[1]))),Ut}function rr(){var e;return C(Lt)||(Lt=!1,null!==(e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(bt.userAgent))&&(Lt=!0,(zt=$t(e[1])).isNightly=!!e[2])),Lt}function nr(){var e;return C(Bt)||(Bt=!1,"Microsoft Internet Explorer"===bt.appName?null!==(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(bt.userAgent))&&(Bt=!0,qt=$t(e[1])):"Netscape"===bt.appName&&null!==(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(bt.userAgent))&&(Bt=!0,qt=$t(e[1]))),Bt}function ir(){var e;return C(Gt)||(Gt=!1,null!==(e=/ Edge\/([\.0-9]+)/.exec(bt.userAgent))&&(Gt=!0,jt=$t(e[1]))),Gt}function or(){var e;return C(Ht)||(Ht=!1,null!==(e=/Firefox\/([\.0-9]+)/.exec(bt.userAgent))&&(Ht=!0,Wt=$t(e[1]))),Ht}function ar(){var e;return C(kt)||((e=document.createElement("canvas")).setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;"),e=e.style.imageRendering,(kt=C(e)&&""!==e)&&(Yt=e)),kt}function sr(){return sr._result}Object.defineProperties(Qt,{element:{get:function(){if(Qt.supportsFullscreen())return document[Jt.fullscreenElement]}},changeEventName:{get:function(){if(Qt.supportsFullscreen())return Jt.fullscreenchange}},errorEventName:{get:function(){if(Qt.supportsFullscreen())return Jt.fullscreenerror}},enabled:{get:function(){if(Qt.supportsFullscreen())return document[Jt.fullscreenEnabled]}},fullscreen:{get:function(){if(Qt.supportsFullscreen())return null!==Qt.element}}}),Qt.supportsFullscreen=function(){if(C(_t))return _t;_t=!1;var e=document.body;if("function"==typeof e.requestFullscreen)return Jt.requestFullscreen="requestFullscreen",Jt.exitFullscreen="exitFullscreen",Jt.fullscreenEnabled="fullscreenEnabled",Jt.fullscreenElement="fullscreenElement",Jt.fullscreenchange="fullscreenchange",Jt.fullscreenerror="fullscreenerror",_t=!0;for(var t=["webkit","moz","o","ms","khtml"],r=0,n=t.length;r<n;++r){var i,o=t[r];"function"!=typeof e[i=o+"RequestFullscreen"]&&"function"!=typeof e[i=o+"RequestFullScreen"]||(Jt.requestFullscreen=i,_t=!0),i=o+"ExitFullscreen","function"==typeof document[i]?Jt.exitFullscreen=i:(i=o+"CancelFullScreen","function"==typeof document[i]&&(Jt.exitFullscreen=i)),i=o+"FullscreenEnabled",void 0!==document[i]?Jt.fullscreenEnabled=i:(i=o+"FullScreenEnabled",void 0!==document[i]&&(Jt.fullscreenEnabled=i)),i=o+"FullscreenElement",void 0!==document[i]?Jt.fullscreenElement=i:(i=o+"FullScreenElement",void 0!==document[i]&&(Jt.fullscreenElement=i)),i=o+"fullscreenchange",void 0!==document["on"+i]&&(Jt.fullscreenchange=i="ms"===o?"MSFullscreenChange":i),i=o+"fullscreenerror",void 0!==document["on"+i]&&(Jt.fullscreenerror=i="ms"===o?"MSFullscreenError":i)}return _t},Qt.requestFullscreen=function(e,t){Qt.supportsFullscreen()&&e[Jt.requestFullscreen]({vrDisplay:t})},Qt.exitFullscreen=function(){Qt.supportsFullscreen()&&document[Jt.exitFullscreen]()},Qt._names=Jt,bt="undefined"!=typeof navigator?navigator:{},sr._promise=void 0,sr._result=void 0,sr.initialize=function(){if(C(sr._promise))return sr._promise;var e=gt.defer();if(sr._promise=e.promise,ir())return sr._result=!1,e.resolve(sr._result),e.promise;var t=new Image;return t.onload=function(){sr._result=0<t.width&&0<t.height,e.resolve(sr._result)},t.onerror=function(){sr._result=!1,e.resolve(sr._result)},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.promise},Object.defineProperties(sr,{initialized:{get:function(){return C(sr._result)}}});pt=[];"undefined"!=typeof ArrayBuffer&&(pt.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&pt.push(Uint8ClampedArray),"undefined"!=typeof Uint8ClampedArray&&pt.push(Uint8ClampedArray));var ur={isChrome:er,chromeVersion:function(){return er()&&Ft},isSafari:tr,safariVersion:function(){return tr()&&Dt},isWebkit:rr,webkitVersion:function(){return rr()&&zt},isInternetExplorer:nr,internetExplorerVersion:function(){return nr()&&qt},isEdge:ir,edgeVersion:function(){return ir()&&jt},isFirefox:or,firefoxVersion:function(){return or()&&Wt},isWindows:function(){return Vt=!C(Vt)?/Windows/i.test(bt.appVersion):Vt},hardwareConcurrency:M(bt.hardwareConcurrency,3),supportsPointerEvents:function(){return Xt=!C(Xt)?!or()&&"undefined"!=typeof PointerEvent&&(!C(bt.pointerEnabled)||bt.pointerEnabled):Xt},supportsImageRenderingPixelated:ar,supportsWebP:sr,imageRenderingValue:function(){return ar()?Yt:void 0},typedArrayTypes:pt};function cr(e,t,r,n){this.x=M(e,0),this.y=M(t,0),this.z=M(r,0),this.w=M(n,0)}ur.supportsFullscreen=function(){return Qt.supportsFullscreen()},ur.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer},ur.supportsWebWorkers=function(){return"undefined"!=typeof Worker},ur.supportsWebAssembly=function(){return"undefined"!=typeof WebAssembly&&!ur.isEdge()};var lr=new G;cr.fromAxisAngle=function(e,t,r){var n=t/2,i=Math.sin(n),t=(lr=G.normalize(e,lr)).x*i,e=lr.y*i,i=lr.z*i,n=Math.cos(n);return C(r)?(r.x=t,r.y=e,r.z=i,r.w=n,r):new cr(t,e,i,n)};var fr=[1,2,0],hr=new Array(3);cr.fromRotationMatrix=function(e,t){var r,n,i,o,a=e[B.COLUMN0ROW0],s=e[B.COLUMN1ROW1],u=e[B.COLUMN2ROW2],c=a+s+u,l=0<c?(i=.5*(o=Math.sqrt(c+1)),r=(e[B.COLUMN1ROW2]-e[B.COLUMN2ROW1])*(o=.5/o),n=(e[B.COLUMN2ROW0]-e[B.COLUMN0ROW2])*o,(e[B.COLUMN0ROW1]-e[B.COLUMN1ROW0])*o):(s=fr[a=fr[u=a<u&&s<u?2:a<s?1:0]],o=Math.sqrt(e[B.getElementIndex(u,u)]-e[B.getElementIndex(a,a)]-e[B.getElementIndex(s,s)]+1),(l=hr)[u]=.5*o,o=.5/o,i=(e[B.getElementIndex(s,a)]-e[B.getElementIndex(a,s)])*o,l[a]=(e[B.getElementIndex(a,u)]+e[B.getElementIndex(u,a)])*o,l[s]=(e[B.getElementIndex(s,u)]+e[B.getElementIndex(u,s)])*o,r=-l[0],n=-l[1],-l[2]);return C(t)?(t.x=r,t.y=n,t.z=l,t.w=i,t):new cr(r,n,l,i)};var mr,dr,pr,Er=new cr;new cr,new cr,new cr;cr.fromHeadingPitchRoll=function(e,t){return pr=cr.fromAxisAngle(G.UNIT_X,e.roll,Er),dr=cr.fromAxisAngle(G.UNIT_Y,-e.pitch,t),t=cr.multiply(dr,pr,dr),mr=cr.fromAxisAngle(G.UNIT_Z,-e.heading,Er),cr.multiply(mr,t,t)};var _r=new G,yr=new G;cr.fromNormal=function(e,t,r){var n=G.add(e,t,_r);G.normalize(n,n);var i,o,a,s,u=G.dot(e,n),t=u;return s=0!=u?(o=(i=G.cross(e,n,yr)).x,a=i.y,i.z):Math.abs(e.x)>=Math.abs(e.y)?(s=1/Math.sqrt(e.x*e.x+e.z*e.z),o=-e.z*s,a=0,e.x*s):(s=1/Math.sqrt(e.x*e.x+e.z*e.z),o=0,a=e.z*s,-e.y*s),C(r)?(r.x=o,r.y=a,r.z=s,r.w=t,r):new cr(o,a,s,t)};var Tr=new G,gr=new G,Rr=new cr,Ar=new cr,Sr=new cr;cr.packedLength=4,cr.pack=function(e,t,r){return r=M(r,0),t[r++]=e.x,t[r++]=e.y,t[r++]=e.z,t[r]=e.w,t},cr.unpack=function(e,t,r){return t=M(t,0),(r=!C(r)?new cr:r).x=e[t],r.y=e[t+1],r.z=e[t+2],r.w=e[t+3],r},cr.packedInterpolationLength=3,cr.convertPackedArrayForInterpolation=function(e,t,r,n){cr.unpack(e,4*r,Sr),cr.conjugate(Sr,Sr);for(var i=0,o=r-t+1;i<o;i++){var a=3*i;cr.unpack(e,4*(t+i),Rr),cr.multiply(Rr,Sr,Rr),Rr.w<0&&cr.negate(Rr,Rr),cr.computeAxis(Rr,Tr);var s=cr.computeAngle(Rr);(n=!C(n)?[]:n)[a]=Tr.x*s,n[1+a]=Tr.y*s,n[2+a]=Tr.z*s}},cr.unpackInterpolationResult=function(e,t,r,n,i){C(i)||(i=new cr),G.fromArray(e,0,gr);e=G.magnitude(gr);return cr.unpack(t,4*n,Ar),0===e?cr.clone(cr.IDENTITY,Rr):cr.fromAxisAngle(gr,e,Rr),cr.multiply(Rr,Ar,i)},cr.clone=function(e,t){if(C(e))return C(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new cr(e.x,e.y,e.z,e.w)},cr.conjugate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},cr.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},cr.magnitude=function(e){return Math.sqrt(cr.magnitudeSquared(e))},cr.normalize=function(e,t){var r=1/cr.magnitude(e),n=e.x*r,i=e.y*r,o=e.z*r,r=e.w*r;return t.x=n,t.y=i,t.z=o,t.w=r,t},cr.inverse=function(e,t){var r=cr.magnitudeSquared(e);return t=cr.conjugate(e,t),cr.multiplyByScalar(t,1/r,t)},cr.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r},cr.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},cr.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},cr.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},cr.multiply=function(e,t,r){var n=e.x,i=e.y,o=e.z,a=e.w,s=t.x,u=t.y,c=t.z,l=t.w,f=a*u-n*c+i*l+o*s,e=a*c+n*u-i*s+o*l,t=a*l-n*s-i*u-o*c;return r.x=a*s+n*l+i*c-o*u,r.y=f,r.z=e,r.w=t,r},cr.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},cr.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},cr.computeAxis=function(e,t){var r=e.w;if(Math.abs(r-1)<q.EPSILON6)return t.x=t.y=t.z=0,t;r=1/Math.sqrt(1-r*r);return t.x=e.x*r,t.y=e.y*r,t.z=e.z*r,t},cr.computeAngle=function(e){return Math.abs(e.w-1)<q.EPSILON6?0:2*Math.acos(e.w)};var Or=new cr;cr.lerp=function(e,t,r,n){return Or=cr.multiplyByScalar(t,r,Or),n=cr.multiplyByScalar(e,1-r,n),cr.add(Or,n,n)};var Ir=new cr,wr=new cr,Nr=new cr;cr.slerp=function(e,t,r,n){var i=cr.dot(e,t),o=t;if(i<0&&(i=-i,o=Ir=cr.negate(t,Ir)),1-i<q.EPSILON6)return cr.lerp(e,o,r,n);i=Math.acos(i);return wr=cr.multiplyByScalar(e,Math.sin((1-r)*i),wr),Nr=cr.multiplyByScalar(o,Math.sin(r*i),Nr),n=cr.add(wr,Nr,n),cr.multiplyByScalar(n,1/Math.sin(i),n)},cr.log=function(e,t){var r=q.acosClamped(e.w),n=0;return 0!==r&&(n=r/Math.sin(r)),G.multiplyByScalar(e,n,t)},cr.exp=function(e,t){var r=G.magnitude(e),n=0;return 0!==r&&(n=Math.sin(r)/r),t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=Math.cos(r),t};var xr=new G,Cr=new G,Mr=new cr,vr=new cr;cr.computeInnerQuadrangle=function(e,t,r,n){var i=cr.conjugate(t,Mr);cr.multiply(i,r,vr);r=cr.log(vr,xr);cr.multiply(i,e,vr);e=cr.log(vr,Cr);return G.add(r,e,r),G.multiplyByScalar(r,.25,r),G.negate(r,r),cr.exp(r,Mr),cr.multiply(t,Mr,n)},cr.squad=function(e,t,r,n,i,o){t=cr.slerp(e,t,i,Mr),n=cr.slerp(r,n,i,vr);return cr.slerp(t,n,2*i*(1-i),o)};for(var br=new cr,pt=1.9011074535173003,Pr=ur.supportsTypedArrays()?new Float32Array(8):[],Fr=ur.supportsTypedArrays()?new Float32Array(8):[],Ur=ur.supportsTypedArrays()?new Float32Array(8):[],Dr=ur.supportsTypedArrays()?new Float32Array(8):[],Lr=0;Lr<7;++Lr){var zr=Lr+1,Br=2*zr+1;Pr[Lr]=1/(zr*Br),Fr[Lr]=zr/Br}function qr(e,t,r){this.heading=M(e,0),this.pitch=M(t,0),this.roll=M(r,0)}function Gr(e,t,r){for(var n,i,o=0,a=e.length-1;o<=a;)if((i=r(e[n=~~((o+a)/2)],t))<0)o=1+n;else{if(!(0<i))return n;a=n-1}return~(a+1)}function jr(){function T(e,t,r,n,i,o,a){var s=e>>>0;return e=(r=r&&s&&{2:"0b",8:"0",16:"0x"}[t]||"")+S(s.toString(t),o||0,"0",!1),O(e,r,n,i,a)}function g(e,t,r,n,i,o){return null!=n&&(e=e.slice(0,n)),O(e,"",t,r,i,o)}var R=arguments,A=0,e=R[A++],S=function(e,t,r,n){r=r||" ";r=e.length>=t?"":Array(1+t-e.length>>>0).join(r);return n?e+r:r+e},O=function(e,t,r,n,i,o){var a=n-e.length;return e=0<a?r||!i?S(e,n,o,r):e.slice(0,t.length)+S("",a,"0",!0)+e.slice(t.length):e};return e.replace(/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,function(e,t,r,n,i,o,a){var s,u,c,l,f;if("%%"==e)return"%";for(var h=!1,m="",d=!1,p=!1,E=" ",_=r.length,y=0;r&&y<_;y++)switch(r.charAt(y)){case" ":m=" ";break;case"+":m="+";break;case"-":h=!0;break;case"'":E=r.charAt(y+1);break;case"0":d=!0;break;case"#":p=!0}switch((n=n?"*"==n?+R[A++]:"*"==n.charAt(0)?+R[n.slice(1,-1)]:+n:0)<0&&(n=-n,h=!0),o=o?"*"==o?+R[A++]:"*"==o.charAt(0)?+R[o.slice(1,-1)]:+o:-1<"fFeE".indexOf(a)?6:"d"==a?0:void 0,f=t?R[t.slice(0,-1)]:R[A++],a){case"s":return g(String(f),h,n,o,d,E);case"c":return g(String.fromCharCode(+f),h,n,o,d);case"b":return T(f,2,p,h,n,o,d);case"o":return T(f,8,p,h,n,o,d);case"x":return T(f,16,p,h,n,o,d);case"X":return T(f,16,p,h,n,o,d).toUpperCase();case"u":return T(f,10,p,h,n,o,d);case"i":case"d":return s=+f||0,f=(u=(s=Math.round(s-s%1))<0?"-":m)+S(String(Math.abs(s)),o,"0",!1),O(f,u,h,n,d);case"e":case"E":case"f":case"F":case"g":case"G":return u=(s=+f)<0?"-":m,c=["toExponential","toFixed","toPrecision"]["efg".indexOf(a.toLowerCase())],l=["toString","toUpperCase"]["eEfFgG".indexOf(a)%2],f=u+Math.abs(s)[c](o),O(f,u,h,n,d)[l]();default:return e}})}function Hr(e,t,r,n,i,o,a,s){this.year=e,this.month=t,this.day=r,this.hour=n,this.minute=i,this.second=o,this.millisecond=a,this.isLeapSecond=s}function Wr(e){return e%4==0&&e%100!=0||e%400==0}function Vr(e,t){this.julianDate=e,this.offset=t}Pr[7]=pt/136,Fr[7]=8*pt/17,cr.fastSlerp=function(e,t,r,n){var i,o=cr.dot(e,t);0<=o?i=1:(i=-1,o=-o);for(var a=o-1,o=1-r,s=r*r,u=o*o,c=7;0<=c;--c)Ur[c]=(Pr[c]*s-Fr[c])*a,Dr[c]=(Pr[c]*u-Fr[c])*a;r=i*r*(1+Ur[0]*(1+Ur[1]*(1+Ur[2]*(1+Ur[3]*(1+Ur[4]*(1+Ur[5]*(1+Ur[6]*(1+Ur[7])))))))),o*=1+Dr[0]*(1+Dr[1]*(1+Dr[2]*(1+Dr[3]*(1+Dr[4]*(1+Dr[5]*(1+Dr[6]*(1+Dr[7]))))))),o=cr.multiplyByScalar(e,o,br);return cr.multiplyByScalar(t,r,n),cr.add(o,n,n)},cr.fastSquad=function(e,t,r,n,i,o){t=cr.fastSlerp(e,t,i,Mr),n=cr.fastSlerp(r,n,i,vr);return cr.fastSlerp(t,n,2*i*(1-i),o)},cr.equals=function(e,t){return e===t||C(e)&&C(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},cr.equalsEpsilon=function(e,t,r){return r=M(r,0),e===t||C(e)&&C(t)&&Math.abs(e.x-t.x)<=r&&Math.abs(e.y-t.y)<=r&&Math.abs(e.z-t.z)<=r&&Math.abs(e.w-t.w)<=r},cr.ZERO=Object.freeze(new cr(0,0,0,0)),cr.IDENTITY=Object.freeze(new cr(0,0,0,1)),cr.prototype.clone=function(e){return cr.clone(this,e)},cr.prototype.equals=function(e){return cr.equals(this,e)},cr.prototype.equalsEpsilon=function(e,t){return cr.equalsEpsilon(this,e,t)},cr.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},cr.from_euler=function(e,t,r,n){var i=Math.cos(.5*t),o=Math.cos(.5*r),a=Math.cos(.5*e),s=Math.sin(.5*t),u=Math.sin(.5*r),c=Math.sin(.5*e),t=i*o*a-s*u*c,r=s*u*a+i*o*c,e=s*o*a+i*u*c,c=i*u*a-s*o*c;return C(n)?(n.x=r,n.y=e,n.z=c,n.w=t,n):n=new cr(r,e,c,t)},cr.to_euler=function(e,t){C(t)||(t=new G);var r=e.w,n=e.x,i=e.y,o=e.z,a=n*n,s=i*i,u=o*o,e=n*i+o*r;return.499<e?(t.x=0,t.y=2*Math.atan2(n,r),t.z=q.PI_OVER_TWO):e<-.499?(t.x=0,t.y=2*-Math.atan2(n,r),t.z=-q.PI_OVER_TWO):(t.y=Math.atan2(2*i*r-2*n*o,1-2*s-2*u),t.z=Math.asin(2*n*i+2*o*r),t.x=Math.atan2(2*n*r-2*i*o,1-2*a-2*u)),t},qr.fromQuaternion=function(e,t){C(t)||(t=new qr);var r=2*(e.w*e.y-e.z*e.x),n=1-2*(e.x*e.x+e.y*e.y),i=2*(e.w*e.x+e.y*e.z),o=1-2*(e.y*e.y+e.z*e.z),e=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(e,o),t.roll=Math.atan2(i,n),t.pitch=-q.asinClamped(r),t},qr.fromDegrees=function(e,t,r,n){return(n=!C(n)?new qr:n).heading=e*q.RADIANS_PER_DEGREE,n.pitch=t*q.RADIANS_PER_DEGREE,n.roll=r*q.RADIANS_PER_DEGREE,n},qr.clone=function(e,t){if(C(e))return C(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new qr(e.heading,e.pitch,e.roll)},qr.equals=function(e,t){return e===t||C(e)&&C(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll},qr.equalsEpsilon=function(e,t,r,n){return e===t||C(e)&&C(t)&&q.equalsEpsilon(e.heading,t.heading,r,n)&&q.equalsEpsilon(e.pitch,t.pitch,r,n)&&q.equalsEpsilon(e.roll,t.roll,r,n)},qr.prototype.clone=function(e){return qr.clone(this,e)},qr.prototype.equals=function(e){return qr.equals(this,e)},qr.prototype.equalsEpsilon=function(e,t,r){return qr.equalsEpsilon(this,e,t,r)},qr.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var Xr=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),Yr=Object.freeze({UTC:0,TAI:1}),kr=new Hr,Kr=[31,28,31,30,31,30,31,31,30,31,30,31];function Zr(e,t){return fn.compare(e.julianDate,t.julianDate)}var Jr=new Vr;function Qr(e){Jr.julianDate=e;var t=fn.leapSeconds,r=Gr(t,Jr,Zr),n=t[r=(r=r<0?~r:r)>=t.length?t.length-1:r].offset;0<r&&n<fn.secondsDifference(t[r].julianDate,e)&&(n=t[--r].offset),fn.addSeconds(e,n,e)}function $r(e,t){Jr.julianDate=e;var r=fn.leapSeconds,n=Gr(r,Jr,Zr);if(0===(n=n<0?~n:n))return fn.addSeconds(e,-r[0].offset,t);if(n>=r.length)return fn.addSeconds(e,-r[n-1].offset,t);var i=fn.secondsDifference(r[n].julianDate,e);return 0===i?fn.addSeconds(e,-r[n].offset,t):i<=1?void 0:fn.addSeconds(e,-r[--n].offset,t)}function en(e,t,r){var n=t/Xr.SECONDS_PER_DAY|0;return e+=n,(t-=Xr.SECONDS_PER_DAY*n)<0&&(e--,t+=Xr.SECONDS_PER_DAY),r.dayNumber=e,r.secondsOfDay=t,r}function tn(e,t,r,n,i,o,a){var s=(t-14)/12|0,e=e+4800+s,r=(1461*e/4|0)+(367*(t-2-12*s)/12|0)-(3*((e+100)/100|0)/4|0)+r-32075;(n-=12)<0&&(n+=24);a=o+(n*Xr.SECONDS_PER_HOUR+i*Xr.SECONDS_PER_MINUTE+a*Xr.SECONDS_PER_MILLISECOND);return 43200<=a&&--r,[r,a]}var rn=/^(\d{4})$/,nn=/^(\d{4})-(\d{2})$/,on=/^(\d{4})-?(\d{3})$/,an=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,sn=/^(\d{4})-?(\d{2})-?(\d{2})$/,pt=/([Z+\-])?(\d{2})?:?(\d{2})?$/,un=/^(\d{2})(\.\d+)?/.source+pt.source,cn=/^(\d{2}):?(\d{2})(\.\d+)?/.source+pt.source,ln=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+pt.source;function fn(e,t,r){this.dayNumber=void 0,this.secondsOfDay=void 0,e=M(e,0),t=M(t,0),r=M(r,Yr.UTC);var n=0|e;en(n,t+=(e-n)*Xr.SECONDS_PER_DAY,this),r===Yr.UTC&&Qr(this)}fn.fromGregorianDate=function(e,t){e=tn(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return C(t)?(en(e[0],e[1],t),Qr(t),t):new fn(e[0],e[1],Yr.UTC)},fn.fromDate=function(e,t){e=tn(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return C(t)?(en(e[0],e[1],t),Qr(t),t):new fn(e[0],e[1],Yr.UTC)},fn.fromIso8601=function(e,t){var r,n,i,o,a,s=(e=e.replace(",",".")).split("T"),u=1,c=1,l=0,f=0,h=0,m=0,d=s[0],e=s[1];if(null!==(s=d.match(sn))?(i=+s[1],u=+s[2],c=+s[3]):null!==(s=d.match(nn))?(i=+s[1],u=+s[2]):null!==(s=d.match(rn))?i=+s[1]:(null!==(s=d.match(on))?(i=+s[1],o=+s[2],n=Wr(i)):null!==(s=d.match(an))&&(i=+s[1],o=7*+s[2]+(+s[3]||0)-new Date(Date.UTC(i,0,4)).getUTCDay()-3),(r=new Date(Date.UTC(i,0,1))).setUTCDate(o),u=r.getUTCMonth()+1,c=r.getUTCDate()),n=Wr(i),C(e)){null!==(s=e.match(ln))?(l=+s[1],f=+s[2],h=+s[3],m=1e3*+(s[4]||0),a=5):null!==(s=e.match(cn))?(l=+s[1],f=+s[2],h=60*+(s[3]||0),a=4):null!==(s=e.match(un))&&(l=+s[1],f=60*+(s[2]||0),a=3);var p=s[a],E=+s[a+1],_=+(s[a+2]||0);switch(p){case"+":l-=E,f-=_;break;case"-":l+=E,f+=_;break;case"Z":break;default:f+=new Date(Date.UTC(i,u-1,c,l,f)).getTimezoneOffset()}}p=60===h;for(p&&h--;60<=f;)f-=60,l++;for(;24<=l;)l-=24,c++;for(r=n&&2===u?29:Kr[u-1];r<c;)c-=r,12<++u&&(u-=12,i++),r=n&&2===u?29:Kr[u-1];for(;f<0;)f+=60,l--;for(;l<0;)l+=24,c--;for(;c<1;)--u<1&&(u+=12,i--),c+=r=n&&2===u?29:Kr[u-1];m=tn(i,u,c,l,f,h,m);return C(t)?(en(m[0],m[1],t),Qr(t)):t=new fn(m[0],m[1],Yr.UTC),p&&fn.addSeconds(t,1,t),t},fn.now=function(e){return fn.fromDate(new Date,e)};var hn=new fn(0,0,Yr.TAI);function mn(e,t){if(null===e||"object"!=typeof e)return e;t=M(t,!1);var r,n,i=new e.constructor;for(r in e)e.hasOwnProperty(r)&&(n=e[r],t&&(n=mn(n,t)),i[r]=n);return i}function dn(e,t,r){r=M(r,!1);var n,i,o,a={},s=C(e),u=C(t);if(s)for(n in e)e.hasOwnProperty(n)&&(i=e[n],u&&r&&"object"==typeof i&&t.hasOwnProperty(n)?(o=t[n],a[n]="object"==typeof o?dn(i,o,r):i):a[n]=i);if(u)for(n in t)t.hasOwnProperty(n)&&!a.hasOwnProperty(n)&&(o=t[n],a[n]=o);return a}function pn(e){e instanceof pn?(this.scheme=e.scheme,this.authority=e.authority,this.path=e.path,this.query=e.query,this.fragment=e.fragment):e&&(0<e.indexOf("/sde?/")&&(e=e.replace("/sde?/","/sde/")),e=En.exec(e),this.scheme=e[1],this.authority=e[2],this.path=e[3],this.query=e[4],this.fragment=e[5],-1<this.path.indexOf("/sde/")&&(this.path=this.path.replace("/sde/","/sde?/")))}fn.toGregorianDate=function(e,t){var r=!1,n=$r(e,hn);C(n)||(fn.addSeconds(e,-1,hn),n=$r(hn,hn),r=!0);var i=n.dayNumber,o=n.secondsOfDay;43200<=o&&(i+=1);var a=i+68569|0,s=4*a/146097|0,u=4e3*(1+(a=a-((146097*s+3)/4|0)|0))/1461001|0,e=80*(a=a-(1461*u/4|0)+31|0)/2447|0,n=a-(2447*e/80|0)|0,i=2+e-12*(a=e/11|0)|0,e=100*(s-49)+u+a|0,s=o/Xr.SECONDS_PER_HOUR|0,u=o-s*Xr.SECONDS_PER_HOUR,a=u/Xr.SECONDS_PER_MINUTE|0,o=0|(u-=a*Xr.SECONDS_PER_MINUTE),u=(u-o)/Xr.SECONDS_PER_MILLISECOND;return 23<(s+=12)&&(s-=24),r&&(o+=1),C(t)?(t.year=e,t.month=i,t.day=n,t.hour=s,t.minute=a,t.second=o,t.millisecond=u,t.isLeapSecond=r,t):new Hr(e,i,n,s,a,o,u,r)},fn.toDate=function(e){var t=fn.toGregorianDate(e,kr),e=t.second;return t.isLeapSecond&&--e,new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,e,t.millisecond))},fn.toIso8601=function(e,t){var r=fn.toGregorianDate(e,kr),n=r.year,i=r.month,o=r.day,a=r.hour,s=r.minute,e=r.second,r=r.millisecond;return 1e4===n&&1===i&&1===o&&0===a&&0===s&&0===e&&0===r&&(n=9999,i=12,o=31,a=24),C(t)||0===r?C(t)&&0!==t?jr("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",n,i,o,a,s,e,(.01*r).toFixed(t).replace(".","").slice(0,t)):jr("%04d-%02d-%02dT%02d:%02d:%02dZ",n,i,o,a,s,e):jr("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",n,i,o,a,s,e,(.01*r).toString().replace(".",""))},fn.clone=function(e,t){if(C(e))return C(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new fn(e.dayNumber,e.secondsOfDay,Yr.TAI)},fn.compare=function(e,t){var r=e.dayNumber-t.dayNumber;return 0!=r?r:e.secondsOfDay-t.secondsOfDay},fn.equals=function(e,t){return e===t||C(e)&&C(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay},fn.equalsEpsilon=function(e,t,r){return r=M(r,0),e===t||C(e)&&C(t)&&Math.abs(fn.secondsDifference(e,t))<=r},fn.totalDays=function(e){return e.dayNumber+e.secondsOfDay/Xr.SECONDS_PER_DAY},fn.secondsDifference=function(e,t){return(e.dayNumber-t.dayNumber)*Xr.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)},fn.daysDifference=function(e,t){return e.dayNumber-t.dayNumber+(e.secondsOfDay-t.secondsOfDay)/Xr.SECONDS_PER_DAY},fn.computeTaiMinusUtc=function(e){Jr.julianDate=e;var t=fn.leapSeconds,e=Gr(t,Jr,Zr);return e<0&&(e=~e,--e<0&&(e=0)),t[e].offset},fn.addSeconds=function(e,t,r){return en(e.dayNumber,e.secondsOfDay+t,r)},fn.addMinutes=function(e,t,r){t=e.secondsOfDay+t*Xr.SECONDS_PER_MINUTE;return en(e.dayNumber,t,r)},fn.addHours=function(e,t,r){t=e.secondsOfDay+t*Xr.SECONDS_PER_HOUR;return en(e.dayNumber,t,r)},fn.addDays=function(e,t,r){return en(e.dayNumber+t,e.secondsOfDay,r)},fn.lessThan=function(e,t){return fn.compare(e,t)<0},fn.lessThanOrEquals=function(e,t){return fn.compare(e,t)<=0},fn.greaterThan=function(e,t){return 0<fn.compare(e,t)},fn.greaterThanOrEquals=function(e,t){return 0<=fn.compare(e,t)},fn.prototype.clone=function(e){return fn.clone(this,e)},fn.prototype.equals=function(e){return fn.equals(this,e)},fn.prototype.equalsEpsilon=function(e,t){return fn.equalsEpsilon(this,e,t)},fn.prototype.toString=function(){return fn.toIso8601(this)},fn.leapSeconds=[new Vr(new fn(2441317,43210,Yr.TAI),10),new Vr(new fn(2441499,43211,Yr.TAI),11),new Vr(new fn(2441683,43212,Yr.TAI),12),new Vr(new fn(2442048,43213,Yr.TAI),13),new Vr(new fn(2442413,43214,Yr.TAI),14),new Vr(new fn(2442778,43215,Yr.TAI),15),new Vr(new fn(2443144,43216,Yr.TAI),16),new Vr(new fn(2443509,43217,Yr.TAI),17),new Vr(new fn(2443874,43218,Yr.TAI),18),new Vr(new fn(2444239,43219,Yr.TAI),19),new Vr(new fn(2444786,43220,Yr.TAI),20),new Vr(new fn(2445151,43221,Yr.TAI),21),new Vr(new fn(2445516,43222,Yr.TAI),22),new Vr(new fn(2446247,43223,Yr.TAI),23),new Vr(new fn(2447161,43224,Yr.TAI),24),new Vr(new fn(2447892,43225,Yr.TAI),25),new Vr(new fn(2448257,43226,Yr.TAI),26),new Vr(new fn(2448804,43227,Yr.TAI),27),new Vr(new fn(2449169,43228,Yr.TAI),28),new Vr(new fn(2449534,43229,Yr.TAI),29),new Vr(new fn(2450083,43230,Yr.TAI),30),new Vr(new fn(2450630,43231,Yr.TAI),31),new Vr(new fn(2451179,43232,Yr.TAI),32),new Vr(new fn(2453736,43233,Yr.TAI),33),new Vr(new fn(2454832,43234,Yr.TAI),34),new Vr(new fn(2456109,43235,Yr.TAI),35),new Vr(new fn(2457204,43236,Yr.TAI),36),new Vr(new fn(2457754,43237,Yr.TAI),37)],pn.prototype.scheme=null,pn.prototype.authority=null,pn.prototype.path="",pn.prototype.query=null,pn.prototype.fragment=null;var En=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$");pn.prototype.getScheme=function(){return this.scheme},pn.prototype.getAuthority=function(){return this.authority},pn.prototype.getPath=function(){return this.path},pn.prototype.getQuery=function(){return this.query},pn.prototype.getFragment=function(){return this.fragment},pn.prototype.isAbsolute=function(){return!!this.scheme&&!this.fragment},pn.prototype.isSameDocumentAs=function(e){return e.scheme==this.scheme&&e.authority==this.authority&&e.path==this.path&&e.query==this.query},pn.prototype.equals=function(e){return this.isSameDocumentAs(e)&&e.fragment==this.fragment},pn.prototype.normalize=function(){this.removeDotSegments(),this.scheme&&(this.scheme=this.scheme.toLowerCase()),this.authority&&(this.authority=this.authority.replace(Tn,Rn).replace(_n,gn)),this.path&&(this.path=this.path.replace(_n,gn)),this.query&&(this.query=this.query.replace(_n,gn)),this.fragment&&(this.fragment=this.fragment.replace(_n,gn))};var _n=/%[0-9a-z]{2}/gi,yn=/[a-zA-Z0-9\-\._~]/,Tn=/(.*@)?([^@:]*)(:.*)?/;function gn(e){var t=unescape(e);return yn.test(t)?t:e.toUpperCase()}function Rn(e,t,r,n){return(t||"")+r.toLowerCase()+(n||"")}function An(e,t){var r;return"undefined"!=typeof document&&(r=document),An._implementation(e,t,r)}pn.prototype.resolve=function(e){var t=new pn;return this.scheme?(t.scheme=this.scheme,t.authority=this.authority,t.path=this.path,t.query=this.query):(t.scheme=e.scheme,this.authority?(t.authority=this.authority,t.path=this.path,t.query=this.query):(t.authority=e.authority,""==this.path?(t.path=e.path,t.query=this.query||e.query):("/"==this.path.charAt(0)?t.path=this.path:e.authority&&""==e.path?t.path="/"+this.path:t.path=e.path.substring(0,e.path.lastIndexOf("/")+1)+this.path,t.removeDotSegments(),t.query=this.query))),t.fragment=this.fragment,t},pn.prototype.removeDotSegments=function(){var e,t=this.path.split("/"),r=[],n=""==t[0];for(n&&t.shift(),""==t[0]&&t.shift();t.length;)".."==(e=t.shift())?r.pop():"."!=e&&r.push(e);"."!=e&&".."!=e||r.push(""),n&&r.unshift(""),this.path=r.join("/")},pn.prototype.toString=function(){var e="";return this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+this.authority),e+=this.path,this.query&&(e+="?"+this.query),this.fragment&&(e+="#"+this.fragment),e},An._implementation=function(e,t,r){if(!C(t)){if(void 0===r)return e;t=M(r.baseURI,r.location.href)}t=new pn(t);return new pn(e).resolve(t).toString()};var Sn,On=/^blob:/i;function In(e){return On.test(e)}var wn=/^data:/i;function Nn(e){return wn.test(e)}var xn,Cn,Mn={},vn={};function bn(e,t,r){return r<0&&(r+=1),1<r&&--r,6*r<1?e+6*(t-e)*r:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function Pn(e,t,r,n){this.red=M(e,1),this.green=M(t,1),this.blue=M(r,1),this.alpha=M(n,1)}Mn.add=function(e,t){t=e.toLowerCase()+":"+t;C(vn[t])||(vn[t]=!0)},Mn.remove=function(e,t){t=e.toLowerCase()+":"+t;C(vn[t])&&delete vn[t]},Mn.contains=function(e){e=function(e){var t=new pn(e);if(t.normalize(),C(e=t.getAuthority())){if(-1===(e=-1!==e.indexOf("@")?e.split("@")[1]:e).indexOf(":")){t=t.getScheme();if("http"===(t=!C(t)?(t=window.location.protocol).substring(0,t.length-1):t))e+=":80";else{if("https"!==t)return;e+=":443"}}return e}}(e);return!(!C(e)||!C(vn[e]))},Mn.clear=function(){vn={}},Pn.fromCartesian4=function(e,t){return C(t)?(t.red=e.x,t.green=e.y,t.blue=e.z,t.alpha=e.w,t):new Pn(e.x,e.y,e.z,e.w)},Pn.fromBytes=function(e,t,r,n,i){return e=Pn.byteToFloat(M(e,255)),t=Pn.byteToFloat(M(t,255)),r=Pn.byteToFloat(M(r,255)),n=Pn.byteToFloat(M(n,255)),C(i)?(i.red=e,i.green=t,i.blue=r,i.alpha=n,i):new Pn(e,t,r,n)},Pn.fromAlpha=function(e,t,r){return C(r)?(r.red=e.red,r.green=e.green,r.blue=e.blue,r.alpha=t,r):new Pn(e.red,e.green,e.blue,t)},ur.supportsTypedArrays()&&(Ia=new ArrayBuffer(4),xn=new Uint32Array(Ia),Cn=new Uint8Array(Ia)),Pn.fromRgba=function(e,t){return xn[0]=e,Pn.fromBytes(Cn[0],Cn[1],Cn[2],Cn[3],t)},Pn.fromArgb=function(e,t){return xn[0]=e,Pn.fromBytes(Cn[2],Cn[1],Cn[0],Cn[3],t)},Pn.fromMapserver=function(e,t){return xn[0]=e,Pn.fromBytes(Cn[3],Cn[2],Cn[1],Cn[0],t)},Pn.fromHsl=function(e,t,r,n,i){e=M(e,0)%1,t=M(t,0),r=M(r,0),n=M(n,1);var o=r,a=r,s=r;return 0!==t&&(o=bn(t=2*r-(r=r<.5?r*(1+t):r+t-r*t),r,e+1/3),a=bn(t,r,e),s=bn(t,r,e-1/3)),C(i)?(i.red=o,i.green=a,i.blue=s,i.alpha=n,i):new Pn(o,a,s,n)},Pn.fromRandom=function(e,t){var r=(e=M(e,M.EMPTY_OBJECT)).red;C(r)||(n=M(e.minimumRed,0),i=M(e.maximumRed,1),r=n+q.nextRandomNumber()*(i-n));var n,i=e.green;C(i)||(o=M(e.minimumGreen,0),n=M(e.maximumGreen,1),i=o+q.nextRandomNumber()*(n-o));var o=e.blue;C(o)||(a=M(e.minimumBlue,0),s=M(e.maximumBlue,1),o=a+q.nextRandomNumber()*(s-a));var a,s=e.alpha;return C(s)||(a=M(e.minimumAlpha,0),e=M(e.maximumAlpha,1),s=a+q.nextRandomNumber()*(e-a)),C(t)?(t.red=r,t.green=i,t.blue=o,t.alpha=s,t):new Pn(r,i,o,s)};var Fn=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,Un=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,Dn=/^rgba?\(\s*([0-9.]+%?)\s*,\s*([0-9.]+%?)\s*,\s*([0-9.]+%?)(?:\s*,\s*([0-9.]+))?\s*\)$/i,Ln=/^hsla?\(\s*([0-9.]+)\s*,\s*([0-9.]+%)\s*,\s*([0-9.]+%)(?:\s*,\s*([0-9.]+))?\s*\)$/i;Pn.fromCssColorString=function(e,t){C(t)||(t=new Pn);var r=Pn[(e=e.replace(/\s/g,"")).toUpperCase()];if(C(r))return Pn.clone(r,t),t;r=Fn.exec(e);return null!==r?(t.red=parseInt(r[1],16)/15,t.green=parseInt(r[2],16)/15,t.blue=parseInt(r[3],16)/15,t.alpha=parseInt(M(r[4],"f"),16)/15,t):null!==(r=Un.exec(e))?(t.red=parseInt(r[1],16)/255,t.green=parseInt(r[2],16)/255,t.blue=parseInt(r[3],16)/255,t.alpha=parseInt(M(r[4],"ff"),16)/255,t):null!==(r=Dn.exec(e))?(t.red=parseFloat(r[1])/("%"===r[1].substr(-1)?100:255),t.green=parseFloat(r[2])/("%"===r[2].substr(-1)?100:255),t.blue=parseFloat(r[3])/("%"===r[3].substr(-1)?100:255),t.alpha=parseFloat(M(r[4],"1.0")),t):null!==(r=Ln.exec(e))?Pn.fromHsl(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,parseFloat(M(r[4],"1.0")),t):t=void 0},Pn.packedLength=4,Pn.pack=function(e,t,r){return r=M(r,0),t[r++]=e.red,t[r++]=e.green,t[r++]=e.blue,t[r]=e.alpha,t},Pn.unpack=function(e,t,r){return t=M(t,0),(r=!C(r)?new Pn:r).red=e[t++],r.green=e[t++],r.blue=e[t++],r.alpha=e[t],r},Pn.byteToFloat=function(e){return e/255},Pn.floatToByte=function(e){return 1===e?255:256*e|0},Pn.clone=function(e,t){if(C(e))return C(t)?(t.red=e.red,t.green=e.green,t.blue=e.blue,t.alpha=e.alpha,t):new Pn(e.red,e.green,e.blue,e.alpha)},Pn.equals=function(e,t){return e===t||C(e)&&C(t)&&e.red===t.red&&e.green===t.green&&e.blue===t.blue&&e.alpha===t.alpha},Pn.equalsArray=function(e,t,r){return e.red===t[r]&&e.green===t[r+1]&&e.blue===t[r+2]&&e.alpha===t[r+3]},Pn.prototype.clone=function(e){return Pn.clone(this,e)},Pn.prototype.equals=function(e){return Pn.equals(this,e)},Pn.prototype.equalsEpsilon=function(e,t){return this===e||C(e)&&Math.abs(this.red-e.red)<=t&&Math.abs(this.green-e.green)<=t&&Math.abs(this.blue-e.blue)<=t&&Math.abs(this.alpha-e.alpha)<=t},Pn.prototype.toString=function(){return"("+this.red+", "+this.green+", "+this.blue+", "+this.alpha+")"},Pn.prototype.toUint16=function(){var e=[];return this.toBytes(e),"0x"+e[3].toString(16)+(e[0]<16?"0":"")+e[0].toString(16)+(e[1]<16?"0":"")+e[1].toString(16)+(e[2]<16?"0":"")+e[2].toString(16)},Pn.prototype.toUint16MapServerString=function(){var e=[];return this.toBytes(e),'"#'+(e[0]<16?"0":"")+e[0].toString(16)+(e[1]<16?"0":"")+e[1].toString(16)+(e[2]<16?"0":"")+e[2].toString(16)+(e[3]<16?"0":"")+e[3].toString(16)+'"'},Pn.prototype.toCssColorString=function(){var e=Pn.floatToByte(this.red),t=Pn.floatToByte(this.green),r=Pn.floatToByte(this.blue);return 1===this.alpha?"rgb("+e+","+t+","+r+")":"rgba("+e+","+t+","+r+","+this.alpha+")"},Pn.prototype.toCssHexString=function(){var e=Pn.floatToByte(this.red).toString(16);e.length<2&&(e="0"+e);var t=Pn.floatToByte(this.green).toString(16);t.length<2&&(t="0"+t);var r=Pn.floatToByte(this.blue).toString(16);if(r.length<2&&(r="0"+r),this.alpha<1){var n=Pn.floatToByte(this.alpha).toString(16);return"#"+e+t+r+(n=n.length<2?"0"+n:n)}return"#"+e+t+r},Pn.prototype.toBytes=function(e){var t=Pn.floatToByte(this.red),r=Pn.floatToByte(this.green),n=Pn.floatToByte(this.blue),i=Pn.floatToByte(this.alpha);return C(e)?(e[0]=t,e[1]=r,e[2]=n,e[3]=i,e):[t,r,n,i]},Pn.prototype.toRgba=function(){return Cn[0]=Pn.floatToByte(this.red),Cn[1]=Pn.floatToByte(this.green),Cn[2]=Pn.floatToByte(this.blue),Cn[3]=Pn.floatToByte(this.alpha),xn[0]},Pn.prototype.toArgb=function(){return Cn[3]=Pn.floatToByte(this.alpha),Cn[2]=Pn.floatToByte(this.red),Cn[1]=Pn.floatToByte(this.green),Cn[0]=Pn.floatToByte(this.blue),xn[0]},Pn.prototype.brighten=function(e,t){return t.red=1-(1-this.red)*(e=1-e),t.green=1-(1-this.green)*e,t.blue=1-(1-this.blue)*e,t.alpha=this.alpha,t},Pn.prototype.darken=function(e,t){return t.red=this.red*(e=1-e),t.green=this.green*e,t.blue=this.blue*e,t.alpha=this.alpha,t},Pn.prototype.withAlpha=function(e,t){return Pn.fromAlpha(this,e,t)},Pn.add=function(e,t,r){return r.red=e.red+t.red,r.green=e.green+t.green,r.blue=e.blue+t.blue,r.alpha=e.alpha+t.alpha,r},Pn.subtract=function(e,t,r){return r.red=e.red-t.red,r.green=e.green-t.green,r.blue=e.blue-t.blue,r.alpha=e.alpha-t.alpha,r},Pn.multiply=function(e,t,r){return r.red=e.red*t.red,r.green=e.green*t.green,r.blue=e.blue*t.blue,r.alpha=e.alpha*t.alpha,r},Pn.divide=function(e,t,r){return r.red=e.red/t.red,r.green=e.green/t.green,r.blue=e.blue/t.blue,r.alpha=e.alpha/t.alpha,r},Pn.mod=function(e,t,r){return r.red=e.red%t.red,r.green=e.green%t.green,r.blue=e.blue%t.blue,r.alpha=e.alpha%t.alpha,r},Pn.lerp=function(e,t,r,n){return n.red=q.lerp(e.red,t.red,r),n.green=q.lerp(e.green,t.green,r),n.blue=q.lerp(e.blue,t.blue,r),n.alpha=q.lerp(e.alpha,t.alpha,r),n},Pn.multiplyByScalar=function(e,t,r){return r.red=e.red*t,r.green=e.green*t,r.blue=e.blue*t,r.alpha=e.alpha*t,r},Pn.divideByScalar=function(e,t,r){return r.red=e.red/t,r.green=e.green/t,r.blue=e.blue/t,r.alpha=e.alpha/t,r},Pn.ALICEBLUE=Object.freeze(Pn.fromCssColorString("#F0F8FF")),Pn.ANTIQUEWHITE=Object.freeze(Pn.fromCssColorString("#FAEBD7")),Pn.AQUA=Object.freeze(Pn.fromCssColorString("#00FFFF")),Pn.AQUAMARINE=Object.freeze(Pn.fromCssColorString("#7FFFD4")),Pn.AZURE=Object.freeze(Pn.fromCssColorString("#F0FFFF")),Pn.BEIGE=Object.freeze(Pn.fromCssColorString("#F5F5DC")),Pn.BISQUE=Object.freeze(Pn.fromCssColorString("#FFE4C4")),Pn.BLACK=Object.freeze(Pn.fromCssColorString("#000000")),Pn.BLANCHEDALMOND=Object.freeze(Pn.fromCssColorString("#FFEBCD")),Pn.BLUE=Object.freeze(Pn.fromCssColorString("#0000FF")),Pn.BLUEVIOLET=Object.freeze(Pn.fromCssColorString("#8A2BE2")),Pn.BROWN=Object.freeze(Pn.fromCssColorString("#A52A2A")),Pn.BURLYWOOD=Object.freeze(Pn.fromCssColorString("#DEB887")),Pn.CADETBLUE=Object.freeze(Pn.fromCssColorString("#5F9EA0")),Pn.CHARTREUSE=Object.freeze(Pn.fromCssColorString("#7FFF00")),Pn.CHOCOLATE=Object.freeze(Pn.fromCssColorString("#D2691E")),Pn.CORAL=Object.freeze(Pn.fromCssColorString("#FF7F50")),Pn.CORNFLOWERBLUE=Object.freeze(Pn.fromCssColorString("#6495ED")),Pn.CORNSILK=Object.freeze(Pn.fromCssColorString("#FFF8DC")),Pn.CRIMSON=Object.freeze(Pn.fromCssColorString("#DC143C")),Pn.CYAN=Object.freeze(Pn.fromCssColorString("#00FFFF")),Pn.DARKBLUE=Object.freeze(Pn.fromCssColorString("#00008B")),Pn.DARKCYAN=Object.freeze(Pn.fromCssColorString("#008B8B")),Pn.DARKGOLDENROD=Object.freeze(Pn.fromCssColorString("#B8860B")),Pn.DARKGRAY=Object.freeze(Pn.fromCssColorString("#A9A9A9")),Pn.DARKGREEN=Object.freeze(Pn.fromCssColorString("#006400")),Pn.DARKGREY=Pn.DARKGRAY,Pn.DARKKHAKI=Object.freeze(Pn.fromCssColorString("#BDB76B")),Pn.DARKMAGENTA=Object.freeze(Pn.fromCssColorString("#8B008B")),Pn.DARKOLIVEGREEN=Object.freeze(Pn.fromCssColorString("#556B2F")),Pn.DARKORANGE=Object.freeze(Pn.fromCssColorString("#FF8C00")),Pn.DARKORCHID=Object.freeze(Pn.fromCssColorString("#9932CC")),Pn.DARKRED=Object.freeze(Pn.fromCssColorString("#8B0000")),Pn.DARKSALMON=Object.freeze(Pn.fromCssColorString("#E9967A")),Pn.DARKSEAGREEN=Object.freeze(Pn.fromCssColorString("#8FBC8F")),Pn.DARKSLATEBLUE=Object.freeze(Pn.fromCssColorString("#483D8B")),Pn.DARKSLATEGRAY=Object.freeze(Pn.fromCssColorString("#2F4F4F")),Pn.DARKSLATEGREY=Pn.DARKSLATEGRAY,Pn.DARKTURQUOISE=Object.freeze(Pn.fromCssColorString("#00CED1")),Pn.DARKVIOLET=Object.freeze(Pn.fromCssColorString("#9400D3")),Pn.DEEPPINK=Object.freeze(Pn.fromCssColorString("#FF1493")),Pn.DEEPSKYBLUE=Object.freeze(Pn.fromCssColorString("#00BFFF")),Pn.DIMGRAY=Object.freeze(Pn.fromCssColorString("#696969")),Pn.DIMGREY=Pn.DIMGRAY,Pn.DODGERBLUE=Object.freeze(Pn.fromCssColorString("#1E90FF")),Pn.FIREBRICK=Object.freeze(Pn.fromCssColorString("#B22222")),Pn.FLORALWHITE=Object.freeze(Pn.fromCssColorString("#FFFAF0")),Pn.FORESTGREEN=Object.freeze(Pn.fromCssColorString("#228B22")),Pn.FUCHSIA=Object.freeze(Pn.fromCssColorString("#FF00FF")),Pn.GAINSBORO=Object.freeze(Pn.fromCssColorString("#DCDCDC")),Pn.GHOSTWHITE=Object.freeze(Pn.fromCssColorString("#F8F8FF")),Pn.GOLD=Object.freeze(Pn.fromCssColorString("#FFD700")),Pn.GOLDENROD=Object.freeze(Pn.fromCssColorString("#DAA520")),Pn.GRAY=Object.freeze(Pn.fromCssColorString("#808080")),Pn.GREEN=Object.freeze(Pn.fromCssColorString("#008000")),Pn.GREENYELLOW=Object.freeze(Pn.fromCssColorString("#ADFF2F")),Pn.GREY=Pn.GRAY,Pn.HONEYDEW=Object.freeze(Pn.fromCssColorString("#F0FFF0")),Pn.HOTPINK=Object.freeze(Pn.fromCssColorString("#FF69B4")),Pn.INDIANRED=Object.freeze(Pn.fromCssColorString("#CD5C5C")),Pn.INDIGO=Object.freeze(Pn.fromCssColorString("#4B0082")),Pn.IVORY=Object.freeze(Pn.fromCssColorString("#FFFFF0")),Pn.KHAKI=Object.freeze(Pn.fromCssColorString("#F0E68C")),Pn.LAVENDER=Object.freeze(Pn.fromCssColorString("#E6E6FA")),Pn.LAVENDAR_BLUSH=Object.freeze(Pn.fromCssColorString("#FFF0F5")),Pn.LAWNGREEN=Object.freeze(Pn.fromCssColorString("#7CFC00")),Pn.LEMONCHIFFON=Object.freeze(Pn.fromCssColorString("#FFFACD")),Pn.LIGHTBLUE=Object.freeze(Pn.fromCssColorString("#ADD8E6")),Pn.LIGHTCORAL=Object.freeze(Pn.fromCssColorString("#F08080")),Pn.LIGHTCYAN=Object.freeze(Pn.fromCssColorString("#E0FFFF")),Pn.LIGHTGOLDENRODYELLOW=Object.freeze(Pn.fromCssColorString("#FAFAD2")),Pn.LIGHTGRAY=Object.freeze(Pn.fromCssColorString("#D3D3D3")),Pn.LIGHTGREEN=Object.freeze(Pn.fromCssColorString("#90EE90")),Pn.LIGHTGREY=Pn.LIGHTGRAY,Pn.LIGHTPINK=Object.freeze(Pn.fromCssColorString("#FFB6C1")),Pn.LIGHTSEAGREEN=Object.freeze(Pn.fromCssColorString("#20B2AA")),Pn.LIGHTSKYBLUE=Object.freeze(Pn.fromCssColorString("#87CEFA")),Pn.LIGHTSLATEGRAY=Object.freeze(Pn.fromCssColorString("#778899")),Pn.LIGHTSLATEGREY=Pn.LIGHTSLATEGRAY,Pn.LIGHTSTEELBLUE=Object.freeze(Pn.fromCssColorString("#B0C4DE")),Pn.LIGHTYELLOW=Object.freeze(Pn.fromCssColorString("#FFFFE0")),Pn.LIME=Object.freeze(Pn.fromCssColorString("#00FF00")),Pn.LIMEGREEN=Object.freeze(Pn.fromCssColorString("#32CD32")),Pn.LINEN=Object.freeze(Pn.fromCssColorString("#FAF0E6")),Pn.MAGENTA=Object.freeze(Pn.fromCssColorString("#FF00FF")),Pn.MAROON=Object.freeze(Pn.fromCssColorString("#800000")),Pn.MEDIUMAQUAMARINE=Object.freeze(Pn.fromCssColorString("#66CDAA")),Pn.MEDIUMBLUE=Object.freeze(Pn.fromCssColorString("#0000CD")),Pn.MEDIUMORCHID=Object.freeze(Pn.fromCssColorString("#BA55D3")),Pn.MEDIUMPURPLE=Object.freeze(Pn.fromCssColorString("#9370DB")),Pn.MEDIUMSEAGREEN=Object.freeze(Pn.fromCssColorString("#3CB371")),Pn.MEDIUMSLATEBLUE=Object.freeze(Pn.fromCssColorString("#7B68EE")),Pn.MEDIUMSPRINGGREEN=Object.freeze(Pn.fromCssColorString("#00FA9A")),Pn.MEDIUMTURQUOISE=Object.freeze(Pn.fromCssColorString("#48D1CC")),Pn.MEDIUMVIOLETRED=Object.freeze(Pn.fromCssColorString("#C71585")),Pn.MIDNIGHTBLUE=Object.freeze(Pn.fromCssColorString("#191970")),Pn.MINTCREAM=Object.freeze(Pn.fromCssColorString("#F5FFFA")),Pn.MISTYROSE=Object.freeze(Pn.fromCssColorString("#FFE4E1")),Pn.MOCCASIN=Object.freeze(Pn.fromCssColorString("#FFE4B5")),Pn.NAVAJOWHITE=Object.freeze(Pn.fromCssColorString("#FFDEAD")),Pn.NAVY=Object.freeze(Pn.fromCssColorString("#000080")),Pn.OLDLACE=Object.freeze(Pn.fromCssColorString("#FDF5E6")),Pn.OLIVE=Object.freeze(Pn.fromCssColorString("#808000")),Pn.OLIVEDRAB=Object.freeze(Pn.fromCssColorString("#6B8E23")),Pn.ORANGE=Object.freeze(Pn.fromCssColorString("#FFA500")),Pn.ORANGERED=Object.freeze(Pn.fromCssColorString("#FF4500")),Pn.ORCHID=Object.freeze(Pn.fromCssColorString("#DA70D6")),Pn.PALEGOLDENROD=Object.freeze(Pn.fromCssColorString("#EEE8AA")),Pn.PALEGREEN=Object.freeze(Pn.fromCssColorString("#98FB98")),Pn.PALETURQUOISE=Object.freeze(Pn.fromCssColorString("#AFEEEE")),Pn.PALEVIOLETRED=Object.freeze(Pn.fromCssColorString("#DB7093")),Pn.PAPAYAWHIP=Object.freeze(Pn.fromCssColorString("#FFEFD5")),Pn.PEACHPUFF=Object.freeze(Pn.fromCssColorString("#FFDAB9")),Pn.PERU=Object.freeze(Pn.fromCssColorString("#CD853F")),Pn.PINK=Object.freeze(Pn.fromCssColorString("#FFC0CB")),Pn.PLUM=Object.freeze(Pn.fromCssColorString("#DDA0DD")),Pn.POWDERBLUE=Object.freeze(Pn.fromCssColorString("#B0E0E6")),Pn.PURPLE=Object.freeze(Pn.fromCssColorString("#800080")),Pn.RED=Object.freeze(Pn.fromCssColorString("#FF0000")),Pn.ROSYBROWN=Object.freeze(Pn.fromCssColorString("#BC8F8F")),Pn.ROYALBLUE=Object.freeze(Pn.fromCssColorString("#4169E1")),Pn.SADDLEBROWN=Object.freeze(Pn.fromCssColorString("#8B4513")),Pn.SALMON=Object.freeze(Pn.fromCssColorString("#FA8072")),Pn.SANDYBROWN=Object.freeze(Pn.fromCssColorString("#F4A460")),Pn.SEAGREEN=Object.freeze(Pn.fromCssColorString("#2E8B57")),Pn.SEASHELL=Object.freeze(Pn.fromCssColorString("#FFF5EE")),Pn.SIENNA=Object.freeze(Pn.fromCssColorString("#A0522D")),Pn.SILVER=Object.freeze(Pn.fromCssColorString("#C0C0C0")),Pn.SKYBLUE=Object.freeze(Pn.fromCssColorString("#87CEEB")),Pn.SLATEBLUE=Object.freeze(Pn.fromCssColorString("#6A5ACD")),Pn.SLATEGRAY=Object.freeze(Pn.fromCssColorString("#708090")),Pn.SLATEGREY=Pn.SLATEGRAY,Pn.SNOW=Object.freeze(Pn.fromCssColorString("#FFFAFA")),Pn.SPRINGGREEN=Object.freeze(Pn.fromCssColorString("#00FF7F")),Pn.STEELBLUE=Object.freeze(Pn.fromCssColorString("#4682B4")),Pn.TAN=Object.freeze(Pn.fromCssColorString("#D2B48C")),Pn.TEAL=Object.freeze(Pn.fromCssColorString("#008080")),Pn.THISTLE=Object.freeze(Pn.fromCssColorString("#D8BFD8")),Pn.TOMATO=Object.freeze(Pn.fromCssColorString("#FF6347")),Pn.TURQUOISE=Object.freeze(Pn.fromCssColorString("#40E0D0")),Pn.VIOLET=Object.freeze(Pn.fromCssColorString("#EE82EE")),Pn.WHEAT=Object.freeze(Pn.fromCssColorString("#F5DEB3")),Pn.WHITE=Object.freeze(Pn.fromCssColorString("#FFFFFF")),Pn.WHITESMOKE=Object.freeze(Pn.fromCssColorString("#F5F5F5")),Pn.YELLOW=Object.freeze(Pn.fromCssColorString("#FFFF00")),Pn.YELLOWGREEN=Object.freeze(Pn.fromCssColorString("#9ACD32")),Pn.TRANSPARENT=Object.freeze(new Pn(0,0,0,0));var zn={_minimumDisableDepthTestDistance:0,_farToNearRatio:1e3,_logarithmicDepthFarToNearRatio:1e9,_nearToFarDistance2D:175e4,_observerEventWaitTime:500,_terrainExaggeration:1,_max_fps:65,_min_fps:60,_max_frame_time:1e3/60,_create_terrain_num:2,_reclaim_memory_size:1024<<20,_resource_life_time:1e3,_max_range:100,_min_range:8,_drawSpread:.58,_drawDistance:8,_min_observer_height:1,_max_observer_height:12e6,_underground_mode:!1,_camera_height:0,_auxplane_elevation:0,_auxplane_elevation_relative:0,_auxplane_elevation_max:0,_draw_dem_skirt:!0,_auxplane_grid_size:.1,_first_person_height:1.6,_highlight_continue_time:10,_highlight_interval_time:.5,_highlight_color:3372209817,_skyline_valid_distance:1200,_enable_globe_cursor:!0,_default_highlight:!0,_port_list:[],_modelLodRange:{level21:120,level20:450,level19:600},_baseUrlString:"",_server_ip:"",_enable_pack_bim:!1,_waterAnimationSpeed:.004,_waterAmplitude:2};Object.defineProperties(zn,{minimumDisableDepthTestDistance:{get:function(){return zn._minimumDisableDepthTestDistance},set:function(e){zn._minimumDisableDepthTestDistance=e}},farToNearRatio:{get:function(){return zn._farToNearRatio},set:function(e){zn._farToNearRatio=e}},logarithmicDepthFarToNearRatio:{get:function(){return zn._logarithmicDepthFarToNearRatio},set:function(e){zn._logarithmicDepthFarToNearRatio=e}},nearToFarDistance2D:{get:function(){return zn._nearToFarDistance2D},set:function(e){zn._nearToFarDistance2D=e}},observerEventWaitTime:{get:function(){return zn._observerEventWaitTime},set:function(e){zn._observerEventWaitTime=e}},terrainExaggeration:{get:function(){return zn._terrainExaggeration},set:function(e){zn._terrainExaggeration=e}},max_fps:{get:function(){return zn._max_fps},set:function(e){zn._max_fps=e}},min_fps:{get:function(){return zn._min_fps},set:function(e){e!=zn._min_fps&&(zn._min_fps=e,zn._max_frame_time=1e3/e)}},create_terrain_num:{get:function(){return zn._create_terrain_num},set:function(e){zn._create_terrain_num=e}},reclaim_memory_size:{get:function(){return zn._reclaim_memory_size},set:function(e){zn._reclaim_memory_size=e}},resource_life_time:{get:function(){return zn._resource_life_time},set:function(e){zn._resource_life_time=e}},max_range:{get:function(){return zn._max_range},set:function(e){zn._max_range=e}},min_range:{get:function(){return zn._min_range},set:function(e){zn._min_range=e}},drawSpread:{get:function(){return zn._drawSpread},set:function(e){zn._drawSpread=e}},drawDistance:{get:function(){return zn._drawDistance},set:function(e){zn._drawDistance=e}},auxplaneElevationMax:{get:function(){return zn._auxplane_elevation_max},set:function(e){zn._auxplane_elevation_max=e}},minObserverHeight:{get:function(){return zn._min_observer_height},set:function(e){zn._min_observer_height=e}},maxObserverHeight:{get:function(){return zn._max_observer_height},set:function(e){zn._max_observer_height=e}},undergroundMode:{get:function(){return zn._underground_mode},set:function(e){zn._underground_mode=e}},cameraHeight:{get:function(){return zn._camera_height},set:function(e){zn._camera_height=e}},auxplaneElevation:{get:function(){return zn._auxplane_elevation},set:function(e){zn._auxplane_elevation=e}},auxplaneElevationRelative:{get:function(){return zn._auxplane_elevation_relative},set:function(e){zn._auxplane_elevation_relative=e}},drawDemSkirt:{get:function(){return zn._draw_dem_skirt},set:function(e){zn._draw_dem_skirt=e}},auxplaneGridSize:{get:function(){return zn._auxplane_grid_size},set:function(e){zn._auxplane_grid_size=e}},first_person_height:{get:function(){return zn._first_person_height},set:function(e){zn._first_person_height=e}},highlight_continue_time:{get:function(){return zn._highlight_continue_time},set:function(e){zn._highlight_continue_time=e}},highlight_interval_time:{get:function(){return zn._highlight_interval_time},set:function(e){zn._highlight_interval_time=e}},highlight_color:{get:function(){return zn._highlight_color},set:function(e){zn._highlight_color=e}},skyline_valid_distance:{get:function(){return zn._skyline_valid_distance},set:function(e){zn._skyline_valid_distance=e}},enable_globe_cursor:{get:function(){return zn._enable_globe_cursor},set:function(e){zn._enable_globe_cursor=e}},default_highlight:{get:function(){return zn._default_highlight},set:function(e){zn._default_highlight=e}},opaqueFrustumNearOffset:{get:function(){return.9999}},port_list:{get:function(){return zn._port_list}},modelLodRange:{get:function(){return zn._modelLodRange},set:function(e){null!=e&&(zn._modelLodRange.level19=e.level19,zn._modelLodRange.level20=e.level20,zn._modelLodRange.level21=e.level21)}},baseUrlString:{get:function(){return zn._baseUrlString},set:function(e){null!=e&&(zn._baseUrlString=e)}},server_ip:{get:function(){return zn._server_ip},set:function(e){null!=e&&(zn._server_ip=e)}},enable_pack_bim:{get:function(){return zn._enable_pack_bim},set:function(e){null!=e&&(zn._enable_pack_bim=e)}},waterAnimationSpeed:{get:function(){return zn._waterAnimationSpeed},set:function(e){zn._waterAnimationSpeed=e}},waterAmplitude:{get:function(){return zn._waterAmplitude},set:function(e){zn._waterAmplitude=e}}});var Bn=Object.freeze({UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5}),qn=Object.freeze({TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3});function Gn(e){e=M(e,M.EMPTY_OBJECT);var t=M(e.throttleByServer,!1),r=M(e.throttle,!1);this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=M(e.priority,0),this.throttle=r,this.throttleByServer=t,this.type=M(e.type,qn.OTHER),this.serverKey=e.serverKey,this.state=Bn.UNISSUED,this.deferred=void 0,this.cancelled=!1,this.geoServer=M(e.geoServer,!1)}function jn(e){this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function Hn(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function Wn(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}function Vn(e,t){return t-e}Gn.prototype.cancel=function(){this.cancelled=!0},Gn.prototype.clone=function(e){return C(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=this.RequestState.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new Gn(this)},Object.defineProperties(jn.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){var t=this._length;if(e<t){for(var r=this._array,n=e;n<t;++n)r[n]=void 0;this._length=e,r.length=e}this._maximumLength=e}},comparator:{get:function(){return this._comparator}}}),jn.prototype.reserve=function(e){e=M(e,this._length),this._array.length=e},jn.prototype.heapify=function(e){e=M(e,0);for(var t=this._length,r=this._comparator,n=this._array,i=-1,o=!0;o;){var a=2*(e+1),s=a-1,i=s<t&&r(n[s],n[e])<0?s:e;(i=a<t&&r(n[a],n[i])<0?a:i)!==e?(Hn(n,i,e),e=i):o=!1}},jn.prototype.resort=function(){for(var e=this._length,t=Math.ceil(e/2);0<=t;--t)this.heapify(t)},jn.prototype.insert=function(e){var t,r=this._array,n=this._comparator,i=this._maximumLength,o=this._length++;for(o<r.length?r[o]=e:r.push(e);0!==o;){var a=Math.floor((o-1)/2);if(!(n(r[o],r[a])<0))break;Hn(r,o,a),o=a}return C(i)&&this._length>i&&(t=r[i],this._length=i),t},jn.prototype.pop=function(e){if(e=M(e,0),0!==this._length){var t=this._array,r=t[e];return Hn(t,e,--this._length),this.heapify(e),t[this._length]=void 0,r}},Object.defineProperties(Wn.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}}),Wn.prototype.addEventListener=function(e,t){this._listeners.push(e),this._scopes.push(t);var r=this;return function(){r.removeEventListener(e,t)}},Wn.prototype.removeEventListener=function(e,t){for(var r=this._listeners,n=this._scopes,i=-1,o=0;o<r.length;o++)if(r[o]===e&&n[o]===t){i=o;break}return-1!==i&&(this._insideRaiseEvent?(this._toRemove.push(i),r[i]=void 0,n[i]=void 0):(r.splice(i,1),n.splice(i,1)),!0)},Wn.prototype.raiseEvent=function(){this._insideRaiseEvent=!0;for(var e=this._listeners,t=this._scopes,r=e.length,n=0;n<r;n++)C(e[n])&&e[n].apply(t[n],arguments);var i=this._toRemove;if(0<(r=i.length)){for(i.sort(Vn),n=0;n<r;n++){var o=i[n];e.splice(o,1),t.splice(o,1)}i.length=0}this._insideRaiseEvent=!1};var Xn={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},Yn=20,kn=new jn({comparator:function(e,t){return e.priority-t.priority}});kn.maximumLength=Yn,kn.reserve(Yn);var Kn=[],Zn={},Jn="undefined"!=typeof document?new pn(document.location.href):new pn,Qn=new Wn;function $n(){}function ei(e){C(e.priorityFunction)&&(e.priority=e.priorityFunction())}function ti(e){var t=M($n.requestsByServer[e],$n.maximumRequestsPerServer);return Zn[e]<t}function ri(e){return e.state===Bn.UNISSUED&&(e.state=Bn.ISSUED,e.deferred=gt.defer()),e.deferred.promise}function ni(e){var t,r,n=ri(e);return e.state=Bn.ACTIVE,Kn.push(e),++Xn.numberOfActiveRequests,++Xn.numberOfActiveRequestsEver,++Zn[e.serverKey],e.requestFunction().then((r=e,function(e){var t;r.state!==Bn.CANCELLED&&(t=r.deferred,--Xn.numberOfActiveRequests,--Zn[r.serverKey],Qn.raiseEvent(),r.state=Bn.RECEIVED,r.deferred=void 0,t.resolve(e))})).otherwise((t=e,function(e){t.state!==Bn.CANCELLED&&(++Xn.numberOfFailedRequests,--Xn.numberOfActiveRequests,--Zn[t.serverKey],Qn.raiseEvent(e),t.state=Bn.FAILED,t.deferred.reject(e))})),n}function ii(e){var t,r=e.state===Bn.ACTIVE;e.state=Bn.CANCELLED,++Xn.numberOfCancelledRequests,C(e.deferred)&&(t=e.deferred,e.deferred=void 0,t.reject()),r&&(--Xn.numberOfActiveRequests,--Zn[e.serverKey],++Xn.numberOfCancelledActiveRequests),C(e.cancelFunction)&&e.cancelFunction()}function oi(e,t,r){this.statusCode=e,this.response=t,this.responseHeaders=r,"string"==typeof this.responseHeaders&&(this.responseHeaders=function(e){var t={};if(!e)return t;for(var r=e.split("\r\n"),n=0;n<r.length;++n){var i,o=r[n],a=o.indexOf(": ");0<a&&(i=o.substring(0,a),a=o.substring(a+2),t[i]=a)}return t}(this.responseHeaders))}$n.maximumRequests=50,$n.maximumRequestsPerServer=6,$n.requestsByServer={"api.cesium.com:443":18,"assets.cesium.com:443":18},$n.throttleRequests=!0,$n.debugShowStatistics=!1,$n.requestCompletedEvent=Qn,Object.defineProperties($n,{statistics:{get:function(){return Xn}},priorityHeapLength:{get:function(){return Yn},set:function(e){if(e<Yn)for(;kn.length>e;)ii(kn.pop());Yn=e,kn.maximumLength=e,kn.reserve(e)}}}),$n.get_active_request_count=function(){return null==Kn?0:Kn.length},$n.update=function(){for(var e,t=0,r=Kn.length,n=0;n<r;++n)(e=Kn[n]).cancelled&&ii(e),e.state===Bn.ACTIVE?0<t&&(Kn[n-t]=e):++t;Kn.length-=t;var i=kn.internalArray,o=kn.length;for(n=0;n<o;++n)ei(i[n]);kn.resort();for(var a=Math.max($n.maximumRequests-Kn.length,0),s=0;s<a&&0<kn.length;)!(e=kn.pop()).cancelled&&(!e.throttleByServer||ti(e.serverKey))?(ni(e),++s):ii(e);$n.debugShowStatistics&&(0===Xn.numberOfActiveRequests&&0<Xn.lastNumberOfActiveRequests&&(0<Xn.numberOfAttemptedRequests&&(console.log("Number of attempted requests: "+Xn.numberOfAttemptedRequests),Xn.numberOfAttemptedRequests=0),0<Xn.numberOfCancelledRequests&&(console.log("Number of cancelled requests: "+Xn.numberOfCancelledRequests),Xn.numberOfCancelledRequests=0),0<Xn.numberOfCancelledActiveRequests&&(console.log("Number of cancelled active requests: "+Xn.numberOfCancelledActiveRequests),Xn.numberOfCancelledActiveRequests=0),0<Xn.numberOfFailedRequests&&(console.log("Number of failed requests: "+Xn.numberOfFailedRequests),Xn.numberOfFailedRequests=0)),Xn.lastNumberOfActiveRequests=Xn.numberOfActiveRequests)},$n.getServerKey=function(e){var t=new pn(e).resolve(Jn);t.normalize();e=t.authority;return/:/.test(e)||(e=e+":"+("https"===t.scheme?"443":"80")),C(Zn[e])||(Zn[e]=0),e},$n.request=function(e){if(Nn(e.url)||In(e.url))return Qn.raiseEvent(),e.state=Bn.RECEIVED,e.requestFunction();if(++Xn.numberOfAttemptedRequests,C(e.serverKey)||(e.serverKey=$n.getServerKey(e.url)),!$n.throttleRequests||!e.throttleByServer||ti(e.serverKey)){if(!$n.throttleRequests||!e.throttle)return ni(e);if(!(Kn.length>=$n.maximumRequests)){ei(e);var t=kn.insert(e);if(C(t)){if(t===e)return;ii(t)}return ri(e)}}},$n.clearForSpecs=function(){for(;0<kn.length;)ii(kn.pop());for(var e=Kn.length,t=0;t<e;++t)ii(Kn[t]);Kn.length=0,Zn={},Xn.numberOfAttemptedRequests=0,Xn.numberOfActiveRequests=0,Xn.numberOfCancelledRequests=0,Xn.numberOfCancelledActiveRequests=0,Xn.numberOfFailedRequests=0,Xn.numberOfActiveRequestsEver=0,Xn.lastNumberOfActiveRequests=0},$n.numberOfActiveRequestsByServer=function(e){return Zn[e]},$n.requestHeap=kn,oi.prototype.toString=function(){var e="Request has failed.";return C(this.statusCode)&&(e+=" Status Code: "+this.statusCode),e};var ai=function(){try{var e=new XMLHttpRequest;return e.open("GET","#",!0),(e.responseType="blob")===e.responseType}catch(e){return!1}}();function si(e,t,r,n){var i,o=e.query;if(!C(o)||0===o.length)return 1;o=-1===o.indexOf("=")?((i={})[o]=void 0,i):function(e){var t={};if(""===e)return t;for(var r=e.replace(/\+/g,"%20").split(/[&;]/),n=0,i=r.length;n<i;++n){var o=r[n].split("="),a=decodeURIComponent(o[0]),s=C(s=o[1])?decodeURIComponent(s):"",o=t[a];"string"==typeof o?t[a]=[o,s]:Array.isArray(o)?o.push(s):t[a]=s}return t}(o),t._queryParameters=r?fi(o,t._queryParameters,n):o,e.query=void 0}function ui(e,t){var r=t._queryParameters,t=Object.keys(r);1!==t.length||C(r[t[0]])?e.query=function(e){var t,r="";for(t in e)if(e.hasOwnProperty(t)){var n=e[t],i=encodeURIComponent(t)+"=";if(Array.isArray(n))for(var o=0,a=n.length;o<a;++o)r+=i+encodeURIComponent(n[o])+"&";else r+=i+encodeURIComponent(n)+"&"}return r=r.slice(0,-1)}(r):e.query=t[0]}function ci(e,t){return C(e)?C(e.clone)?e.clone():mn(e):t}function li(e){e.state=Bn.UNISSUED,e.deferred=void 0}function fi(e,t,r){if(!r)return dn(e,t);var n,i,o,a=mn(e,!0);for(n in t)t.hasOwnProperty(n)&&(i=a[n],o=t[n],C(i)?(Array.isArray(i)||(i=a[n]=[i]),a[n]=i.concat(o)):a[n]=Array.isArray(o)?o.slice():o);return a}var hi,mi=0;function di(e){var t,r;"db"===(e="string"==typeof(e=M(e,M.EMPTY_OBJECT))?{url:e}:e).url.substring(0,2)&&(e.url="http"+e.url.substring(2,e.url.length)),0<e.url.indexOf("sde?")&&e.url.indexOf("_sde")<0&&e.isSde&&(e.url+="_sde"),0<zn.port_list.length&&/\/(sde|sde_pack|dcs|geoserver|filedownload)\?/.test(e.url)&&(null!=(t=/^([^:\/]+)(:\/\/)([^\/]+)(\/.+)$/i.exec(e.url))&&5==t.length&&(/:/.test(t[3])&&(r=t[3].indexOf(":"),t[3]=t[3].substring(0,r)),t[3]=t[3]+":"+zn.port_list[mi],mi=(mi+1)%zn.port_list.length,e.url=t[1]+t[2]+t[3]+t[4])),this._version=e.version,this._url=void 0,this._templateValues=ci(e.templateValues,{}),this._queryParameters=ci(e.queryParameters,{}),this.headers=ci(e.headers,{}),this.request=M(e.request,new Gn),this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=M(e.retryAttempts,3),this._retryCount=0;e=new pn(e.url);si(e,this,!0,!0),e.fragment=void 0,this._url=e.toString(),this.preDownload=void 0}function pi(r){var n=r.resource,i=r.flipY,o=r.preferImageBitmap,a=n.request;a.url=n.url,a.requestFunction=function(){C(r.preDownload)&&n.preDownload();var e=!1;n.isDataUri||n.isBlobUri||(e=n.isCrossOriginUrl);var t=gt.defer();return di._Implementations.createImage(a,e,t,i,o),t.promise};var e=$n.request(a);if(C(e))return e.otherwise(function(t){return a.state!==Bn.FAILED?gt.reject(t):n.retryOnError(t).then(function(e){return e?(a.state=Bn.UNISSUED,a.deferred=void 0,pi({resource:n,flipY:i,preferImageBitmap:o})):gt.reject(t)})})}di.createIfNeeded=function(e,t,r){return e instanceof di?e.getDerivedResource({request:e.request}):"string"!=typeof e?e:new di({url:e,version:t,isSde:!C(r)||r})},di.supportsImageBitmapOptions=function(){if(C(hi))return hi;if("function"!=typeof createImageBitmap)return hi=gt.resolve(!1);return hi=di.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWP4////fwAJ+wP9CNHoHgAAAABJRU5ErkJggg=="}).then(function(e){return createImageBitmap(e,{imageOrientation:"flipY",premultiplyAlpha:"none"})}).then(function(e){return!0}).otherwise(function(){return!1})},Object.defineProperties(di,{isBlobSupported:{get:function(){return ai}}}),Object.defineProperties(di.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){var e=this.getUrlComponent(!0,!0);return null!=this._version&&(e+="&version="+this._version),e},set:function(e){e=new pn(e);si(e,this,!1),e.fragment=void 0,this._url=e.toString()}},extension:{get:function(){return e=this._url,(t=new pn(e)).normalize(),e=t.path,e=-1===(t=(e=-1!==(t=e.lastIndexOf("/"))?e.substr(t+1):e).lastIndexOf("."))?"":e.substr(t+1);var e,t}},isDataUri:{get:function(){return Nn(this._url)}},isBlobUri:{get:function(){return In(this._url)}},isCrossOriginUrl:{get:function(){return function(e){(Sn=!C(Sn)?document.createElement("a"):Sn).href=window.location.href;var t=Sn.host,r=Sn.protocol;return Sn.href=e,Sn.href=Sn.href,r!==Sn.protocol||t!==Sn.host}(this._url)}},hasHeaders:{get:function(){return 0<Object.keys(this.headers).length}}}),di.prototype.toString=function(){return this.getUrlComponent(!0,!0)},di.prototype.getUrlComponent=function(e,t){if(this.isDataUri)return this._url;var r=new pn(this._url);e&&ui(r,this);var r=r.toString().replace(/%7B/g,"{").replace(/%7D/g,"}"),n=this._templateValues,r=r.replace(/{(.*?)}/g,function(e,t){t=n[t];return C(t)?encodeURIComponent(t):e});return r=t&&C(this.proxy)?this.proxy.getURL(r):r},di.prototype.setQueryParameters=function(e,t){this._queryParameters=t?fi(this._queryParameters,e,!1):fi(e,this._queryParameters,!1)},di.prototype.appendQueryParameters=function(e){this._queryParameters=fi(e,this._queryParameters,!0)},di.prototype.setTemplateValues=function(e,t){this._templateValues=t?dn(this._templateValues,e):dn(e,this._templateValues)},di.prototype.getDerivedResource=function(e){var t,r=this.clone();return r._retryCount=0,C(e.url)&&(si(t=new pn(e.url),r,!0,M(e.preserveQueryParameters,!1)),t.fragment=void 0,r._url=t.resolve(new pn(An(this._url))).toString(),r._url.indexOf("base64")<0&&0<r._url.indexOf("/sde?/")&&r._url.indexOf("_sde")<0&&(r._url+="_sde")),C(e.queryParameters)&&(r._queryParameters=dn(e.queryParameters,r._queryParameters)),C(e.templateValues)&&(r._templateValues=dn(e.templateValues,r.templateValues)),C(e.headers)&&(r.headers=dn(e.headers,r.headers)),C(e.proxy)&&(r.proxy=e.proxy),C(e.request)&&(r.request=e.request),C(e.retryCallback)&&(r.retryCallback=e.retryCallback),C(e.retryAttempts)&&(r.retryAttempts=e.retryAttempts),r},di.prototype.retryOnError=function(e){var t=this.retryCallback;if("function"!=typeof t||this._retryCount>=this.retryAttempts)return gt(!1);var r=this;return gt(t(this,e)).then(function(e){return++r._retryCount,e})},di.prototype.clone=function(e){return(e=!C(e)?new di({url:this._url}):e)._url=this._url,e._queryParameters=mn(this._queryParameters),e._templateValues=mn(this._templateValues),e.headers=mn(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e},di.prototype.getBaseUri=function(e){return t=this.getUrlComponent(e),r=e,n="",-1!==(e=t.lastIndexOf("/"))&&(n=t.substring(0,e+1)),r&&(C((t=new pn(t)).query)&&(n+="?"+t.query),C(t.fragment)&&(n+="#"+t.fragment)),n;var t,r,n},di.prototype.appendForwardSlash=function(){var e;this._url=(0!==(e=this._url).length&&"/"===e[e.length-1]||(e+="/"),e)},di.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},di.fetchArrayBuffer=function(e){return new di(e).fetchArrayBuffer()},di.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},di.fetchBlob=function(e){return new di(e).fetchBlob()},di.prototype.fetchImage=function(e){e=M(e,M.EMPTY_OBJECT);var t=M(e.preferImageBitmap,!1),r=M(e.preferBlob,!1),n=M(e.flipY,!1);if(li(this.request),!ai||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!r)return pi({resource:this,flipY:n,preferImageBitmap:t});var i,o,a,s=this.fetchBlob();return C(s)?di.supportsImageBitmapOptions().then(function(e){return i=e&&t,s}).then(function(e){if(C(e)){if(a=e,i)return di.createImageBitmapFromBlob(e,{flipY:n,premultiplyAlpha:!1});e=window.URL.createObjectURL(e);return pi({resource:o=new di({url:e}),flipY:n,preferImageBitmap:!1})}}).then(function(e){if(C(e))return e.blob=a,i||window.URL.revokeObjectURL(o.url),e}).otherwise(function(e){return C(o)&&window.URL.revokeObjectURL(o.url),e.blob=a,gt.reject(e)}):void 0},di.fetchImage=function(e){return new di(e).fetchImage({flipY:e.flipY,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})},di.prototype.fetchText=function(){return this.fetch({responseType:"text"})},di.fetchText=function(e){return new di(e).fetchText()},di.prototype.fetchJson=function(){var e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(C(e))return e.then(function(e){if(C(e))return JSON.parse(e)})},di.fetchJson=function(e){return new di(e).fetchJson()},di.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},di.fetchXML=function(e){return new di(e).fetchXML()},di.prototype.fetchJsonp=function(e){var t;for(e=M(e,"callback"),li(this.request);t="loadJsonp"+Math.random().toString().substring(2,8),C(window[t]););return function r(n,i,o){var e={};e[i]=o;n.setQueryParameters(e);var a=n.request;a.url=n.url;a.requestFunction=function(){C(n.preDownload)&&n.preDownload();var t=gt.defer();return window[o]=function(e){t.resolve(e);try{delete window[o]}catch(e){window[o]=void 0}},di._Implementations.loadAndExecuteScript(n.url,o,t),t.promise};e=$n.request(a);if(!C(e))return;return e.otherwise(function(t){return a.state!==Bn.FAILED?gt.reject(t):n.retryOnError(t).then(function(e){return e?(a.state=Bn.UNISSUED,a.deferred=void 0,r(n,i,o)):gt.reject(t)})})}(this,e,t)},di.fetchJsonp=function(e){return new di(e).fetchJsonp(e.callbackParameterName)},di.prototype._makeRequest=function(s){var u=this;li(u.request);var c=u.request;c.url=u.url,c.requestFunction=function(){C(u.preDownload)&&u.preDownload();var e=s.responseType,t=dn(s.headers,u.headers),r=s.overrideMimeType,n=s.method,i=s.data,o=gt.defer(),a=di._Implementations.loadWithXhr(u.url,e,n,i,t,o,r);return C(a)&&C(a.abort)&&(c.cancelFunction=function(){a.abort()}),o.promise};var e=$n.request(c);if(C(e))return e.then(function(e){return c.cancelFunction=void 0,e}).otherwise(function(t){return c.cancelFunction=void 0,c.state!==Bn.FAILED?gt.reject(t):u.retryOnError(t).then(function(e){return e?(c.state=Bn.UNISSUED,c.deferred=void 0,u.fetch(s)):gt.reject(t)})})};var Ei=/^data:(.*?)(;base64)?,(.*)$/;function _i(e,t){t=decodeURIComponent(t);return e?atob(t):t}function yi(e,t){for(var r=_i(e,t),t=new ArrayBuffer(r.length),n=new Uint8Array(t),i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return t}function Ti(e,t){switch(t){case"text":return e.toString("utf8");case"json":return JSON.parse(e.toString("utf8"));default:return new Uint8Array(e).buffer}}di.prototype.fetch=function(e){return(e=ci(e,{})).method="GET",this._makeRequest(e)},di.fetch=function(e){return new di(e).fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},di.prototype.delete=function(e){return(e=ci(e,{})).method="DELETE",this._makeRequest(e)},di.delete=function(e){return new di(e).delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})},di.prototype.head=function(e){return(e=ci(e,{})).method="HEAD",this._makeRequest(e)},di.head=function(e){return new di(e).head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},di.prototype.options=function(e){return(e=ci(e,{})).method="OPTIONS",this._makeRequest(e)},di.options=function(e){return new di(e).options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},di.prototype.post=function(e,t){return(t=ci(t,{})).method="POST",t.data=e,this._makeRequest(t)},di.post=function(e){return new di(e).post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},di.prototype.put=function(e,t){return(t=ci(t,{})).method="PUT",t.data=e,this._makeRequest(t)},di.put=function(e){return new di(e).put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},di.prototype.patch=function(e,t){return(t=ci(t,{})).method="PATCH",t.data=e,this._makeRequest(t)},di.patch=function(e){return new di(e).patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},(di._Implementations={}).createImage=function(o,a,s,u,c){var l=o.url;di.supportsImageBitmapOptions().then(function(e){if(!e||!c)return n=l,e=a,t=s,(r=new Image).onload=function(){t.resolve(r)},r.onerror=function(e){t.reject(e)},e&&(Mn.contains(n)?r.crossOrigin="use-credentials":r.crossOrigin=""),void(r.src=n);var t,r,n=gt.defer(),i=di._Implementations.loadWithXhr(l,"blob","GET",void 0,void 0,n,void 0,void 0,void 0);return C(i)&&C(i.abort)&&(o.cancelFunction=function(){i.abort()}),n.promise.then(function(e){return C(e)?di.createImageBitmapFromBlob(e,{flipY:u,premultiplyAlpha:!1}):void s.reject(new K("Successfully retrieved "+l+" but it contained no content."))}).then(s.resolve)}).otherwise(s.reject)},di.createImageBitmapFromBlob=function(e,t){return createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"none",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none"})};var gi="undefined"==typeof XMLHttpRequest;function Ri(e,t,r,n,i){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=r,this.yPoleOffset=n,this.ut1MinusUtc=i}function Ai(e){var t,r;e=M(e,M.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=M(e.addNewLeapSeconds,!0),C(e.data)?Oi(this,e.data):C(e.url)?(t=di.createIfNeeded(e.url),(r=this)._downloadPromise=t.fetchJson().then(function(e){Oi(r,e)}).otherwise(function(){r._dataError="An error occurred while retrieving the EOP data from the URL "+t.url+"."})):Oi(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function Si(e,t){return fn.compare(e.julianDate,t)}function Oi(e,t){if(C(t.columnNames))if(C(t.samples)){var r=t.columnNames.indexOf("modifiedJulianDateUtc"),n=t.columnNames.indexOf("xPoleWanderRadians"),i=t.columnNames.indexOf("yPoleWanderRadians"),o=t.columnNames.indexOf("ut1MinusUtcSeconds"),a=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),s=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),u=t.columnNames.indexOf("taiMinusUtcSeconds");if(r<0||n<0||i<0||o<0||a<0||s<0||u<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var c,l=e._samples=t.samples,f=e._dates=[];e._dateColumn=r,e._xPoleWanderRadiansColumn=n,e._yPoleWanderRadiansColumn=i,e._ut1MinusUtcSecondsColumn=o,e._xCelestialPoleOffsetRadiansColumn=a,e._yCelestialPoleOffsetRadiansColumn=s,e._taiMinusUtcSecondsColumn=u,e._columnCount=t.columnNames.length,e._lastIndex=void 0;for(var h=e._addNewLeapSeconds,m=0,d=l.length;m<d;m+=e._columnCount){var p,E=l[m+r],_=l[m+u],y=new fn(E+Xr.MODIFIED_JULIAN_DATE_DIFFERENCE,_,Yr.TAI);f.push(y),h&&(_===c||!C(c)||(E=Gr(p=fn.leapSeconds,y,Si))<0&&(y=new Vr(y,_),p.splice(~E,0,y)),c=_)}}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function Ii(e,t,r,n,i){n*=r;i.xPoleWander=t[n+e._xPoleWanderRadiansColumn],i.yPoleWander=t[n+e._yPoleWanderRadiansColumn],i.xPoleOffset=t[n+e._xCelestialPoleOffsetRadiansColumn],i.yPoleOffset=t[n+e._yCelestialPoleOffsetRadiansColumn],i.ut1MinusUtc=t[n+e._ut1MinusUtcSecondsColumn]}function wi(e,t,r){return t+e*(r-t)}function Ni(e,t,r,n,i,o,a){var s=e._columnCount;if(o>t.length-1)return a.xPoleWander=0,a.yPoleWander=0,a.xPoleOffset=0,a.yPoleOffset=0,a.ut1MinusUtc=0,a;var u=t[i],c=t[o];if(u.equals(c)||n.equals(u))return Ii(e,r,i,s,a),a;if(n.equals(c))return Ii(e,r,o,s,a),a;var l=fn.secondsDifference(n,u)/fn.secondsDifference(c,u),f=i*s,t=o*s,u=r[f+e._ut1MinusUtcSecondsColumn],i=r[t+e._ut1MinusUtcSecondsColumn],o=i-u;return!(.5<o||o<-.5)||(s=r[f+e._taiMinusUtcSecondsColumn])!==(o=r[t+e._taiMinusUtcSecondsColumn])&&(c.equals(n)?u=i:i-=o-s),a.xPoleWander=wi(l,r[f+e._xPoleWanderRadiansColumn],r[t+e._xPoleWanderRadiansColumn]),a.yPoleWander=wi(l,r[f+e._yPoleWanderRadiansColumn],r[t+e._yPoleWanderRadiansColumn]),a.xPoleOffset=wi(l,r[f+e._xCelestialPoleOffsetRadiansColumn],r[t+e._xCelestialPoleOffsetRadiansColumn]),a.yPoleOffset=wi(l,r[f+e._yCelestialPoleOffsetRadiansColumn],r[t+e._yCelestialPoleOffsetRadiansColumn]),a.ut1MinusUtc=wi(l,u,i),a}function xi(e,t,r){this.x=e,this.y=t,this.s=r}di._Implementations.loadWithXhr=function(e,i,o,t,r,a,n){var s=Ei.exec(e);if(null===s){if(gi)return u=e,c=i,l=o,f=r,h=a,m=require("url").parse(u),u="https:"===m.protocol?require("https"):require("http"),d=require("zlib"),f={protocol:m.protocol,hostname:m.hostname,port:m.port,path:m.path,query:m.query,method:l,headers:f},void u.request(f).on("response",function(t){var r;t.statusCode<200||300<=t.statusCode?h.reject(new oi(t.statusCode,t,t.headers)):(r=[],t.on("data",function(e){r.push(e)}),t.on("end",function(){var e=Buffer.concat(r);"gzip"===t.headers["content-encoding"]?d.gunzip(e,function(e,t){e?h.reject(new K("Error decompressing response.")):h.resolve(Ti(t,c))}):h.resolve(Ti(e,c))}))}).on("error",function(e){h.reject(new oi)}).end();var u,c,l,f,h,m,d,p=new XMLHttpRequest;if(Mn.contains(e)&&(p.withCredentials=!0),p.open(o,e,!0),C(n)&&C(p.overrideMimeType)&&p.overrideMimeType(n),C(r))for(var E in r)r.hasOwnProperty(E)&&p.setRequestHeader(E,r[E]);C(i)&&(p.responseType=i);var _=!1;return"string"==typeof e&&(_=0===e.indexOf("file://")||"undefined"!=typeof window&&"file://"===window.location.origin),p.onload=function(){if(!(p.status<200||300<=p.status)||_&&0===p.status){var e=p.response,t=p.responseType;if("HEAD"===o||"OPTIONS"===o){var r=p.getAllResponseHeaders().trim().split(/[\r\n]+/),n={};return r.forEach(function(e){var t=e.split(": "),e=t.shift();n[e]=t.join(": ")}),void a.resolve(n)}if(204===p.status)a.resolve();else if(!C(e)||C(i)&&t!==i)if("json"===i&&"string"==typeof e)try{a.resolve(JSON.parse(e))}catch(e){a.reject(e)}else(""===t||"document"===t)&&C(p.responseXML)&&p.responseXML.hasChildNodes()?a.resolve(p.responseXML):""!==t&&"text"!==t||!C(p.responseText)?a.reject(new K("Invalid XMLHttpRequest response type.")):a.resolve(p.responseText);else a.resolve(e)}else a.reject(new oi(p.status,p.response,p.getAllResponseHeaders()))},p.onerror=function(e){a.reject(new oi)},p.send(t),p}a.resolve(function(e,t){t=M(t,"");var r=e[1],n=!!e[2],i=e[3];switch(t){case"":case"text":return _i(n,i);case"arraybuffer":return yi(n,i);case"blob":var o=yi(n,i);return new Blob([o],{type:r});case"document":return(new DOMParser).parseFromString(_i(n,i),r);case"json":return JSON.parse(_i(n,i))}}(s,i))},di._Implementations.loadAndExecuteScript=function(e,t,r){return function(e){var t=gt.defer(),r=document.createElement("script");r.async=!0,r.src=e;var n=document.getElementsByTagName("head")[0];return r.onload=function(){r.onload=void 0,n.removeChild(r),t.resolve()},r.onerror=function(e){t.reject(e)},n.appendChild(r),t.promise}(e).otherwise(r.reject)},(di._DefaultImplementations={}).createImage=di._Implementations.createImage,di._DefaultImplementations.loadWithXhr=di._Implementations.loadWithXhr,di._DefaultImplementations.loadAndExecuteScript=di._Implementations.loadAndExecuteScript,di.DEFAULT=Object.freeze(new di({url:"undefined"==typeof document?"":document.location.href.split("?")[0]})),Ai.NONE=Object.freeze({getPromiseToLoad:function(){return gt.resolve()},compute:function(e,t){return C(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new Ri(0,0,0,0,0),t}}),Ai.prototype.getPromiseToLoad=function(){return gt(this._downloadPromise)},Ai.prototype.compute=function(e,t){if(C(this._samples)){if(C(t)||(t=new Ri(0,0,0,0,0)),0===this._samples.length)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;var r=this._dates,n=this._lastIndex,i=0,o=0;if(C(n)){var a=r[n],s=r[n+1],u=fn.lessThanOrEquals(a,e),c=!C(s),a=c||fn.greaterThanOrEquals(s,e);if(u&&a)return i=n,!c&&s.equals(e)&&++i,Ni(this,r,this._samples,e,i,o=i+1,t),t}s=Gr(r,e,fn.compare,this._dateColumn);return 0<=s?(s<r.length-1&&r[s+1].equals(e)&&++s,o=i=s):(i=(o=~s)-1)<0&&(i=0),this._lastIndex=i,Ni(this,r,this._samples,e,i,o,t),t}};var Ci,Mi,vi,bi=/((?:.*\/)|^)Cesium\.js(?:\?|\#|$)/;function Pi(e){return"undefined"==typeof document?e:((Ci=!C(Ci)?document.createElement("a"):Ci).href=e,Ci.href=Ci.href,Ci.href)}function Fi(){if(C(Mi))return Mi;var e=void 0!==zn.baseUrlString?zn.baseUrlString:"object"==typeof define&&C(define.amd)&&!define.amd.toUrlUndefined&&C(require.toUrl)?An("..",Li("lib_ax/utility/lib_core/resource/buildModuleUrl.js")):function(){for(var e=document.getElementsByTagName("script"),t=0,r=e.length;t<r;++t){var n=e[t].getAttribute("src"),n=bi.exec(n);if(null!==n)return n[1]}}();return(Mi=new di({url:Pi(e)})).appendForwardSlash(),Mi}function Ui(e){return Pi(require.toUrl("../"+e))}function Di(e){return Fi().getDerivedResource({url:e}).url}function Li(e){return(vi=!C(vi)?"object"==typeof define&&C(define.amd)&&!define.amd.toUrlUndefined&&C(require.toUrl)?Ui:Di:vi)(e)}function zi(e){e=M(e,M.EMPTY_OBJECT),this._xysFileUrlTemplate=di.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=M(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=M(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new fn(this._sampleZeroJulianEphemerisDate,0,Yr.TAI),this._stepSizeDays=M(e.stepSizeDays,1),this._samplesPerXysFile=M(e.samplesPerXysFile,1e3),this._totalSamples=M(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var t=this._interpolationOrder,r=this._denominators=new Array(t+1),n=this._xTable=new Array(t+1),i=Math.pow(this._stepSizeDays,t),o=0;o<=t;++o){r[o]=i,n[o]=o*this._stepSizeDays;for(var a=0;a<=t;++a)a!==o&&(r[o]*=o-a);r[o]=1/r[o]}this._work=new Array(t+1),this._coef=new Array(t+1)}Li._cesiumScriptRegex=bi,Li._buildModuleUrlFromBaseUrl=Di,Li._clearBaseResource=function(){Mi=void 0},Li.setBaseUrl=function(e){Mi=di.DEFAULT.getDerivedResource({url:e})},Li.getCesiumBaseUrl=Fi;var Bi=new fn(0,0,Yr.TAI);function qi(e,t,r){var n=Bi;return n.dayNumber=t,n.secondsOfDay=r,fn.daysDifference(n,e._sampleZeroDateTT)}function Gi(a,s){if(a._chunkDownloadsInProgress[s])return a._chunkDownloadsInProgress[s];var u=gt.defer();a._chunkDownloadsInProgress[s]=u;var e=a._xysFileUrlTemplate;return gt((C(e)?e.getDerivedResource({templateValues:{0:s}}):new di({url:Li("Assets/IAU2006_XYS/IAU2006_XYS_"+s+".json")})).fetchJson(),function(e){a._chunkDownloadsInProgress[s]=!1;for(var t=a._samples,r=e.samples,n=s*a._samplesPerXysFile*3,i=0,o=r.length;i<o;++i)t[n+i]=r[i];u.resolve()}),u.promise}zi.prototype.preload=function(e,t,r,n){t=qi(this,e,t),n=qi(this,r,n),t=t/this._stepSizeDays-this._interpolationOrder/2|0,n=n/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;n>=this._totalSamples&&(n=this._totalSamples-1);for(var t=(t=t<0?0:t)/this._samplesPerXysFile|0,i=n/this._samplesPerXysFile|0,o=[],a=t;a<=i;++a)o.push(Gi(this,a));return gt.all(o)},zi.prototype.computeXysRadians=function(e,t,r){var n=qi(this,e,t);if(!(n<0)){e=n/this._stepSizeDays|0;if(!(e>=this._totalSamples)){var i=this._interpolationOrder,o=e-(i/2|0),t=(o=o<0?0:o)+i;t>=this._totalSamples&&(o=(t=this._totalSamples-1)-i)<0&&(o=0);var e=!1,a=this._samples;if(C(a[3*o])||(Gi(this,o/this._samplesPerXysFile|0),e=!0),C(a[3*t])||(Gi(this,t/this._samplesPerXysFile|0),e=!0),!e){C(r)?(r.x=0,r.y=0,r.s=0):r=new xi(0,0,0);for(var s,u=n-o*this._stepSizeDays,c=this._work,l=this._denominators,f=this._coef,h=this._xTable,m=0;m<=i;++m)c[m]=u-h[m];for(m=0;m<=i;++m){for(f[m]=1,s=0;s<=i;++s)s!==m&&(f[m]*=c[s]);f[m]*=l[m];var d=3*(o+m);r.x+=f[m]*a[d++],r.y+=f[m]*a[d++],r.s+=f[m]*a[d]}return r}}}};var ji={},Hi={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},Wi={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Vi={},Xi={east:new G,north:new G,up:new G,west:new G,south:new G,down:new G},Yi=new G,ki=new G,Ki=new G;ji.localFrameToFixedFrameGenerator=function(i,o){var e,a=Hi[i][o],t=i+o;return C(Vi[t])?e=Vi[t]:(e=function(e,t,r){var n;return C(r)||(r=new te),G.equalsEpsilon(e,G.ZERO,q.EPSILON14)?(G.unpack(Wi[i],0,Yi),G.unpack(Wi[o],0,ki),G.unpack(Wi[a],0,Ki)):q.equalsEpsilon(e.x,0,q.EPSILON14)&&q.equalsEpsilon(e.y,0,q.EPSILON14)?(n=q.sign(e.z),G.unpack(Wi[i],0,Yi),"east"!==i&&"west"!==i&&G.multiplyByScalar(Yi,n,Yi),G.unpack(Wi[o],0,ki),"east"!==o&&"west"!==o&&G.multiplyByScalar(ki,n,ki),G.unpack(Wi[a],0,Ki),"east"!==a&&"west"!==a&&G.multiplyByScalar(Ki,n,Ki)):((t=M(t,j.WGS84)).geodeticSurfaceNormal(e,Xi.up),n=Xi.up,(t=Xi.east).x=-e.y,t.y=e.x,t.z=0,G.normalize(t,Xi.east),G.cross(n,t,Xi.north),G.multiplyByScalar(Xi.up,-1,Xi.down),G.multiplyByScalar(Xi.east,-1,Xi.west),G.multiplyByScalar(Xi.north,-1,Xi.south),Yi=Xi[i],ki=Xi[o],Ki=Xi[a]),r[0]=Yi.x,r[1]=Yi.y,r[2]=Yi.z,r[3]=0,r[4]=ki.x,r[5]=ki.y,r[6]=ki.z,r[7]=0,r[8]=Ki.x,r[9]=Ki.y,r[10]=Ki.z,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,r},Vi[t]=e),e},ji.eastNorthUpToFixedFrame=ji.localFrameToFixedFrameGenerator("east","north"),ji.northEastDownToFixedFrame=ji.localFrameToFixedFrameGenerator("north","east"),ji.northUpEastToFixedFrame=ji.localFrameToFixedFrameGenerator("north","up"),ji.northWestUpToFixedFrame=ji.localFrameToFixedFrameGenerator("north","west");var Zi=new cr,Ji=new G(1,1,1),Qi=new te;ji.headingPitchRollToFixedFrame=function(e,t,r,n,i){n=M(n,ji.eastNorthUpToFixedFrame);t=cr.fromHeadingPitchRoll(t,Zi),t=te.fromTranslationQuaternionRotationScale(G.ZERO,t,Ji,Qi);return i=n(e,r,i),te.multiply(i,t,i)};var $i=new te,eo=new B;ji.headingPitchRollQuaternion=function(e,t,r,n,i){n=ji.headingPitchRollToFixedFrame(e,t,r,n,$i),n=te.getMatrix3(n,eo);return cr.fromRotationMatrix(n,i)};var to=new G(1,1,1),ro=new G,no=new te,io=new te,oo=new B,ao=new cr;ji.fixedFrameToHeadingPitchRoll=function(e,t,r,n){t=M(t,j.WGS84),r=M(r,ji.eastNorthUpToFixedFrame),C(n)||(n=new qr);var i=te.getTranslation(e,ro);if(G.equals(i,G.ZERO))return n.heading=0,n.pitch=0,n.roll=0,n;t=te.inverseTransformation(r(i,t,no),no),e=te.setScale(e,to,io),e=te.setTranslation(e,G.ZERO,e),t=te.multiply(t,e,t),t=cr.fromRotationMatrix(te.getMatrix3(t,oo),ao),t=cr.normalize(t,t);return qr.fromQuaternion(t,n)};var so=q.TWO_PI/86400,uo=new fn;ji.computeTemeToPseudoFixedMatrix=function(e,t){var r=(uo=fn.addSeconds(e,-fn.computeTaiMinusUtc(e),uo)).dayNumber,n=uo.secondsOfDay,e=r-2451545,e=43200<=n?(.5+e)/Xr.DAYS_PER_JULIAN_CENTURY:(e-.5)/Xr.DAYS_PER_JULIAN_CENTURY,r=(24110.54841+e*(8640184.812866+e*(.093104+-62e-7*e)))*so%q.TWO_PI+(72921158553e-15+11772758384668e-32*(r-2451545.5))*((n+.5*Xr.SECONDS_PER_DAY)%Xr.SECONDS_PER_DAY),n=Math.cos(r),r=Math.sin(r);return C(t)?(t[0]=n,t[1]=-r,t[2]=0,t[3]=r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new B(n,r,0,-r,n,0,0,0,1)},ji.iau2006XysData=new zi,ji.earthOrientationParameters=Ai.NONE;var co=32.184;ji.preloadIcrfFixed=function(e){var t=e.start.dayNumber,r=e.start.secondsOfDay+co,n=e.stop.dayNumber,e=e.stop.secondsOfDay+co,n=ji.iau2006XysData.preload(t,r,n,e),e=ji.earthOrientationParameters.getPromiseToLoad();return gt.all([n,e])},ji.computeIcrfToFixedMatrix=function(e,t){C(t)||(t=new B);e=ji.computeFixedToIcrfMatrix(e,t);if(C(e))return B.transpose(e,t)};var lo=new xi(0,0,0),fo=new Ri(0,0,0,0,0),ho=new B,mo=new B;ji.computeFixedToIcrfMatrix=function(e,t){C(t)||(t=new B);var r=ji.earthOrientationParameters.compute(e,fo);if(C(r)){var n=e.dayNumber,i=e.secondsOfDay+co,o=ji.iau2006XysData.computeXysRadians(n,i,lo);if(C(o)){var a=o.x+r.xPoleOffset,s=o.y+r.yPoleOffset,u=1/(1+Math.sqrt(1-a*a-s*s)),c=ho;c[0]=1-u*a*a,c[3]=-u*a*s,c[6]=a,c[1]=-u*a*s,c[4]=1-u*s*s,c[7]=s,c[2]=-a,c[5]=-s,c[8]=1-u*(a*a+s*s);a=B.fromRotationZ(-o.s,mo),s=B.multiply(c,a,ho),o=e.dayNumber,c=(e.secondsOfDay-fn.computeTaiMinusUtc(e)+r.ut1MinusUtc)/Xr.SECONDS_PER_DAY,a=(a=.779057273264+c+.00273781191135448*(o-2451545+c))%1*q.TWO_PI,e=B.fromRotationZ(a,mo),o=B.multiply(s,e,ho),c=Math.cos(r.xPoleWander),a=Math.cos(r.yPoleWander),s=Math.sin(r.xPoleWander),e=Math.sin(r.yPoleWander),r=n-2451545+i/Xr.SECONDS_PER_DAY,n=-47e-6*(r/=36525)*q.RADIANS_PER_DEGREE/3600,i=Math.cos(n),r=Math.sin(n),n=mo;return n[0]=c*i,n[1]=c*r,n[2]=s,n[3]=-a*r+e*s*i,n[4]=a*i+e*s*r,n[5]=-e*c,n[6]=-e*r-a*s*i,n[7]=e*i-a*s*r,n[8]=a*c,B.multiply(o,n,t)}}};var po=new Z;ji.pointToWindowCoordinates=function(e,t,r,n){return(n=ji.pointToGLWindowCoordinates(e,t,r,n)).y=2*t[5]-n.y,n},ji.pointToGLWindowCoordinates=function(e,t,r,n){C(n)||(n=new it);var i=po;return te.multiplyByVector(e,Z.fromElements(r.x,r.y,r.z,1,i),i),Z.multiplyByScalar(i,1/i.w,i),te.multiplyByVector(t,i,i),it.fromCartesian4(i,n)};var Eo=new G,_o=new G,yo=new G;ji.rotationMatrixFromPositionVelocity=function(e,t,r,n){r=M(r,j.WGS84).geodeticSurfaceNormal(e,Eo),e=G.cross(t,r,_o);G.equalsEpsilon(e,G.ZERO,q.EPSILON6)&&(e=G.clone(G.UNIT_X,e));r=G.cross(e,t,yo);return G.normalize(r,r),G.cross(t,r,e),G.negate(e,e),G.normalize(e,e),(n=!C(n)?new B:n)[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=e.x,n[4]=e.y,n[5]=e.z,n[6]=r.x,n[7]=r.y,n[8]=r.z,n};var To=new te(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),go=new E,Ro=new G,Ao=new G,So=new B,Oo=new te,Io=new te;function wo(e,t){this.normal=G.clone(e),this.distance=t}ji.basisTo2D=function(e,t,r){var n=te.getTranslation(t,Ao),i=e.ellipsoid,o=i.cartesianToCartographic(n,go),o=e.project(o,Ro);G.fromElements(o.z,o.x,o.y,o);i=ji.eastNorthUpToFixedFrame(n,i,Oo),i=te.inverseTransformation(i,Io),t=te.getMatrix3(t,So),t=te.multiplyByMatrix3(i,t,r);return te.multiply(To,t,r),te.setTranslation(r,o,r),r},ji.wgs84To2DModelMatrix=function(e,t,r){var n=e.ellipsoid,i=ji.eastNorthUpToFixedFrame(t,n,Oo),i=te.inverseTransformation(i,Io),t=n.cartesianToCartographic(t,go),t=e.project(t,Ro);G.fromElements(t.z,t.x,t.y,t);t=te.fromTranslation(t,Oo);return te.multiply(To,i,r),te.multiply(t,r,r),r},wo.fromPointNormal=function(e,t,r){e=-G.dot(t,e);return C(r)?(G.clone(t,r.normal),r.distance=e,r):new wo(t,e)};var No=new G;wo.fromCartesian4=function(e,t){var r=G.fromCartesian4(e,No),e=e.w;return C(t)?(G.clone(r,t.normal),t.distance=e,t):new wo(r,e)},wo.fromPoints=function(e,t,r,n){var i=G.subtract(t,e,new G),t=G.subtract(r,t,new G);G.normalize(i,i),G.normalize(t,t);t=G.cross(i,t,new G);G.normalize(t,t);e=-G.dot(t,e);return C(n)?(G.clone(t,n.normal),n.distance=e,n):new wo(t,e)},wo.getPointDistance=function(e,t){return G.dot(e.normal,t)+e.distance};var xo=new G;wo.projectPointOntoPlane=function(e,t,r){C(r)||(r=new G);var n=wo.getPointDistance(e,t),n=G.multiplyByScalar(e.normal,n,xo);return G.subtract(t,n,r)},wo.projection=function(e,t,r){var n=G.dot(t,e.normal),n=G.multiplyByScalar(e.normal,n,xo);return C(r)||(r=new G),G.subtract(t,n,r)};var Co=new G;wo.transform=function(e,t,r){return te.multiplyByPointAsVector(t,e.normal,No),G.normalize(No,No),G.multiplyByScalar(e.normal,-e.distance,Co),te.multiplyByPoint(t,Co,Co),wo.fromPointNormal(Co,No,r)},wo.clone=function(e,t){return C(t)?(G.clone(e.normal,t.normal),t.distance=e.distance,t):new wo(e.normal,e.distance)},wo.equals=function(e,t){return e.distance===t.distance&&G.equals(e.normal,t.normal)},wo.prototype.intersect=function(e,t){C(t)||(t=new G);var r,n=e.origin,i=e.direction,e=G.dot(i,this.normal);return Math.abs(e)<q.EPSILON15?(r=n.x*this.normal.x*n.y*this.normal.y+n.z*this.normal.z+this.distance)<q.EPSILON15?(G.clone(n,t),t):void 0:(r=-(this.normal.x*n.x+this.normal.y*n.y+this.normal.z*n.z+this.distance),t=G.multiplyByScalar(i,r/=e,t),t=G.add(n,t,t))},wo.ORIGIN_XY_PLANE=Object.freeze(new wo(G.UNIT_Z,0)),wo.ORIGIN_YZ_PLANE=Object.freeze(new wo(G.UNIT_X,0)),wo.ORIGIN_ZX_PLANE=Object.freeze(new wo(G.UNIT_Y,0));var Mo={};function vo(e,t,r){var n=e+t;return q.sign(e)!==q.sign(t)&&Math.abs(n/Math.max(Math.abs(e),Math.abs(t)))<r?0:n}Mo.computeDiscriminant=function(e,t,r){return t*t-4*e*r},Mo.computeRealRoots=function(e,t,r){if(0===e)return 0===t?[]:[-r/t];if(0===t){if(0===r)return[0,0];var n=Math.abs(r),i=Math.abs(e);if(n<i&&n/i<q.EPSILON14)return[0,0];if(i<n&&i/n<q.EPSILON14)return[];if((i=-r/e)<0)return[];n=Math.sqrt(i);return[-n,n]}if(0===r)return(i=-t/e)<0?[i,0]:[0,i];i=vo(t*t,-(4*e*r),q.EPSILON14);if(i<0)return[];i=-.5*vo(t,q.sign(t)*Math.sqrt(i),q.EPSILON14);return 0<t?[i/e,r/i]:[r/i,i/e]};var bo={};function Po(e,t,r,n){var i=e,o=t/3,a=r/3,s=n,u=i*a,c=o*s,l=o*o,f=a*a,h=i*a-l,e=i*s-o*a,t=o*s-f,r=4*h*t-e*e;if(r<0){var n=u*f<=l*c?-2*o*(p=h)+(d=i)*e:-(d=s)*e+2*a*(p=t),m=-(n<0?-1:1)*Math.abs(d)*Math.sqrt(-r),d=(E=m-n)/2,d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),m=E===m?-d:-p/d,m=p<=0?d+m:-n/(d*d+m*m+p);return u*f<=l*c?[(m-o)/i]:[-s/(m+a)]}var p=h,u=-2*o*h+i*e,f=t,l=-s*e+2*a*t,c=Math.sqrt(r),h=Math.sqrt(3)/2,e=Math.abs(Math.atan2(i*c,-u)/3);m=2*Math.sqrt(-p);t=Math.cos(e);E=m*t;var r=m*(-t/2-h*Math.sin(e)),u=2*o<E+r?E-o:r-o,p=i,i=u/p,e=Math.abs(Math.atan2(s*c,-l)/3),s=-s,e=(E=(m=2*Math.sqrt(-f))*(t=Math.cos(e)))+(r=m*(-t/2-h*Math.sin(e)))<2*a?E+a:r+a,E=s/e,r=-u*e-p*s,e=(a*r-o*(u*s))/(-o*r+a*(p*e));return i<=e?i<=E?e<=E?[i,e,E]:[i,E,e]:[E,i,e]:i<=E?[e,i,E]:e<=E?[e,E,i]:[E,e,i]}bo.computeDiscriminant=function(e,t,r,n){var i=t*t,o=r*r;return 18*e*t*r*n+i*o-27*(e*e)*(n*n)-4*(e*o*r+i*t*n)},bo.computeRealRoots=function(e,t,r,n){var i;if(0===e)return Mo.computeRealRoots(t,r,n);if(0!==t)return 0===r?0===n?(o=-t/e)<0?[o,0,0]:[0,0,o]:Po(e,t,0,n):0===n?0===(i=Mo.computeRealRoots(e,t,r)).length?[0]:i[1]<=0?[i[0],i[1],0]:0<=i[0]?[0,i[0],i[1]]:[i[0],0,i[1]]:Po(e,t,r,n);if(0!==r)return 0===n?0===(i=Mo.computeRealRoots(e,0,r)).Length?[0]:[i[0],0,i[1]]:Po(e,0,r,n);if(0===n)return[0,0,0];var o=(o=-n/e)<0?-Math.pow(-o,1/3):Math.pow(o,1/3);return[o,o,o]};var Fo={};function Uo(e,t,r,n){var i=e*e,o=t-3*i/8,a=r-t*e/2+i*e/8,n=n-r*e/4+t*i/16-3*i*i/256,r=bo.computeRealRoots(1,2*o,o*o-4*n,-a*a);if(0<r.length){t=-e/4,i=r[r.length-1];if(Math.abs(i)<q.EPSILON14){e=Mo.computeRealRoots(1,o,n);if(2===e.length){var r=e[0],s=e[1];if(0<=r&&0<=s){n=Math.sqrt(r),e=Math.sqrt(s);return[t-e,t-n,t+n,t+e]}if(0<=r&&s<0)return[t-(u=Math.sqrt(r)),t+u];if(r<0&&0<=s)return[t-(u=Math.sqrt(s)),t+u]}return[]}if(0<i){var s=Math.sqrt(i),u=(o+i+a/s)/2,a=Mo.computeRealRoots(1,s,(o+i-a/s)/2),u=Mo.computeRealRoots(1,-s,u);return 0!==a.length?(a[0]+=t,a[1]+=t,0!==u.length?(u[0]+=t,u[1]+=t,a[1]<=u[0]?[a[0],a[1],u[0],u[1]]:u[1]<=a[0]?[u[0],u[1],a[0],a[1]]:a[0]>=u[0]&&a[1]<=u[1]?[u[0],a[0],a[1],u[1]]:u[0]>=a[0]&&u[1]<=a[1]?[a[0],u[0],u[1],a[1]]:a[0]>u[0]&&a[0]<u[1]?[u[0],a[0],u[1],a[1]]:[a[0],u[0],a[1],u[1]]):a):0!==u.length?(u[0]+=t,u[1]+=t,u):[]}}return[]}function Do(e,t,r,n){var i=e*e,o=bo.computeRealRoots(1,-2*t,r*e+t*t-4*n,i*n-r*t*e+r*r);if(0<o.length){var a,s,u,c,l=o[0],f=t-l,h=f*f,m=e/2,o=f/2,t=h-4*n,f=h+4*Math.abs(n),h=i-4*l,i=i+4*Math.abs(l);s=l<0||t*i<h*f?(a=(h=Math.sqrt(h))/2,0===h?0:(e*o-r)/h):(a=0===(s=Math.sqrt(t))?0:(e*o-r)/s,s/2),0==m&&0===a?c=u=0:q.sign(m)===q.sign(a)?c=l/(u=m+a):u=l/(c=m-a),0==o&&0===s?p=d=0:q.sign(o)===q.sign(s)?p=n/(d=o+s):d=n/(p=o-s);var d=Mo.computeRealRoots(1,u,d),p=Mo.computeRealRoots(1,c,p);if(0!==d.length)return 0!==p.length?d[1]<=p[0]?[d[0],d[1],p[0],p[1]]:p[1]<=d[0]?[p[0],p[1],d[0],d[1]]:d[0]>=p[0]&&d[1]<=p[1]?[p[0],d[0],d[1],p[1]]:p[0]>=d[0]&&p[1]<=d[1]?[d[0],p[0],p[1],d[1]]:d[0]>p[0]&&d[0]<p[1]?[p[0],d[0],p[1],d[1]]:[d[0],p[0],d[1],p[1]]:d;if(0!==p.length)return p}return[]}function Lo(e,t){t=G.clone(M(t,G.ZERO)),G.equals(t,G.ZERO)||G.normalize(t,t),this.origin=G.clone(M(e,G.ZERO)),this.direction=t}Fo.computeDiscriminant=function(e,t,r,n,i){var o=e*e,a=t*t,s=a*t,u=r*r,c=u*r,l=n*n,f=l*n,h=i*i;return a*u*l-4*s*f-4*e*c*l+18*e*t*r*f-27*o*l*l+256*(o*e)*(h*i)+i*(18*s*r*n-4*a*c+16*e*u*u-80*e*t*u*n-6*e*a*l+144*o*r*l)+h*(144*e*a*r-27*a*a-128*o*u-192*o*t*n)},Fo.computeRealRoots=function(e,t,r,n,i){if(Math.abs(e)<q.EPSILON15)return bo.computeRealRoots(t,r,n,i);var o=t/e,a=r/e,s=n/e,u=i/e,e=o<0?1:0;switch(e+=a<0?e+1:e,e+=s<0?e+1:e,e+=u<0?e+1:e){case 0:return Uo(o,a,s,u);case 1:case 2:return Do(o,a,s,u);case 3:case 4:return Uo(o,a,s,u);case 5:return Do(o,a,s,u);case 6:case 7:return Uo(o,a,s,u);case 8:return Do(o,a,s,u);case 9:case 10:return Uo(o,a,s,u);case 11:return Do(o,a,s,u);case 12:case 13:case 14:case 15:return Uo(o,a,s,u);default:return}},Lo.clone=function(e,t){if(C(e))return C(t)?(t.origin=G.clone(e.origin),t.direction=G.clone(e.direction),t):new Lo(e.origin,e.direction)},Lo.getPoint=function(e,t,r){return C(r)||(r=new G),r=G.multiplyByScalar(e.direction,t,r),G.add(e.origin,r,r)};var zo={rayPlane:function(e,t,r){C(r)||(r=new G);var n=e.origin,i=e.direction,o=t.normal,e=G.dot(o,i);if(!(Math.abs(e)<q.EPSILON15)){e=(-t.distance-G.dot(o,n))/e;if(!(e<0))return r=G.multiplyByScalar(i,e,r),G.add(n,r,r)}}},Bo=new G,qo=new G,Go=new G,jo=new G,Ho=new G;zo.rayTriangleParametric=function(e,t,r,n,i){i=M(i,!1);var o,a,s,u=e.origin,c=e.direction,l=G.subtract(r,t,Bo),e=G.subtract(n,t,qo),r=G.cross(c,e,Go),n=G.dot(l,r);if(i){if(n<q.EPSILON6)return;if(h=G.subtract(u,t,jo),(f=G.dot(h,r))<0||n<f)return;if(o=G.cross(h,l,Ho),(a=G.dot(c,o))<0||n<f+a)return;s=G.dot(e,o)/n}else{if(Math.abs(n)<q.EPSILON6)return;var f,n=1/n,h=G.subtract(u,t,jo);if((f=G.dot(h,r)*n)<0||1<f)return;if(o=G.cross(h,l,Ho),(a=G.dot(c,o)*n)<0||1<f+a)return;s=G.dot(e,o)*n}return s},zo.rayTriangle=function(e,t,r,n,i,o){i=zo.rayTriangleParametric(e,t,r,n,i);if(C(i)&&!(i<0))return C(o)||(o=new G),G.multiplyByScalar(e.direction,i,o),G.add(e.origin,o,o)};var Wo=new Lo;zo.lineSegmentTriangle=function(e,t,r,n,i,o,a){var s=Wo;G.clone(e,s.origin),G.subtract(t,e,s.direction),G.normalize(s.direction,s.direction);o=zo.rayTriangleParametric(s,r,n,i,o);if(!(!C(o)||o<0||o>G.distance(e,t)))return C(a)||(a=new G),G.multiplyByScalar(s.direction,o,a),G.add(s.origin,a,a)};var Vo={root0:0,root1:0};function Xo(e,t,r){C(r)||(r=new L);var n=e.origin,i=e.direction,e=t.center,t=t.radius*t.radius,e=G.subtract(n,e,Go),t=function(e,t,r,n){if(!((o=t*t-4*e*r)<0)){if(0<o){var i=1/(2*e),r=Math.sqrt(o),o=(-t+r)*i,i=(-t-r)*i;return o<i?(n.root0=o,n.root1=i):(n.root0=i,n.root1=o),n}e=-t/(2*e);if(0!=e)return n.root0=n.root1=e,n}}(G.dot(i,i),2*G.dot(i,e),G.magnitudeSquared(e)-t,Vo);if(C(t))return r.start=t.root0,r.stop=t.root1,r}zo.raySphere=function(e,t,r){if(C(r=Xo(e,t,r))&&!(r.stop<0))return r.start=Math.max(r.start,0),r};var Yo=new Lo;zo.lineSegmentSphere=function(e,t,r,n){var i=Yo;G.clone(e,i.origin);t=G.subtract(t,e,i.direction),e=G.magnitude(t);if(G.normalize(t,t),!(!C(n=Xo(i,r,n))||n.stop<0||n.start>e))return n.start=Math.max(n.start,0),n.stop=Math.min(n.stop,e),n};var ko=new G,Ko=new G;function Zo(e,t,r){var n=e+t;return q.sign(e)!==q.sign(t)&&Math.abs(n/Math.max(Math.abs(e),Math.abs(t)))<r?0:n}zo.rayEllipsoid=function(e,t){var r=t.oneOverRadii,n=G.multiplyComponents(r,e.origin,ko),t=G.multiplyComponents(r,e.direction,Ko),r=G.magnitudeSquared(n),e=G.dot(n,t);if(1<r){if(0<=e)return;var i,o,n=e*e,a=r-1;if(n<(o=(i=G.magnitudeSquared(t))*a))return;if(o<n){var s,u=e*e-o,c=(s=-e+Math.sqrt(u))/i,n=a/s;return c<n?new L(c,n):{start:n,stop:c}}c=Math.sqrt(a/i);return new L(c,c)}return r<1?(a=r-1,u=e*e-(o=(i=G.magnitudeSquared(t))*a),new L(0,(s=-e+Math.sqrt(u))/i)):e<0?new L(0,-e/(i=G.magnitudeSquared(t))):void 0};var Jo=new G,Qo=new G,$o=new G,ea=new G,ta=new G,ra=new B,na=new B,ia=new B,oa=new B,aa=new B,sa=new B,ua=new B,ca=new G,la=new G,fa=new E;zo.grazingAltitudeLocation=function(e,t){var r=e.origin,n=e.direction;if(!G.equals(r,G.ZERO)){var i=t.geodeticSurfaceNormal(r,Jo);if(0<=G.dot(n,i))return r}var o=C(this.rayEllipsoid(e,t)),a=t.transformPositionToScaledSpace(n,Jo),i=G.normalize(a,a),e=G.mostOrthogonalAxis(a,ea),a=G.normalize(G.cross(e,i,Qo),Qo),e=G.normalize(G.cross(i,a,$o),$o),s=ra;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=a.x,s[4]=a.y,s[5]=a.z,s[6]=e.x,s[7]=e.y,s[8]=e.z;var i=B.transpose(s,na),u=B.fromScale(t.radii,ia),a=B.fromScale(t.oneOverRadii,oa),e=aa;e[0]=0,e[1]=-n.z,e[2]=n.y,e[3]=n.z,e[4]=0,e[5]=-n.x,e[6]=-n.y,e[7]=n.x,e[8]=0;var a=B.multiply(B.multiply(i,a,sa),e,sa),e=B.multiply(B.multiply(a,u,ua),s,ua),a=B.multiplyByVector(a,r,ta),c=function(e,t,r,n,i){var o=n*n,a=i*i,s=(e[B.COLUMN1ROW1]-e[B.COLUMN2ROW2])*a,u=i*(n*Zo(e[B.COLUMN1ROW0],e[B.COLUMN0ROW1],q.EPSILON15)+t.y),c=e[B.COLUMN0ROW0]*o+e[B.COLUMN2ROW2]*a+n*t.x+r,l=a*Zo(e[B.COLUMN2ROW1],e[B.COLUMN1ROW2],q.EPSILON15),f=i*(n*Zo(e[B.COLUMN2ROW0],e[B.COLUMN0ROW2])+t.z),h=[];if(0==f&&0==l){if(0===(_=Mo.computeRealRoots(s,u,c)).length)return h;var m=_[0],d=Math.sqrt(Math.max(1-m*m,0));return h.push(new G(n,i*m,i*-d)),h.push(new G(n,i*m,i*d)),2===_.length&&(p=_[1],E=Math.sqrt(Math.max(1-p*p,0)),h.push(new G(n,i*p,i*-E)),h.push(new G(n,i*p,i*E))),h}var p=s*s+(m=l*l),E=2*(u*s+(d=f*l)),m=2*c*s+u*u-m+(t=f*f),d=2*(c*u-d);if(0==p&&0==E&&0==m&&0==d)return h;var _,y=(_=Fo.computeRealRoots(p,E,m,d,c*c-t)).length;if(0===y)return h;for(var T=0;T<y;++T){var g=_[T],R=g*g,A=Math.max(1-R,0),A=Math.sqrt(A),R=q.sign(s)===q.sign(c)?Zo(s*R+c,u*g,q.EPSILON12):q.sign(c)===q.sign(u*g)?Zo(s*R,u*g+c,q.EPSILON12):Zo(s*R+u*g,c,q.EPSILON12),R=R*Zo(l*g,f,q.EPSILON15);R<0?h.push(new G(n,i*g,i*A)):0<R?h.push(new G(n,i*g,i*-A)):0!==A?(h.push(new G(n,i*g,i*-A)),h.push(new G(n,i*g,i*A)),++T):h.push(new G(n,i*g,i*A))}return h}(e,G.negate(a,Jo),0,0,1),l=c.length;if(0<l){for(var f=G.clone(G.ZERO,la),h=Number.NEGATIVE_INFINITY,m=0;m<l;++m){var d=B.multiplyByVector(u,B.multiplyByVector(s,c[m],ca),ca),p=G.normalize(G.subtract(d,r,ea),ea),p=G.dot(p,n);h<p&&(h=p,f=G.clone(d,f))}e=t.cartesianToCartographic(f,fa),h=q.clamp(h,0,1),a=G.magnitude(G.subtract(f,r,ea))*Math.sqrt(1-h*h);return e.height=a=o?-a:a,t.cartographicToCartesian(e,new G)}};var ha=new G;zo.lineSegmentPlane=function(e,t,r,n){C(n)||(n=new G);var i=G.subtract(t,e,ha),o=r.normal,t=G.dot(o,i);if(!(Math.abs(t)<q.EPSILON6)){o=G.dot(o,e),t=-(r.distance+o)/t;if(!(t<0||1<t))return G.multiplyByScalar(i,t,n),G.add(e,n,n),n}},zo.trianglePlaneIntersection=function(e,t,r,n){var i,o,a=n.normal,s=n.distance,u=G.dot(a,e)+s<0,c=G.dot(a,t)+s<0,a=G.dot(a,r)+s<0,s=0;if(s+=u?1:0,s+=c?1:0,1!=(s+=a?1:0)&&2!=s||(i=new G,o=new G),1==s){if(u)return zo.lineSegmentPlane(e,t,n,i),zo.lineSegmentPlane(e,r,n,o),{positions:[e,t,r,i,o],indices:[0,3,4,1,2,4,1,4,3]};if(c)return zo.lineSegmentPlane(t,r,n,i),zo.lineSegmentPlane(t,e,n,o),{positions:[e,t,r,i,o],indices:[1,3,4,2,0,4,2,4,3]};if(a)return zo.lineSegmentPlane(r,e,n,i),zo.lineSegmentPlane(r,t,n,o),{positions:[e,t,r,i,o],indices:[2,3,4,0,1,4,0,4,3]}}else if(2==s){if(!u)return zo.lineSegmentPlane(t,e,n,i),zo.lineSegmentPlane(r,e,n,o),{positions:[e,t,r,i,o],indices:[1,2,4,1,4,3,0,3,4]};if(!c)return zo.lineSegmentPlane(r,t,n,i),zo.lineSegmentPlane(e,t,n,o),{positions:[e,t,r,i,o],indices:[2,0,4,2,4,3,1,3,4]};if(!a)return zo.lineSegmentPlane(e,r,n,i),zo.lineSegmentPlane(t,r,n,o),{positions:[e,t,r,i,o],indices:[0,1,4,0,4,3,2,3,4]}}};var ma=new Z;function da(e,t){e=(t=M(t,j.WGS84)).scaleToGeodeticSurface(e);var r=ji.eastNorthUpToFixedFrame(e,t);this._ellipsoid=t,this._origin=e,this._xAxis=G.fromCartesian4(te.getColumn(r,0,ma)),this._yAxis=G.fromCartesian4(te.getColumn(r,1,ma));r=G.fromCartesian4(te.getColumn(r,2,ma));this._plane=wo.fromPointNormal(e,r)}Object.defineProperties(da.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},origin:{get:function(){return this._origin}},plane:{get:function(){return this._plane}},xAxis:{get:function(){return this._xAxis}},yAxis:{get:function(){return this._yAxis}},zAxis:{get:function(){return this._plane.normal}}});var pa=new rt;da.fromPoints=function(e,t){return new da(rt.fromPoints(e,pa).center,t)};var Ea=new Lo,_a=new G;da.prototype.projectPointOntoPlane=function(e,t){var r=Ea;r.origin=e,G.normalize(e,r.direction);e=zo.rayPlane(r,this._plane,_a);if(C(e)||(G.negate(r.direction,r.direction),e=zo.rayPlane(r,this._plane,_a)),C(e)){r=G.subtract(e,this._origin,e),e=G.dot(this._xAxis,r),r=G.dot(this._yAxis,r);return C(t)?(t.x=e,t.y=r,t):new it(e,r)}},da.prototype.projectPointsOntoPlane=function(e,t){C(t)||(t=[]);for(var r=0,n=e.length,i=0;i<n;i++){var o=this.projectPointOntoPlane(e[i],t[r]);C(o)&&(t[r]=o,r++)}return t.length=r,t},da.prototype.projectPointToNearestOnPlane=function(e,t){C(t)||(t=new it);var r=Ea;r.origin=e,G.clone(this._plane.normal,r.direction);e=zo.rayPlane(r,this._plane,_a);C(e)||(G.negate(r.direction,r.direction),e=zo.rayPlane(r,this._plane,_a));r=G.subtract(e,this._origin,e),e=G.dot(this._xAxis,r),r=G.dot(this._yAxis,r);return t.x=e,t.y=r,t},da.prototype.projectPointsToNearestOnPlane=function(e,t){C(t)||(t=[]);var r=e.length;t.length=r;for(var n=0;n<r;n++)t[n]=this.projectPointToNearestOnPlane(e[n],t[n]);return t};var ya=new G;da.prototype.projectPointOntoEllipsoid=function(e,t){C(t)||(t=new G);var r=this._ellipsoid,n=this._origin,i=this._xAxis,o=this._yAxis,a=ya;return G.multiplyByScalar(i,e.x,a),t=G.add(n,a,t),G.multiplyByScalar(o,e.y,a),G.add(t,a,t),r.scaleToGeocentricSurface(t,t),t},da.prototype.projectPointsOntoEllipsoid=function(e,t){var r=e.length;C(t)?t.length=r:t=new Array(r);for(var n=0;n<r;++n)t[n]=this.projectPointOntoEllipsoid(e[n],t[n]);return t},new G,new G,new G,new G,new G,new G,new B,new B,new B,new G,new G,new E,new G,new E,new E,new E,new E,new E,new G,new G,new G,new G,new G,new it,new it,new it,new it,new it,new G,new G,new G,new G,new it,new G,new G,new G,new wo(G.UNIT_X,0),new G,new G,new G,new G,new G,new G,new ye;var Ta={octEncodeInRange:function(e,t,r){var n;return r.x=e.x/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),r.y=e.y/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),e.z<0&&(n=r.x,e=r.y,r.x=(1-Math.abs(e))*q.signNotZero(n),r.y=(1-Math.abs(n))*q.signNotZero(e)),r.x=q.toSNorm(r.x,t),r.y=q.toSNorm(r.y,t),r},octEncode:function(e,t){return Ta.octEncodeInRange(e,255,t)}},ga=new it,Ra=new Uint8Array(1);function Aa(e){return Ra[0]=e,Ra[0]}Ta.octEncodeToCartesian4=function(e,t){return Ta.octEncodeInRange(e,65535,ga),t.x=Aa(ga.x*(1/256)),t.y=Aa(ga.x),t.z=Aa(ga.y*(1/256)),t.w=Aa(ga.y),t},Ta.octDecodeInRange=function(e,t,r,n){return n.x=q.fromSNorm(e,r),n.y=q.fromSNorm(t,r),n.z=1-(Math.abs(n.x)+Math.abs(n.y)),n.z<0&&(r=n.x,n.x=(1-Math.abs(n.y))*q.signNotZero(r),n.y=(1-Math.abs(r))*q.signNotZero(n.y)),G.normalize(n,n)},Ta.octDecode=function(e,t,r){return Ta.octDecodeInRange(e,t,255,r)},Ta.octDecodeFromCartesian4=function(e,t){var r=e.x,n=e.y,i=e.z,e=e.w;return Ta.octDecodeInRange(256*r+n,256*i+e,65535,t)},Ta.octPackFloat=function(e){return 256*e.x+e.y};var Sa=new it;function Oa(e){return e>>1^-(1&e)}Ta.octEncodeFloat=function(e){return Ta.octEncode(e,Sa),Ta.octPackFloat(Sa)},Ta.octDecodeFloat=function(e,t){var r=e/256,e=Math.floor(r);return Ta.octDecode(e,256*(r-e),t)},Ta.octPack=function(e,t,r,n){e=Ta.octEncodeFloat(e),t=Ta.octEncodeFloat(t),r=Ta.octEncode(r,Sa);return n.x=65536*r.x+e,n.y=65536*r.y+t,n},Ta.octUnpack=function(e,t,r,n){var i=e.x/65536,o=Math.floor(i),a=65536*(i-o),i=e.y/65536,e=Math.floor(i),i=65536*(i-e);Ta.octDecodeFloat(a,t),Ta.octDecodeFloat(i,r),Ta.octDecode(o,e,n)},Ta.compressTextureCoordinates=function(e){return 4096*(4095*e.x|0)+(4095*e.y|0)},Ta.decompressTextureCoordinates=function(e,t){var r=Math.floor(e/4096);return t.x=r/4095,t.y=(e-4096*r)/4095,t},Ta.zigZagDeltaDecode=function(e,t,r){for(var n=e.length,i=0,o=0,a=0,s=0;s<n;++s)i+=Oa(e[s]),o+=Oa(t[s]),e[s]=i,t[s]=o,C(r)&&(a+=Oa(r[s]),r[s]=a)};var Ia=Object.freeze({DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,HALF_FLOAT_OES:36193,DOUBLE:5130,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,COLOR:6144,DEPTH:6145,STENCIL:6146,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,MAX_3D_TEXTURE_SIZE:32883,UNSIGNED_INT_2_10_10_10_REV:33640,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,MAX_TEXTURE_LOD_BIAS:34045,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,VERTEX_ATTRIB_ARRAY_INTEGER:35069,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,UNSIGNED_INT_10F_11F_11F_REV:35899,RGB9_E5:35901,UNSIGNED_INT_5_9_9_9_REV:35902,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,RASTERIZER_DISCARD:35977,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,UNSIGNED_INT_24_8:34042,DEPTH24_STENCIL8:35056,UNSIGNED_NORMALIZED:35863,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,MAX_SAMPLES:36183,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,VERTEX_ARRAY_BINDING:34229,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,SIGNED_NORMALIZED:36764,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,INVALID_INDEX:4294967295,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,SAMPLER_BINDING:35097,RGB10_A2UI:36975,INT_2_10_10_10_REV:36255,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,TEXTURE_IMMUTABLE_FORMAT:37167,MAX_ELEMENT_INDEX:36203,TEXTURE_IMMUTABLE_LEVELS:33503,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047}),wa={BYTE:Ia.BYTE,UNSIGNED_BYTE:Ia.UNSIGNED_BYTE,SHORT:Ia.SHORT,UNSIGNED_SHORT:Ia.UNSIGNED_SHORT,INT:Ia.INT,UNSIGNED_INT:Ia.UNSIGNED_INT,FLOAT:Ia.FLOAT,DOUBLE:Ia.DOUBLE,getSizeInBytes:function(e){switch(e){case wa.BYTE:return Int8Array.BYTES_PER_ELEMENT;case wa.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case wa.SHORT:return Int16Array.BYTES_PER_ELEMENT;case wa.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case wa.INT:return Int32Array.BYTES_PER_ELEMENT;case wa.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case wa.FLOAT:return Float32Array.BYTES_PER_ELEMENT;case wa.DOUBLE:return Float64Array.BYTES_PER_ELEMENT}},fromTypedArray:function(e){return e instanceof Int8Array?wa.BYTE:e instanceof Uint8Array?wa.UNSIGNED_BYTE:e instanceof Int16Array?wa.SHORT:e instanceof Uint16Array?wa.UNSIGNED_SHORT:e instanceof Int32Array?wa.INT:e instanceof Uint32Array?wa.UNSIGNED_INT:e instanceof Float32Array?wa.FLOAT:e instanceof Float64Array?wa.DOUBLE:void 0},validate:function(e){return C(e)&&(e===wa.BYTE||e===wa.UNSIGNED_BYTE||e===wa.SHORT||e===wa.UNSIGNED_SHORT||e===wa.INT||e===wa.UNSIGNED_INT||e===wa.FLOAT||e===wa.DOUBLE)},createTypedArray:function(e,t){switch(e){case wa.BYTE:return new Int8Array(t);case wa.UNSIGNED_BYTE:return new Uint8Array(t);case wa.SHORT:return new Int16Array(t);case wa.UNSIGNED_SHORT:return new Uint16Array(t);case wa.INT:return new Int32Array(t);case wa.UNSIGNED_INT:return new Uint32Array(t);case wa.FLOAT:return new Float32Array(t);case wa.DOUBLE:return new Float64Array(t)}},createArrayBufferView:function(e,t,r,n){switch(r=M(r,0),n=M(n,(t.byteLength-r)/wa.getSizeInBytes(e)),e){case wa.BYTE:return new Int8Array(t,r,n);case wa.UNSIGNED_BYTE:return new Uint8Array(t,r,n);case wa.SHORT:return new Int16Array(t,r,n);case wa.UNSIGNED_SHORT:return new Uint16Array(t,r,n);case wa.INT:return new Int32Array(t,r,n);case wa.UNSIGNED_INT:return new Uint32Array(t,r,n);case wa.FLOAT:return new Float32Array(t,r,n);case wa.DOUBLE:return new Float64Array(t,r,n)}},fromName:function(e){switch(e){case"BYTE":return wa.BYTE;case"UNSIGNED_BYTE":return wa.UNSIGNED_BYTE;case"SHORT":return wa.SHORT;case"UNSIGNED_SHORT":return wa.UNSIGNED_SHORT;case"INT":return wa.INT;case"UNSIGNED_INT":return wa.UNSIGNED_INT;case"FLOAT":return wa.FLOAT;case"DOUBLE":return wa.DOUBLE}}},Na=Object.freeze(wa),xa=Object.freeze({NONE:0,BITS12:1}),Ca=new G,Ma=new G,va=new it,ba=new te,Pa=new te;function Fa(e,t,r,n,i,o){var a,s,u,c,l,f=xa.NONE;C(e)&&C(t)&&C(r)&&C(n)&&(c=e.minimum,s=e.maximum,l=G.subtract(s,c,Ma),u=r-t,Math.max(G.maximumComponent(l),u),f=xa.NONE,a=e.center,s=te.inverseTransformation(n,new te),u=G.negate(c,Ca),te.multiply(te.fromTranslation(u,ba),s,s),(u=Ca).x=1/l.x,u.y=1/l.y,u.z=1/l.z,te.multiply(te.fromScale(u,ba),s,s),u=te.clone(n),te.setTranslation(u,G.ZERO,u),n=te.clone(n,new te),c=te.fromTranslation(c,ba),l=te.fromScale(l,Pa),l=te.multiply(c,l,ba),te.multiply(n,l,n),te.multiply(u,l,u)),this.quantization=f,this.minimumHeight=t,this.maximumHeight=r,this.center=a,this.toScaledENU=s,this.fromScaledENU=n,this.matrix=u,this.hasVertexNormals=i,this.hasWebMercatorT=M(o,!1)}Fa.prototype.encode=function(e,t,r,n,i,o,a){var s,u,c=n.x,l=n.y;return this.quantization===xa.BITS12?((r=te.multiplyByPoint(this.toScaledENU,r,Ca)).x=q.clamp(r.x,0,1),r.y=q.clamp(r.y,0,1),r.z=q.clamp(r.z,0,1),s=this.maximumHeight-this.minimumHeight,u=q.clamp((i-this.minimumHeight)/s,0,1),it.fromElements(r.x,r.y,va),n=Ta.compressTextureCoordinates(va),it.fromElements(r.z,u,va),s=Ta.compressTextureCoordinates(va),it.fromElements(c,l,va),u=Ta.compressTextureCoordinates(va),e[t++]=n,e[t++]=s,e[t++]=u,this.hasWebMercatorT&&(it.fromElements(a,0,va),u=Ta.compressTextureCoordinates(va),e[t++]=u)):(G.subtract(r,this.center,Ca),e[t++]=Ca.x,e[t++]=Ca.y,e[t++]=Ca.z,e[t++]=i,e[t++]=c,e[t++]=l,this.hasWebMercatorT&&(e[t++]=a)),this.hasVertexNormals&&(e[t++]=Ta.octPackFloat(o)),t},Fa.prototype.decodePosition=function(e,t,r){if(C(r)||(r=new G),t*=this.getStride(),this.quantization!==xa.BITS12)return r.x=e[t],r.y=e[t+1],r.z=e[t+2],G.add(r,this.center,r);var n=Ta.decompressTextureCoordinates(e[t],va);r.x=n.x,r.y=n.y;t=Ta.decompressTextureCoordinates(e[t+1],va);return r.z=t.x,te.multiplyByPoint(this.fromScaledENU,r,r)},Fa.prototype.decodeTextureCoordinates=function(e,t,r){return C(r)||(r=new it),t*=this.getStride(),this.quantization===xa.BITS12?Ta.decompressTextureCoordinates(e[t+2],r):it.fromElements(e[t+4],e[t+5],r)},Fa.prototype.decodeHeight=function(e,t){return t*=this.getStride(),this.quantization!==xa.BITS12?e[t+3]:Ta.decompressTextureCoordinates(e[t+1],va).y*(this.maximumHeight-this.minimumHeight)+this.minimumHeight},Fa.prototype.decodeWebMercatorT=function(e,t){return t*=this.getStride(),this.quantization===xa.BITS12?Ta.decompressTextureCoordinates(e[t+3],va).x:e[t+6]},Fa.prototype.getOctEncodedNormal=function(e,t,r){e=e[t=(t+1)*this.getStride()-1]/256,t=Math.floor(e);return it.fromElements(t,256*(e-t),r)},Fa.prototype.getStride=function(){var e=this.quantization===xa.BITS12?3:6;return this.hasWebMercatorT&&++e,this.hasVertexNormals&&++e,e};var Ua={position3DAndHeight:0,textureCoordAndEncodedNormals:1},Da={compressed0:0,compressed1:1};function La(e,t){this._ellipsoid=e,this._observerPosition=new G,this._observerPositionInScaledSpace=new G,this._distanceToLimbInScaledSpaceSquared=0,C(t)&&(this.observerPosition=t)}Fa.prototype.getAttributes=function(e){var t,r=Na.FLOAT,n=Na.getSizeInBytes(r);if(this.quantization===xa.NONE){var i=2;return this.hasWebMercatorT&&++i,this.hasVertexNormals&&++i,[{index:Ua.position3DAndHeight,vertexBuffer:e,componentDatatype:r,componentsPerAttribute:4,offsetInBytes:0,strideInBytes:t=(4+i)*n},{index:Ua.textureCoordAndEncodedNormals,vertexBuffer:e,componentDatatype:r,componentsPerAttribute:i,offsetInBytes:4*n,strideInBytes:t}]}var o=3,i=0;return(this.hasWebMercatorT||this.hasVertexNormals)&&++o,this.hasWebMercatorT&&this.hasVertexNormals?(++i,[{index:Da.compressed0,vertexBuffer:e,componentDatatype:r,componentsPerAttribute:o,offsetInBytes:0,strideInBytes:t=(o+1)*n},{index:Da.compressed1,vertexBuffer:e,componentDatatype:r,componentsPerAttribute:1,offsetInBytes:o*n,strideInBytes:t}]):[{index:Da.compressed0,vertexBuffer:e,componentDatatype:r,componentsPerAttribute:o}]},Fa.prototype.getAttributeLocations=function(){return this.quantization===xa.NONE?Ua:Da},Fa.clone=function(e,t){return(t=!C(t)?new Fa:t).quantization=e.quantization,t.minimumHeight=e.minimumHeight,t.maximumHeight=e.maximumHeight,t.center=G.clone(e.center),t.toScaledENU=te.clone(e.toScaledENU),t.fromScaledENU=te.clone(e.fromScaledENU),t.matrix=te.clone(e.matrix),t.hasVertexNormals=e.hasVertexNormals,t.hasWebMercatorT=e.hasWebMercatorT,t},Object.defineProperties(La.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},observerPosition:{get:function(){return this._observerPosition},set:function(e){var t=this._ellipsoid.transformPositionToScaledSpace(e,this._observerPositionInScaledSpace),r=G.magnitudeSquared(t)-1;G.clone(e,this._observerPosition),this._observerPositionInScaledSpace=t,this._distanceToLimbInScaledSpaceSquared=r}}});var za=new G;La.prototype.isPointVisible=function(e){return Ya(this._ellipsoid.transformPositionToScaledSpace(e,za),this._observerPositionInScaledSpace,this._distanceToLimbInScaledSpaceSquared)},La.prototype.isScaledSpacePointVisible=function(e){return Ya(e,this._observerPositionInScaledSpace,this._distanceToLimbInScaledSpaceSquared)};var Ba=new G;La.prototype.isScaledSpacePointVisiblePossiblyUnderEllipsoid=function(e,t){var r,n=this._ellipsoid,t=C(t)&&t<0&&n.minimumRadius>-t?((r=Ba).x=this._observerPosition.x/(n.radii.x+t),r.y=this._observerPosition.y/(n.radii.y+t),r.z=this._observerPosition.z/(n.radii.z+t),r.x*r.x+r.y*r.y+r.z*r.z-1):(r=this._observerPositionInScaledSpace,this._distanceToLimbInScaledSpaceSquared);return Ya(e,r,t)},La.prototype.computeHorizonCullingPoint=function(e,t,r){return Wa(this._ellipsoid,e,t,r)};var qa=j.clone(j.UNIT_SPHERE);La.prototype.computeHorizonCullingPointPossiblyUnderEllipsoid=function(e,t,r,n){return Wa(Ha(this._ellipsoid,r,qa),e,t,n)},La.prototype.computeHorizonCullingPointFromVertices=function(e,t,r,n,i){return Xa(this._ellipsoid,e,t,r,n,i)},La.prototype.computeHorizonCullingPointFromVerticesPossiblyUnderEllipsoid=function(e,t,r,n,i,o){return Xa(Ha(this._ellipsoid,i,qa),e,t,r,n,o)};var Ga=[];La.prototype.computeHorizonCullingPointFromRectangle=function(e,t,r){var n=Ee.subsample(e,t,0,Ga),e=ye.fromPoints(n);if(!(G.magnitude(e.center)<.1*t.minimumRadius))return this.computeHorizonCullingPoint(e.center,n,r)};var ja=new G;function Ha(e,t,r){return C(t)&&t<0&&e.minimumRadius>-t&&(t=G.fromElements(e.radii.x+t,e.radii.y+t,e.radii.z+t,ja),e=j.fromCartesian3(t,r)),e}function Wa(e,t,r,n){C(n)||(n=new G);for(var i=$a(e,t),o=0,a=0,s=r.length;a<s;++a){var u=Za(e,r[a],i);if(u<0)return;o=Math.max(o,u)}return Ja(i,o,n)}var Va=new G;function Xa(e,t,r,n,i,o){C(o)||(o=new G),n=M(n,3),i=M(i,G.ZERO);for(var a=$a(e,t),s=0,u=0,c=r.length;u<c;u+=n){Va.x=r[u]+i.x,Va.y=r[u+1]+i.y,Va.z=r[u+2]+i.z;var l=Za(e,Va,a);if(l<0)return;s=Math.max(s,l)}return Ja(a,s,o)}function Ya(e,t,r){e=G.subtract(e,t,za),t=-G.dot(e,t);return!(r<0?0<t:r<t&&t*t/G.magnitudeSquared(e)>r)}var ka=new G,Ka=new G;function Za(e,t,r){var n=e.transformPositionToScaledSpace(t,ka),e=G.magnitudeSquared(n),t=Math.sqrt(e),n=G.divideByScalar(n,t,Ka),e=Math.max(1,e),t=1/(t=Math.max(1,t));return 1/(G.dot(n,r)*t-G.magnitude(G.cross(n,r,n))*(Math.sqrt(e-1)*t))}function Ja(e,t,r){if(!(t<=0||t===1/0||t!=t))return G.multiplyByScalar(e,t,r)}var Qa=new G;function $a(e,t){return G.equals(t,G.ZERO)?t:(e.transformPositionToScaledSpace(t,Qa),G.normalize(Qa,Qa))}var es=new G,ts=new G,rs=new G,ns=new E,is=new it;var os,as,ss=[{x:0,y:16},{x:0,y:0},{x:16,y:16},{x:16,y:0}];return os=function(e,t){var r=[],n=[],i=[],o=[],a=[],s=[],u=[],c=[],l=[],f={};e.zlib?function(e,t){var r=new DataView(e.buffer),n=0;n+=Uint16Array.BYTES_PER_ELEMENT,n+=Uint16Array.BYTES_PER_ELEMENT,n+=2*Uint16Array.BYTES_PER_ELEMENT;var i=r.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var o=r.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var a=r.getUint16(n,!0);n+=Uint16Array.BYTES_PER_ELEMENT;var s=r.getInt16(n,!0);n+=Uint16Array.BYTES_PER_ELEMENT;var u=r.getFloat32(n,!0);n+=Float32Array.BYTES_PER_ELEMENT;var c=r.getFloat32(n,!0);n+=Float32Array.BYTES_PER_ELEMENT;var l=new Uint8Array(e.buffer),e=new Uint8Array(l.subarray(n,o+n)),e=new yt.Inflate(e).decompress();n+=o;var f=new DataView(e.buffer.slice(0,e.byteLength)),h=0,m=(u-c)/s;C(t)||(t={});var d=i/Uint16Array.BYTES_PER_ELEMENT;C(t.gridBuffer)||(t.gridBuffer=new Float32Array(d));for(var p=0;p<d;++p){var E=f.getUint16(h,!0);h+=Uint16Array.BYTES_PER_ELEMENT,t.gridBuffer[p]=E===a?c:c+E*m}t.elevationMin=c,t.elevationMax=u,t.tileMask=15,n<l.length&&(t.tileMask=r.getUint8(n,!0),n+=1);n<l.length&&(t.oceanMask=new Uint8Array(l.subarray(n,l.length)))}(e,f):(f.gridBuffer=e.buffer?e.buffer.gridBuffer:void 0,f.elevationMin=e.buffer?e.buffer.elevationMin:0,f.elevationMax=e.buffer?e.buffer.elevationMax:0,f.tileMask=15,f.oceanMask=void 0);for(var h=0;h<4;++h){var m=function(e,t,r){var n=t.elevationMin,i=t.elevationMax,o=t.gridBuffer,a=e.rectangleArray[r],s=e.includeWebMercatorT,u=Ee.center(a),c=j.WGS84.cartographicToCartesian(u),t=ji.eastNorthUpToFixedFrame(c,j.WGS84),l=te.inverseTransformation(t,new te),f=ss[r],u=a.east-a.west,r=a.north-a.south,h=1/16*u,m=-1/16*r,d=new Array(361),p=new Array(361),E=new Array(361),_=s?new Array(361):[],y=ts;y.x=Number.POSITIVE_INFINITY,y.y=Number.POSITIVE_INFINITY,y.z=Number.POSITIVE_INFINITY;var T,g,R=rs;R.x=Number.NEGATIVE_INFINITY,R.y=Number.NEGATIVE_INFINITY,R.z=Number.NEGATIVE_INFINITY,s&&(T=Tt.geodeticLatitudeToMercatorAngle(a.south),g=1/(Tt.geodeticLatitudeToMercatorAngle(a.north)-T));var A=0;ns.latitude=a.north;for(var S=0;S<19;S++){ns.longitude=a.west;for(var O=0;O<19;O++){var I,w=S-1,N=O-1;-1<w&&-1<N&&w<17&&N<17?ns.height=void 0!==o?o[33*(32-f.y-w)+f.x+N]:0:(I=q.clamp(w,0,16),x=q.clamp(N,0,16),ns.height=void 0!==o?o[33*(32-f.y-I)+f.x+x]:0,ns.height=ns.height-e.skirtHeight),17===(w=-1===w?1:w)&&(w=15),17===(N=-1===N?1:N)&&(N=15);var x=j.WGS84.cartographicToCartesian(ns);E[A]=x;N=N*(1/16),w=w*(1/16);N=1<N?.99999999:N<=0?1e-8:N,w=1<w?.99999999:w<=0?1e-8:w,d[A]=new it(N,w),p[A]=ns.height,s&&(_[O]=(Tt.geodeticLatitudeToMercatorAngle(ns.latitude)-T)*g),te.multiplyByPoint(l,x,es),G.minimumByComponent(es,y,y),G.maximumByComponent(es,R,R),++A,0<O&&O<17&&(ns.longitude+=h)}0<S&&S<17&&(ns.latitude+=m)}r=ye.fromPoints(E);for(var C=new Fa(new rt(y,R,c),n,i,t,!1,s),t=C.getStride(),M=new Float32Array(361*t),v=0,O=0;O<361;++O)v=C.encode(M,v,E[O],d[O],p[O],is,_[O]);A=0;for(var b=new Uint16Array(1920),P=1;P<17;P++)for(var F=1;F<17;F++)b[A]=19*P+F,b[A+1]=19*(P+1)+F,b[A+2]=19*P+F+1,b[A+3]=19*P+F+1,b[A+4]=19*(P+1)+F,b[A+5]=19*(P+1)+F+1,A+=6;for(var U=new Uint16Array(16),D=new Uint16Array(16),L=new Uint16Array(16),z=new Uint16Array(16),B=0,P=0;P<16;++P)z[P]=20+P,b[A]=B+19+P+1,b[A+1]=b[A]+1,b[A+2]=B+1+P,b[A+3]=B+1+P,b[A+4]=b[A]+1,b[A+5]=B+2+P,A+=6;B=323;for(P=0;P<16;++P)D[P]=B+16-P+1,b[A]=B+P+1,b[A+1]=B+19+P+1,b[A+2]=B+P+2,b[A+3]=B+P+2,b[A+4]=B+19+P+1,b[A+5]=B+19+P+2,A+=6;for(P=B=0;P<16;++P)U[P]=19*(17-P)+1,b[A]=19*(P+1)+1,b[A+1]=19*(P+1),b[A+2]=19*(P+2)+1,b[A+3]=19*(P+2)+1,b[A+4]=19*(P+1),b[A+5]=19*(P+2),A+=6;for(P=B=0;P<16;++P)L[P]=19*(P+1)+17,b[A]=19*(P+1)+17,b[A+1]=19*(P+2)+17,b[A+2]=19*(P+1)+18,b[A+3]=19*(P+1)+18,b[A+4]=19*(P+2)+17,b[A+5]=19*(P+2)+18,A+=6;return{vertexBuffer:M,indexBuffer:b,encoding:C,boundingSphere:r,skirtIndexOffset:1536,westIndicesSouthToNorth:U,southIndicesEastToWest:D,eastIndicesNorthToSouth:L,northIndicesWestToEast:z}}(e,f,h);r[h]=m.vertexBuffer.buffer,n[h]=m.indexBuffer.buffer,i[h]=m.skirtIndexOffset,o[h]=m.encoding,a[h]=m.boundingSphere,s[h]=m.westIndicesSouthToNorth,u[h]=m.southIndicesEastToWest,c[h]=m.eastIndicesNorthToSouth,l[h]=m.northIndicesWestToEast}return{vertices:r,indices:n,skirtIndexOffsets:i,boundingSphere:a,encoding:o,tileMask:f.tileMask,oceanMask:f.oceanMask,westIndicesSouthToNorth:s,southIndicesEastToWest:u,eastIndicesNorthToSouth:c,northIndicesWestToEast:l}},function(e){var i=e.data,o=[],a={id:i.id,result:void 0,error:void 0};return gt(function(e,t,r){try{return e(t,r)}catch(e){return gt.reject(e)}}(os,i.parameters,o)).then(function(e){a.result=e}).otherwise(function(e){e instanceof Error?a.error={name:e.name,message:e.message,stack:e.stack}:a.error=e}).always(function(){C(as)||(as=M(self.webkitPostMessage,self.postMessage)),i.canTransferArrayBuffer||(o.length=0);try{as(a,o)}catch(e){a.result=void 0,a.error="postMessage failed with error: "+(r=(t=e).name,n=t.message,n=C(r)&&C(n)?r+": "+n:t.toString(),C(t=t.stack)&&(n+="\n"+t),n)+"\n    with responseMessage: "+JSON.stringify(a),as(a)}var t,r,n})}});
