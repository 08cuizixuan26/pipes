define(function(){"use strict";function H(e){return null!=e}function o(e){var t;this.name="DeveloperError",this.message=e;try{throw new Error}catch(e){t=e.stack}this.stack=t}H(Object.create)&&((o.prototype=Object.create(Error.prototype)).constructor=o),o.prototype.toString=function(){var e=this.name+": "+this.message;return H(this.stack)&&(e+="\n"+this.stack.toString()),e},o.throwInstantiationError=function(){throw new o("This function defines an interface and should not be called directly.")};var i={};function r(e,t,r){return"Expected "+r+" to be typeof "+t+", actual typeof was "+e}function b(e,t){return null!=e?e:t}function t(e){null==e&&(e=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,this.init_genrand(e)}i.typeOf={},i.defined=function(e,t){if(!H(t))throw new o(e+" is required, actual value was undefined")},i.typeOf.func=function(e,t){if("function"!=typeof t)throw new o(r(typeof t,"function",e))},i.typeOf.string=function(e,t){if("string"!=typeof t)throw new o(r(typeof t,"string",e))},i.typeOf.number=function(e,t){if("number"!=typeof t)throw new o(r(typeof t,"number",e))},i.typeOf.number.lessThan=function(e,t,r){if(i.typeOf.number(e,t),r<=t)throw new o("Expected "+e+" to be less than "+r+", actual value was "+t)},i.typeOf.number.lessThanOrEquals=function(e,t,r){if(i.typeOf.number(e,t),r<t)throw new o("Expected "+e+" to be less than or equal to "+r+", actual value was "+t)},i.typeOf.number.greaterThan=function(e,t,r){if(i.typeOf.number(e,t),t<=r)throw new o("Expected "+e+" to be greater than "+r+", actual value was "+t)},i.typeOf.number.greaterThanOrEquals=function(e,t,r){if(i.typeOf.number(e,t),t<r)throw new o("Expected "+e+" to be greater than or equal to"+r+", actual value was "+t)},i.typeOf.object=function(e,t){if("object"!=typeof t)throw new o(r(typeof t,"object",e))},i.typeOf.bool=function(e,t){if("boolean"!=typeof t)throw new o(r(typeof t,"boolean",e))},i.typeOf.number.equals=function(e,t,r,n){if(i.typeOf.number(e,r),i.typeOf.number(t,n),r!==n)throw new o(e+" must be equal to "+t+", the actual values are "+r+" and "+n)},b.EMPTY_OBJECT=Object.freeze({}),t.prototype.init_genrand=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0}},t.prototype.genrand_int32=function(){var e,t,r=new Array(0,this.MATRIX_A);if(this.mti>=this.N){for(this.mti==this.N+1&&this.init_genrand(5489),t=0;t<this.N-this.M;t++)e=this.mt[t]&this.UPPER_MASK|this.mt[t+1]&this.LOWER_MASK,this.mt[t]=this.mt[t+this.M]^e>>>1^r[1&e];for(;t<this.N-1;t++)e=this.mt[t]&this.UPPER_MASK|this.mt[t+1]&this.LOWER_MASK,this.mt[t]=this.mt[t+(this.M-this.N)]^e>>>1^r[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^r[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0},t.prototype.random=function(){return this.genrand_int32()*(1/4294967296)};var j={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,EPSILON21:1e-21,GRAVITATIONALPARAMETER:3986004418e5,SOLAR_RADIUS:6955e5,LUNAR_RADIUS:1737400,SIXTY_FOUR_KILOBYTES:65536,FOUR_GIGABYTES:4294967296};j.sign=b(Math.sign,function(e){return 0===(e=+e)||e!=e?e:0<e?1:-1}),j.signNotZero=function(e){return e<0?-1:1},j.toSNorm=function(e,t){return t=b(t,255),Math.round((.5*j.clamp(e,-1,1)+.5)*t)},j.fromSNorm=function(e,t){return t=b(t,255),j.clamp(e,0,t)/t*2-1},j.normalize=function(e,t,r){return 0===(r=Math.max(r-t,0))?0:j.clamp((e-t)/r,0,1)},j.sinh=b(Math.sinh,function(e){return(Math.exp(e)-Math.exp(-e))/2}),j.cosh=b(Math.cosh,function(e){return(Math.exp(e)+Math.exp(-e))/2}),j.lerp=function(e,t,r){return(1-r)*e+r*t},j.PI=Math.PI,j.ONE_OVER_PI=1/Math.PI,j.PI_OVER_TWO=Math.PI/2,j.PI_OVER_THREE=Math.PI/3,j.PI_OVER_FOUR=Math.PI/4,j.PI_OVER_SIX=Math.PI/6,j.THREE_PI_OVER_TWO=3*Math.PI/2,j.TWO_PI=2*Math.PI,j.ONE_OVER_TWO_PI=1/(2*Math.PI),j.RADIANS_PER_DEGREE=Math.PI/180,j.DEGREES_PER_RADIAN=180/Math.PI,j.RADIANS_PER_ARCSECOND=j.RADIANS_PER_DEGREE/3600,j.toRadians=function(e){return e*j.RADIANS_PER_DEGREE},j.toDegrees=function(e){return e*j.DEGREES_PER_RADIAN},j.convertLongitudeRange=function(e){var t=j.TWO_PI,e=e-Math.floor(e/t)*t;return e<-Math.PI?e+t:e>=Math.PI?e-t:e},j.clampToLatitudeRange=function(e){return j.clamp(e,-1*j.PI_OVER_TWO,j.PI_OVER_TWO)},j.negativePiToPi=function(e){return j.zeroToTwoPi(e+j.PI)-j.PI},j.zeroToTwoPi=function(e){var t=j.mod(e,j.TWO_PI);return Math.abs(t)<j.EPSILON14&&Math.abs(e)>j.EPSILON14?j.TWO_PI:t},j.mod=function(e,t){return(e%t+t)%t},j.equalsEpsilon=function(e,t,r,n){r=b(r,0),n=b(n,r);var i=Math.abs(e-t);return i<=n||i<=r*Math.max(Math.abs(e),Math.abs(t))},j.lessThan=function(e,t,r){return e-t<-r},j.lessThanOrEquals=function(e,t,r){return e-t<r},j.greaterThan=function(e,t,r){return r<e-t},j.greaterThanOrEquals=function(e,t,r){return-r<e-t};var a=[1];j.factorial=function(e){var t=a.length;if(t<=e)for(var r=a[t-1],n=t;n<=e;n++){var i=r*n;a.push(i),r=i}return a[e]},j.incrementWrap=function(e,t,r){return r=b(r,0),e=t<++e?r:e},j.isPowerOfTwo=function(e){return 0!==e&&0==(e&e-1)},j.nextPowerOfTwo=function(e){return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e},j.clamp=function(e,t,r){return e<t?t:r<e?r:e};var n=new t;function W(e,t,r){this.x=b(e,0),this.y=b(t,0),this.z=b(r,0)}j.setRandomNumberSeed=function(e){n=new t(e)},j.nextRandomNumber=function(){return n.random()},j.randomBetween=function(e,t){return j.nextRandomNumber()*(t-e)+e},j.acosClamped=function(e){return Math.acos(j.clamp(e,-1,1))},j.asinClamped=function(e){return Math.asin(j.clamp(e,-1,1))},j.chordLength=function(e,t){return 2*t*Math.sin(.5*e)},j.logBase=function(e,t){return Math.log(e)/Math.log(t)},j.cbrt=b(Math.cbrt,function(e){var t=Math.pow(Math.abs(e),1/3);return e<0?-t:t}),j.log2=b(Math.log2,function(e){return Math.log(e)*Math.LOG2E}),j.fog=function(e,t){t*=e;return 1-Math.exp(-t*t)},j.fastApproximateAtan=function(e){return e*(-.1784*Math.abs(e)-.0663*e*e+1.0301)},j.fastApproximateAtan2=function(e,t){var r=Math.abs(e),n=Math.abs(t),i=Math.max(r,n);n=Math.min(r,n);r=j.fastApproximateAtan(n/i);return r=Math.abs(t)>Math.abs(e)?j.PI_OVER_TWO-r:r,r=e<0?j.PI-r:r,r=t<0?-r:r},W.fromSpherical=function(e,t){H(t)||(t=new W);var r=e.clock,n=e.cone,i=b(e.magnitude,1),e=i*Math.sin(n);return t.x=e*Math.cos(r),t.y=e*Math.sin(r),t.z=i*Math.cos(n),t},W.fromElements=function(e,t,r,n){return H(n)?(n.x=e,n.y=t,n.z=r,n):new W(e,t,r)},W.fromCartesian4=W.clone=function(e,t){if(H(e))return H(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t):new W(e.x,e.y,e.z)},W.packedLength=3,W.pack=function(e,t,r){return r=b(r,0),t[r++]=e.x,t[r++]=e.y,t[r]=e.z,t},W.unpack=function(e,t,r){return t=b(t,0),(r=!H(r)?new W:r).x=e[t++],r.y=e[t++],r.z=e[t],r},W.packArray=function(e,t){var r=e.length,n=3*r;if(H(t)){if(!Array.isArray(t)&&t.length!==n)throw new o("If result is a typed array, it must have exactly array.length * 3 elements");t.length!==n&&(t.length=n)}else t=new Array(n);for(var i=0;i<r;++i)W.pack(e[i],t,3*i);return t},W.unpackArray=function(e,t){var r=e.length;H(t)?t.length=r/3:t=new Array(r/3);for(var n=0;n<r;n+=3){var i=n/3;t[i]=W.unpack(e,n,t[i])}return t},W.fromArray=W.unpack,W.maximumComponent=function(e){return Math.max(e.x,e.y,e.z)},W.minimumComponent=function(e){return Math.min(e.x,e.y,e.z)},W.minimumByComponent=function(e,t,r){return r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r.z=Math.min(e.z,t.z),r},W.maximumByComponent=function(e,t,r){return r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r.z=Math.max(e.z,t.z),r},W.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z},W.magnitude=function(e){return Math.sqrt(W.magnitudeSquared(e))};var s=new W;W.distance=function(e,t){return W.subtract(e,t,s),W.magnitude(s)},W.distanceSquared=function(e,t){return W.subtract(e,t,s),W.magnitudeSquared(s)},W.normalize=function(e,t){var r=W.magnitude(e);return 0!=r?(t.x=e.x/r,t.y=e.y/r,t.z=e.z/r):W.clone(e,t),Math.abs(t.x)<j.EPSILON8&&(t.x=0),Math.abs(t.y)<j.EPSILON8&&(t.y=0),Math.abs(t.z)<j.EPSILON8&&(t.z=0),t},W.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},W.multiplyComponents=function(e,t,r){return r.x=e.x*t.x,r.y=e.y*t.y,r.z=e.z*t.z,r},W.divideComponents=function(e,t,r){return r.x=e.x/t.x,r.y=e.y/t.y,r.z=e.z/t.z,r},W.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r},W.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r},W.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r},W.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r},W.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t},W.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t};var u=new W;W.lerp=function(e,t,r,n){return W.multiplyByScalar(t,r,u),n=W.multiplyByScalar(e,1-r,n),W.add(u,n,n)};var c=new W,l=new W;W.angleBetween=function(e,t){W.normalize(e,c),W.normalize(t,l);e=W.dot(c,l),t=W.magnitude(W.cross(c,l,c));return Math.atan2(t,e)};var h=new W;W.mostOrthogonalAxis=function(e,t){e=W.normalize(e,h);return W.abs(e,e),t=e.x<=e.y?e.x<=e.z?W.clone(W.UNIT_X,t):W.clone(W.UNIT_Z,t):e.y<=e.z?W.clone(W.UNIT_Y,t):W.clone(W.UNIT_Z,t)},W.projectVector=function(e,t,r){e=W.dot(e,t)/W.dot(t,t);return W.multiplyByScalar(t,e,r)},W.equals=function(e,t){return e===t||H(e)&&H(t)&&Math.abs(e.x-t.x)<1e-10&&Math.abs(e.y-t.y)<1e-10&&Math.abs(e.z-t.z)<1e-10},W.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]&&e.z===t[r+2]},W.equalsEpsilon=function(e,t,r,n){return e===t||H(e)&&H(t)&&j.equalsEpsilon(e.x,t.x,r,n)&&j.equalsEpsilon(e.y,t.y,r,n)&&j.equalsEpsilon(e.z,t.z,r,n)},W.cross=function(e,t,r){var n=e.x,i=e.y,o=e.z,a=t.x,s=t.y,e=t.z,t=o*a-n*e,a=n*s-i*a;return r.x=i*e-o*s,r.y=t,r.z=a,r},W.midpoint=function(e,t,r){return r.x=.5*(e.x+t.x),r.y=.5*(e.y+t.y),r.z=.5*(e.z+t.z),r},W.fromDegrees=function(e,t,r,n,i){return e=j.toRadians(e),t=j.toRadians(t),W.fromRadians(e,t,r,n,i)};var f=new W,m=new W,p=new W(40680631590769,40680631590769,40408299984661.445);W.fromRadians=function(e,t,r,n,i){r=b(r,0);var o=H(n)?n.radiiSquared:p,n=Math.cos(t);f.x=n*Math.cos(e),f.y=n*Math.sin(e),f.z=Math.sin(t),f=W.normalize(f,f),W.multiplyComponents(o,f,m);o=Math.sqrt(W.dot(f,m));return m=W.divideByScalar(m,o,m),f=W.multiplyByScalar(f,r,f),H(i)||(i=new W),W.add(m,f,i)},W.fromDegreesArray=function(e,t,r){var n=e.length;H(r)?r.length=n/2:r=new Array(n/2);for(var i=0;i<n;i+=2){var o=e[i],a=e[i+1],s=i/2;r[s]=W.fromDegrees(o,a,0,t,r[s])}return r},W.fromRadiansArray=function(e,t,r){var n=e.length;H(r)?r.length=n/2:r=new Array(n/2);for(var i=0;i<n;i+=2){var o=e[i],a=e[i+1],s=i/2;r[s]=W.fromRadians(o,a,0,t,r[s])}return r},W.fromDegreesArrayHeights=function(e,t,r){var n=e.length;H(r)?r.length=n/3:r=new Array(n/3);for(var i=0;i<n;i+=3){var o=e[i],a=e[i+1],s=e[i+2],u=i/3;r[u]=W.fromDegrees(o,a,s,t,r[u])}return r},W.fromRadiansArrayHeights=function(e,t,r){var n=e.length;H(r)?r.length=n/3:r=new Array(n/3);for(var i=0;i<n;i+=3){var o=e[i],a=e[i+1],s=e[i+2],u=i/3;r[u]=W.fromRadians(o,a,s,t,r[u])}return r},W.ZERO=Object.freeze(new W(0,0,0)),W.UNIT_X=Object.freeze(new W(1,0,0)),W.UNIT_Y=Object.freeze(new W(0,1,0)),W.UNIT_Z=Object.freeze(new W(0,0,1)),W.prototype.clone=function(e){return W.clone(this,e)},W.prototype.equals=function(e){return W.equals(this,e)},W.prototype.equalsEpsilon=function(e,t,r){return W.equalsEpsilon(this,e,t,r)},W.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},W.prototype.applyMatrix4=function(e,t,r){H(r)||(r=new W);var n=e.x,i=e.y,o=e.z,e=1/(t[3]*n+t[7]*i+t[11]*o+t[15]);return r.x=(t[0]*n+t[4]*i+t[8]*o+t[12])*e,r.y=(t[1]*n+t[5]*i+t[9]*o+t[13])*e,r.z=(t[2]*n+t[6]*i+t[10]*o+t[14])*e,r},W.prototype.set=function(e,t,r){this.x=e,this.y=t,this.z=r},W.prototype.fromArray=function(e,t){return this.x=e[t=void 0===t?0:t],this.y=e[t+1],this.z=e[t+2],this},W.prototype.toArray=function(e,t){return(e=void 0===e?[]:e)[t=void 0===t?0:t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e};var O=new W,x=new W;function d(e,t,r,n,i){var o=e.x,a=e.y,s=e.z,u=t.x,c=t.y,t=t.z,l=o*o*u*u,h=a*a*c*c,f=s*s*t*t,u=l+h+f,c=Math.sqrt(1/u),t=W.multiplyByScalar(e,c,O);if(u<n)return isFinite(c)?W.clone(t,i):void 0;var m=r.x,p=r.y,d=r.z,r=x;r.x=t.x*m*2,r.y=t.y*p*2,r.z=t.z*d*2;var y=(1-c)*W.magnitude(e)/(.5*W.magnitude(r)),E=0;do{var _,g,v,T,A,R,S,E=(S=l*(T=(_=1/(1+(y-=E)*m))*_)+h*(A=(g=1/(1+y*p))*g)+f*(R=(v=1/(1+y*d))*v)-1)/(-2*(l*(T*_)*m+h*(A*g)*p+f*(R*v)*d))}while(Math.abs(S)>j.EPSILON12);return H(i)?(i.x=o*_,i.y=a*g,i.z=s*v,i):new W(o*_,a*g,s*v)}function R(e,t,r){this.longitude=b(e,0),this.latitude=b(t,0),this.height=b(r,0)}R.fromRadians=function(e,t,r,n){return r=b(r,0),H(n)?(n.longitude=e,n.latitude=t,n.height=r,n):new R(e,t,r)},R.fromDegrees=function(e,t,r,n){return e=j.toRadians(e),t=j.toRadians(t),R.fromRadians(e,t,r,n)};var y=new W,E=new W,_=new W,g=new W(1/6378137,1/6378137,1/6356752.314245179),v=new W(1/40680631590769,1/40680631590769,1/40408299984661.445),T=j.EPSILON1;function A(e,t,r,n){t=b(t,0),r=b(r,0),n=b(n,0),e._radii=new W(t,r,n),e._radiiSquared=new W(t*t,r*r,n*n),e._radiiToTheFourth=new W(t*t*t*t,r*r*r*r,n*n*n*n),e._oneOverRadii=new W(0===t?0:1/t,0===r?0:1/r,0===n?0:1/n),e._oneOverRadiiSquared=new W(0===t?0:1/(t*t),0===r?0:1/(r*r),0===n?0:1/(n*n)),e._minimumRadius=Math.min(t,r,n),e._maximumRadius=Math.max(t,r,n),e._centerToleranceSquared=j.EPSILON1,0!==e._radiiSquared.z&&(e._squaredXOverSquaredZ=e._radiiSquared.x/e._radiiSquared.z)}function S(e,t,r){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,A(this,e,t,r)}R.fromCartesian=function(e,t,r){var n=H(t)?t.oneOverRadii:g,i=H(t)?t.oneOverRadiiSquared:v,n=d(e,n,i,H(t)?t._centerToleranceSquared:T,E);if(H(n)){t=W.multiplyComponents(n,i,y),t=W.normalize(t,t),i=W.subtract(e,n,_),n=Math.atan2(t.y,t.x),t=Math.asin(t.z),i=j.sign(W.dot(i,e))*W.magnitude(i);return H(r)?(r.longitude=n,r.latitude=t,r.height=i,r):new R(n,t,i)}},R.toCartesian=function(e,t,r){return W.fromRadians(e.longitude,e.latitude,e.height,t,r)},R.clone=function(e,t){if(H(e))return H(t)?(t.longitude=e.longitude,t.latitude=e.latitude,t.height=e.height,t):new R(e.longitude,e.latitude,e.height)},R.equals=function(e,t){return e===t||H(e)&&H(t)&&e.longitude===t.longitude&&e.latitude===t.latitude&&e.height===t.height},R.equalsEpsilon=function(e,t,r){return r=b(r,0),e===t||H(e)&&H(t)&&Math.abs(e.longitude-t.longitude)<=r&&Math.abs(e.latitude-t.latitude)<=r&&Math.abs(e.height-t.height)<=r},R.ZERO=Object.freeze(new R(0,0,0)),R.prototype.clone=function(e){return R.clone(this,e)},R.prototype.equals=function(e){return R.equals(this,e)},R.prototype.equalsEpsilon=function(e,t){return R.equalsEpsilon(this,e,t)},R.prototype.toString=function(){return"("+this.longitude+", "+this.latitude+", "+this.height+")"},R.geodeticParallelLength=function(e,t,r){return e*r*Math.cos(t)},R.geodeticCircleRadians=function(e,t,r,n){n=Math.cos(t)*Math.cos(n)*Math.cos(e-r)+Math.sin(t)*Math.sin(n);return Math.abs(Math.acos(n))},R.add=function(e,t,r){return r.longitude=e.longitude+t.longitude,r.latitude=e.latitude+t.latitude,r.height=e.height+t.height,r},R.subtract=function(e,t,r){return r.longitude=e.longitude-t.longitude,r.latitude=e.latitude-t.latitude,r.height=e.height-t.height,r},R.multiplyByScalar=function(e,t,r){return r.longitude=e.longitude*t,r.latitude=e.latitude*t,r.height=e.height*t,r},R.divideByScalar=function(e,t,r){return r.longitude=e.longitude/t,r.latitude=e.latitude/t,r.height=e.height/t,r},R.distance=function(e,t){e=new Cartesian2(e.longitude,e.latitude),t=new Cartesian2(t.longitude,t.latitude);return Cartesian2.distance(e,t)},Object.defineProperties(S.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),S.clone=function(e,t){if(H(e)){var r=e._radii;return H(t)?(W.clone(r,t._radii),W.clone(e._radiiSquared,t._radiiSquared),W.clone(e._radiiToTheFourth,t._radiiToTheFourth),W.clone(e._oneOverRadii,t._oneOverRadii),W.clone(e._oneOverRadiiSquared,t._oneOverRadiiSquared),t._minimumRadius=e._minimumRadius,t._maximumRadius=e._maximumRadius,t._centerToleranceSquared=e._centerToleranceSquared,t):new S(r.x,r.y,r.z)}},S.fromCartesian3=function(e,t){return H(t)||(t=new S),H(e)&&A(t,e.x,e.y,e.z),t},S.WGS84=Object.freeze(new S(6378137,6378137,6356752.314245179)),S.UNIT_SPHERE=Object.freeze(new S(1,1,1)),S.MOON=Object.freeze(new S(j.LUNAR_RADIUS,j.LUNAR_RADIUS,j.LUNAR_RADIUS)),S.DATUM_PLANE=-100,S.prototype.clone=function(e){return S.clone(this,e)},S.packedLength=W.packedLength,S.pack=function(e,t,r){return r=b(r,0),W.pack(e._radii,t,r),t},S.unpack=function(e,t,r){t=b(t,0);t=W.unpack(e,t);return S.fromCartesian3(t,r)},S.prototype.geocentricSurfaceNormal=W.normalize,S.prototype.geodeticSurfaceNormalCartographic=function(e,t){var r=e.longitude,n=e.latitude,i=Math.cos(n),e=i*Math.cos(r),r=i*Math.sin(r),n=Math.sin(n);return(t=!H(t)?new W:t).x=e,t.y=r,t.z=n,W.normalize(t,t)},S.prototype.geodeticSurfaceNormal=function(e,t){if(!W.equalsEpsilon(e,W.ZERO,j.EPSILON14))return H(t)||(t=new W),t=W.multiplyComponents(e,this._oneOverRadiiSquared,t),W.normalize(t,t)};var I=new W,w=new W;S.prototype.cartographicToCartesian=function(e,t){var r=I,n=w;this.geodeticSurfaceNormalCartographic(e,r),W.multiplyComponents(this._radiiSquared,r,n);var i=Math.sqrt(W.dot(r,n));return W.divideByScalar(n,i,n),W.multiplyByScalar(r,e.height,r),H(t)||(t=new W),W.add(n,r,t)},S.prototype.cartographicArrayToCartesianArray=function(e,t){var r=e.length;H(t)?t.length=r:t=new Array(r);for(var n=0;n<r;n++)t[n]=this.cartographicToCartesian(e[n],t[n]);return t};var N=new W,M=new W,C=new W;S.prototype.cartesianToCartographic=function(e,t){var r=this.scaleToGeodeticSurface(e,M);if(H(r)){var n=this.geodeticSurfaceNormal(r,N),i=W.subtract(e,r,C),r=Math.atan2(n.y,n.x),n=Math.asin(n.z),i=j.sign(W.dot(i,e))*W.magnitude(i);return H(t)?(t.longitude=r,t.latitude=n,t.height=i,t):new R(r,n,i)}},S.prototype.cartesianArrayToCartographicArray=function(e,t){var r=e.length;H(t)?t.length=r:t=new Array(r);for(var n=0;n<r;++n)t[n]=this.cartesianToCartographic(e[n],t[n]);return t},S.prototype.scaleToGeodeticSurface=function(e,t){return d(e,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,t)},S.prototype.scaleToGeocentricSurface=function(e,t){H(t)||(t=new W);var r=e.x,n=e.y,i=e.z,o=this._oneOverRadiiSquared,o=1/Math.sqrt(r*r*o.x+n*n*o.y+i*i*o.z);return W.multiplyByScalar(e,o,t)},S.prototype.transformPositionToScaledSpace=function(e,t){return H(t)||(t=new W),W.multiplyComponents(e,this._oneOverRadii,t)},S.prototype.transformPositionFromScaledSpace=function(e,t){return H(t)||(t=new W),W.multiplyComponents(e,this._radii,t)},S.prototype.equals=function(e){return this===e||H(e)&&W.equals(this._radii,e._radii)},S.prototype.toString=function(){return this._radii.toString()},S.prototype.getSurfaceNormalIntersectionWithZAxis=function(e,t,r){t=b(t,0);var n=this._squaredXOverSquaredZ;if((r=!H(r)?new W:r).x=0,r.y=0,r.z=e.z*(1-n),!(Math.abs(r.z)>=this._radii.z-t))return r};var P=[.14887433898163,.43339539412925,.67940956829902,.86506336668898,.97390652851717,0],L=[.29552422471475,.26926671930999,.21908636251598,.14945134915058,.066671344308684,0];function D(e,t,r){for(var n=.5*(t+e),i=.5*(t-e),o=0,a=0;a<5;a++){var s=i*P[a];o+=L[a]*(r(n+s)+r(n-s))}return o*=i}S.prototype.surfaceArea=function(e){for(var t=e.west,i=e.east,r=e.south,n=e.north;i<t;)i+=j.TWO_PI;var e=this._radiiSquared,o=e.x,a=e.y,s=e.z,u=o*a;return D(r,n,function(e){var r=Math.cos(e),n=Math.sin(e);return Math.cos(e)*D(t,i,function(e){var t=Math.cos(e),e=Math.sin(e);return Math.sqrt(u*n*n+s*(a*t*t+o*e*e)*r*r)})})};var z=Object.freeze({NONE:0,GEODESIC:1,RHUMB:2});function V(e,t,r,n){if("function"==typeof e.fill)return e.fill(t,r,n);for(var i=e.length>>>0,r=b(r,0),o=r<0?Math.max(i+r,0):Math.min(r,i),n=b(n,i),a=n<0?Math.max(i+n,0):Math.min(n,i);o<a;)e[o]=t,o++;return e}function F(e){this._ellipsoid=b(e,S.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}function Y(e,t){this.x=b(e,0),this.y=b(t,0)}Object.defineProperties(F.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),F.prototype.project=function(e,t){this._semimajorAxis;var r=e.longitude,n=e.latitude,e=e.height;return H(t)?(t.x=r,t.y=n,t.z=e,t):new W(r,n,e)},F.prototype.unproject=function(e,t){this._oneOverSemimajorAxis;var r=e.x,n=e.y,e=e.z;return H(t)?(t.longitude=r,t.latitude=n,t.height=e,t):new R(r,n,e)},Y.fromElements=function(e,t,r){return H(r)?(r.x=e,r.y=t,r):new Y(e,t)},Y.fromCartesian3=Y.clone=function(e,t){if(H(e))return H(t)?(t.x=e.x,t.y=e.y,t):new Y(e.x,e.y)},Y.fromCartesian4=Y.clone,Y.packedLength=2,Y.pack=function(e,t,r){return r=b(r,0),t[r++]=e.x,t[r]=e.y,t},Y.unpack=function(e,t,r){return t=b(t,0),(r=!H(r)?new Y:r).x=e[t++],r.y=e[t],r},Y.packArray=function(e,t){var r=e.length,n=2*r;if(H(t)){if(!Array.isArray(t)&&t.length!==n)throw new o("If result is a typed array, it must have exactly array.length * 2 elements");t.length!==n&&(t.length=n)}else t=new Array(n);for(var i=0;i<r;++i)Y.pack(e[i],t,2*i);return t},Y.unpackArray=function(e,t){var r=e.length;H(t)?t.length=r/2:t=new Array(r/2);for(var n=0;n<r;n+=2){var i=n/2;t[i]=Y.unpack(e,n,t[i])}return t},Y.fromArray=Y.unpack,Y.maximumComponent=function(e){return Math.max(e.x,e.y)},Y.minimumComponent=function(e){return Math.min(e.x,e.y)},Y.minimumByComponent=function(e,t,r){return r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r},Y.maximumByComponent=function(e,t,r){return r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r},Y.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},Y.magnitude=function(e){return Math.sqrt(Y.magnitudeSquared(e))};var U=new Y;Y.distance=function(e,t){return Y.subtract(e,t,U),Y.magnitude(U)},Y.distanceSquared=function(e,t){return Y.subtract(e,t,U),Y.magnitudeSquared(U)},Y.normalize=function(e,t){var r=Y.magnitude(e);return 0!=r?(t.x=e.x/r,t.y=e.y/r):Y.clone(e,t),Math.abs(t.x)<j.EPSILON8&&(t.x=0),Math.abs(t.y)<j.EPSILON8&&(t.y=0),t},Y.dot=function(e,t){return e.x*t.x+e.y*t.y},Y.multiplyComponents=function(e,t,r){return r.x=e.x*t.x,r.y=e.y*t.y,r},Y.divideComponents=function(e,t,r){return r.x=e.x/t.x,r.y=e.y/t.y,r},Y.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r},Y.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r},Y.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r},Y.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r},Y.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t},Y.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t};var B=new Y;Y.lerp=function(e,t,r,n){return Y.multiplyByScalar(t,r,B),n=Y.multiplyByScalar(e,1-r,n),Y.add(B,n,n)};var q=new Y,G=new Y;Y.angleBetween=function(e,t){return Y.normalize(e,q),Y.normalize(t,G),j.acosClamped(Y.dot(q,G))};var X=new Y;Y.mostOrthogonalAxis=function(e,t){e=Y.normalize(e,X);return Y.abs(e,e),t=e.x<=e.y?Y.clone(Y.UNIT_X,t):Y.clone(Y.UNIT_Y,t)},Y.equals=function(e,t){return e===t||H(e)&&H(t)&&e.x===t.x&&e.y===t.y},Y.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]},Y.equalsEpsilon=function(e,t,r,n){return e===t||H(e)&&H(t)&&j.equalsEpsilon(e.x,t.x,r,n)&&j.equalsEpsilon(e.y,t.y,r,n)},Y.ZERO=Object.freeze(new Y(0,0)),Y.UNIT_X=Object.freeze(new Y(1,0)),Y.UNIT_Y=Object.freeze(new Y(0,1)),Y.prototype.clone=function(e){return Y.clone(this,e)},Y.prototype.equals=function(e){return Y.equals(this,e)},Y.prototype.equalsEpsilon=function(e,t,r){return Y.equalsEpsilon(this,e,t,r)},Y.prototype.toString=function(){return"("+this.x+", "+this.y+")"},Y.prototype.set=function(e,t){this.x=e,this.y=t},Y.prototype.fromArray=function(e,t){return this.x=e[t=void 0===t?0:t],this.y=e[t+1],this},Y.prototype.toArray=function(e,t){return(e=void 0===e?[]:e)[t=void 0===t?0:t]=this.x,e[t+1]=this.y,e};var k=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});function Z(e,t,r,n,i,o){this.west=b(e,Math.PI),this.south=b(t,Math.PI/2),this.east=b(r,-Math.PI),this.north=b(n,-Math.PI/2),this.minHeight=b(i,0),this.maxHeight=b(o,0)}Object.defineProperties(Z.prototype,{width:{get:function(){return Z.computeWidth(this)}},height:{get:function(){return Z.computeHeight(this)}}}),Z.packedLength=4,Z.pack=function(e,t,r){return r=b(r,0),t[r++]=e.west,t[r++]=e.south,t[r++]=e.east,t[r]=e.north,t},Z.unpack=function(e,t,r){return t=b(t,0),(r=!H(r)?new Z:r).west=e[t++],r.south=e[t++],r.east=e[t++],r.north=e[t],r},Z.computeWidth=function(e){var t=e.east,e=e.west;return t<e&&(t+=j.TWO_PI),t-e},Z.computeHeight=function(e){return e.north-e.south},Z.fromDegrees=function(e,t,r,n,i){return e=j.toRadians(b(e,0)),t=j.toRadians(b(t,0)),r=j.toRadians(b(r,0)),n=j.toRadians(b(n,0)),H(i)?(i.west=e,i.south=t,i.east=r,i.north=n,i):new Z(e,t,r,n)},Z.fromRadians=function(e,t,r,n,i){return H(i)?(i.west=b(e,0),i.south=b(t,0),i.east=b(r,0),i.north=b(n,0),i):new Z(e,t,r,n)},Z.fromCartographicArray=function(e,t){for(var r=Number.MAX_VALUE,n=-Number.MAX_VALUE,i=Number.MAX_VALUE,o=-Number.MAX_VALUE,a=Number.MAX_VALUE,s=-Number.MAX_VALUE,u=0,c=e.length;u<c;u++)var l=e[u],r=Math.min(r,l.longitude),n=Math.max(n,l.longitude),a=Math.min(a,l.latitude),s=Math.max(s,l.latitude),l=0<=l.longitude?l.longitude:l.longitude+j.TWO_PI,i=Math.min(i,l),o=Math.max(o,l);return o-i<n-r&&(r=i,(n=o)>j.PI&&(n-=j.TWO_PI),r>j.PI&&(r-=j.TWO_PI)),H(t)?(t.west=r,t.south=a,t.east=n,t.north=s,t):new Z(r,a,n,s)},Z.fromCartesianArray=function(e,t,r){t=b(t,S.WGS84);for(var n=Number.MAX_VALUE,i=-Number.MAX_VALUE,o=Number.MAX_VALUE,a=-Number.MAX_VALUE,s=Number.MAX_VALUE,u=-Number.MAX_VALUE,c=Number.MAX_VALUE,l=-Number.MAX_VALUE,h=0,f=e.length;h<f;h++)var m=t.cartesianToCartographic(e[h]),n=Math.min(n,m.longitude),i=Math.max(i,m.longitude),s=Math.min(s,m.latitude),u=Math.max(u,m.latitude),c=Math.min(c,m.height),l=Math.max(l,m.height),m=0<=m.longitude?m.longitude:m.longitude+j.TWO_PI,o=Math.min(o,m),a=Math.max(a,m);return a-o<i-n&&(n=o,(i=a)>j.PI&&(i-=j.TWO_PI),n>j.PI&&(n-=j.TWO_PI)),H(r)?(r.west=n,r.south=s,r.east=i,r.north=u,r.minHeight=c,r.maxHeight=l,r):new Z(n,s,i,u,c,l)},Z.clone=function(e,t){if(H(e))return H(t)?(t.west=e.west,t.south=e.south,t.east=e.east,t.north=e.north,t.minHeight=e.minHeight,t.maxHeight=e.maxHeight,t):new Z(e.west,e.south,e.east,e.north,e.minHeight,e.maxHeight)},Z.equalsEpsilon=function(e,t,r){return r=b(r,0),e===t||H(e)&&H(t)&&Math.abs(e.west-t.west)<=r&&Math.abs(e.south-t.south)<=r&&Math.abs(e.east-t.east)<=r&&Math.abs(e.north-t.north)<=r&&Math.abs(e.minHeight-t.minHeight)<=r&&Math.abs(e.maxHeight-t.maxHeight)<=r},Z.prototype.clone=function(e){return Z.clone(this,e)},Z.prototype.equals=function(e){return Z.equals(this,e)},Z.prototype.intersect=function(e){return Z.intersect(this,e)},Z.equals=function(e,t){return e===t||H(e)&&H(t)&&e.west===t.west&&e.south===t.south&&e.east===t.east&&e.north===t.north},Z.prototype.equalsEpsilon=function(e,t){return Z.equalsEpsilon(this,e,t)},Z.validate=function(e){},Z.southwest=function(e,t){return H(t)?(t.longitude=e.west,t.latitude=e.south,t.height=0,t):new R(e.west,e.south)},Z.northwest=function(e,t){return H(t)?(t.longitude=e.west,t.latitude=e.north,t.height=0,t):new R(e.west,e.north)},Z.northeast=function(e,t){return H(t)?(t.longitude=e.east,t.latitude=e.north,t.height=0,t):new R(e.east,e.north)},Z.southeast=function(e,t){return H(t)?(t.longitude=e.east,t.latitude=e.south,t.height=0,t):new R(e.east,e.south)},Z.center=function(e,t){var r=e.east,n=e.west;r<n&&(r+=j.TWO_PI);r=j.negativePiToPi(.5*(n+r)),e=.5*(e.south+e.north);return H(t)?(t.longitude=r,t.latitude=e,t.height=0,t):new R(r,e)},Z.intersection=function(e,t,r){var n=e.east,i=e.west,o=t.east,a=t.west;n<i&&0<o?n+=j.TWO_PI:o<a&&0<n&&(o+=j.TWO_PI),n<i&&a<0?a+=j.TWO_PI:o<a&&i<0&&(i+=j.TWO_PI);a=j.negativePiToPi(Math.max(i,a)),n=j.negativePiToPi(Math.min(n,o));if(!((e.west<e.east||t.west<t.east)&&n<=a)){o=Math.max(e.south,t.south),t=Math.min(e.north,t.north);if(!(t<=o))return H(r)?(r.west=a,r.south=o,r.east=n,r.north=t,r):new Z(a,o,n,t)}},Z.simpleIntersection=function(e,t,r){var n=Math.max(e.west,t.west),i=Math.max(e.south,t.south),o=Math.min(e.east,t.east),t=Math.min(e.north,t.north);if(!(t<=i||o<=n))return H(r)?(r.west=n,r.south=i,r.east=o,r.north=t,r):new Z(n,i,o,t)},Z.union=function(e,t,r){H(r)||(r=new Z);var n=e.east,i=e.west,o=t.east,a=t.west;n<i&&0<o?n+=j.TWO_PI:o<a&&0<n&&(o+=j.TWO_PI),n<i&&a<0?a+=j.TWO_PI:o<a&&i<0&&(i+=j.TWO_PI);a=j.convertLongitudeRange(Math.min(i,a)),o=j.convertLongitudeRange(Math.max(n,o));return r.west=a,r.south=Math.min(e.south,t.south),r.east=o,r.north=Math.max(e.north,t.north),r},Z.expand=function(e,t,r){return(r=!H(r)?new Z:r).west=Math.min(e.west,t.longitude),r.south=Math.min(e.south,t.latitude),r.east=Math.max(e.east,t.longitude),r.north=Math.max(e.north,t.latitude),r},Z.contains=function(e,t){var r=t.longitude,n=t.latitude,i=e.west,t=e.east;return t<i&&(t+=j.TWO_PI,r<0&&(r+=j.TWO_PI)),(i<r||j.equalsEpsilon(r,i,j.EPSILON14))&&(r<t||j.equalsEpsilon(r,t,j.EPSILON14))&&n>=e.south&&n<=e.north};var K=new R;function J(e,t,r,n){this.x=b(e,0),this.y=b(t,0),this.width=b(r,0),this.height=b(n,0)}Z.subsample=function(e,t,r,n){t=b(t,S.WGS84),r=b(r,0),H(n)||(n=[]);var i=0,o=e.north,a=e.south,s=e.east,u=e.west,c=K;c.height=r,c.longitude=u,c.latitude=o,n[i]=t.cartographicToCartesian(c,n[i]),i++,c.longitude=s,n[i]=t.cartographicToCartesian(c,n[i]),i++,c.latitude=a,n[i]=t.cartographicToCartesian(c,n[i]),i++,c.longitude=u,n[i]=t.cartographicToCartesian(c,n[i]),i++,c.latitude=o<0?o:0<a?a:0;for(var l=1;l<8;++l)c.longitude=-Math.PI+l*j.PI_OVER_TWO,Z.contains(e,c)&&(n[i]=t.cartographicToCartesian(c,n[i]),i++);return 0===c.latitude&&(c.longitude=u,n[i]=t.cartographicToCartesian(c,n[i]),i++,c.longitude=s,n[i]=t.cartographicToCartesian(c,n[i]),i++),n.length=i,n},Z.intersect=function(e,t){return e.north>=t.south&&e.south<=t.north&&e.east>=t.west&&e.west<=t.east},Z.intersect_lon_lat_region=function(e,t){for(var r=t.get_count(),n=0;n<r;n++)if(Z.check_rect_line(e,t.getItem(n),t.getItem((n+1)%r)))return!0;return!!t.containRect(e)},Z.check_rect_line_vertical=function(e,t,r,n,i){if(r<e.longitude&&r<t.longitude)return!1;if(r>e.longitude&&r>t.longitude)return!1;if(e.longitude==t.longitude)return r==e.longitude&&(!(e.latitude<n&&t.latitude<n)&&!(e.latitude>i&&t.latitude>i));e=(t.latitude-e.latitude)*(r-e.longitude)/(t.longitude-e.longitude)+e.latitude;return n<=e&&e<=i},Z.check_rect_line_horizontal=function(e,t,r,n,i){if(r<e.latitude&&r<t.latitude)return!1;if(r>e.latitude&&r>t.latitude)return!1;if(e.latitude==t.latitude)return r==e.latitude&&(!(e.longitude<n&&t.longitude<n)&&!(e.longitude>i&&t.longitude>i));e=(t.longitude-e.longitude)*(r-e.latitude)/(t.latitude-e.latitude)+e.longitude;return n<=e&&e<=i},Z.check_rect_line=function(e,t,r){var n=!1;return Z.containPoint(e,t)||Z.containPoint(e,r)?n=!0:(n|=Z.check_rect_line_horizontal(t,r,e.north,e.west,e.east),n|=Z.check_rect_line_horizontal(t,r,e.south,e.west,e.east),n|=Z.check_rect_line_vertical(t,r,e.west,e.south,e.north),n|=Z.check_rect_line_vertical(t,r,e.east,e.south,e.north)),n},Z.intersectAabb=function(e,t){for(var r=new Z,n=t.get_corners(),i=new R,o=0;o<8;o++){var a=R.fromCartesian(n[o],void 0,i);Z.combine(r,a)}return Z.intersect(e,r)},Z.fromGeoAabb=function(e){for(var t=new Z,r=e.get_corners(),n=new R,i=0;i<8;i++){var o=R.fromCartesian(r[i],void 0,n);Z.combine(t,o)}return t},Z.containsRect=function(e,t){var r=j.EPSILON6;return t.east<=e.east+r&&t.west>=e.west-r&&t.north<=e.north+r&&t.south>=e.south-r},Z.combine=function(e,t){e.west>t.longitude&&(e.west=t.longitude),e.east<t.longitude&&(e.east=t.longitude),e.north<t.latitude&&(e.north=t.latitude),e.south>t.latitude&&(e.south=t.latitude),e.maxHeight<t.height&&(e.maxHeight=t.height),e.minHeight>t.height&&(e.minHeight=t.height)},Z.fromAabb=function(e,t){var r=t.minimum,n=t.maximum,i=n.z/S.WGS84.maximumRadius*1e3,t=r.z/S.WGS84.maximumRadius*1e3,n=n.x/S.WGS84.maximumRadius*1e3,r=r.x/S.WGS84.maximumRadius*1e3;return new Z(e.longitude+r,e.latitude+t,e.longitude+n,e.latitude+i)},Z.containPoint=function(e,t){return t.longitude<=e.east&&t.longitude>=e.west&&t.latitude<=e.north&&t.latitude>=e.south},Z.MAX_VALUE=Object.freeze(new Z(-Math.PI,-j.PI_OVER_TWO,Math.PI,j.PI_OVER_TWO)),J.packedLength=4,J.pack=function(e,t,r){return r=b(r,0),t[r++]=e.x,t[r++]=e.y,t[r++]=e.width,t[r]=e.height,t},J.unpack=function(e,t,r){return t=b(t,0),(r=!H(r)?new J:r).x=e[t++],r.y=e[t++],r.width=e[t++],r.height=e[t],r},J.fromPoints=function(e,t){if(H(t)||(t=new J),!H(e)||0===e.length)return t.x=0,t.y=0,t.width=0,t.height=0,t;for(var r=e.length,n=e[0].x,i=e[0].y,o=e[0].x,a=e[0].y,s=1;s<r;s++)var u=e[s],c=u.x,u=u.y,n=Math.min(c,n),o=Math.max(c,o),i=Math.min(u,i),a=Math.max(u,a);return t.x=n,t.y=i,t.width=o-n,t.height=a-i,t};var Q=new F,$=new R,ee=new R;function te(e,t){this.start=b(e,0),this.stop=b(t,0)}function re(e,t,r,n,i,o,a,s,u){this[0]=b(e,0),this[1]=b(n,0),this[2]=b(a,0),this[3]=b(t,0),this[4]=b(i,0),this[5]=b(s,0),this[6]=b(r,0),this[7]=b(o,0),this[8]=b(u,0)}J.fromRectangle=function(e,t,r){if(H(r)||(r=new J),!H(e))return r.x=0,r.y=0,r.width=0,r.height=0,r;var n=(t=b(t,Q)).project(Z.southwest(e,$)),e=t.project(Z.northeast(e,ee));return Y.subtract(e,n,e),r.x=n.x,r.y=n.y,r.width=e.x,r.height=e.y,r},J.clone=function(e,t){if(H(e))return H(t)?(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t):new J(e.x,e.y,e.width,e.height)},J.union=function(e,t,r){H(r)||(r=new J);var n=Math.min(e.x,t.x),i=Math.min(e.y,t.y),o=Math.max(e.x+e.width,t.x+t.width),t=Math.max(e.y+e.height,t.y+t.height);return r.x=n,r.y=i,r.width=o-n,r.height=t-i,r},J.expand=function(e,t,r){r=J.clone(e,r);var n=t.x-r.x,e=t.y-r.y;return n>r.width?r.width=n:n<0&&(r.width-=n,r.x=t.x),e>r.height?r.height=e:e<0&&(r.height-=e,r.y=t.y),r},J.intersect=function(e,t){var r=e.x,n=e.y,i=t.x,o=t.y;return r>i+t.width||r+e.width<i||n+e.height<o||n>o+t.height?k.OUTSIDE:k.INTERSECTING},J.equals=function(e,t){return e===t||H(e)&&H(t)&&e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},J.prototype.clone=function(e){return J.clone(this,e)},J.prototype.intersect=function(e){return J.intersect(this,e)},J.prototype.equals=function(e){return J.equals(this,e)},re.packedLength=9,re.pack=function(e,t,r){return r=b(r,0),t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t[r++]=e[4],t[r++]=e[5],t[r++]=e[6],t[r++]=e[7],t[r++]=e[8],t},re.unpack=function(e,t,r){return t=b(t,0),(r=!H(r)?new re:r)[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r[4]=e[t++],r[5]=e[t++],r[6]=e[t++],r[7]=e[t++],r[8]=e[t++],r},re.clone=function(e,t){if(H(e))return H(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):new re(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])},re.fromArray=function(e,t,r){return t=b(t,0),(r=!H(r)?new re:r)[0]=e[t],r[1]=e[t+1],r[2]=e[t+2],r[3]=e[t+3],r[4]=e[t+4],r[5]=e[t+5],r[6]=e[t+6],r[7]=e[t+7],r[8]=e[t+8],r},re.fromColumnMajorArray=function(e,t){return re.clone(e,t)},re.fromRowMajorArray=function(e,t){return H(t)?(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t):new re(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},re.fromQuaternion=function(e,t){var r=e.x*e.x,n=e.x*e.y,i=e.x*e.z,o=e.x*e.w,a=e.y*e.y,s=e.y*e.z,u=e.y*e.w,c=e.z*e.z,l=e.z*e.w,h=e.w*e.w,f=r-a-c+h,m=2*(n-l),p=2*(i+u),e=2*(n+l),n=a-r-c+h,l=2*(s-o),u=2*(i-u),o=2*(s+o),h=-r-a+c+h;return H(t)?(t[0]=f,t[1]=e,t[2]=u,t[3]=m,t[4]=n,t[5]=o,t[6]=p,t[7]=l,t[8]=h,t):new re(f,m,p,e,n,l,u,o,h)},re.fromHeadingPitchRoll=function(e,t){var r=Math.cos(-e.pitch),n=Math.cos(-e.heading),i=Math.cos(e.roll),o=Math.sin(-e.pitch),a=Math.sin(-e.heading),s=Math.sin(e.roll),u=r*n,c=-i*a+s*o*n,l=s*a+i*o*n,h=r*a,e=i*n+s*o*a,a=-s*n+i*o*a,o=-o,s=s*r,r=i*r;return H(t)?(t[0]=u,t[1]=h,t[2]=o,t[3]=c,t[4]=e,t[5]=s,t[6]=l,t[7]=a,t[8]=r,t):new re(u,c,l,h,e,a,o,s,r)},re.fromScale=function(e,t){return H(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=e.y,t[5]=0,t[6]=0,t[7]=0,t[8]=e.z,t):new re(e.x,0,0,0,e.y,0,0,0,e.z)},re.fromUniformScale=function(e,t){return H(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=e,t):new re(e,0,0,0,e,0,0,0,e)},re.fromCrossProduct=function(e,t){return H(t)?(t[0]=0,t[1]=e.z,t[2]=-e.y,t[3]=-e.z,t[4]=0,t[5]=e.x,t[6]=e.y,t[7]=-e.x,t[8]=0,t):new re(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0)},re.fromRotationX=function(e,t){var r=Math.cos(e),e=Math.sin(e);return H(t)?(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=r,t[5]=e,t[6]=0,t[7]=-e,t[8]=r,t):new re(1,0,0,0,r,-e,0,e,r)},re.fromRotationY=function(e,t){var r=Math.cos(e),e=Math.sin(e);return H(t)?(t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=1,t[5]=0,t[6]=e,t[7]=0,t[8]=r,t):new re(r,0,e,0,1,0,-e,0,r)},re.fromRotationZ=function(e,t){var r=Math.cos(e),e=Math.sin(e);return H(t)?(t[0]=r,t[1]=e,t[2]=0,t[3]=-e,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new re(r,-e,0,e,r,0,0,0,1)},re.toArray=function(e,t){return H(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},re.getElementIndex=function(e,t){return 3*e+t},re.getColumn=function(e,t,r){var n=3*t,i=e[n],t=e[1+n],n=e[2+n];return r.x=i,r.y=t,r.z=n,r},re.setColumn=function(e,t,r,n){t*=3;return(n=re.clone(e,n))[t]=r.x,n[1+t]=r.y,n[2+t]=r.z,n},re.getRow=function(e,t,r){var n=e[t],i=e[t+3],t=e[t+6];return r.x=n,r.y=i,r.z=t,r},re.setRow=function(e,t,r,n){return(n=re.clone(e,n))[t]=r.x,n[t+3]=r.y,n[t+6]=r.z,n};var ne=new W;re.getScale=function(e,t){return t.x=W.magnitude(W.fromElements(e[0],e[1],e[2],ne)),t.y=W.magnitude(W.fromElements(e[3],e[4],e[5],ne)),t.z=W.magnitude(W.fromElements(e[6],e[7],e[8],ne)),t};var ie=new W;re.getMaximumScale=function(e){return re.getScale(e,ie),W.maximumComponent(ie)},re.multiply=function(e,t,r){var n=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],i=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],o=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],a=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],s=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],u=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],c=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],l=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],t=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return r[0]=n,r[1]=i,r[2]=o,r[3]=a,r[4]=s,r[5]=u,r[6]=c,r[7]=l,r[8]=t,r},re.add=function(e,t,r){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r},re.subtract=function(e,t,r){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r},re.multiplyByVector=function(e,t,r){var n=t.x,i=t.y,o=t.z,a=e[0]*n+e[3]*i+e[6]*o,t=e[1]*n+e[4]*i+e[7]*o,o=e[2]*n+e[5]*i+e[8]*o;return r.x=a,r.y=t,r.z=o,r},re.multiplyByScalar=function(e,t,r){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r},re.multiplyByScale=function(e,t,r){return r[0]=e[0]*t.x,r[1]=e[1]*t.x,r[2]=e[2]*t.x,r[3]=e[3]*t.y,r[4]=e[4]*t.y,r[5]=e[5]*t.y,r[6]=e[6]*t.z,r[7]=e[7]*t.z,r[8]=e[8]*t.z,r},re.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t},re.transpose=function(e,t){var r=e[0],n=e[3],i=e[6],o=e[1],a=e[4],s=e[7],u=e[2],c=e[5],e=e[8];return t[0]=r,t[1]=n,t[2]=i,t[3]=o,t[4]=a,t[5]=s,t[6]=u,t[7]=c,t[8]=e,t};var oe=new W(1,1,1);re.getRotation=function(e,t){var r=W.divideComponents(oe,re.getScale(e,ie),ie);return t=re.multiplyByScale(e,r,t)};var ae=[1,0,0],se=[2,2,1];var ue=new re,ce=new re;function le(e){var t;this.name="RuntimeError",this.message=e;try{throw new Error}catch(e){t=e.stack}this.stack=t}function he(e,t,r,n){this.x=b(e,0),this.y=b(t,0),this.z=b(r,0),this.w=b(n,0)}re.computeEigenDecomposition=function(e,t){for(var r=j.EPSILON20,n=0,i=0,o=(t=!H(t)?{}:t).unitary=re.clone(re.IDENTITY,t.unitary),a=t.diagonal=re.clone(e,t.diagonal),s=r*function(e){for(var t=0,r=0;r<9;++r){var n=e[r];t+=n*n}return Math.sqrt(t)}(a);i<10&&function(e){for(var t=0,r=0;r<3;++r){var n=e[re.getElementIndex(se[r],ae[r])];t+=2*n*n}return Math.sqrt(t)}(a)>s;)!function(e,t){for(var r=j.EPSILON15,n=0,i=1,o=0;o<3;++o){var a=Math.abs(e[re.getElementIndex(se[o],ae[o])]);n<a&&(i=o,n=a)}var s=1,u=0,c=ae[i],l=se[i];Math.abs(e[re.getElementIndex(l,c)])>r&&(u=(r=(r=(e[re.getElementIndex(l,l)]-e[re.getElementIndex(c,c)])/2/e[re.getElementIndex(l,c)])<0?-1/(-r+Math.sqrt(1+r*r)):1/(r+Math.sqrt(1+r*r)))*(s=1/Math.sqrt(1+r*r))),(t=re.clone(re.IDENTITY,t))[re.getElementIndex(c,c)]=t[re.getElementIndex(l,l)]=s,t[re.getElementIndex(l,c)]=u,t[re.getElementIndex(c,l)]=-u}(a,ue),re.transpose(ue,ce),re.multiply(a,ue,a),re.multiply(ce,a,a),re.multiply(o,ue,o),2<++n&&(++i,n=0);return t},re.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t},re.determinant=function(e){var t=e[0],r=e[3],n=e[6],i=e[1],o=e[4],a=e[7],s=e[2],u=e[5],e=e[8];return t*(o*e-u*a)+i*(u*n-r*e)+s*(r*a-o*n)},re.inverse=function(e,t){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],e=re.determinant(e);return t[0]=a*l-c*s,t[1]=c*i-n*l,t[2]=n*s-a*i,t[3]=u*s-o*l,t[4]=r*l-u*i,t[5]=o*i-r*s,t[6]=o*c-u*a,t[7]=u*n-r*c,t[8]=r*a-o*n,re.multiplyByScalar(t,1/e,t)},re.equals=function(e,t){return e===t||H(e)&&H(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},re.equalsEpsilon=function(e,t,r){return r=b(r,0),e===t||H(e)&&H(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r},re.IDENTITY=Object.freeze(new re(1,0,0,0,1,0,0,0,1)),re.ZERO=Object.freeze(new re(0,0,0,0,0,0,0,0,0)),re.COLUMN0ROW0=0,re.COLUMN0ROW1=1,re.COLUMN0ROW2=2,re.COLUMN1ROW0=3,re.COLUMN1ROW1=4,re.COLUMN1ROW2=5,re.COLUMN2ROW0=6,re.COLUMN2ROW1=7,re.COLUMN2ROW2=8,Object.defineProperties(re.prototype,{length:{get:function(){return re.packedLength}}}),re.prototype.clone=function(e){return re.clone(this,e)},re.prototype.equals=function(e){return re.equals(this,e)},re.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]},re.prototype.equalsEpsilon=function(e,t){return re.equalsEpsilon(this,e,t)},re.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+")\n("+this[1]+", "+this[4]+", "+this[7]+")\n("+this[2]+", "+this[5]+", "+this[8]+")"},H(Object.create)&&((le.prototype=Object.create(Error.prototype)).constructor=le),le.prototype.toString=function(){var e=this.name+": "+this.message;return H(this.stack)&&(e+="\n"+this.stack.toString()),e},he.fromElements=function(e,t,r,n,i){return H(i)?(i.x=e,i.y=t,i.z=r,i.w=n,i):new he(e,t,r,n)},he.fromColor=function(e,t){return H(t)?(t.x=e.red,t.y=e.green,t.z=e.blue,t.w=e.alpha,t):new he(e.red,e.green,e.blue,e.alpha)},he.clone=function(e,t){if(H(e))return H(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new he(e.x,e.y,e.z,e.w)},he.packedLength=4,he.pack=function(e,t,r){return r=b(r,0),t[r++]=e.x,t[r++]=e.y,t[r++]=e.z,t[r]=e.w,t},he.unpack=function(e,t,r){return t=b(t,0),(r=!H(r)?new he:r).x=e[t++],r.y=e[t++],r.z=e[t++],r.w=e[t],r},he.packArray=function(e,t){var r=e.length,n=4*r;if(H(t)){if(!Array.isArray(t)&&t.length!==n)throw new o("If result is a typed array, it must have exactly array.length * 4 elements");t.length!==n&&(t.length=n)}else t=new Array(n);for(var i=0;i<r;++i)he.pack(e[i],t,4*i);return t},he.unpackArray=function(e,t){var r=e.length;H(t)?t.length=r/4:t=new Array(r/4);for(var n=0;n<r;n+=4){var i=n/4;t[i]=he.unpack(e,n,t[i])}return t},he.fromArray=he.unpack,he.maximumComponent=function(e){return Math.max(e.x,e.y,e.z,e.w)},he.minimumComponent=function(e){return Math.min(e.x,e.y,e.z,e.w)},he.minimumByComponent=function(e,t,r){return r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r.z=Math.min(e.z,t.z),r.w=Math.min(e.w,t.w),r},he.maximumByComponent=function(e,t,r){return r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r.z=Math.max(e.z,t.z),r.w=Math.max(e.w,t.w),r},he.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},he.magnitude=function(e){return Math.sqrt(he.magnitudeSquared(e))};var fe=new he;he.distance=function(e,t){return he.subtract(e,t,fe),he.magnitude(fe)},he.distanceSquared=function(e,t){return he.subtract(e,t,fe),he.magnitudeSquared(fe)},he.normalize=function(e,t){var r=he.magnitude(e);return 0!=r?(t.x=e.x/r,t.y=e.y/r,t.z=e.z/r,t.w=e.w/r):he.clone(e,t),Math.abs(t.x)<j.EPSILON8&&(t.x=0),Math.abs(t.y)<j.EPSILON8&&(t.y=0),Math.abs(t.z)<j.EPSILON8&&(t.z=0),Math.abs(t.w)<j.EPSILON8&&(t.w=0),t},he.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},he.multiplyComponents=function(e,t,r){return r.x=e.x*t.x,r.y=e.y*t.y,r.z=e.z*t.z,r.w=e.w*t.w,r},he.divideComponents=function(e,t,r){return r.x=e.x/t.x,r.y=e.y/t.y,r.z=e.z/t.z,r.w=e.w/t.w,r},he.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r},he.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},he.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},he.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},he.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},he.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t.w=Math.abs(e.w),t};var me=new he;he.lerp=function(e,t,r,n){return he.multiplyByScalar(t,r,me),n=he.multiplyByScalar(e,1-r,n),he.add(me,n,n)};var pe=new he;he.mostOrthogonalAxis=function(e,t){e=he.normalize(e,pe);return he.abs(e,e),t=e.x<=e.y?e.x<=e.z?e.x<=e.w?he.clone(he.UNIT_X,t):he.clone(he.UNIT_W,t):e.z<=e.w?he.clone(he.UNIT_Z,t):he.clone(he.UNIT_W,t):e.y<=e.z?e.y<=e.w?he.clone(he.UNIT_Y,t):he.clone(he.UNIT_W,t):e.z<=e.w?he.clone(he.UNIT_Z,t):he.clone(he.UNIT_W,t)},he.equals=function(e,t){return e===t||H(e)&&H(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},he.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]&&e.z===t[r+2]&&e.w===t[r+3]},he.equalsEpsilon=function(e,t,r,n){return e===t||H(e)&&H(t)&&j.equalsEpsilon(e.x,t.x,r,n)&&j.equalsEpsilon(e.y,t.y,r,n)&&j.equalsEpsilon(e.z,t.z,r,n)&&j.equalsEpsilon(e.w,t.w,r,n)},he.ZERO=Object.freeze(new he(0,0,0,0)),he.UNIT_X=Object.freeze(new he(1,0,0,0)),he.UNIT_Y=Object.freeze(new he(0,1,0,0)),he.UNIT_Z=Object.freeze(new he(0,0,1,0)),he.UNIT_W=Object.freeze(new he(0,0,0,1)),he.WHITE=Object.freeze(new he(1,1,1,1)),he.prototype.clone=function(e){return he.clone(this,e)},he.prototype.equals=function(e){return he.equals(this,e)},he.prototype.equalsEpsilon=function(e,t,r){return he.equalsEpsilon(this,e,t,r)},he.prototype.toString=function(e){if(H(e)&&16==e){var t=parseInt(255*this.x).toString(16),r=parseInt(255*this.y).toString(16),e=parseInt(255*this.z).toString(16);return"00".substring(0,2-t.length)+t+"00".substring(0,2-r.length)+r+"00".substring(0,2-e.length)+e}return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var de=new Float32Array(1);function ye(e,t,r,n,i,o,a,s,u,c,l,h,f,m,p,d){this[0]=b(e,0),this[1]=b(i,0),this[2]=b(u,0),this[3]=b(f,0),this[4]=b(t,0),this[5]=b(o,0),this[6]=b(c,0),this[7]=b(m,0),this[8]=b(r,0),this[9]=b(a,0),this[10]=b(l,0),this[11]=b(p,0),this[12]=b(n,0),this[13]=b(s,0),this[14]=b(h,0),this[15]=b(d,0)}he.packFloat=function(e,t){if(H(t)||(t=new he),de[0]=e,0===(e=de[0]))return he.clone(he.ZERO,t);var r,n=e<0?1:0;isFinite(e)?(e=Math.abs(e),r=Math.floor(j.logBase(e,10))+1,e/=Math.pow(10,r)):(e=.1,r=38);e*=256;return t.x=Math.floor(e),e=256*(e-t.x),t.y=Math.floor(e),e=256*(e-t.y),t.z=Math.floor(e),t.w=2*(r+38)+n,t},he.unpackFloat=function(e){var t=e.w/2,r=Math.floor(t),n=-(n=2*(n=2*(t-r))-1);if(38<=(r-=38))return n<0?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY;t=n*e.x*(1/256);return t+=n*e.y*(1/65536),(t+=n*e.z*(1/16777216))*Math.pow(10,r)},ye.packedLength=16,ye.pack=function(e,t,r){return r=b(r,0),t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t[r++]=e[4],t[r++]=e[5],t[r++]=e[6],t[r++]=e[7],t[r++]=e[8],t[r++]=e[9],t[r++]=e[10],t[r++]=e[11],t[r++]=e[12],t[r++]=e[13],t[r++]=e[14],t[r]=e[15],t},ye.unpack=function(e,t,r){return t=b(t,0),(r=!H(r)?new ye:r)[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r[4]=e[t++],r[5]=e[t++],r[6]=e[t++],r[7]=e[t++],r[8]=e[t++],r[9]=e[t++],r[10]=e[t++],r[11]=e[t++],r[12]=e[t++],r[13]=e[t++],r[14]=e[t++],r[15]=e[t],r},ye.clone=function(e,t){if(H(e))return H(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):new ye(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},ye.fromArray=ye.unpack,ye.fromColumnMajorArray=function(e,t){return ye.clone(e,t)},ye.fromRowMajorArray=function(e,t){return H(t)?(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t):new ye(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},ye.fromRotationTranslation=function(e,t,r){return t=b(t,W.ZERO),H(r)?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=0,r[4]=e[3],r[5]=e[4],r[6]=e[5],r[7]=0,r[8]=e[6],r[9]=e[7],r[10]=e[8],r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,r):new ye(e[0],e[3],e[6],t.x,e[1],e[4],e[7],t.y,e[2],e[5],e[8],t.z,0,0,0,1)},ye.fromTranslationQuaternionRotationScale=function(e,t,r,n){H(n)||(n=new ye);var i=r.x,o=r.y,a=r.z,s=t.x*t.x,u=t.x*t.y,c=t.x*t.z,l=t.x*t.w,h=t.y*t.y,f=t.y*t.z,m=t.y*t.w,p=t.z*t.z,d=t.z*t.w,y=t.w*t.w,E=2*(u-d),r=2*(c+m),t=2*(u+d),u=h-s-p+y,d=2*(f-l),m=2*(c-m),f=2*(f+l),l=-s-h+p+y;return n[0]=(s-h-p+y)*i,n[1]=t*i,n[2]=m*i,n[3]=0,n[4]=E*o,n[5]=u*o,n[6]=f*o,n[7]=0,n[8]=r*a,n[9]=d*a,n[10]=l*a,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,n},ye.fromTranslationRotationScale=function(e,t){return ye.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t)},ye.fromTranslation=function(e,t){return ye.fromRotationTranslation(re.IDENTITY,e,t)},ye.fromScale=function(e,t){return H(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e.y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e.z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new ye(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},ye.fromUniformScale=function(e,t){return H(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new ye(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)};var Ee=new W,_e=new W,ge=new W;ye.fromObserver=function(e,t){var r=e.position,n=e.direction,i=e.up;W.normalize(n,Ee),W.normalize(W.cross(Ee,i,_e),_e),W.normalize(W.cross(_e,Ee,ge),ge);var o=_e.x,a=_e.y,s=_e.z,u=Ee.x,c=Ee.y,l=Ee.z,h=ge.x,f=ge.y,m=ge.z,p=r.x,e=r.y,n=r.z,i=o*-p+a*-e+s*-n,r=h*-p+f*-e+m*-n,n=u*p+c*e+l*n;return H(t)?(t[0]=o,t[1]=h,t[2]=-u,t[3]=0,t[4]=a,t[5]=f,t[6]=-c,t[7]=0,t[8]=s,t[9]=m,t[10]=-l,t[11]=0,t[12]=i,t[13]=r,t[14]=n,t[15]=1,t):new ye(o,a,s,i,h,f,m,r,-u,-c,-l,n,0,0,0,1)},ye.computePerspectiveFieldOfView=function(e,t,r,n,i){var o=1/Math.tan(.5*e),e=(n+r)/(r-n),n=2*n*r/(r-n);return i[0]=o/t,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=e,i[11]=-1,i[12]=0,i[13]=0,i[14]=n,i[15]=0,i},ye.computeOrthographicOffCenter=function(e,t,r,n,i,o,a){var s=1/(t-e),u=1/(n-r),c=1/(o-i),e=-(t+e)*s,r=-(n+r)*u,i=-(o+i)*c;return u*=2,c*=-2,a[0]=s*=2,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=u,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=c,a[11]=0,a[12]=e,a[13]=r,a[14]=i,a[15]=1,a},ye.computePerspectiveOffCenter=function(e,t,r,n,i,o,a){var s=2*i/(n-r),u=(t+e)/(t-e),n=(n+r)/(n-r),r=-(o+i)/(o-i),o=-2*o*i/(o-i);return a[0]=2*i/(t-e),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=s,a[6]=0,a[7]=0,a[8]=u,a[9]=n,a[10]=r,a[11]=-1,a[12]=0,a[13]=0,a[14]=o,a[15]=0,a},ye.computeInfinitePerspectiveOffCenter=function(e,t,r,n,i,o){var a=2*i/(n-r),s=(t+e)/(t-e),n=(n+r)/(n-r),r=-2*i;return o[0]=2*i/(t-e),o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a,o[6]=0,o[7]=0,o[8]=s,o[9]=n,o[10]=-1,o[11]=-1,o[12]=0,o[13]=0,o[14]=r,o[15]=0,o},ye.computeViewportTransformation=function(e,t,r,n){H(n)||(n=new ye),e=b(e,b.EMPTY_OBJECT);var i=b(e.x,0),o=b(e.y,0),a=b(e.width,0),s=b(e.height,0);t=b(t,0);var u=.5*a,e=.5*s,a=.5*((r=b(r,1))-t),s=e,r=a,i=i+u,e=o+e,a=t+a;return n[0]=u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=r,n[11]=0,n[12]=i,n[13]=e,n[14]=a,n[15]=1,n},ye.computeView=function(e,t,r,n,i){return i[0]=n.x,i[1]=r.x,i[2]=-t.x,i[3]=0,i[4]=n.y,i[5]=r.y,i[6]=-t.y,i[7]=0,i[8]=n.z,i[9]=r.z,i[10]=-t.z,i[11]=0,i[12]=-W.dot(n,e),i[13]=-W.dot(r,e),i[14]=W.dot(t,e),i[15]=1,i};var ve=new W,Te=new W,Ae=new W;ye.computeViewByLookAt=function(e,t,r,n){var i=ve,o=Te,a=Ae;return W.subtract(e,t,i),W.normalize(i,i),W.cross(r,i,a),W.normalize(a,a),W.cross(i,a,o),W.normalize(o,o),ye.computeView(e,i,o,a,n)},ye.computeViewByLookAtEx=function(e,t,r,n){var i=ve,o=Te,a=Ae;return W.subtract(t,e,i),W.normalize(i,i),W.cross(r,i,a),W.normalize(a,a),W.cross(i,a,o),W.normalize(o,o),ye.computeView(e,i,o,a,n)},ye.toArray=function(e,t){return H(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},ye.getElementIndex=function(e,t){return 4*e+t},ye.getColumn=function(e,t,r){var n=4*t,i=e[n],o=e[1+n],t=e[2+n],n=e[3+n];return r.x=i,r.y=o,r.z=t,r.w=n,r},ye.setColumn=function(e,t,r,n){t*=4;return(n=ye.clone(e,n))[t]=r.x,n[1+t]=r.y,n[2+t]=r.z,n[3+t]=r.w,n},ye.setTranslation=function(e,t,r){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=e[15],r};var Re=new W;ye.setScale=function(e,t,r){var n=ye.getScale(e,Re),n=W.divideComponents(t,n,Re);return ye.multiplyByScale(e,n,r)},ye.getRow=function(e,t,r){var n=e[t],i=e[t+4],o=e[t+8],t=e[t+12];return r.x=n,r.y=i,r.z=o,r.w=t,r},ye.setRow=function(e,t,r,n){return(n=ye.clone(e,n))[t]=r.x,n[t+4]=r.y,n[t+8]=r.z,n[t+12]=r.w,n};var Se=new W;ye.getScale=function(e,t){return t.x=W.magnitude(W.fromElements(e[0],e[1],e[2],Se)),t.y=W.magnitude(W.fromElements(e[4],e[5],e[6],Se)),t.z=W.magnitude(W.fromElements(e[8],e[9],e[10],Se)),t};var Oe=new W;ye.getMaximumScale=function(e){return ye.getScale(e,Oe),W.maximumComponent(Oe)},ye.multiply=function(e,t,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],m=e[10],p=e[11],d=e[12],y=e[13],E=e[14],_=e[15],g=t[0],v=t[1],T=t[2],A=t[3],R=t[4],S=t[5],O=t[6],x=t[7],I=t[8],w=t[9],N=t[10],b=t[11],M=t[12],C=t[13],P=t[14],L=t[15],D=i*g+u*v+f*T+y*A,z=o*g+c*v+m*T+E*A,F=a*g+l*v+p*T+_*A,U=n*R+s*S+h*O+d*x,e=i*R+u*S+f*O+y*x,t=o*R+c*S+m*O+E*x,R=a*R+l*S+p*O+_*x,S=n*I+s*w+h*N+d*b,O=i*I+u*w+f*N+y*b,x=o*I+c*w+m*N+E*b,N=a*I+l*w+p*N+_*b,b=n*M+s*C+h*P+d*L,y=i*M+u*C+f*P+y*L,E=o*M+c*C+m*P+E*L,L=a*M+l*C+p*P+_*L;return r[0]=n*g+s*v+h*T+d*A,r[1]=D,r[2]=z,r[3]=F,r[4]=U,r[5]=e,r[6]=t,r[7]=R,r[8]=S,r[9]=O,r[10]=x,r[11]=N,r[12]=b,r[13]=y,r[14]=E,r[15]=L,r},ye.add=function(e,t,r){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r[9]=e[9]+t[9],r[10]=e[10]+t[10],r[11]=e[11]+t[11],r[12]=e[12]+t[12],r[13]=e[13]+t[13],r[14]=e[14]+t[14],r[15]=e[15]+t[15],r},ye.subtract=function(e,t,r){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r[9]=e[9]-t[9],r[10]=e[10]-t[10],r[11]=e[11]-t[11],r[12]=e[12]-t[12],r[13]=e[13]-t[13],r[14]=e[14]-t[14],r[15]=e[15]-t[15],r},ye.multiplyTransformation=function(e,t,r){var n=e[0],i=e[1],o=e[2],a=e[4],s=e[5],u=e[6],c=e[8],l=e[9],h=e[10],f=e[12],m=e[13],p=e[14],d=t[0],y=t[1],E=t[2],_=t[4],g=t[5],v=t[6],T=t[8],A=t[9],R=t[10],S=t[12],O=t[13],x=t[14],I=i*d+s*y+l*E,w=o*d+u*y+h*E,e=n*_+a*g+c*v,t=i*_+s*g+l*v,_=o*_+u*g+h*v,g=n*T+a*A+c*R,v=i*T+s*A+l*R,R=o*T+u*A+h*R,f=n*S+a*O+c*x+f,m=i*S+s*O+l*x+m,p=o*S+u*O+h*x+p;return r[0]=n*d+a*y+c*E,r[1]=I,r[2]=w,r[3]=0,r[4]=e,r[5]=t,r[6]=_,r[7]=0,r[8]=g,r[9]=v,r[10]=R,r[11]=0,r[12]=f,r[13]=m,r[14]=p,r[15]=1,r},ye.multiplyByMatrix3=function(e,t,r){var n=e[0],i=e[1],o=e[2],a=e[4],s=e[5],u=e[6],c=e[8],l=e[9],h=e[10],f=t[0],m=t[1],p=t[2],d=t[3],y=t[4],E=t[5],_=t[6],g=t[7],v=t[8],T=i*f+s*m+l*p,A=o*f+u*m+h*p,R=n*d+a*y+c*E,t=i*d+s*y+l*E,y=o*d+u*y+h*E,E=n*_+a*g+c*v,l=i*_+s*g+l*v,v=o*_+u*g+h*v;return r[0]=n*f+a*m+c*p,r[1]=T,r[2]=A,r[3]=0,r[4]=R,r[5]=t,r[6]=y,r[7]=0,r[8]=E,r[9]=l,r[10]=v,r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},ye.multiplyByTranslation=function(e,t,r){var n=t.x,i=t.y,o=t.z,a=n*e[0]+i*e[4]+o*e[8]+e[12],t=n*e[1]+i*e[5]+o*e[9]+e[13],o=n*e[2]+i*e[6]+o*e[10]+e[14];return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=a,r[13]=t,r[14]=o,r[15]=e[15],r};var xe=new W;ye.multiplyByUniformScale=function(e,t,r){return xe.x=t,xe.y=t,xe.z=t,ye.multiplyByScale(e,xe,r)},ye.multiplyByScale=function(e,t,r){var n=t.x,i=t.y,t=t.z;return 1===n&&1===i&&1===t?ye.clone(e,r):(r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=0,r[4]=i*e[4],r[5]=i*e[5],r[6]=i*e[6],r[7]=0,r[8]=t*e[8],r[9]=t*e[9],r[10]=t*e[10],r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=1,r)},ye.multiplyByVector=function(e,t,r){var n=t.x,i=t.y,o=t.z,a=H(t.w)?t.w:1,s=e[0]*n+e[4]*i+e[8]*o+e[12]*a,u=e[1]*n+e[5]*i+e[9]*o+e[13]*a,t=e[2]*n+e[6]*i+e[10]*o+e[14]*a,a=e[3]*n+e[7]*i+e[11]*o+e[15]*a;return r.x=s,r.y=u,r.z=t,H(r.w)&&(r.w=a),r},ye.multiplyByPointAsVector=function(e,t,r){var n=t.x,i=t.y,o=t.z,a=e[0]*n+e[4]*i+e[8]*o,t=e[1]*n+e[5]*i+e[9]*o,o=e[2]*n+e[6]*i+e[10]*o;return r.x=a,r.y=t,r.z=o,r},ye.multiplyByPoint=function(e,t,r){var n=t.x,i=t.y,o=t.z,a=e[0]*n+e[4]*i+e[8]*o+e[12],t=e[1]*n+e[5]*i+e[9]*o+e[13],e=e[2]*n+e[6]*i+e[10]*o+e[14];return r.x=a,r.y=t,r.z=e,r},ye.multiplyByScalar=function(e,t,r){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12]*t,r[13]=e[13]*t,r[14]=e[14]*t,r[15]=e[15]*t,r},ye.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},ye.transpose=function(e,t){var r=e[1],n=e[2],i=e[3],o=e[6],a=e[7],s=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[10]=e[10],t[11]=e[14],t[12]=i,t[13]=a,t[14]=s,t[15]=e[15],t},ye.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t[9]=Math.abs(e[9]),t[10]=Math.abs(e[10]),t[11]=Math.abs(e[11]),t[12]=Math.abs(e[12]),t[13]=Math.abs(e[13]),t[14]=Math.abs(e[14]),t[15]=Math.abs(e[15]),t},ye.equals=function(e,t){return e===t||H(e)&&H(t)&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[3]===t[3]&&e[7]===t[7]&&e[11]===t[11]&&e[15]===t[15]},ye.equalsEpsilon=function(e,t,r){return r=b(r,0),e===t||H(e)&&H(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r&&Math.abs(e[9]-t[9])<=r&&Math.abs(e[10]-t[10])<=r&&Math.abs(e[11]-t[11])<=r&&Math.abs(e[12]-t[12])<=r&&Math.abs(e[13]-t[13])<=r&&Math.abs(e[14]-t[14])<=r&&Math.abs(e[15]-t[15])<=r},ye.getTranslation=function(e,t){return t.x=e[12],t.y=e[13],t.z=e[14],t},ye.getMatrix3=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t};var Ie=new re,we=new re,Ne=new he,be=new he(0,0,0,1);function Me(e,t){this.center=W.clone(b(e,W.ZERO)),this.radius=b(t,0)}ye.inverse=function(e,t){var r=e[0],n=e[4],i=e[8],o=e[12],a=e[1],s=e[5],u=e[9],c=e[13],l=e[2],h=e[6],f=e[10],m=e[14],p=e[3],d=e[7],y=e[11],E=e[15],_=f*E,g=m*y,v=h*E,T=m*d,A=h*y,R=f*d,S=l*E,O=m*p,x=l*y,I=f*p,w=l*d,N=h*p,b=_*s+T*u+A*c-(g*s+v*u+R*c),M=g*a+S*u+I*c-(_*a+O*u+x*c),C=v*a+O*s+w*c-(T*a+S*s+N*c),P=R*a+x*s+N*u-(A*a+I*s+w*u),L=g*n+v*i+R*o-(_*n+T*i+A*o),D=_*r+O*i+x*o-(g*r+S*i+I*o),z=T*r+S*n+N*o-(v*r+O*n+w*o),F=A*r+I*n+w*i-(R*r+x*n+N*i),U=(_=i*c)*d+(T=o*s)*y+(A=n*u)*E-((g=o*u)*d+(v=n*c)*y+(R=i*s)*E),u=g*p+(S=r*c)*y+(I=i*a)*E-(_*p+(O=o*a)*y+(x=r*u)*E),E=v*p+O*d+(w=r*s)*E-(T*p+S*d+(N=n*a)*E),d=R*p+x*d+N*y-(A*p+I*d+w*y),y=v*f+R*m+g*h-(A*m+_*h+T*f),g=x*m+_*l+O*f-(S*f+I*m+g*l),O=S*h+N*m+T*l-(w*m+v*l+O*h),l=w*f+A*l+I*h-(x*h+N*f+R*l),o=r*b+n*M+i*C+o*P;return Math.abs(o)<j.EPSILON21&&re.equalsEpsilon(ye.getMatrix3(e,Ie),we,j.EPSILON7)&&he.equals(ye.getRow(e,3,Ne),be)?(t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=1):(t[0]=b*(o=1/o),t[1]=M*o,t[2]=C*o,t[3]=P*o,t[4]=L*o,t[5]=D*o,t[6]=z*o,t[7]=F*o,t[8]=U*o,t[9]=u*o,t[10]=E*o,t[11]=d*o,t[12]=y*o,t[13]=g*o,t[14]=O*o,t[15]=l*o),t},ye.inverseTransformation=function(e,t){var r=e[0],n=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],c=e[9],l=e[10],h=e[12],f=e[13],m=e[14],p=-r*h-n*f-i*m,e=-o*h-a*f-s*m,m=-u*h-c*f-l*m;return t[0]=r,t[1]=o,t[2]=u,t[3]=0,t[4]=n,t[5]=a,t[6]=c,t[7]=0,t[8]=i,t[9]=s,t[10]=l,t[11]=0,t[12]=p,t[13]=e,t[14]=m,t[15]=1,t},ye.IDENTITY=Object.freeze(new ye(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),ye.ZERO=Object.freeze(new ye(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),ye.TRANSYZ=Object.freeze(new ye(1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1)),ye.COLUMN0ROW0=0,ye.COLUMN0ROW1=1,ye.COLUMN0ROW2=2,ye.COLUMN0ROW3=3,ye.COLUMN1ROW0=4,ye.COLUMN1ROW1=5,ye.COLUMN1ROW2=6,ye.COLUMN1ROW3=7,ye.COLUMN2ROW0=8,ye.COLUMN2ROW1=9,ye.COLUMN2ROW2=10,ye.COLUMN2ROW3=11,ye.COLUMN3ROW0=12,ye.COLUMN3ROW1=13,ye.COLUMN3ROW2=14,ye.COLUMN3ROW3=15,Object.defineProperties(ye.prototype,{length:{get:function(){return ye.packedLength}}}),ye.prototype.clone=function(e){return ye.clone(this,e)},ye.prototype.equals=function(e){return ye.equals(this,e)},ye.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]&&e[9]===t[r+9]&&e[10]===t[r+10]&&e[11]===t[r+11]&&e[12]===t[r+12]&&e[13]===t[r+13]&&e[14]===t[r+14]&&e[15]===t[r+15]},ye.prototype.equalsEpsilon=function(e,t){return ye.equalsEpsilon(this,e,t)},ye.prototype.toString=function(){return"("+this[0]+", "+this[4]+", "+this[8]+", "+this[12]+")\n("+this[1]+", "+this[5]+", "+this[9]+", "+this[13]+")\n("+this[2]+", "+this[6]+", "+this[10]+", "+this[14]+")\n("+this[3]+", "+this[7]+", "+this[11]+", "+this[15]+")"},ye.from_tnbp=function(e,t,r,n,i){return H(i)?(i[0]=e.x,i[4]=t.x,i[8]=r.x,i[12]=n.x,i[1]=e.y,i[5]=t.y,i[9]=r.y,i[13]=n.y,i[2]=e.z,i[6]=t.z,i[10]=r.z,i[14]=n.z,i[3]=0,i[7]=0,i[11]=0,i[15]=1):i=new ye(e.x,t.x,r.x,n.x,e.y,t.y,r.y,n.y,e.z,t.z,r.z,n.z,0,0,0,1),i},ye.rotate_axis_rh=function(e,t,r){var n=ye.clone(ye.IDENTITY),i=W.distance(t,e),o=Math.cos(r),a=1-o,s=Math.sin(r),u=(t.x-e.x)/i,r=(t.y-e.y)/i,i=(t.z-e.z)/i;n[0]=u*u*a+o,n[1]=u*r*a-i*s,n[2]=u*i*a+r*s,n[4]=r*u*a+i*s,n[5]=r*r*a+o,n[6]=r*i*a-u*s,n[8]=i*u*a-r*s,n[9]=i*r*a+u*s,n[10]=i*i*a+o;o=ye.translation(-e.x,-e.y,-e.z),e=ye.translation(e.x,e.y,e.z);return ye.multiply(e,ye.multiply(n,o,new ye),new ye)},ye.rotate_axis_lh=function(e,t,r){var n=ye.clone(ye.IDENTITY),i=W.distance(t,e),o=Math.cos(r),a=1-o,s=Math.sin(r),u=(t.x-e.x)/i,r=(t.y-e.y)/i,i=(t.z-e.z)/i;n[0]=u*u*a+o,n[1]=u*r*a+i*s,n[2]=u*i*a-r*s,n[4]=r*u*a-i*s,n[5]=r*r*a+o,n[6]=r*i*a+u*s,n[8]=i*u*a+r*s,n[9]=i*r*a-u*s,n[10]=i*i*a+o;o=ye.translation(-e.x,-e.y,-e.z),e=ye.translation(e.x,e.y,e.z);return ye.multiply(o,ye.multiply(n,e,new ye),new ye)},ye.translation=function(e,t,r,n){n=ye.clone(ye.IDENTITY,n);return n[12]=e,n[13]=t,n[14]=r,n},ye.scaling=function(e,t,r,n){n=ye.clone(ye.IDENTITY,n);return n[0]=e,n[5]=t,n[10]=r,n},ye.rotate_y=function(e){var t=ye.clone(ye.IDENTITY);return t[0]=t[10]=Math.cos(e),t[2]=t[8]=Math.sin(e),t[2]=-t[2],t},ye.perspective=function(e,t,r,n,i){var o=1/Math.tan(.5*e),e=n/(n-r),n=n*r/(r-n);return i[0]=o/t,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=e,i[11]=-1,i[12]=0,i[13]=0,i[14]=n,i[15]=0,i},ye.prototype.makeRotationAxis=function(e,t,r){H(r)||(r=new ye);var n=Math.cos(t),i=Math.sin(t),o=1-n,a=e.x,s=e.y,u=e.z,t=o*a,e=o*s;return r[0]=t*a+n,r[1]=t*s+i*u,r[2]=t*u-i*s,r[3]=0,r[4]=t*s-i*u,r[5]=e*s+n,r[6]=e*u+i*a,r[7]=0,r[8]=t*u+i*s,r[9]=e*u-i*a,r[10]=o*u*u+n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},ye.transformNormal=function(e,t,r){H(r)||(r=new W);var n=new W;n.x=t[0]*e.x+t[4]*e.y+t[8]*e.z+t[12],n.y=t[1]*e.x+t[5]*e.y+t[9]*e.z+t[13],n.z=t[2]*e.x+t[6]*e.y+t[10]*e.z+t[14];t=t[3]*e.x+t[7]*e.y+t[11]*e.z+t[15];return n.x*=t=1/t,n.y*=t,n.z*=t,W.clone(n,r),r},ye.rotate_normal=function(e,t,r){H(r)||(r=new W);var n=new W;return n.x=t[0]*e.x+t[4]*e.y+t[8]*e.z,n.y=t[1]*e.x+t[5]*e.y+t[9]*e.z,n.z=t[2]*e.x+t[6]*e.y+t[10]*e.z,W.clone(n,r),n},ye.fromQuaternion=function(e,t){void 0===t&&(t=new ye),t=ye.clone(ye.IDENTITY,t);var r=e.x*e.x,n=e.x*e.y,i=e.x*e.z,o=e.x*e.w,a=e.y*e.y,s=e.y*e.z,u=e.y*e.w,c=e.z*e.z,e=e.z*e.w;return t[0]=1-2*(a+c),t[1]=2*(n+e),t[2]=2*(i-u),t[4]=2*(n-e),t[5]=1-2*(r+c),t[6]=2*(s+o),t[8]=2*(i+u),t[9]=2*(s-o),t[10]=1-2*(r+a),t[3]=t[7]=t[11]=t[12]=t[13]=t[14]=0,t[15]=1,t};var Ce=new W,Pe=new W,Le=new W,De=new W,ze=new W,Fe=new W,Ue=new W,Be=new W,qe=new W,Ge=new W,He=new W,je=new W,We=4/3*j.PI;Me.fromPoints=function(e,t){if(H(t)||(t=new Me),!H(e)||0===e.length)return t.center=W.clone(W.ZERO,t.center),t.radius=0,t;for(var r=W.clone(e[0],Ue),n=W.clone(r,Ce),i=W.clone(r,Pe),o=W.clone(r,Le),a=W.clone(r,De),s=W.clone(r,ze),u=W.clone(r,Fe),c=e.length,l=1;l<c;l++){W.clone(e[l],r);var h=r.x,f=r.y,m=r.z;h<n.x&&W.clone(r,n),h>a.x&&W.clone(r,a),f<i.y&&W.clone(r,i),f>s.y&&W.clone(r,s),m<o.z&&W.clone(r,o),m>u.z&&W.clone(r,u)}var p=W.magnitudeSquared(W.subtract(a,n,Be)),d=W.magnitudeSquared(W.subtract(s,i,Be)),y=W.magnitudeSquared(W.subtract(u,o,Be)),E=n,_=a,g=p;p<d&&(g=d,E=i,_=s),g<y&&(g=y,E=o,_=u);var v=qe;v.x=.5*(E.x+_.x),v.y=.5*(E.y+_.y),v.z=.5*(E.z+_.z);var T=W.magnitudeSquared(W.subtract(_,v,Be)),A=Math.sqrt(T),E=Ge;E.x=n.x,E.y=i.y,E.z=o.z;_=He;_.x=a.x,_.y=s.y,_.z=u.z;var R=W.midpoint(E,_,je),S=0;for(l=0;l<c;l++){W.clone(e[l],r);var O=W.magnitude(W.subtract(r,R,Be));S<O&&(S=O);var x=W.magnitudeSquared(W.subtract(r,v,Be));T<x&&(T=(A=.5*(A+(O=Math.sqrt(x))))*A,v.x=(A*v.x+(x=O-A)*r.x)/O,v.y=(A*v.y+x*r.y)/O,v.z=(A*v.z+x*r.z)/O)}return A<S?(W.clone(v,t.center),t.radius=A):(W.clone(R,t.center),t.radius=S),t};var Ve=new F,Ye=new W,Xe=new W,ke=new R,Ze=new R;Me.fromRectangle2D=function(e,t,r){return Me.fromRectangleWithHeights2D(e,t,0,0,r)},Me.fromRectangleWithHeights2D=function(e,t,r,n,i){if(H(i)||(i=new Me),!H(e))return i.center=W.clone(W.ZERO,i.center),i.radius=0,i;t=b(t,Ve),Z.southwest(e,ke),ke.height=r,Z.northeast(e,Ze),Ze.height=n;var o=t.project(ke,Ye),r=t.project(Ze,Xe),e=r.x-o.x,n=r.y-o.y,t=r.z-o.z;i.radius=.5*Math.sqrt(e*e+n*n+t*t);r=i.center;return r.x=o.x+.5*e,r.y=o.y+.5*n,r.z=o.z+.5*t,i};var Ke=[];Me.fromRectangle3D=function(e,t,r,n){if(t=b(t,S.WGS84),r=b(r,0),H(n)||(n=new Me),!H(e))return n.center=W.clone(W.ZERO,n.center),n.radius=0,n;r=Z.subsample(e,t,r,Ke);return Me.fromPoints(r,n)},Me.fromVertices=function(e,t,r,n){if(H(n)||(n=new Me),!H(e)||0===e.length)return n.center=W.clone(W.ZERO,n.center),n.radius=0,n;t=b(t,W.ZERO),r=b(r,3);var i=Ue;i.x=e[0]+t.x,i.y=e[1]+t.y,i.z=e[2]+t.z;for(var o=W.clone(i,Ce),a=W.clone(i,Pe),s=W.clone(i,Le),u=W.clone(i,De),c=W.clone(i,ze),l=W.clone(i,Fe),h=e.length,f=0;f<h;f+=r){var m=e[f]+t.x,p=e[f+1]+t.y,d=e[f+2]+t.z;i.x=m,i.y=p,i.z=d,m<o.x&&W.clone(i,o),m>u.x&&W.clone(i,u),p<a.y&&W.clone(i,a),p>c.y&&W.clone(i,c),d<s.z&&W.clone(i,s),d>l.z&&W.clone(i,l)}var y=W.magnitudeSquared(W.subtract(u,o,Be)),E=W.magnitudeSquared(W.subtract(c,a,Be)),_=W.magnitudeSquared(W.subtract(l,s,Be)),g=o,v=u,T=y;y<E&&(T=E,g=a,v=c),T<_&&(T=_,g=s,v=l);var A=qe;A.x=.5*(g.x+v.x),A.y=.5*(g.y+v.y),A.z=.5*(g.z+v.z);var R=W.magnitudeSquared(W.subtract(v,A,Be)),S=Math.sqrt(R),g=Ge;g.x=o.x,g.y=a.y,g.z=s.z;v=He;v.x=u.x,v.y=c.y,v.z=l.z;var O=W.midpoint(g,v,je),x=0;for(f=0;f<h;f+=r){i.x=e[f]+t.x,i.y=e[f+1]+t.y,i.z=e[f+2]+t.z;var I=W.magnitude(W.subtract(i,O,Be));x<I&&(x=I);var w=W.magnitudeSquared(W.subtract(i,A,Be));R<w&&(R=(S=.5*(S+(I=Math.sqrt(w))))*S,A.x=(S*A.x+(w=I-S)*i.x)/I,A.y=(S*A.y+w*i.y)/I,A.z=(S*A.z+w*i.z)/I)}return S<x?(W.clone(A,n.center),n.radius=S):(W.clone(O,n.center),n.radius=x),n},Me.fromEncodedCartesianVertices=function(e,t,r){if(H(r)||(r=new Me),!H(e)||!H(t)||e.length!==t.length||0===e.length)return r.center=W.clone(W.ZERO,r.center),r.radius=0,r;var n=Ue;n.x=e[0]+t[0],n.y=e[1]+t[1],n.z=e[2]+t[2];for(var i=W.clone(n,Ce),o=W.clone(n,Pe),a=W.clone(n,Le),s=W.clone(n,De),u=W.clone(n,ze),c=W.clone(n,Fe),l=e.length,h=0;h<l;h+=3){var f=e[h]+t[h],m=e[h+1]+t[h+1],p=e[h+2]+t[h+2];n.x=f,n.y=m,n.z=p,f<i.x&&W.clone(n,i),f>s.x&&W.clone(n,s),m<o.y&&W.clone(n,o),m>u.y&&W.clone(n,u),p<a.z&&W.clone(n,a),p>c.z&&W.clone(n,c)}var d=W.magnitudeSquared(W.subtract(s,i,Be)),y=W.magnitudeSquared(W.subtract(u,o,Be)),E=W.magnitudeSquared(W.subtract(c,a,Be)),_=i,g=s,v=d;d<y&&(v=y,_=o,g=u),v<E&&(v=E,_=a,g=c);var T=qe;T.x=.5*(_.x+g.x),T.y=.5*(_.y+g.y),T.z=.5*(_.z+g.z);var A=W.magnitudeSquared(W.subtract(g,T,Be)),R=Math.sqrt(A),_=Ge;_.x=i.x,_.y=o.y,_.z=a.z;g=He;g.x=s.x,g.y=u.y,g.z=c.z;var S=W.midpoint(_,g,je),O=0;for(h=0;h<l;h+=3){n.x=e[h]+t[h],n.y=e[h+1]+t[h+1],n.z=e[h+2]+t[h+2];var x=W.magnitude(W.subtract(n,S,Be));O<x&&(O=x);var I=W.magnitudeSquared(W.subtract(n,T,Be));A<I&&(A=(R=.5*(R+(x=Math.sqrt(I))))*R,T.x=(R*T.x+(I=x-R)*n.x)/x,T.y=(R*T.y+I*n.y)/x,T.z=(R*T.z+I*n.z)/x)}return R<O?(W.clone(T,r.center),r.radius=R):(W.clone(S,r.center),r.radius=O),r},Me.fromCornerPoints=function(e,t,r){H(r)||(r=new Me);e=W.midpoint(e,t,r.center);return r.radius=W.distance(e,t),r},Me.fromEllipsoid=function(e,t){return H(t)||(t=new Me),W.clone(W.ZERO,t.center),t.radius=e.maximumRadius,t};var Je=new W;Me.fromBoundingSpheres=function(e,t){if(H(t)||(t=new Me),!H(e)||0===e.length)return t.center=W.clone(W.ZERO,t.center),t.radius=0,t;var r=e.length;if(1===r)return Me.clone(e[0],t);if(2===r)return Me.union(e[0],e[1],t);for(var n=[],i=0;i<r;i++)n.push(e[i].center);var o=(t=Me.fromPoints(n,t)).center,a=t.radius;for(i=0;i<r;i++)var s=e[i],a=Math.max(a,W.distance(o,s.center,Je)+s.radius);return t.radius=a,t};var Qe=new W,$e=new W,et=new W;Me.fromOrientedBoundingBox=function(e,t){H(t)||(t=new Me);var r=e.halfAxes,n=re.getColumn(r,0,Qe),i=re.getColumn(r,1,$e),r=re.getColumn(r,2,et);return W.add(n,i,n),W.add(n,r,n),t.center=W.clone(e.center,t.center),t.radius=W.magnitude(n),t},Me.clone=function(e,t){if(H(e))return H(t)?(t.center=W.clone(e.center,t.center),t.radius=e.radius,t):new Me(e.center,e.radius)},Me.packedLength=4,Me.pack=function(e,t,r){r=b(r,0);var n=e.center;return t[r++]=n.x,t[r++]=n.y,t[r++]=n.z,t[r]=e.radius,t},Me.unpack=function(e,t,r){t=b(t,0);var n=(r=!H(r)?new Me:r).center;return n.x=e[t++],n.y=e[t++],n.z=e[t++],r.radius=e[t],r};var tt=new W,rt=new W;Me.union=function(e,t,r){H(r)||(r=new Me);var n=e.center,i=e.radius,o=t.center,a=t.radius,s=W.subtract(o,n,tt),o=W.magnitude(s);if(o+a<=i)return e.clone(r),r;if(o+i<=a)return t.clone(r),r;a=.5*(i+o+a),o=W.multiplyByScalar(s,(a-i)/o,rt);return W.add(o,n,o),W.clone(o,r.center),r.radius=a,r};var nt=new W;Me.expand=function(e,t,r){r=Me.clone(e,r);t=W.magnitude(W.subtract(t,r.center,nt));return t>r.radius&&(r.radius=t),r},Me.intersectPlane=function(e,t){var r=e.center,n=e.radius,e=t.normal,t=W.dot(e,r)+t.distance;return t<-n?k.OUTSIDE:t<n?k.INTERSECTING:k.INSIDE},Me.intersectRay=function(e,t,r){var n=W.subtract(t.origin,e.center,new W),i=W.dot(n,n),o=i-e.radius*e.radius;if(o<=0){var a=W.dot(n,t.direction),i=Math.sqrt(e.radius*e.radius-(i-a*a));return r=W.multiplyByScalar(t.direction,i-a,r),r=W.subtract(t.origin,r,r),k.INTERSECTING}n=W.dot(t.direction,n);if(0<=n)return k.OUTSIDE;o=n*n-o;if(o<0)return k.OUTSIDE;if(o>=j.EPSILON10){a=-n-Math.sqrt(o);return r=W.multiplyByScalar(t.direction,a,r),r=W.add(t.origin,r,r),k.INTERSECTING}return r=W.multiplyByScalar(t.direction,n,r),r=W.subtract(t.origin,r,r),k.INTERSECTING},Me.transform=function(e,t,r){return(r=!H(r)?new Me:r).center=ye.multiplyByPoint(t,e.center,r.center),r.radius=ye.getMaximumScale(t)*e.radius,r};var it=new W;Me.distanceSquaredTo=function(e,t){t=W.subtract(e.center,t,it);return W.magnitudeSquared(t)-e.radius*e.radius},Me.transformWithoutScale=function(e,t,r){return(r=!H(r)?new Me:r).center=ye.multiplyByPoint(t,e.center,r.center),r.radius=e.radius,r};var ot=new W;Me.computePlaneDistances=function(e,t,r,n){H(n)||(n=new te);t=W.subtract(e.center,t,ot),t=W.dot(r,t);return n.start=t-e.radius,n.stop=t+e.radius,n};for(var at=new W,st=new W,ut=new W,ct=new W,lt=new W,ht=new R,ft=new Array(8),e=0;e<8;++e)ft[e]=new W;var mt=new F;Me.projectTo2D=function(e,t,r){var n=(t=b(t,mt)).ellipsoid,i=e.center,o=e.radius,a=W.equals(i,W.ZERO)?W.clone(W.UNIT_X,at):n.geodeticSurfaceNormal(i,at),s=W.cross(W.UNIT_Z,a,st);W.normalize(s,s);var u=W.cross(a,s,ut);W.normalize(u,u),W.multiplyByScalar(a,o,a),W.multiplyByScalar(u,o,u),W.multiplyByScalar(s,o,s);var c=W.negate(u,lt),e=W.negate(s,ct),l=ft,o=l[0];W.add(a,u,o),W.add(o,s,o),o=l[1],W.add(a,u,o),W.add(o,e,o),o=l[2],W.add(a,c,o),W.add(o,e,o),o=l[3],W.add(a,c,o),W.add(o,s,o),W.negate(a,a),o=l[4],W.add(a,u,o),W.add(o,s,o),o=l[5],W.add(a,u,o),W.add(o,e,o),o=l[6],W.add(a,c,o),W.add(o,e,o),o=l[7],W.add(a,c,o),W.add(o,s,o);for(var h=l.length,f=0;f<h;++f){var m=l[f];W.add(i,m,m);var p=n.cartesianToCartographic(m,ht);t.project(p,m)}c=(i=(r=Me.fromPoints(l,r)).center).x,s=i.y,o=i.z;return i.x=o,i.y=c,i.z=s,r},Me.isOccluded=function(e,t){return!t.isBoundingSphereVisible(e)},Me.equals=function(e,t){return e===t||H(e)&&H(t)&&W.equals(e.center,t.center)&&e.radius===t.radius},Me.prototype.intersectPlane=function(e){return Me.intersectPlane(this,e)},Me.prototype.intersectRay=function(e,t){return Me.intersectRay(this,e,t)},Me.prototype.distanceSquaredTo=function(e){return Me.distanceSquaredTo(this,e)},Me.prototype.computePlaneDistances=function(e,t,r){return Me.computePlaneDistances(this,e,t,r)},Me.prototype.isOccluded=function(e){return Me.isOccluded(this,e)},Me.prototype.equals=function(e){return Me.equals(this,e)},Me.prototype.clone=function(e){return Me.clone(this,e)},Me.prototype.volume=function(){var e=this.radius;return We*e*e*e},Me.prototype.project_area=function(e){return this.radius*this.radius*j.PI},Me.prototype.height=function(e){return 2*this.radius};var pt=Object.freeze({DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,HALF_FLOAT_OES:36193,DOUBLE:5130,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,COLOR:6144,DEPTH:6145,STENCIL:6146,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,MAX_3D_TEXTURE_SIZE:32883,UNSIGNED_INT_2_10_10_10_REV:33640,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,MAX_TEXTURE_LOD_BIAS:34045,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,VERTEX_ATTRIB_ARRAY_INTEGER:35069,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,UNSIGNED_INT_10F_11F_11F_REV:35899,RGB9_E5:35901,UNSIGNED_INT_5_9_9_9_REV:35902,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,RASTERIZER_DISCARD:35977,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,UNSIGNED_INT_24_8:34042,DEPTH24_STENCIL8:35056,UNSIGNED_NORMALIZED:35863,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,MAX_SAMPLES:36183,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,VERTEX_ARRAY_BINDING:34229,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,SIGNED_NORMALIZED:36764,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,INVALID_INDEX:4294967295,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,SAMPLER_BINDING:35097,RGB10_A2UI:36975,INT_2_10_10_10_REV:36255,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,TEXTURE_IMMUTABLE_FORMAT:37167,MAX_ELEMENT_INDEX:36203,TEXTURE_IMMUTABLE_LEVELS:33503,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047}),dt={BYTE:pt.BYTE,UNSIGNED_BYTE:pt.UNSIGNED_BYTE,SHORT:pt.SHORT,UNSIGNED_SHORT:pt.UNSIGNED_SHORT,INT:pt.INT,UNSIGNED_INT:pt.UNSIGNED_INT,FLOAT:pt.FLOAT,DOUBLE:pt.DOUBLE,getSizeInBytes:function(e){switch(e){case dt.BYTE:return Int8Array.BYTES_PER_ELEMENT;case dt.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case dt.SHORT:return Int16Array.BYTES_PER_ELEMENT;case dt.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case dt.INT:return Int32Array.BYTES_PER_ELEMENT;case dt.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case dt.FLOAT:return Float32Array.BYTES_PER_ELEMENT;case dt.DOUBLE:return Float64Array.BYTES_PER_ELEMENT}},fromTypedArray:function(e){return e instanceof Int8Array?dt.BYTE:e instanceof Uint8Array?dt.UNSIGNED_BYTE:e instanceof Int16Array?dt.SHORT:e instanceof Uint16Array?dt.UNSIGNED_SHORT:e instanceof Int32Array?dt.INT:e instanceof Uint32Array?dt.UNSIGNED_INT:e instanceof Float32Array?dt.FLOAT:e instanceof Float64Array?dt.DOUBLE:void 0},validate:function(e){return H(e)&&(e===dt.BYTE||e===dt.UNSIGNED_BYTE||e===dt.SHORT||e===dt.UNSIGNED_SHORT||e===dt.INT||e===dt.UNSIGNED_INT||e===dt.FLOAT||e===dt.DOUBLE)},createTypedArray:function(e,t){switch(e){case dt.BYTE:return new Int8Array(t);case dt.UNSIGNED_BYTE:return new Uint8Array(t);case dt.SHORT:return new Int16Array(t);case dt.UNSIGNED_SHORT:return new Uint16Array(t);case dt.INT:return new Int32Array(t);case dt.UNSIGNED_INT:return new Uint32Array(t);case dt.FLOAT:return new Float32Array(t);case dt.DOUBLE:return new Float64Array(t)}},createArrayBufferView:function(e,t,r,n){switch(r=b(r,0),n=b(n,(t.byteLength-r)/dt.getSizeInBytes(e)),e){case dt.BYTE:return new Int8Array(t,r,n);case dt.UNSIGNED_BYTE:return new Uint8Array(t,r,n);case dt.SHORT:return new Int16Array(t,r,n);case dt.UNSIGNED_SHORT:return new Uint16Array(t,r,n);case dt.INT:return new Int32Array(t,r,n);case dt.UNSIGNED_INT:return new Uint32Array(t,r,n);case dt.FLOAT:return new Float32Array(t,r,n);case dt.DOUBLE:return new Float64Array(t,r,n)}},fromName:function(e){switch(e){case"BYTE":return dt.BYTE;case"UNSIGNED_BYTE":return dt.UNSIGNED_BYTE;case"SHORT":return dt.SHORT;case"UNSIGNED_SHORT":return dt.UNSIGNED_SHORT;case"INT":return dt.INT;case"UNSIGNED_INT":return dt.UNSIGNED_INT;case"FLOAT":return dt.FLOAT;case"DOUBLE":return dt.DOUBLE}}},yt=Object.freeze(dt);function Et(e,t,r,n,i,o,a){r=e*r*(4+e*(4-3*r))/16;return(1-r)*e*t*(n+r*i*(a+r*o*(2*a*a-1)))}var _t=new W,gt=new W;function vt(e,t,r,n){var i,o,a,s,u,c,l,h,f,m,p,d,y,E,_,g,v,T,A;W.normalize(n.cartographicToCartesian(t,gt),_t),W.normalize(n.cartographicToCartesian(r,gt),gt),function(e,t,r,n,i,o,a){var s=(t-r)/t,u=o-n,n=Math.atan((1-s)*Math.tan(i)),i=Math.atan((1-s)*Math.tan(a)),a=Math.cos(n),n=Math.sin(n),c=Math.cos(i),i=Math.sin(i),l=a*c,h=a*i,f=n*i,m=n*c,p=u,d=(j.TWO_PI,Math.cos(p)),y=Math.sin(p);do{var E,_,g,v,T,d=Math.cos(p),y=Math.sin(p),A=h-m*d,R=p,S=(g=f+l*d)-2*f/(T=0===(_=Math.sqrt(c*c*y*y+A*A))?(E=0,1):1-(E=l*y/_)*E),p=u+Et(s,E,T,v=Math.atan2(_,g),_,g,S=isNaN(S)?0:S)}while(Math.abs(p-R)>j.EPSILON12);n=r*(1+(i=T*(t*t-r*r)/(r*r))*(4096+i*(i*(320-175*i)-768))/16384)*(v-(n=i*(256+i*(i*(74-47*i)-128))/1024)*_*(S+n*(g*(2*(t=S*S)-1)-n*S*(4*_*_-3)*(4*t-3)/6)/4)),t=Math.atan2(c*y,h-m*d),a=Math.atan2(a*y,h*d-m),e._distance=n,e._startHeading=t,e._endHeading=a,e._uSquared=i}(e,n.maximumRadius,n.minimumRadius,t.longitude,t.latitude,r.longitude,r.latitude),e._start=R.clone(t,e._start),e._end=R.clone(r,e._end),e._start.height=0,e._end.height=0,o=(i=e)._uSquared,a=i._ellipsoid.maximumRadius,s=i._ellipsoid.minimumRadius,u=(a-s)/a,c=Math.cos(i._startHeading),l=Math.sin(i._startHeading),h=(1-u)*Math.tan(i._start.latitude),f=1/Math.sqrt(1+h*h),m=f*h,p=Math.atan2(h,c),E=1-(y=(d=f*l)*d),_=Math.sqrt(E),T=1-3*(g=o/4)+35*(v=g*g)/4,A=1-5*g,o=(r=1+g-3*v/4+5*(n=v*g)/4-175*(t=v*v)/64)*p-(e=1-g+15*v/8-35*n/8)*Math.sin(2*p)*g/2-T*Math.sin(4*p)*v/16-A*Math.sin(6*p)*n/48-5*Math.sin(8*p)*t/512,(i=i._constants).a=a,i.b=s,i.f=u,i.cosineHeading=c,i.sineHeading=l,i.tanU=h,i.cosineU=f,i.sineU=m,i.sigma=p,i.sineAlpha=d,i.sineSquaredAlpha=y,i.cosineSquaredAlpha=E,i.cosineAlpha=_,i.u2Over4=g,i.u4Over16=v,i.u6Over64=n,i.u8Over256=t,i.a0=r,i.a1=e,i.a2=T,i.a3=A,i.distanceRatio=o}function Tt(e,t,r){r=b(r,S.WGS84);this._ellipsoid=r,this._start=new R,this._end=new R,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,H(e)&&H(t)&&vt(this,e,t,r)}function At(e,t,r){this.minimum=W.clone(b(e,W.ZERO)),this.maximum=W.clone(b(t,W.ZERO)),r=H(r)?W.clone(r):W.midpoint(this.minimum,this.maximum,new W),this.center=r}Object.defineProperties(Tt.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return this._startHeading}},endHeading:{get:function(){return this._endHeading}}}),Tt.prototype.setEndPoints=function(e,t){vt(this,e,t,this._ellipsoid)},Tt.prototype.interpolateUsingFraction=function(e,t){return this.interpolateUsingSurfaceDistance(this._distance*e,t)},Tt.prototype.interpolateUsingSurfaceDistance=function(e,t){var r=this._constants,n=r.distanceRatio+e/r.b,i=Math.cos(2*n),o=Math.cos(4*n),a=Math.cos(6*n),s=Math.sin(2*n),u=Math.sin(4*n),c=Math.sin(6*n),l=Math.sin(8*n),h=n*n,f=r.u8Over256,m=r.u2Over4,p=r.u6Over64,e=r.u4Over16,h=2*(n*h)*f*i/3+n*(1-m+7*e/4-15*p/4+579*f/64-(e-15*p/4+187*f/16)*i-(5*p/4-115*f/16)*o-29*f*a/16)+(m/2-e+71*p/32-85*f/16)*s+(5*e/16-5*p/4+383*f/96)*u-h*((p-11*f/2)*s+5*f*u/2)+(29*p/96-29*f/16)*c+539*f*l/1536,s=Math.asin(Math.sin(h)*r.cosineAlpha),u=Math.atan(r.a/r.b*Math.tan(s));h-=r.sigma;p=Math.cos(2*r.sigma+h),c=Math.sin(h),f=Math.cos(h),l=r.cosineU*f,s=r.sineU*c,p=Math.atan2(c*r.sineHeading,l-s*r.cosineHeading)-Et(r.f,r.sineAlpha,r.cosineSquaredAlpha,h,c,f,p);return H(t)?(t.longitude=this._start.longitude+p,t.latitude=u,t.height=0,t):new R(this._start.longitude+p,u,0)},At.fromPoints=function(e,t){if(H(t)||(t=new At),!H(e)||0===e.length)return t.minimum=W.clone(W.ZERO,t.minimum),t.maximum=W.clone(W.ZERO,t.maximum),t.center=W.clone(W.ZERO,t.center),t;for(var r=e[0].x,n=e[0].y,i=e[0].z,o=e[0].x,a=e[0].y,s=e[0].z,u=e.length,c=1;c<u;c++)var l=e[c],h=l.x,f=l.y,l=l.z,r=Math.min(h,r),o=Math.max(h,o),n=Math.min(f,n),a=Math.max(f,a),i=Math.min(l,i),s=Math.max(l,s);var m=t.minimum;m.x=r,m.y=n,m.z=i;var p=t.maximum;return p.x=o,p.y=a,p.z=s,t.center=W.midpoint(m,p,t.center),t},At.clone=function(e,t){if(H(e))return H(t)?(t.minimum=W.clone(e.minimum,t.minimum),t.maximum=W.clone(e.maximum,t.maximum),t.center=W.clone(e.center,t.center),t):new At(e.minimum,e.maximum,e.center)},At.equals=function(e,t){return e===t||H(e)&&H(t)&&W.equals(e.center,t.center)&&W.equals(e.minimum,t.minimum)&&W.equals(e.maximum,t.maximum)};var Rt=new W;At.intersectPlane=function(e,t){Rt=W.subtract(e.maximum,e.minimum,Rt);var r=W.multiplyByScalar(Rt,.5,Rt),n=t.normal,r=r.x*Math.abs(n.x)+r.y*Math.abs(n.y)+r.z*Math.abs(n.z),t=W.dot(e.center,n)+t.distance;return 0<t-r?k.INSIDE:t+r<0?k.OUTSIDE:k.INTERSECTING},At.prototype.clone=function(e){return At.clone(this,e)},At.prototype.intersectPlane=function(e){return At.intersectPlane(this,e)},At.prototype.equals=function(e){return At.equals(this,e)},At.prototype.width=function(){return this.maximum.x-this.minimum.x},At.prototype.height=function(){return this.maximum.y-this.minimum.y},At.prototype.length=function(){return this.maximum.z-this.minimum.z},At.prototype.get_max_radius=function(){return W.distance(this.maximum,this.minimum)},At.prototype.combine_box=function(e){this.combine_vertex(e.minimum),this.combine_vertex(e.maximum)},At.prototype.combine_vertex=function(e){e.x<this.minimum.x&&(this.minimum.x=e.x),e.x>this.maximum.x&&(this.maximum.x=e.x),e.y<this.minimum.y&&(this.minimum.y=e.y),e.y>this.maximum.y&&(this.maximum.y=e.y),e.z<this.minimum.z&&(this.minimum.z=e.z),e.z>this.maximum.z&&(this.maximum.z=e.z),this.center=W.midpoint(this.minimum,this.maximum,new W)},At.prototype.nearest_distance_to_point=function(e){var t=W.clone(e);return W.maximumByComponent(this.minimum,t,t),W.minimumByComponent(this.maximum,t,t),W.distance(t,e)},At.prototype.nearest_point_to_point=function(e){e=W.clone(e);return W.maximumByComponent(this.minimum,e,e),W.minimumByComponent(this.maximum,e,e),e},At.prototype.project_area=function(e){var t=this.maximum.x-this.minimum.x,r=this.maximum.y-this.minimum.y,n=this.maximum.z-this.minimum.z;return Math.abs(r*n*e.x)+Math.abs(t*n*e.y)+Math.abs(t*r*e.z)},At.prototype.get_corners=function(){for(var e=[],t=0;t<8;++t)e.push(new W);return e[0]=W.clone(this.minimum),e[1].x=this.minimum.x,e[1].y=this.maximum.y,e[1].z=this.minimum.z,e[2].x=this.maximum.x,e[2].y=this.maximum.y,e[2].z=this.minimum.z,e[3].x=this.maximum.x,e[3].y=this.minimum.y,e[3].z=this.minimum.z,e[4]=W.clone(this.maximum),e[5].x=this.minimum.x,e[5].y=this.maximum.y,e[5].z=this.maximum.z,e[6].x=this.minimum.x,e[6].y=this.minimum.y,e[6].z=this.maximum.z,e[7].x=this.maximum.x,e[7].y=this.minimum.y,e[7].z=this.maximum.z,e},At.prototype.transform=function(e,t){for(var r=this.get_corners(),n=new W(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),i=new W(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),o=0;o<8;o++)r[o]=ye.multiplyByPoint(e,r[o],r[o]),W.minimumByComponent(r[o],n,n),W.maximumByComponent(r[o],i,i);return H(t)?(t.minimum=n,t.maximum=i,t):t=new At(n,i)},At.prototype.is_valid=function(){return!(this.minimum.x>this.maximum.x||this.minimum.y>this.maximum.y||this.minimum.z>this.maximum.z)},At.intersectRay=function(e,t){var r=new Array(3);W.pack(e.minimum,r);var n=new Array(3);W.pack(e.maximum,n);var i=new Array(3);W.pack(t.origin,i);e=new Array(3);return W.pack(t.direction,e),function(e,t,r,n,i){for(var o,a=!0,s=new Array(3),u=new Array(3),c=new Array(3),l=0;l<3;l++)r[l]<e[l]?(s[l]=1,c[l]=e[l],a=!1):r[l]>t[l]?(s[l]=0,c[l]=t[l],a=!1):s[l]=2;if(a)return i=r,!0;for(l=0;l<3;l++)2!=s[l]&&Math.abs(n[l])>j.EPSILON10?u[l]=(c[l]-r[l])/n[l]:u[l]=-1;for(o=0,l=1;l<3;l++)u[o]<u[l]&&(o=l);if(u[o]<0)return!1;for(l=0;l<3;l++)if(o!=l){if(i[l]=r[l]+u[o]*n[l],i[l]<e[l]||i[l]>t[l])return!1}else i[l]=c[l];return!0}(r,n,i,e,new Array(3))},At.prototype.intersectRay=function(e){return At.intersectRay(this,e)},At.prototype.make_invalid=function(){this.minimum.x=this.minimum.y=this.minimum.z=Number.MAX_VALUE,this.maximum.x=this.maximum.y=this.maximum.z=-Number.MAX_VALUE},At.prototype.toBoundingSphere=function(e){return new Me(void 0===e?this.center:ye.multiplyByPoint(e,this.center,new W),this.get_max_radius()/2)},At.intersect=function(e,t){return!(t.minimum.x>e.maximum.x||t.maximum.x<e.minimum.x||t.minimum.y>e.maximum.y||t.maximum.y<e.minimum.y||t.minimum.z>e.maximum.z||t.maximum.z<e.minimum.z)&&!(t.minimum.x>e.minimum.x&&t.maximum.x<e.maximum.x&&t.minimum.y>e.minimum.y&&t.maximum.y<e.maximum.y&&t.minimum.z>e.minimum.z&&t.maximum.z<e.maximum.z&&e.minimum.x>t.minimum.x&&e.maximum.x<t.maximum.x&&e.minimum.y>t.minimum.y&&e.maximum.y<t.maximum.y&&e.minimum.z>t.minimum.z&&e.maximum.z<t.maximum.z)};var St={};function Ot(e,t,r){var n=e+t;return j.sign(e)!==j.sign(t)&&Math.abs(n/Math.max(Math.abs(e),Math.abs(t)))<r?0:n}St.computeDiscriminant=function(e,t,r){return t*t-4*e*r},St.computeRealRoots=function(e,t,r){if(0===e)return 0===t?[]:[-r/t];if(0===t){if(0===r)return[0,0];var n=Math.abs(r),i=Math.abs(e);if(n<i&&n/i<j.EPSILON14)return[0,0];if(i<n&&i/n<j.EPSILON14)return[];if((i=-r/e)<0)return[];n=Math.sqrt(i);return[-n,n]}if(0===r)return(i=-t/e)<0?[i,0]:[0,i];i=Ot(t*t,-(4*e*r),j.EPSILON14);if(i<0)return[];i=-.5*Ot(t,j.sign(t)*Math.sqrt(i),j.EPSILON14);return 0<t?[i/e,r/i]:[r/i,i/e]};var xt={};function It(e,t,r,n){var i=e,o=t/3,a=r/3,s=n,u=i*a,c=o*s,l=o*o,h=a*a,f=i*a-l,e=i*s-o*a,t=o*s-h,r=4*f*t-e*e;if(r<0){var n=u*h<=l*c?-2*o*(d=f)+(p=i)*e:-(p=s)*e+2*a*(d=t),m=-(n<0?-1:1)*Math.abs(p)*Math.sqrt(-r),p=(y=m-n)/2,p=p<0?-Math.pow(-p,1/3):Math.pow(p,1/3),m=y===m?-p:-d/p,m=d<=0?p+m:-n/(p*p+m*m+d);return u*h<=l*c?[(m-o)/i]:[-s/(m+a)]}var d=f,u=-2*o*f+i*e,h=t,l=-s*e+2*a*t,c=Math.sqrt(r),f=Math.sqrt(3)/2,e=Math.abs(Math.atan2(i*c,-u)/3);m=2*Math.sqrt(-d);t=Math.cos(e);y=m*t;var r=m*(-t/2-f*Math.sin(e)),u=2*o<y+r?y-o:r-o,d=i,i=u/d,e=Math.abs(Math.atan2(s*c,-l)/3),s=-s,e=(y=(m=2*Math.sqrt(-h))*(t=Math.cos(e)))+(r=m*(-t/2-f*Math.sin(e)))<2*a?y+a:r+a,y=s/e,r=-u*e-d*s,e=(a*r-o*(u*s))/(-o*r+a*(d*e));return i<=e?i<=y?e<=y?[i,e,y]:[i,y,e]:[y,i,e]:i<=y?[e,i,y]:e<=y?[e,y,i]:[y,e,i]}xt.computeDiscriminant=function(e,t,r,n){var i=t*t,o=r*r;return 18*e*t*r*n+i*o-27*(e*e)*(n*n)-4*(e*o*r+i*t*n)},xt.computeRealRoots=function(e,t,r,n){var i;if(0===e)return St.computeRealRoots(t,r,n);if(0!==t)return 0===r?0===n?(o=-t/e)<0?[o,0,0]:[0,0,o]:It(e,t,0,n):0===n?0===(i=St.computeRealRoots(e,t,r)).length?[0]:i[1]<=0?[i[0],i[1],0]:0<=i[0]?[0,i[0],i[1]]:[i[0],0,i[1]]:It(e,t,r,n);if(0!==r)return 0===n?0===(i=St.computeRealRoots(e,0,r)).Length?[0]:[i[0],0,i[1]]:It(e,0,r,n);if(0===n)return[0,0,0];var o=(o=-n/e)<0?-Math.pow(-o,1/3):Math.pow(o,1/3);return[o,o,o]};var wt={};function Nt(e,t,r,n){var i=e*e,o=t-3*i/8,a=r-t*e/2+i*e/8,n=n-r*e/4+t*i/16-3*i*i/256,r=xt.computeRealRoots(1,2*o,o*o-4*n,-a*a);if(0<r.length){t=-e/4,i=r[r.length-1];if(Math.abs(i)<j.EPSILON14){e=St.computeRealRoots(1,o,n);if(2===e.length){var r=e[0],s=e[1];if(0<=r&&0<=s){n=Math.sqrt(r),e=Math.sqrt(s);return[t-e,t-n,t+n,t+e]}if(0<=r&&s<0)return[t-(u=Math.sqrt(r)),t+u];if(r<0&&0<=s)return[t-(u=Math.sqrt(s)),t+u]}return[]}if(0<i){var s=Math.sqrt(i),u=(o+i+a/s)/2,a=St.computeRealRoots(1,s,(o+i-a/s)/2),u=St.computeRealRoots(1,-s,u);return 0!==a.length?(a[0]+=t,a[1]+=t,0!==u.length?(u[0]+=t,u[1]+=t,a[1]<=u[0]?[a[0],a[1],u[0],u[1]]:u[1]<=a[0]?[u[0],u[1],a[0],a[1]]:a[0]>=u[0]&&a[1]<=u[1]?[u[0],a[0],a[1],u[1]]:u[0]>=a[0]&&u[1]<=a[1]?[a[0],u[0],u[1],a[1]]:a[0]>u[0]&&a[0]<u[1]?[u[0],a[0],u[1],a[1]]:[a[0],u[0],a[1],u[1]]):a):0!==u.length?(u[0]+=t,u[1]+=t,u):[]}}return[]}function bt(e,t,r,n){var i=e*e,o=xt.computeRealRoots(1,-2*t,r*e+t*t-4*n,i*n-r*t*e+r*r);if(0<o.length){var a,s,u,c,l=o[0],h=t-l,f=h*h,m=e/2,o=h/2,t=f-4*n,h=f+4*Math.abs(n),f=i-4*l,i=i+4*Math.abs(l);s=l<0||t*i<f*h?(a=(f=Math.sqrt(f))/2,0===f?0:(e*o-r)/f):(a=0===(s=Math.sqrt(t))?0:(e*o-r)/s,s/2),0==m&&0===a?c=u=0:j.sign(m)===j.sign(a)?c=l/(u=m+a):u=l/(c=m-a),0==o&&0===s?d=p=0:j.sign(o)===j.sign(s)?d=n/(p=o+s):p=n/(d=o-s);var p=St.computeRealRoots(1,u,p),d=St.computeRealRoots(1,c,d);if(0!==p.length)return 0!==d.length?p[1]<=d[0]?[p[0],p[1],d[0],d[1]]:d[1]<=p[0]?[d[0],d[1],p[0],p[1]]:p[0]>=d[0]&&p[1]<=d[1]?[d[0],p[0],p[1],d[1]]:d[0]>=p[0]&&d[1]<=p[1]?[p[0],d[0],d[1],p[1]]:p[0]>d[0]&&p[0]<d[1]?[d[0],p[0],d[1],p[1]]:[p[0],d[0],p[1],d[1]]:p;if(0!==d.length)return d}return[]}function Mt(e,t){t=W.clone(b(t,W.ZERO)),W.equals(t,W.ZERO)||W.normalize(t,t),this.origin=W.clone(b(e,W.ZERO)),this.direction=t}wt.computeDiscriminant=function(e,t,r,n,i){var o=e*e,a=t*t,s=a*t,u=r*r,c=u*r,l=n*n,h=l*n,f=i*i;return a*u*l-4*s*h-4*e*c*l+18*e*t*r*h-27*o*l*l+256*(o*e)*(f*i)+i*(18*s*r*n-4*a*c+16*e*u*u-80*e*t*u*n-6*e*a*l+144*o*r*l)+f*(144*e*a*r-27*a*a-128*o*u-192*o*t*n)},wt.computeRealRoots=function(e,t,r,n,i){if(Math.abs(e)<j.EPSILON15)return xt.computeRealRoots(t,r,n,i);var o=t/e,a=r/e,s=n/e,u=i/e,e=o<0?1:0;switch(e+=a<0?e+1:e,e+=s<0?e+1:e,e+=u<0?e+1:e){case 0:return Nt(o,a,s,u);case 1:case 2:return bt(o,a,s,u);case 3:case 4:return Nt(o,a,s,u);case 5:return bt(o,a,s,u);case 6:case 7:return Nt(o,a,s,u);case 8:return bt(o,a,s,u);case 9:case 10:return Nt(o,a,s,u);case 11:return bt(o,a,s,u);case 12:case 13:case 14:case 15:return Nt(o,a,s,u);default:return}},Mt.clone=function(e,t){if(H(e))return H(t)?(t.origin=W.clone(e.origin),t.direction=W.clone(e.direction),t):new Mt(e.origin,e.direction)},Mt.getPoint=function(e,t,r){return H(r)||(r=new W),r=W.multiplyByScalar(e.direction,t,r),W.add(e.origin,r,r)};var Ct={rayPlane:function(e,t,r){H(r)||(r=new W);var n=e.origin,i=e.direction,o=t.normal,e=W.dot(o,i);if(!(Math.abs(e)<j.EPSILON15)){e=(-t.distance-W.dot(o,n))/e;if(!(e<0))return r=W.multiplyByScalar(i,e,r),W.add(n,r,r)}}},Pt=new W,Lt=new W,Dt=new W,zt=new W,Ft=new W;Ct.rayTriangleParametric=function(e,t,r,n,i){i=b(i,!1);var o,a,s,u=e.origin,c=e.direction,l=W.subtract(r,t,Pt),e=W.subtract(n,t,Lt),r=W.cross(c,e,Dt),n=W.dot(l,r);if(i){if(n<j.EPSILON6)return;if(f=W.subtract(u,t,zt),(h=W.dot(f,r))<0||n<h)return;if(o=W.cross(f,l,Ft),(a=W.dot(c,o))<0||n<h+a)return;s=W.dot(e,o)/n}else{if(Math.abs(n)<j.EPSILON6)return;var h,n=1/n,f=W.subtract(u,t,zt);if((h=W.dot(f,r)*n)<0||1<h)return;if(o=W.cross(f,l,Ft),(a=W.dot(c,o)*n)<0||1<h+a)return;s=W.dot(e,o)*n}return s},Ct.rayTriangle=function(e,t,r,n,i,o){i=Ct.rayTriangleParametric(e,t,r,n,i);if(H(i)&&!(i<0))return H(o)||(o=new W),W.multiplyByScalar(e.direction,i,o),W.add(e.origin,o,o)};var Ut=new Mt;Ct.lineSegmentTriangle=function(e,t,r,n,i,o,a){var s=Ut;W.clone(e,s.origin),W.subtract(t,e,s.direction),W.normalize(s.direction,s.direction);o=Ct.rayTriangleParametric(s,r,n,i,o);if(!(!H(o)||o<0||o>W.distance(e,t)))return H(a)||(a=new W),W.multiplyByScalar(s.direction,o,a),W.add(s.origin,a,a)};var Bt={root0:0,root1:0};function qt(e,t,r){H(r)||(r=new te);var n=e.origin,i=e.direction,e=t.center,t=t.radius*t.radius,e=W.subtract(n,e,Dt),t=function(e,t,r,n){if(!((o=t*t-4*e*r)<0)){if(0<o){var i=1/(2*e),r=Math.sqrt(o),o=(-t+r)*i,i=(-t-r)*i;return o<i?(n.root0=o,n.root1=i):(n.root0=i,n.root1=o),n}e=-t/(2*e);if(0!=e)return n.root0=n.root1=e,n}}(W.dot(i,i),2*W.dot(i,e),W.magnitudeSquared(e)-t,Bt);if(H(t))return r.start=t.root0,r.stop=t.root1,r}Ct.raySphere=function(e,t,r){if(H(r=qt(e,t,r))&&!(r.stop<0))return r.start=Math.max(r.start,0),r};var Gt=new Mt;Ct.lineSegmentSphere=function(e,t,r,n){var i=Gt;W.clone(e,i.origin);t=W.subtract(t,e,i.direction),e=W.magnitude(t);if(W.normalize(t,t),!(!H(n=qt(i,r,n))||n.stop<0||n.start>e))return n.start=Math.max(n.start,0),n.stop=Math.min(n.stop,e),n};var Ht=new W,jt=new W;function Wt(e,t,r){var n=e+t;return j.sign(e)!==j.sign(t)&&Math.abs(n/Math.max(Math.abs(e),Math.abs(t)))<r?0:n}Ct.rayEllipsoid=function(e,t){var r=t.oneOverRadii,n=W.multiplyComponents(r,e.origin,Ht),t=W.multiplyComponents(r,e.direction,jt),r=W.magnitudeSquared(n),e=W.dot(n,t);if(1<r){if(0<=e)return;var i,o,n=e*e,a=r-1;if(n<(o=(i=W.magnitudeSquared(t))*a))return;if(o<n){var s,u=e*e-o,c=(s=-e+Math.sqrt(u))/i,n=a/s;return c<n?new te(c,n):{start:n,stop:c}}c=Math.sqrt(a/i);return new te(c,c)}return r<1?(a=r-1,u=e*e-(o=(i=W.magnitudeSquared(t))*a),new te(0,(s=-e+Math.sqrt(u))/i)):e<0?new te(0,-e/(i=W.magnitudeSquared(t))):void 0};var Vt=new W,Yt=new W,Xt=new W,kt=new W,Zt=new W,Kt=new re,Jt=new re,Qt=new re,$t=new re,er=new re,tr=new re,rr=new re,nr=new W,ir=new W,or=new R;Ct.grazingAltitudeLocation=function(e,t){var r=e.origin,n=e.direction;if(!W.equals(r,W.ZERO)){var i=t.geodeticSurfaceNormal(r,Vt);if(0<=W.dot(n,i))return r}var o=H(this.rayEllipsoid(e,t)),a=t.transformPositionToScaledSpace(n,Vt),i=W.normalize(a,a),e=W.mostOrthogonalAxis(a,kt),a=W.normalize(W.cross(e,i,Yt),Yt),e=W.normalize(W.cross(i,a,Xt),Xt),s=Kt;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=a.x,s[4]=a.y,s[5]=a.z,s[6]=e.x,s[7]=e.y,s[8]=e.z;var i=re.transpose(s,Jt),u=re.fromScale(t.radii,Qt),a=re.fromScale(t.oneOverRadii,$t),e=er;e[0]=0,e[1]=-n.z,e[2]=n.y,e[3]=n.z,e[4]=0,e[5]=-n.x,e[6]=-n.y,e[7]=n.x,e[8]=0;var a=re.multiply(re.multiply(i,a,tr),e,tr),e=re.multiply(re.multiply(a,u,rr),s,rr),a=re.multiplyByVector(a,r,Zt),c=function(e,t,r,n,i){var o=n*n,a=i*i,s=(e[re.COLUMN1ROW1]-e[re.COLUMN2ROW2])*a,u=i*(n*Wt(e[re.COLUMN1ROW0],e[re.COLUMN0ROW1],j.EPSILON15)+t.y),c=e[re.COLUMN0ROW0]*o+e[re.COLUMN2ROW2]*a+n*t.x+r,l=a*Wt(e[re.COLUMN2ROW1],e[re.COLUMN1ROW2],j.EPSILON15),h=i*(n*Wt(e[re.COLUMN2ROW0],e[re.COLUMN0ROW2])+t.z),f=[];if(0==h&&0==l){if(0===(E=St.computeRealRoots(s,u,c)).length)return f;var m=E[0],p=Math.sqrt(Math.max(1-m*m,0));return f.push(new W(n,i*m,i*-p)),f.push(new W(n,i*m,i*p)),2===E.length&&(d=E[1],y=Math.sqrt(Math.max(1-d*d,0)),f.push(new W(n,i*d,i*-y)),f.push(new W(n,i*d,i*y))),f}var d=s*s+(m=l*l),y=2*(u*s+(p=h*l)),m=2*c*s+u*u-m+(t=h*h),p=2*(c*u-p);if(0==d&&0==y&&0==m&&0==p)return f;var E,_=(E=wt.computeRealRoots(d,y,m,p,c*c-t)).length;if(0===_)return f;for(var g=0;g<_;++g){var v=E[g],T=v*v,A=Math.max(1-T,0),A=Math.sqrt(A),T=j.sign(s)===j.sign(c)?Wt(s*T+c,u*v,j.EPSILON12):j.sign(c)===j.sign(u*v)?Wt(s*T,u*v+c,j.EPSILON12):Wt(s*T+u*v,c,j.EPSILON12),T=T*Wt(l*v,h,j.EPSILON15);T<0?f.push(new W(n,i*v,i*A)):0<T?f.push(new W(n,i*v,i*-A)):0!==A?(f.push(new W(n,i*v,i*-A)),f.push(new W(n,i*v,i*A)),++g):f.push(new W(n,i*v,i*A))}return f}(e,W.negate(a,Vt),0,0,1),l=c.length;if(0<l){for(var h=W.clone(W.ZERO,ir),f=Number.NEGATIVE_INFINITY,m=0;m<l;++m){var p=re.multiplyByVector(u,re.multiplyByVector(s,c[m],nr),nr),d=W.normalize(W.subtract(p,r,kt),kt),d=W.dot(d,n);f<d&&(f=d,h=W.clone(p,h))}e=t.cartesianToCartographic(h,or),f=j.clamp(f,0,1),a=W.magnitude(W.subtract(h,r,kt))*Math.sqrt(1-f*f);return e.height=a=o?-a:a,t.cartographicToCartesian(e,new W)}};var ar=new W;function sr(e,t){this.normal=W.clone(e),this.distance=t}Ct.lineSegmentPlane=function(e,t,r,n){H(n)||(n=new W);var i=W.subtract(t,e,ar),o=r.normal,t=W.dot(o,i);if(!(Math.abs(t)<j.EPSILON6)){o=W.dot(o,e),t=-(r.distance+o)/t;if(!(t<0||1<t))return W.multiplyByScalar(i,t,n),W.add(e,n,n),n}},Ct.trianglePlaneIntersection=function(e,t,r,n){var i,o,a=n.normal,s=n.distance,u=W.dot(a,e)+s<0,c=W.dot(a,t)+s<0,a=W.dot(a,r)+s<0,s=0;if(s+=u?1:0,s+=c?1:0,1!=(s+=a?1:0)&&2!=s||(i=new W,o=new W),1==s){if(u)return Ct.lineSegmentPlane(e,t,n,i),Ct.lineSegmentPlane(e,r,n,o),{positions:[e,t,r,i,o],indices:[0,3,4,1,2,4,1,4,3]};if(c)return Ct.lineSegmentPlane(t,r,n,i),Ct.lineSegmentPlane(t,e,n,o),{positions:[e,t,r,i,o],indices:[1,3,4,2,0,4,2,4,3]};if(a)return Ct.lineSegmentPlane(r,e,n,i),Ct.lineSegmentPlane(r,t,n,o),{positions:[e,t,r,i,o],indices:[2,3,4,0,1,4,0,4,3]}}else if(2==s){if(!u)return Ct.lineSegmentPlane(t,e,n,i),Ct.lineSegmentPlane(r,e,n,o),{positions:[e,t,r,i,o],indices:[1,2,4,1,4,3,0,3,4]};if(!c)return Ct.lineSegmentPlane(r,t,n,i),Ct.lineSegmentPlane(e,t,n,o),{positions:[e,t,r,i,o],indices:[2,0,4,2,4,3,1,3,4]};if(!a)return Ct.lineSegmentPlane(e,r,n,i),Ct.lineSegmentPlane(t,r,n,o),{positions:[e,t,r,i,o],indices:[0,1,4,0,4,3,2,3,4]}}},sr.fromPointNormal=function(e,t,r){e=-W.dot(t,e);return H(r)?(W.clone(t,r.normal),r.distance=e,r):new sr(t,e)};var ur=new W;sr.fromCartesian4=function(e,t){var r=W.fromCartesian4(e,ur),e=e.w;return H(t)?(W.clone(r,t.normal),t.distance=e,t):new sr(r,e)},sr.fromPoints=function(e,t,r,n){var i=W.subtract(t,e,new W),t=W.subtract(r,t,new W);W.normalize(i,i),W.normalize(t,t);t=W.cross(i,t,new W);W.normalize(t,t);e=-W.dot(t,e);return H(n)?(W.clone(t,n.normal),n.distance=e,n):new sr(t,e)},sr.getPointDistance=function(e,t){return W.dot(e.normal,t)+e.distance};var cr=new W;sr.projectPointOntoPlane=function(e,t,r){H(r)||(r=new W);var n=sr.getPointDistance(e,t),n=W.multiplyByScalar(e.normal,n,cr);return W.subtract(t,n,r)},sr.projection=function(e,t,r){var n=W.dot(t,e.normal),n=W.multiplyByScalar(e.normal,n,cr);return H(r)||(r=new W),W.subtract(t,n,r)};var lr,hr,fr=new W;function mr(e,t,r,n){return pr(e).then(t,r,n)}function pr(e){var t,r,e=e instanceof dr?e:_r(e)?(t=Er(),e.then(function(e){t.resolve(e)},function(e){t.reject(e)},function(e){t.progress(e)}),t.promise):(r=e,new dr(function(e){try{return pr(e?e(r):r)}catch(e){return yr(e)}}));return e}function dr(e){this.then=e}function yr(r){return new dr(function(e,t){try{return t?pr(t(r)):yr(r)}catch(e){return yr(e)}})}function Er(){var e=new dr(i),a=[],s=[],n=function(t,r,n){var i=Er(),o="function"==typeof n?function(e){try{i.progress(n(e))}catch(e){i.progress(e)}}:function(e){i.progress(e)};return a.push(function(e){e.then(t,r).then(i.resolve,i.reject,o)}),s.push(o),i.promise},t=function(e){return Ar(s,e),e},r=function(e){return e=pr(e),n=e.then,r=pr,t=Rr,Ar(a,e),s=a=lr,e};return{then:i,resolve:o,reject:u,progress:c,promise:e,resolver:{resolve:o,reject:u,progress:c}};function i(e,t,r){return n(e,t,r)}function o(e){return r(e)}function u(e){return r(yr(e))}function c(e){return t(e)}}function _r(e){return e&&"function"==typeof e.then}function gr(e,m,p,d,y){return mr(e,function(e){var t,r,n,i,o=e.length>>>0,a=Math.max(0,Math.min(m,o)),s=[],u=o-a+1,c=[],l=Er();if(a)for(n=l.progress,r=function(e){c.push(e),--u||(t=r=Rr,l.reject(c))},t=function(e){s.push(e),--a||(t=r=Rr,l.resolve(s))},i=0;i<o;++i)i in e&&mr(e[i],f,h,n);else l.resolve(s);return l.then(p,d,y);function h(e){r(e)}function f(e){t(e)}})}function vr(e,t,r,n){return Tr(e,Sr).then(t,r,n)}function Tr(e,s){return mr(e,function(e){var t,r,n,i=t=e.length>>>0,o=[],a=Er();if(i)for(r=function(e,t){mr(e,s).then(function(e){o[t]=e,--i||a.resolve(o)},a.reject)},n=0;n<t;n++)n in e?r(e[n],n):--i;else a.resolve(o);return a.promise})}function Ar(e,t){for(var r,n=0;r=e[n++];)r(t)}function Rr(){}function Sr(e){return e}sr.transform=function(e,t,r){return ye.multiplyByPointAsVector(t,e.normal,ur),W.normalize(ur,ur),W.multiplyByScalar(e.normal,-e.distance,fr),ye.multiplyByPoint(t,fr,fr),sr.fromPointNormal(fr,ur,r)},sr.clone=function(e,t){return H(t)?(W.clone(e.normal,t.normal),t.distance=e.distance,t):new sr(e.normal,e.distance)},sr.equals=function(e,t){return e.distance===t.distance&&W.equals(e.normal,t.normal)},sr.prototype.intersect=function(e,t){H(t)||(t=new W);var r,n=e.origin,i=e.direction,e=W.dot(i,this.normal);return Math.abs(e)<j.EPSILON15?(r=n.x*this.normal.x*n.y*this.normal.y+n.z*this.normal.z+this.distance)<j.EPSILON15?(W.clone(n,t),t):void 0:(r=-(this.normal.x*n.x+this.normal.y*n.y+this.normal.z*n.z+this.distance),t=W.multiplyByScalar(i,r/=e,t),t=W.add(n,t,t))},sr.ORIGIN_XY_PLANE=Object.freeze(new sr(W.UNIT_Z,0)),sr.ORIGIN_YZ_PLANE=Object.freeze(new sr(W.UNIT_X,0)),sr.ORIGIN_ZX_PLANE=Object.freeze(new sr(W.UNIT_Y,0)),mr.defer=Er,mr.resolve=pr,mr.reject=function(e){return mr(e,yr)},mr.join=function(){return Tr(arguments,Sr)},mr.all=vr,mr.map=Tr,mr.reduce=function(e,o){var t=Hr.call(arguments,1);return mr(e,function(e){var i=e.length;return t[0]=function(e,r,n){return mr(e,function(t){return mr(r,function(e){return o(t,e,n,i)})})},jr.apply(e,t)})},mr.any=function(e,t,r,n){return gr(e,1,function(e){return t?t(e[0]):e[0]},r,n)},mr.some=gr,mr.chain=function(e,t,r){var n=2<arguments.length;return mr(e,function(e){return t.resolve(e=n?r:e),e},function(e){return t.reject(e),yr(e)},t.progress)},mr.isPromise=_r,dr.prototype={always:function(e,t){return this.then(e,e,t)},otherwise:function(e){return this.then(lr,e)},yield:function(e){return this.then(function(){return e})},spread:function(t){return this.then(function(e){return vr(e,function(e){return t.apply(lr,e)})})}};var Or,xr,Ir,wr,Nr,br,Mr,Cr,Pr,Lr,Dr,zr,Fr,Ur,Br,qr,Gr,Hr=[].slice,jr=[].reduce||function(e){var t,r=0,n=Object(this),i=n.length>>>0,o=arguments;if(o.length<=1)for(;;){if(r in n){t=n[r++];break}if(++r>=i)throw new TypeError}else t=o[1];for(;r<i;++r)r in n&&(t=e(t,n[r],r,n));return t},Wr={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},Vr={};function Yr(e){for(var t=e.split("."),r=0,n=t.length;r<n;++r)t[r]=parseInt(t[r],10);return t}function Xr(){var e;return H(xr)||(xr=!1,Jr()||null!==(e=/ Chrome\/([\.0-9]+)/.exec(Or.userAgent))&&(xr=!0,Ir=Yr(e[1]))),xr}function kr(){var e;return H(wr)||(wr=!1,Xr()||Jr()||!/ Safari\/[\.0-9]+/.test(Or.userAgent)||null!==(e=/ Version\/([\.0-9]+)/.exec(Or.userAgent))&&(wr=!0,Nr=Yr(e[1]))),wr}function Zr(){var e;return H(br)||(br=!1,null!==(e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(Or.userAgent))&&(br=!0,(Mr=Yr(e[1])).isNightly=!!e[2])),br}function Kr(){var e;return H(Cr)||(Cr=!1,"Microsoft Internet Explorer"===Or.appName?null!==(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(Or.userAgent))&&(Cr=!0,Pr=Yr(e[1])):"Netscape"===Or.appName&&null!==(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(Or.userAgent))&&(Cr=!0,Pr=Yr(e[1]))),Cr}function Jr(){var e;return H(Lr)||(Lr=!1,null!==(e=/ Edge\/([\.0-9]+)/.exec(Or.userAgent))&&(Lr=!0,Dr=Yr(e[1]))),Lr}function Qr(){var e;return H(zr)||(zr=!1,null!==(e=/Firefox\/([\.0-9]+)/.exec(Or.userAgent))&&(zr=!0,Fr=Yr(e[1]))),zr}function $r(){var e;return H(Gr)||((e=document.createElement("canvas")).setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;"),e=e.style.imageRendering,(Gr=H(e)&&""!==e)&&(qr=e)),Gr}function en(){return en._result}Object.defineProperties(Vr,{element:{get:function(){if(Vr.supportsFullscreen())return document[Wr.fullscreenElement]}},changeEventName:{get:function(){if(Vr.supportsFullscreen())return Wr.fullscreenchange}},errorEventName:{get:function(){if(Vr.supportsFullscreen())return Wr.fullscreenerror}},enabled:{get:function(){if(Vr.supportsFullscreen())return document[Wr.fullscreenEnabled]}},fullscreen:{get:function(){if(Vr.supportsFullscreen())return null!==Vr.element}}}),Vr.supportsFullscreen=function(){if(H(hr))return hr;hr=!1;var e=document.body;if("function"==typeof e.requestFullscreen)return Wr.requestFullscreen="requestFullscreen",Wr.exitFullscreen="exitFullscreen",Wr.fullscreenEnabled="fullscreenEnabled",Wr.fullscreenElement="fullscreenElement",Wr.fullscreenchange="fullscreenchange",Wr.fullscreenerror="fullscreenerror",hr=!0;for(var t=["webkit","moz","o","ms","khtml"],r=0,n=t.length;r<n;++r){var i,o=t[r];"function"!=typeof e[i=o+"RequestFullscreen"]&&"function"!=typeof e[i=o+"RequestFullScreen"]||(Wr.requestFullscreen=i,hr=!0),i=o+"ExitFullscreen","function"==typeof document[i]?Wr.exitFullscreen=i:(i=o+"CancelFullScreen","function"==typeof document[i]&&(Wr.exitFullscreen=i)),i=o+"FullscreenEnabled",void 0!==document[i]?Wr.fullscreenEnabled=i:(i=o+"FullScreenEnabled",void 0!==document[i]&&(Wr.fullscreenEnabled=i)),i=o+"FullscreenElement",void 0!==document[i]?Wr.fullscreenElement=i:(i=o+"FullScreenElement",void 0!==document[i]&&(Wr.fullscreenElement=i)),i=o+"fullscreenchange",void 0!==document["on"+i]&&(Wr.fullscreenchange=i="ms"===o?"MSFullscreenChange":i),i=o+"fullscreenerror",void 0!==document["on"+i]&&(Wr.fullscreenerror=i="ms"===o?"MSFullscreenError":i)}return hr},Vr.requestFullscreen=function(e,t){Vr.supportsFullscreen()&&e[Wr.requestFullscreen]({vrDisplay:t})},Vr.exitFullscreen=function(){Vr.supportsFullscreen()&&document[Wr.exitFullscreen]()},Vr._names=Wr,Or="undefined"!=typeof navigator?navigator:{},en._promise=void 0,en._result=void 0,en.initialize=function(){if(H(en._promise))return en._promise;var e=mr.defer();if(en._promise=e.promise,Jr())return en._result=!1,e.resolve(en._result),e.promise;var t=new Image;return t.onload=function(){en._result=0<t.width&&0<t.height,e.resolve(en._result)},t.onerror=function(){en._result=!1,e.resolve(en._result)},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.promise},Object.defineProperties(en,{initialized:{get:function(){return H(en._result)}}});var tn=[];"undefined"!=typeof ArrayBuffer&&(tn.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&tn.push(Uint8ClampedArray),"undefined"!=typeof Uint8ClampedArray&&tn.push(Uint8ClampedArray));var rn={isChrome:Xr,chromeVersion:function(){return Xr()&&Ir},isSafari:kr,safariVersion:function(){return kr()&&Nr},isWebkit:Zr,webkitVersion:function(){return Zr()&&Mr},isInternetExplorer:Kr,internetExplorerVersion:function(){return Kr()&&Pr},isEdge:Jr,edgeVersion:function(){return Jr()&&Dr},isFirefox:Qr,firefoxVersion:function(){return Qr()&&Fr},isWindows:function(){return Ur=!H(Ur)?/Windows/i.test(Or.appVersion):Ur},hardwareConcurrency:b(Or.hardwareConcurrency,3),supportsPointerEvents:function(){return Br=!H(Br)?!Qr()&&"undefined"!=typeof PointerEvent&&(!H(Or.pointerEnabled)||Or.pointerEnabled):Br},supportsImageRenderingPixelated:$r,supportsWebP:en,imageRenderingValue:function(){return $r()?qr:void 0},typedArrayTypes:tn};function nn(e,t,r,n){this.x=b(e,0),this.y=b(t,0),this.z=b(r,0),this.w=b(n,0)}rn.supportsFullscreen=function(){return Vr.supportsFullscreen()},rn.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer},rn.supportsWebWorkers=function(){return"undefined"!=typeof Worker},rn.supportsWebAssembly=function(){return"undefined"!=typeof WebAssembly&&!rn.isEdge()};var on=new W;nn.fromAxisAngle=function(e,t,r){var n=t/2,i=Math.sin(n),t=(on=W.normalize(e,on)).x*i,e=on.y*i,i=on.z*i,n=Math.cos(n);return H(r)?(r.x=t,r.y=e,r.z=i,r.w=n,r):new nn(t,e,i,n)};var an=[1,2,0],sn=new Array(3);nn.fromRotationMatrix=function(e,t){var r,n,i,o,a=e[re.COLUMN0ROW0],s=e[re.COLUMN1ROW1],u=e[re.COLUMN2ROW2],c=a+s+u,l=0<c?(i=.5*(o=Math.sqrt(c+1)),r=(e[re.COLUMN1ROW2]-e[re.COLUMN2ROW1])*(o=.5/o),n=(e[re.COLUMN2ROW0]-e[re.COLUMN0ROW2])*o,(e[re.COLUMN0ROW1]-e[re.COLUMN1ROW0])*o):(s=an[a=an[u=a<u&&s<u?2:a<s?1:0]],o=Math.sqrt(e[re.getElementIndex(u,u)]-e[re.getElementIndex(a,a)]-e[re.getElementIndex(s,s)]+1),(l=sn)[u]=.5*o,o=.5/o,i=(e[re.getElementIndex(s,a)]-e[re.getElementIndex(a,s)])*o,l[a]=(e[re.getElementIndex(a,u)]+e[re.getElementIndex(u,a)])*o,l[s]=(e[re.getElementIndex(s,u)]+e[re.getElementIndex(u,s)])*o,r=-l[0],n=-l[1],-l[2]);return H(t)?(t.x=r,t.y=n,t.z=l,t.w=i,t):new nn(r,n,l,i)};var un,cn,ln,hn=new nn;new nn,new nn,new nn;nn.fromHeadingPitchRoll=function(e,t){return ln=nn.fromAxisAngle(W.UNIT_X,e.roll,hn),cn=nn.fromAxisAngle(W.UNIT_Y,-e.pitch,t),t=nn.multiply(cn,ln,cn),un=nn.fromAxisAngle(W.UNIT_Z,-e.heading,hn),nn.multiply(un,t,t)};var fn=new W,mn=new W;nn.fromNormal=function(e,t,r){var n=W.add(e,t,fn);W.normalize(n,n);var i,o,a,s,u=W.dot(e,n),t=u;return s=0!=u?(o=(i=W.cross(e,n,mn)).x,a=i.y,i.z):Math.abs(e.x)>=Math.abs(e.y)?(s=1/Math.sqrt(e.x*e.x+e.z*e.z),o=-e.z*s,a=0,e.x*s):(s=1/Math.sqrt(e.x*e.x+e.z*e.z),o=0,a=e.z*s,-e.y*s),H(r)?(r.x=o,r.y=a,r.z=s,r.w=t,r):new nn(o,a,s,t)};var pn=new W,dn=new W,yn=new nn,En=new nn,_n=new nn;nn.packedLength=4,nn.pack=function(e,t,r){return r=b(r,0),t[r++]=e.x,t[r++]=e.y,t[r++]=e.z,t[r]=e.w,t},nn.unpack=function(e,t,r){return t=b(t,0),(r=!H(r)?new nn:r).x=e[t],r.y=e[t+1],r.z=e[t+2],r.w=e[t+3],r},nn.packedInterpolationLength=3,nn.convertPackedArrayForInterpolation=function(e,t,r,n){nn.unpack(e,4*r,_n),nn.conjugate(_n,_n);for(var i=0,o=r-t+1;i<o;i++){var a=3*i;nn.unpack(e,4*(t+i),yn),nn.multiply(yn,_n,yn),yn.w<0&&nn.negate(yn,yn),nn.computeAxis(yn,pn);var s=nn.computeAngle(yn);(n=!H(n)?[]:n)[a]=pn.x*s,n[1+a]=pn.y*s,n[2+a]=pn.z*s}},nn.unpackInterpolationResult=function(e,t,r,n,i){H(i)||(i=new nn),W.fromArray(e,0,dn);e=W.magnitude(dn);return nn.unpack(t,4*n,En),0===e?nn.clone(nn.IDENTITY,yn):nn.fromAxisAngle(dn,e,yn),nn.multiply(yn,En,i)},nn.clone=function(e,t){if(H(e))return H(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new nn(e.x,e.y,e.z,e.w)},nn.conjugate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},nn.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},nn.magnitude=function(e){return Math.sqrt(nn.magnitudeSquared(e))},nn.normalize=function(e,t){var r=1/nn.magnitude(e),n=e.x*r,i=e.y*r,o=e.z*r,r=e.w*r;return t.x=n,t.y=i,t.z=o,t.w=r,t},nn.inverse=function(e,t){var r=nn.magnitudeSquared(e);return t=nn.conjugate(e,t),nn.multiplyByScalar(t,1/r,t)},nn.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r},nn.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},nn.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},nn.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},nn.multiply=function(e,t,r){var n=e.x,i=e.y,o=e.z,a=e.w,s=t.x,u=t.y,c=t.z,l=t.w,h=a*u-n*c+i*l+o*s,e=a*c+n*u-i*s+o*l,t=a*l-n*s-i*u-o*c;return r.x=a*s+n*l+i*c-o*u,r.y=h,r.z=e,r.w=t,r},nn.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},nn.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},nn.computeAxis=function(e,t){var r=e.w;if(Math.abs(r-1)<j.EPSILON6)return t.x=t.y=t.z=0,t;r=1/Math.sqrt(1-r*r);return t.x=e.x*r,t.y=e.y*r,t.z=e.z*r,t},nn.computeAngle=function(e){return Math.abs(e.w-1)<j.EPSILON6?0:2*Math.acos(e.w)};var gn=new nn;nn.lerp=function(e,t,r,n){return gn=nn.multiplyByScalar(t,r,gn),n=nn.multiplyByScalar(e,1-r,n),nn.add(gn,n,n)};var vn=new nn,Tn=new nn,An=new nn;nn.slerp=function(e,t,r,n){var i=nn.dot(e,t),o=t;if(i<0&&(i=-i,o=vn=nn.negate(t,vn)),1-i<j.EPSILON6)return nn.lerp(e,o,r,n);i=Math.acos(i);return Tn=nn.multiplyByScalar(e,Math.sin((1-r)*i),Tn),An=nn.multiplyByScalar(o,Math.sin(r*i),An),n=nn.add(Tn,An,n),nn.multiplyByScalar(n,1/Math.sin(i),n)},nn.log=function(e,t){var r=j.acosClamped(e.w),n=0;return 0!==r&&(n=r/Math.sin(r)),W.multiplyByScalar(e,n,t)},nn.exp=function(e,t){var r=W.magnitude(e),n=0;return 0!==r&&(n=Math.sin(r)/r),t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=Math.cos(r),t};var Rn=new W,Sn=new W,On=new nn,xn=new nn;nn.computeInnerQuadrangle=function(e,t,r,n){var i=nn.conjugate(t,On);nn.multiply(i,r,xn);r=nn.log(xn,Rn);nn.multiply(i,e,xn);e=nn.log(xn,Sn);return W.add(r,e,r),W.multiplyByScalar(r,.25,r),W.negate(r,r),nn.exp(r,On),nn.multiply(t,On,n)},nn.squad=function(e,t,r,n,i,o){t=nn.slerp(e,t,i,On),n=nn.slerp(r,n,i,xn);return nn.slerp(t,n,2*i*(1-i),o)};for(var In=new nn,tn=1.9011074535173003,wn=rn.supportsTypedArrays()?new Float32Array(8):[],Nn=rn.supportsTypedArrays()?new Float32Array(8):[],bn=rn.supportsTypedArrays()?new Float32Array(8):[],Mn=rn.supportsTypedArrays()?new Float32Array(8):[],Cn=0;Cn<7;++Cn){var Pn=Cn+1,Ln=2*Pn+1;wn[Cn]=1/(Pn*Ln),Nn[Cn]=Pn/Ln}function Dn(e,t,r){this.heading=b(e,0),this.pitch=b(t,0),this.roll=b(r,0)}function zn(e,t,r){for(var n,i,o=0,a=e.length-1;o<=a;)if((i=r(e[n=~~((o+a)/2)],t))<0)o=1+n;else{if(!(0<i))return n;a=n-1}return~(a+1)}function Fn(){function g(e,t,r,n,i,o,a){var s=e>>>0;return e=(r=r&&s&&{2:"0b",8:"0",16:"0x"}[t]||"")+R(s.toString(t),o||0,"0",!1),S(e,r,n,i,a)}function v(e,t,r,n,i,o){return null!=n&&(e=e.slice(0,n)),S(e,"",t,r,i,o)}var T=arguments,A=0,e=T[A++],R=function(e,t,r,n){r=r||" ";r=e.length>=t?"":Array(1+t-e.length>>>0).join(r);return n?e+r:r+e},S=function(e,t,r,n,i,o){var a=n-e.length;return e=0<a?r||!i?R(e,n,o,r):e.slice(0,t.length)+R("",a,"0",!0)+e.slice(t.length):e};return e.replace(/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,function(e,t,r,n,i,o,a){var s,u,c,l,h;if("%%"==e)return"%";for(var f=!1,m="",p=!1,d=!1,y=" ",E=r.length,_=0;r&&_<E;_++)switch(r.charAt(_)){case" ":m=" ";break;case"+":m="+";break;case"-":f=!0;break;case"'":y=r.charAt(_+1);break;case"0":p=!0;break;case"#":d=!0}switch((n=n?"*"==n?+T[A++]:"*"==n.charAt(0)?+T[n.slice(1,-1)]:+n:0)<0&&(n=-n,f=!0),o=o?"*"==o?+T[A++]:"*"==o.charAt(0)?+T[o.slice(1,-1)]:+o:-1<"fFeE".indexOf(a)?6:"d"==a?0:void 0,h=t?T[t.slice(0,-1)]:T[A++],a){case"s":return v(String(h),f,n,o,p,y);case"c":return v(String.fromCharCode(+h),f,n,o,p);case"b":return g(h,2,d,f,n,o,p);case"o":return g(h,8,d,f,n,o,p);case"x":return g(h,16,d,f,n,o,p);case"X":return g(h,16,d,f,n,o,p).toUpperCase();case"u":return g(h,10,d,f,n,o,p);case"i":case"d":return s=+h||0,h=(u=(s=Math.round(s-s%1))<0?"-":m)+R(String(Math.abs(s)),o,"0",!1),S(h,u,f,n,p);case"e":case"E":case"f":case"F":case"g":case"G":return u=(s=+h)<0?"-":m,c=["toExponential","toFixed","toPrecision"]["efg".indexOf(a.toLowerCase())],l=["toString","toUpperCase"]["eEfFgG".indexOf(a)%2],h=u+Math.abs(s)[c](o),S(h,u,f,n,p)[l]();default:return e}})}function Un(e,t,r,n,i,o,a,s){this.year=e,this.month=t,this.day=r,this.hour=n,this.minute=i,this.second=o,this.millisecond=a,this.isLeapSecond=s}function Bn(e){return e%4==0&&e%100!=0||e%400==0}function qn(e,t){this.julianDate=e,this.offset=t}wn[7]=tn/136,Nn[7]=8*tn/17,nn.fastSlerp=function(e,t,r,n){var i,o=nn.dot(e,t);0<=o?i=1:(i=-1,o=-o);for(var a=o-1,o=1-r,s=r*r,u=o*o,c=7;0<=c;--c)bn[c]=(wn[c]*s-Nn[c])*a,Mn[c]=(wn[c]*u-Nn[c])*a;r=i*r*(1+bn[0]*(1+bn[1]*(1+bn[2]*(1+bn[3]*(1+bn[4]*(1+bn[5]*(1+bn[6]*(1+bn[7])))))))),o*=1+Mn[0]*(1+Mn[1]*(1+Mn[2]*(1+Mn[3]*(1+Mn[4]*(1+Mn[5]*(1+Mn[6]*(1+Mn[7]))))))),o=nn.multiplyByScalar(e,o,In);return nn.multiplyByScalar(t,r,n),nn.add(o,n,n)},nn.fastSquad=function(e,t,r,n,i,o){t=nn.fastSlerp(e,t,i,On),n=nn.fastSlerp(r,n,i,xn);return nn.fastSlerp(t,n,2*i*(1-i),o)},nn.equals=function(e,t){return e===t||H(e)&&H(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},nn.equalsEpsilon=function(e,t,r){return r=b(r,0),e===t||H(e)&&H(t)&&Math.abs(e.x-t.x)<=r&&Math.abs(e.y-t.y)<=r&&Math.abs(e.z-t.z)<=r&&Math.abs(e.w-t.w)<=r},nn.ZERO=Object.freeze(new nn(0,0,0,0)),nn.IDENTITY=Object.freeze(new nn(0,0,0,1)),nn.prototype.clone=function(e){return nn.clone(this,e)},nn.prototype.equals=function(e){return nn.equals(this,e)},nn.prototype.equalsEpsilon=function(e,t){return nn.equalsEpsilon(this,e,t)},nn.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},nn.from_euler=function(e,t,r,n){var i=Math.cos(.5*t),o=Math.cos(.5*r),a=Math.cos(.5*e),s=Math.sin(.5*t),u=Math.sin(.5*r),c=Math.sin(.5*e),t=i*o*a-s*u*c,r=s*u*a+i*o*c,e=s*o*a+i*u*c,c=i*u*a-s*o*c;return H(n)?(n.x=r,n.y=e,n.z=c,n.w=t,n):n=new nn(r,e,c,t)},nn.to_euler=function(e,t){H(t)||(t=new W);var r=e.w,n=e.x,i=e.y,o=e.z,a=n*n,s=i*i,u=o*o,e=n*i+o*r;return.499<e?(t.x=0,t.y=2*Math.atan2(n,r),t.z=j.PI_OVER_TWO):e<-.499?(t.x=0,t.y=2*-Math.atan2(n,r),t.z=-j.PI_OVER_TWO):(t.y=Math.atan2(2*i*r-2*n*o,1-2*s-2*u),t.z=Math.asin(2*n*i+2*o*r),t.x=Math.atan2(2*n*r-2*i*o,1-2*a-2*u)),t},Dn.fromQuaternion=function(e,t){H(t)||(t=new Dn);var r=2*(e.w*e.y-e.z*e.x),n=1-2*(e.x*e.x+e.y*e.y),i=2*(e.w*e.x+e.y*e.z),o=1-2*(e.y*e.y+e.z*e.z),e=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(e,o),t.roll=Math.atan2(i,n),t.pitch=-j.asinClamped(r),t},Dn.fromDegrees=function(e,t,r,n){return(n=!H(n)?new Dn:n).heading=e*j.RADIANS_PER_DEGREE,n.pitch=t*j.RADIANS_PER_DEGREE,n.roll=r*j.RADIANS_PER_DEGREE,n},Dn.clone=function(e,t){if(H(e))return H(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new Dn(e.heading,e.pitch,e.roll)},Dn.equals=function(e,t){return e===t||H(e)&&H(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll},Dn.equalsEpsilon=function(e,t,r,n){return e===t||H(e)&&H(t)&&j.equalsEpsilon(e.heading,t.heading,r,n)&&j.equalsEpsilon(e.pitch,t.pitch,r,n)&&j.equalsEpsilon(e.roll,t.roll,r,n)},Dn.prototype.clone=function(e){return Dn.clone(this,e)},Dn.prototype.equals=function(e){return Dn.equals(this,e)},Dn.prototype.equalsEpsilon=function(e,t,r){return Dn.equalsEpsilon(this,e,t,r)},Dn.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var Gn=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),Hn=Object.freeze({UTC:0,TAI:1}),jn=new Un,Wn=[31,28,31,30,31,30,31,31,30,31,30,31];function Vn(e,t){return oi.compare(e.julianDate,t.julianDate)}var Yn=new qn;function Xn(e){Yn.julianDate=e;var t=oi.leapSeconds,r=zn(t,Yn,Vn),n=t[r=(r=r<0?~r:r)>=t.length?t.length-1:r].offset;0<r&&n<oi.secondsDifference(t[r].julianDate,e)&&(n=t[--r].offset),oi.addSeconds(e,n,e)}function kn(e,t){Yn.julianDate=e;var r=oi.leapSeconds,n=zn(r,Yn,Vn);if(0===(n=n<0?~n:n))return oi.addSeconds(e,-r[0].offset,t);if(n>=r.length)return oi.addSeconds(e,-r[n-1].offset,t);var i=oi.secondsDifference(r[n].julianDate,e);return 0===i?oi.addSeconds(e,-r[n].offset,t):i<=1?void 0:oi.addSeconds(e,-r[--n].offset,t)}function Zn(e,t,r){var n=t/Gn.SECONDS_PER_DAY|0;return e+=n,(t-=Gn.SECONDS_PER_DAY*n)<0&&(e--,t+=Gn.SECONDS_PER_DAY),r.dayNumber=e,r.secondsOfDay=t,r}function Kn(e,t,r,n,i,o,a){var s=(t-14)/12|0,e=e+4800+s,r=(1461*e/4|0)+(367*(t-2-12*s)/12|0)-(3*((e+100)/100|0)/4|0)+r-32075;(n-=12)<0&&(n+=24);a=o+(n*Gn.SECONDS_PER_HOUR+i*Gn.SECONDS_PER_MINUTE+a*Gn.SECONDS_PER_MILLISECOND);return 43200<=a&&--r,[r,a]}var Jn=/^(\d{4})$/,Qn=/^(\d{4})-(\d{2})$/,$n=/^(\d{4})-?(\d{3})$/,ei=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,ti=/^(\d{4})-?(\d{2})-?(\d{2})$/,tn=/([Z+\-])?(\d{2})?:?(\d{2})?$/,ri=/^(\d{2})(\.\d+)?/.source+tn.source,ni=/^(\d{2}):?(\d{2})(\.\d+)?/.source+tn.source,ii=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+tn.source;function oi(e,t,r){this.dayNumber=void 0,this.secondsOfDay=void 0,e=b(e,0),t=b(t,0),r=b(r,Hn.UTC);var n=0|e;Zn(n,t+=(e-n)*Gn.SECONDS_PER_DAY,this),r===Hn.UTC&&Xn(this)}oi.fromGregorianDate=function(e,t){e=Kn(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return H(t)?(Zn(e[0],e[1],t),Xn(t),t):new oi(e[0],e[1],Hn.UTC)},oi.fromDate=function(e,t){e=Kn(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return H(t)?(Zn(e[0],e[1],t),Xn(t),t):new oi(e[0],e[1],Hn.UTC)},oi.fromIso8601=function(e,t){var r,n,i,o,a,s=(e=e.replace(",",".")).split("T"),u=1,c=1,l=0,h=0,f=0,m=0,p=s[0],e=s[1];if(null!==(s=p.match(ti))?(i=+s[1],u=+s[2],c=+s[3]):null!==(s=p.match(Qn))?(i=+s[1],u=+s[2]):null!==(s=p.match(Jn))?i=+s[1]:(null!==(s=p.match($n))?(i=+s[1],o=+s[2],n=Bn(i)):null!==(s=p.match(ei))&&(i=+s[1],o=7*+s[2]+(+s[3]||0)-new Date(Date.UTC(i,0,4)).getUTCDay()-3),(r=new Date(Date.UTC(i,0,1))).setUTCDate(o),u=r.getUTCMonth()+1,c=r.getUTCDate()),n=Bn(i),H(e)){null!==(s=e.match(ii))?(l=+s[1],h=+s[2],f=+s[3],m=1e3*+(s[4]||0),a=5):null!==(s=e.match(ni))?(l=+s[1],h=+s[2],f=60*+(s[3]||0),a=4):null!==(s=e.match(ri))&&(l=+s[1],h=60*+(s[2]||0),a=3);var d=s[a],y=+s[a+1],E=+(s[a+2]||0);switch(d){case"+":l-=y,h-=E;break;case"-":l+=y,h+=E;break;case"Z":break;default:h+=new Date(Date.UTC(i,u-1,c,l,h)).getTimezoneOffset()}}d=60===f;for(d&&f--;60<=h;)h-=60,l++;for(;24<=l;)l-=24,c++;for(r=n&&2===u?29:Wn[u-1];r<c;)c-=r,12<++u&&(u-=12,i++),r=n&&2===u?29:Wn[u-1];for(;h<0;)h+=60,l--;for(;l<0;)l+=24,c--;for(;c<1;)--u<1&&(u+=12,i--),c+=r=n&&2===u?29:Wn[u-1];m=Kn(i,u,c,l,h,f,m);return H(t)?(Zn(m[0],m[1],t),Xn(t)):t=new oi(m[0],m[1],Hn.UTC),d&&oi.addSeconds(t,1,t),t},oi.now=function(e){return oi.fromDate(new Date,e)};var ai=new oi(0,0,Hn.TAI);function si(e,t){if(null===e||"object"!=typeof e)return e;t=b(t,!1);var r,n,i=new e.constructor;for(r in e)e.hasOwnProperty(r)&&(n=e[r],t&&(n=si(n,t)),i[r]=n);return i}function ui(e,t,r){r=b(r,!1);var n,i,o,a={},s=H(e),u=H(t);if(s)for(n in e)e.hasOwnProperty(n)&&(i=e[n],u&&r&&"object"==typeof i&&t.hasOwnProperty(n)?(o=t[n],a[n]="object"==typeof o?ui(i,o,r):i):a[n]=i);if(u)for(n in t)t.hasOwnProperty(n)&&!a.hasOwnProperty(n)&&(o=t[n],a[n]=o);return a}function ci(e){e instanceof ci?(this.scheme=e.scheme,this.authority=e.authority,this.path=e.path,this.query=e.query,this.fragment=e.fragment):e&&(0<e.indexOf("/sde?/")&&(e=e.replace("/sde?/","/sde/")),e=li.exec(e),this.scheme=e[1],this.authority=e[2],this.path=e[3],this.query=e[4],this.fragment=e[5],-1<this.path.indexOf("/sde/")&&(this.path=this.path.replace("/sde/","/sde?/")))}oi.toGregorianDate=function(e,t){var r=!1,n=kn(e,ai);H(n)||(oi.addSeconds(e,-1,ai),n=kn(ai,ai),r=!0);var i=n.dayNumber,o=n.secondsOfDay;43200<=o&&(i+=1);var a=i+68569|0,s=4*a/146097|0,u=4e3*(1+(a=a-((146097*s+3)/4|0)|0))/1461001|0,e=80*(a=a-(1461*u/4|0)+31|0)/2447|0,n=a-(2447*e/80|0)|0,i=2+e-12*(a=e/11|0)|0,e=100*(s-49)+u+a|0,s=o/Gn.SECONDS_PER_HOUR|0,u=o-s*Gn.SECONDS_PER_HOUR,a=u/Gn.SECONDS_PER_MINUTE|0,o=0|(u-=a*Gn.SECONDS_PER_MINUTE),u=(u-o)/Gn.SECONDS_PER_MILLISECOND;return 23<(s+=12)&&(s-=24),r&&(o+=1),H(t)?(t.year=e,t.month=i,t.day=n,t.hour=s,t.minute=a,t.second=o,t.millisecond=u,t.isLeapSecond=r,t):new Un(e,i,n,s,a,o,u,r)},oi.toDate=function(e){var t=oi.toGregorianDate(e,jn),e=t.second;return t.isLeapSecond&&--e,new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,e,t.millisecond))},oi.toIso8601=function(e,t){var r=oi.toGregorianDate(e,jn),n=r.year,i=r.month,o=r.day,a=r.hour,s=r.minute,e=r.second,r=r.millisecond;return 1e4===n&&1===i&&1===o&&0===a&&0===s&&0===e&&0===r&&(n=9999,i=12,o=31,a=24),H(t)||0===r?H(t)&&0!==t?Fn("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",n,i,o,a,s,e,(.01*r).toFixed(t).replace(".","").slice(0,t)):Fn("%04d-%02d-%02dT%02d:%02d:%02dZ",n,i,o,a,s,e):Fn("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",n,i,o,a,s,e,(.01*r).toString().replace(".",""))},oi.clone=function(e,t){if(H(e))return H(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new oi(e.dayNumber,e.secondsOfDay,Hn.TAI)},oi.compare=function(e,t){var r=e.dayNumber-t.dayNumber;return 0!=r?r:e.secondsOfDay-t.secondsOfDay},oi.equals=function(e,t){return e===t||H(e)&&H(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay},oi.equalsEpsilon=function(e,t,r){return r=b(r,0),e===t||H(e)&&H(t)&&Math.abs(oi.secondsDifference(e,t))<=r},oi.totalDays=function(e){return e.dayNumber+e.secondsOfDay/Gn.SECONDS_PER_DAY},oi.secondsDifference=function(e,t){return(e.dayNumber-t.dayNumber)*Gn.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)},oi.daysDifference=function(e,t){return e.dayNumber-t.dayNumber+(e.secondsOfDay-t.secondsOfDay)/Gn.SECONDS_PER_DAY},oi.computeTaiMinusUtc=function(e){Yn.julianDate=e;var t=oi.leapSeconds,e=zn(t,Yn,Vn);return e<0&&(e=~e,--e<0&&(e=0)),t[e].offset},oi.addSeconds=function(e,t,r){return Zn(e.dayNumber,e.secondsOfDay+t,r)},oi.addMinutes=function(e,t,r){t=e.secondsOfDay+t*Gn.SECONDS_PER_MINUTE;return Zn(e.dayNumber,t,r)},oi.addHours=function(e,t,r){t=e.secondsOfDay+t*Gn.SECONDS_PER_HOUR;return Zn(e.dayNumber,t,r)},oi.addDays=function(e,t,r){return Zn(e.dayNumber+t,e.secondsOfDay,r)},oi.lessThan=function(e,t){return oi.compare(e,t)<0},oi.lessThanOrEquals=function(e,t){return oi.compare(e,t)<=0},oi.greaterThan=function(e,t){return 0<oi.compare(e,t)},oi.greaterThanOrEquals=function(e,t){return 0<=oi.compare(e,t)},oi.prototype.clone=function(e){return oi.clone(this,e)},oi.prototype.equals=function(e){return oi.equals(this,e)},oi.prototype.equalsEpsilon=function(e,t){return oi.equalsEpsilon(this,e,t)},oi.prototype.toString=function(){return oi.toIso8601(this)},oi.leapSeconds=[new qn(new oi(2441317,43210,Hn.TAI),10),new qn(new oi(2441499,43211,Hn.TAI),11),new qn(new oi(2441683,43212,Hn.TAI),12),new qn(new oi(2442048,43213,Hn.TAI),13),new qn(new oi(2442413,43214,Hn.TAI),14),new qn(new oi(2442778,43215,Hn.TAI),15),new qn(new oi(2443144,43216,Hn.TAI),16),new qn(new oi(2443509,43217,Hn.TAI),17),new qn(new oi(2443874,43218,Hn.TAI),18),new qn(new oi(2444239,43219,Hn.TAI),19),new qn(new oi(2444786,43220,Hn.TAI),20),new qn(new oi(2445151,43221,Hn.TAI),21),new qn(new oi(2445516,43222,Hn.TAI),22),new qn(new oi(2446247,43223,Hn.TAI),23),new qn(new oi(2447161,43224,Hn.TAI),24),new qn(new oi(2447892,43225,Hn.TAI),25),new qn(new oi(2448257,43226,Hn.TAI),26),new qn(new oi(2448804,43227,Hn.TAI),27),new qn(new oi(2449169,43228,Hn.TAI),28),new qn(new oi(2449534,43229,Hn.TAI),29),new qn(new oi(2450083,43230,Hn.TAI),30),new qn(new oi(2450630,43231,Hn.TAI),31),new qn(new oi(2451179,43232,Hn.TAI),32),new qn(new oi(2453736,43233,Hn.TAI),33),new qn(new oi(2454832,43234,Hn.TAI),34),new qn(new oi(2456109,43235,Hn.TAI),35),new qn(new oi(2457204,43236,Hn.TAI),36),new qn(new oi(2457754,43237,Hn.TAI),37)],ci.prototype.scheme=null,ci.prototype.authority=null,ci.prototype.path="",ci.prototype.query=null,ci.prototype.fragment=null;var li=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$");ci.prototype.getScheme=function(){return this.scheme},ci.prototype.getAuthority=function(){return this.authority},ci.prototype.getPath=function(){return this.path},ci.prototype.getQuery=function(){return this.query},ci.prototype.getFragment=function(){return this.fragment},ci.prototype.isAbsolute=function(){return!!this.scheme&&!this.fragment},ci.prototype.isSameDocumentAs=function(e){return e.scheme==this.scheme&&e.authority==this.authority&&e.path==this.path&&e.query==this.query},ci.prototype.equals=function(e){return this.isSameDocumentAs(e)&&e.fragment==this.fragment},ci.prototype.normalize=function(){this.removeDotSegments(),this.scheme&&(this.scheme=this.scheme.toLowerCase()),this.authority&&(this.authority=this.authority.replace(mi,di).replace(hi,pi)),this.path&&(this.path=this.path.replace(hi,pi)),this.query&&(this.query=this.query.replace(hi,pi)),this.fragment&&(this.fragment=this.fragment.replace(hi,pi))};var hi=/%[0-9a-z]{2}/gi,fi=/[a-zA-Z0-9\-\._~]/,mi=/(.*@)?([^@:]*)(:.*)?/;function pi(e){var t=unescape(e);return fi.test(t)?t:e.toUpperCase()}function di(e,t,r,n){return(t||"")+r.toLowerCase()+(n||"")}function yi(e,t){var r;return"undefined"!=typeof document&&(r=document),yi._implementation(e,t,r)}ci.prototype.resolve=function(e){var t=new ci;return this.scheme?(t.scheme=this.scheme,t.authority=this.authority,t.path=this.path,t.query=this.query):(t.scheme=e.scheme,this.authority?(t.authority=this.authority,t.path=this.path,t.query=this.query):(t.authority=e.authority,""==this.path?(t.path=e.path,t.query=this.query||e.query):("/"==this.path.charAt(0)?t.path=this.path:e.authority&&""==e.path?t.path="/"+this.path:t.path=e.path.substring(0,e.path.lastIndexOf("/")+1)+this.path,t.removeDotSegments(),t.query=this.query))),t.fragment=this.fragment,t},ci.prototype.removeDotSegments=function(){var e,t=this.path.split("/"),r=[],n=""==t[0];for(n&&t.shift(),""==t[0]&&t.shift();t.length;)".."==(e=t.shift())?r.pop():"."!=e&&r.push(e);"."!=e&&".."!=e||r.push(""),n&&r.unshift(""),this.path=r.join("/")},ci.prototype.toString=function(){var e="";return this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+this.authority),e+=this.path,this.query&&(e+="?"+this.query),this.fragment&&(e+="#"+this.fragment),e},yi._implementation=function(e,t,r){if(!H(t)){if(void 0===r)return e;t=b(r.baseURI,r.location.href)}t=new ci(t);return new ci(e).resolve(t).toString()};var Ei,_i=/^blob:/i;function gi(e){return _i.test(e)}var vi=/^data:/i;function Ti(e){return vi.test(e)}var Ai,Ri,Si={},Oi={};function xi(e,t,r){return r<0&&(r+=1),1<r&&--r,6*r<1?e+6*(t-e)*r:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function Ii(e,t,r,n){this.red=b(e,1),this.green=b(t,1),this.blue=b(r,1),this.alpha=b(n,1)}Si.add=function(e,t){t=e.toLowerCase()+":"+t;H(Oi[t])||(Oi[t]=!0)},Si.remove=function(e,t){t=e.toLowerCase()+":"+t;H(Oi[t])&&delete Oi[t]},Si.contains=function(e){e=function(e){var t=new ci(e);if(t.normalize(),H(e=t.getAuthority())){if(-1===(e=-1!==e.indexOf("@")?e.split("@")[1]:e).indexOf(":")){t=t.getScheme();if("http"===(t=!H(t)?(t=window.location.protocol).substring(0,t.length-1):t))e+=":80";else{if("https"!==t)return;e+=":443"}}return e}}(e);return!(!H(e)||!H(Oi[e]))},Si.clear=function(){Oi={}},Ii.fromCartesian4=function(e,t){return H(t)?(t.red=e.x,t.green=e.y,t.blue=e.z,t.alpha=e.w,t):new Ii(e.x,e.y,e.z,e.w)},Ii.fromBytes=function(e,t,r,n,i){return e=Ii.byteToFloat(b(e,255)),t=Ii.byteToFloat(b(t,255)),r=Ii.byteToFloat(b(r,255)),n=Ii.byteToFloat(b(n,255)),H(i)?(i.red=e,i.green=t,i.blue=r,i.alpha=n,i):new Ii(e,t,r,n)},Ii.fromAlpha=function(e,t,r){return H(r)?(r.red=e.red,r.green=e.green,r.blue=e.blue,r.alpha=t,r):new Ii(e.red,e.green,e.blue,t)},rn.supportsTypedArrays()&&(tn=new ArrayBuffer(4),Ai=new Uint32Array(tn),Ri=new Uint8Array(tn)),Ii.fromRgba=function(e,t){return Ai[0]=e,Ii.fromBytes(Ri[0],Ri[1],Ri[2],Ri[3],t)},Ii.fromArgb=function(e,t){return Ai[0]=e,Ii.fromBytes(Ri[2],Ri[1],Ri[0],Ri[3],t)},Ii.fromMapserver=function(e,t){return Ai[0]=e,Ii.fromBytes(Ri[3],Ri[2],Ri[1],Ri[0],t)},Ii.fromHsl=function(e,t,r,n,i){e=b(e,0)%1,t=b(t,0),r=b(r,0),n=b(n,1);var o=r,a=r,s=r;return 0!==t&&(o=xi(t=2*r-(r=r<.5?r*(1+t):r+t-r*t),r,e+1/3),a=xi(t,r,e),s=xi(t,r,e-1/3)),H(i)?(i.red=o,i.green=a,i.blue=s,i.alpha=n,i):new Ii(o,a,s,n)},Ii.fromRandom=function(e,t){var r=(e=b(e,b.EMPTY_OBJECT)).red;H(r)||(n=b(e.minimumRed,0),i=b(e.maximumRed,1),r=n+j.nextRandomNumber()*(i-n));var n,i=e.green;H(i)||(o=b(e.minimumGreen,0),n=b(e.maximumGreen,1),i=o+j.nextRandomNumber()*(n-o));var o=e.blue;H(o)||(a=b(e.minimumBlue,0),s=b(e.maximumBlue,1),o=a+j.nextRandomNumber()*(s-a));var a,s=e.alpha;return H(s)||(a=b(e.minimumAlpha,0),e=b(e.maximumAlpha,1),s=a+j.nextRandomNumber()*(e-a)),H(t)?(t.red=r,t.green=i,t.blue=o,t.alpha=s,t):new Ii(r,i,o,s)};var wi=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,Ni=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,bi=/^rgba?\(\s*([0-9.]+%?)\s*,\s*([0-9.]+%?)\s*,\s*([0-9.]+%?)(?:\s*,\s*([0-9.]+))?\s*\)$/i,Mi=/^hsla?\(\s*([0-9.]+)\s*,\s*([0-9.]+%)\s*,\s*([0-9.]+%)(?:\s*,\s*([0-9.]+))?\s*\)$/i;Ii.fromCssColorString=function(e,t){H(t)||(t=new Ii);var r=Ii[(e=e.replace(/\s/g,"")).toUpperCase()];if(H(r))return Ii.clone(r,t),t;r=wi.exec(e);return null!==r?(t.red=parseInt(r[1],16)/15,t.green=parseInt(r[2],16)/15,t.blue=parseInt(r[3],16)/15,t.alpha=parseInt(b(r[4],"f"),16)/15,t):null!==(r=Ni.exec(e))?(t.red=parseInt(r[1],16)/255,t.green=parseInt(r[2],16)/255,t.blue=parseInt(r[3],16)/255,t.alpha=parseInt(b(r[4],"ff"),16)/255,t):null!==(r=bi.exec(e))?(t.red=parseFloat(r[1])/("%"===r[1].substr(-1)?100:255),t.green=parseFloat(r[2])/("%"===r[2].substr(-1)?100:255),t.blue=parseFloat(r[3])/("%"===r[3].substr(-1)?100:255),t.alpha=parseFloat(b(r[4],"1.0")),t):null!==(r=Mi.exec(e))?Ii.fromHsl(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,parseFloat(b(r[4],"1.0")),t):t=void 0},Ii.packedLength=4,Ii.pack=function(e,t,r){return r=b(r,0),t[r++]=e.red,t[r++]=e.green,t[r++]=e.blue,t[r]=e.alpha,t},Ii.unpack=function(e,t,r){return t=b(t,0),(r=!H(r)?new Ii:r).red=e[t++],r.green=e[t++],r.blue=e[t++],r.alpha=e[t],r},Ii.byteToFloat=function(e){return e/255},Ii.floatToByte=function(e){return 1===e?255:256*e|0},Ii.clone=function(e,t){if(H(e))return H(t)?(t.red=e.red,t.green=e.green,t.blue=e.blue,t.alpha=e.alpha,t):new Ii(e.red,e.green,e.blue,e.alpha)},Ii.equals=function(e,t){return e===t||H(e)&&H(t)&&e.red===t.red&&e.green===t.green&&e.blue===t.blue&&e.alpha===t.alpha},Ii.equalsArray=function(e,t,r){return e.red===t[r]&&e.green===t[r+1]&&e.blue===t[r+2]&&e.alpha===t[r+3]},Ii.prototype.clone=function(e){return Ii.clone(this,e)},Ii.prototype.equals=function(e){return Ii.equals(this,e)},Ii.prototype.equalsEpsilon=function(e,t){return this===e||H(e)&&Math.abs(this.red-e.red)<=t&&Math.abs(this.green-e.green)<=t&&Math.abs(this.blue-e.blue)<=t&&Math.abs(this.alpha-e.alpha)<=t},Ii.prototype.toString=function(){return"("+this.red+", "+this.green+", "+this.blue+", "+this.alpha+")"},Ii.prototype.toUint16=function(){var e=[];return this.toBytes(e),"0x"+e[3].toString(16)+(e[0]<16?"0":"")+e[0].toString(16)+(e[1]<16?"0":"")+e[1].toString(16)+(e[2]<16?"0":"")+e[2].toString(16)},Ii.prototype.toUint16MapServerString=function(){var e=[];return this.toBytes(e),'"#'+(e[0]<16?"0":"")+e[0].toString(16)+(e[1]<16?"0":"")+e[1].toString(16)+(e[2]<16?"0":"")+e[2].toString(16)+(e[3]<16?"0":"")+e[3].toString(16)+'"'},Ii.prototype.toCssColorString=function(){var e=Ii.floatToByte(this.red),t=Ii.floatToByte(this.green),r=Ii.floatToByte(this.blue);return 1===this.alpha?"rgb("+e+","+t+","+r+")":"rgba("+e+","+t+","+r+","+this.alpha+")"},Ii.prototype.toCssHexString=function(){var e=Ii.floatToByte(this.red).toString(16);e.length<2&&(e="0"+e);var t=Ii.floatToByte(this.green).toString(16);t.length<2&&(t="0"+t);var r=Ii.floatToByte(this.blue).toString(16);if(r.length<2&&(r="0"+r),this.alpha<1){var n=Ii.floatToByte(this.alpha).toString(16);return"#"+e+t+r+(n=n.length<2?"0"+n:n)}return"#"+e+t+r},Ii.prototype.toBytes=function(e){var t=Ii.floatToByte(this.red),r=Ii.floatToByte(this.green),n=Ii.floatToByte(this.blue),i=Ii.floatToByte(this.alpha);return H(e)?(e[0]=t,e[1]=r,e[2]=n,e[3]=i,e):[t,r,n,i]},Ii.prototype.toRgba=function(){return Ri[0]=Ii.floatToByte(this.red),Ri[1]=Ii.floatToByte(this.green),Ri[2]=Ii.floatToByte(this.blue),Ri[3]=Ii.floatToByte(this.alpha),Ai[0]},Ii.prototype.toArgb=function(){return Ri[3]=Ii.floatToByte(this.alpha),Ri[2]=Ii.floatToByte(this.red),Ri[1]=Ii.floatToByte(this.green),Ri[0]=Ii.floatToByte(this.blue),Ai[0]},Ii.prototype.brighten=function(e,t){return t.red=1-(1-this.red)*(e=1-e),t.green=1-(1-this.green)*e,t.blue=1-(1-this.blue)*e,t.alpha=this.alpha,t},Ii.prototype.darken=function(e,t){return t.red=this.red*(e=1-e),t.green=this.green*e,t.blue=this.blue*e,t.alpha=this.alpha,t},Ii.prototype.withAlpha=function(e,t){return Ii.fromAlpha(this,e,t)},Ii.add=function(e,t,r){return r.red=e.red+t.red,r.green=e.green+t.green,r.blue=e.blue+t.blue,r.alpha=e.alpha+t.alpha,r},Ii.subtract=function(e,t,r){return r.red=e.red-t.red,r.green=e.green-t.green,r.blue=e.blue-t.blue,r.alpha=e.alpha-t.alpha,r},Ii.multiply=function(e,t,r){return r.red=e.red*t.red,r.green=e.green*t.green,r.blue=e.blue*t.blue,r.alpha=e.alpha*t.alpha,r},Ii.divide=function(e,t,r){return r.red=e.red/t.red,r.green=e.green/t.green,r.blue=e.blue/t.blue,r.alpha=e.alpha/t.alpha,r},Ii.mod=function(e,t,r){return r.red=e.red%t.red,r.green=e.green%t.green,r.blue=e.blue%t.blue,r.alpha=e.alpha%t.alpha,r},Ii.lerp=function(e,t,r,n){return n.red=j.lerp(e.red,t.red,r),n.green=j.lerp(e.green,t.green,r),n.blue=j.lerp(e.blue,t.blue,r),n.alpha=j.lerp(e.alpha,t.alpha,r),n},Ii.multiplyByScalar=function(e,t,r){return r.red=e.red*t,r.green=e.green*t,r.blue=e.blue*t,r.alpha=e.alpha*t,r},Ii.divideByScalar=function(e,t,r){return r.red=e.red/t,r.green=e.green/t,r.blue=e.blue/t,r.alpha=e.alpha/t,r},Ii.ALICEBLUE=Object.freeze(Ii.fromCssColorString("#F0F8FF")),Ii.ANTIQUEWHITE=Object.freeze(Ii.fromCssColorString("#FAEBD7")),Ii.AQUA=Object.freeze(Ii.fromCssColorString("#00FFFF")),Ii.AQUAMARINE=Object.freeze(Ii.fromCssColorString("#7FFFD4")),Ii.AZURE=Object.freeze(Ii.fromCssColorString("#F0FFFF")),Ii.BEIGE=Object.freeze(Ii.fromCssColorString("#F5F5DC")),Ii.BISQUE=Object.freeze(Ii.fromCssColorString("#FFE4C4")),Ii.BLACK=Object.freeze(Ii.fromCssColorString("#000000")),Ii.BLANCHEDALMOND=Object.freeze(Ii.fromCssColorString("#FFEBCD")),Ii.BLUE=Object.freeze(Ii.fromCssColorString("#0000FF")),Ii.BLUEVIOLET=Object.freeze(Ii.fromCssColorString("#8A2BE2")),Ii.BROWN=Object.freeze(Ii.fromCssColorString("#A52A2A")),Ii.BURLYWOOD=Object.freeze(Ii.fromCssColorString("#DEB887")),Ii.CADETBLUE=Object.freeze(Ii.fromCssColorString("#5F9EA0")),Ii.CHARTREUSE=Object.freeze(Ii.fromCssColorString("#7FFF00")),Ii.CHOCOLATE=Object.freeze(Ii.fromCssColorString("#D2691E")),Ii.CORAL=Object.freeze(Ii.fromCssColorString("#FF7F50")),Ii.CORNFLOWERBLUE=Object.freeze(Ii.fromCssColorString("#6495ED")),Ii.CORNSILK=Object.freeze(Ii.fromCssColorString("#FFF8DC")),Ii.CRIMSON=Object.freeze(Ii.fromCssColorString("#DC143C")),Ii.CYAN=Object.freeze(Ii.fromCssColorString("#00FFFF")),Ii.DARKBLUE=Object.freeze(Ii.fromCssColorString("#00008B")),Ii.DARKCYAN=Object.freeze(Ii.fromCssColorString("#008B8B")),Ii.DARKGOLDENROD=Object.freeze(Ii.fromCssColorString("#B8860B")),Ii.DARKGRAY=Object.freeze(Ii.fromCssColorString("#A9A9A9")),Ii.DARKGREEN=Object.freeze(Ii.fromCssColorString("#006400")),Ii.DARKGREY=Ii.DARKGRAY,Ii.DARKKHAKI=Object.freeze(Ii.fromCssColorString("#BDB76B")),Ii.DARKMAGENTA=Object.freeze(Ii.fromCssColorString("#8B008B")),Ii.DARKOLIVEGREEN=Object.freeze(Ii.fromCssColorString("#556B2F")),Ii.DARKORANGE=Object.freeze(Ii.fromCssColorString("#FF8C00")),Ii.DARKORCHID=Object.freeze(Ii.fromCssColorString("#9932CC")),Ii.DARKRED=Object.freeze(Ii.fromCssColorString("#8B0000")),Ii.DARKSALMON=Object.freeze(Ii.fromCssColorString("#E9967A")),Ii.DARKSEAGREEN=Object.freeze(Ii.fromCssColorString("#8FBC8F")),Ii.DARKSLATEBLUE=Object.freeze(Ii.fromCssColorString("#483D8B")),Ii.DARKSLATEGRAY=Object.freeze(Ii.fromCssColorString("#2F4F4F")),Ii.DARKSLATEGREY=Ii.DARKSLATEGRAY,Ii.DARKTURQUOISE=Object.freeze(Ii.fromCssColorString("#00CED1")),Ii.DARKVIOLET=Object.freeze(Ii.fromCssColorString("#9400D3")),Ii.DEEPPINK=Object.freeze(Ii.fromCssColorString("#FF1493")),Ii.DEEPSKYBLUE=Object.freeze(Ii.fromCssColorString("#00BFFF")),Ii.DIMGRAY=Object.freeze(Ii.fromCssColorString("#696969")),Ii.DIMGREY=Ii.DIMGRAY,Ii.DODGERBLUE=Object.freeze(Ii.fromCssColorString("#1E90FF")),Ii.FIREBRICK=Object.freeze(Ii.fromCssColorString("#B22222")),Ii.FLORALWHITE=Object.freeze(Ii.fromCssColorString("#FFFAF0")),Ii.FORESTGREEN=Object.freeze(Ii.fromCssColorString("#228B22")),Ii.FUCHSIA=Object.freeze(Ii.fromCssColorString("#FF00FF")),Ii.GAINSBORO=Object.freeze(Ii.fromCssColorString("#DCDCDC")),Ii.GHOSTWHITE=Object.freeze(Ii.fromCssColorString("#F8F8FF")),Ii.GOLD=Object.freeze(Ii.fromCssColorString("#FFD700")),Ii.GOLDENROD=Object.freeze(Ii.fromCssColorString("#DAA520")),Ii.GRAY=Object.freeze(Ii.fromCssColorString("#808080")),Ii.GREEN=Object.freeze(Ii.fromCssColorString("#008000")),Ii.GREENYELLOW=Object.freeze(Ii.fromCssColorString("#ADFF2F")),Ii.GREY=Ii.GRAY,Ii.HONEYDEW=Object.freeze(Ii.fromCssColorString("#F0FFF0")),Ii.HOTPINK=Object.freeze(Ii.fromCssColorString("#FF69B4")),Ii.INDIANRED=Object.freeze(Ii.fromCssColorString("#CD5C5C")),Ii.INDIGO=Object.freeze(Ii.fromCssColorString("#4B0082")),Ii.IVORY=Object.freeze(Ii.fromCssColorString("#FFFFF0")),Ii.KHAKI=Object.freeze(Ii.fromCssColorString("#F0E68C")),Ii.LAVENDER=Object.freeze(Ii.fromCssColorString("#E6E6FA")),Ii.LAVENDAR_BLUSH=Object.freeze(Ii.fromCssColorString("#FFF0F5")),Ii.LAWNGREEN=Object.freeze(Ii.fromCssColorString("#7CFC00")),Ii.LEMONCHIFFON=Object.freeze(Ii.fromCssColorString("#FFFACD")),Ii.LIGHTBLUE=Object.freeze(Ii.fromCssColorString("#ADD8E6")),Ii.LIGHTCORAL=Object.freeze(Ii.fromCssColorString("#F08080")),Ii.LIGHTCYAN=Object.freeze(Ii.fromCssColorString("#E0FFFF")),Ii.LIGHTGOLDENRODYELLOW=Object.freeze(Ii.fromCssColorString("#FAFAD2")),Ii.LIGHTGRAY=Object.freeze(Ii.fromCssColorString("#D3D3D3")),Ii.LIGHTGREEN=Object.freeze(Ii.fromCssColorString("#90EE90")),Ii.LIGHTGREY=Ii.LIGHTGRAY,Ii.LIGHTPINK=Object.freeze(Ii.fromCssColorString("#FFB6C1")),Ii.LIGHTSEAGREEN=Object.freeze(Ii.fromCssColorString("#20B2AA")),Ii.LIGHTSKYBLUE=Object.freeze(Ii.fromCssColorString("#87CEFA")),Ii.LIGHTSLATEGRAY=Object.freeze(Ii.fromCssColorString("#778899")),Ii.LIGHTSLATEGREY=Ii.LIGHTSLATEGRAY,Ii.LIGHTSTEELBLUE=Object.freeze(Ii.fromCssColorString("#B0C4DE")),Ii.LIGHTYELLOW=Object.freeze(Ii.fromCssColorString("#FFFFE0")),Ii.LIME=Object.freeze(Ii.fromCssColorString("#00FF00")),Ii.LIMEGREEN=Object.freeze(Ii.fromCssColorString("#32CD32")),Ii.LINEN=Object.freeze(Ii.fromCssColorString("#FAF0E6")),Ii.MAGENTA=Object.freeze(Ii.fromCssColorString("#FF00FF")),Ii.MAROON=Object.freeze(Ii.fromCssColorString("#800000")),Ii.MEDIUMAQUAMARINE=Object.freeze(Ii.fromCssColorString("#66CDAA")),Ii.MEDIUMBLUE=Object.freeze(Ii.fromCssColorString("#0000CD")),Ii.MEDIUMORCHID=Object.freeze(Ii.fromCssColorString("#BA55D3")),Ii.MEDIUMPURPLE=Object.freeze(Ii.fromCssColorString("#9370DB")),Ii.MEDIUMSEAGREEN=Object.freeze(Ii.fromCssColorString("#3CB371")),Ii.MEDIUMSLATEBLUE=Object.freeze(Ii.fromCssColorString("#7B68EE")),Ii.MEDIUMSPRINGGREEN=Object.freeze(Ii.fromCssColorString("#00FA9A")),Ii.MEDIUMTURQUOISE=Object.freeze(Ii.fromCssColorString("#48D1CC")),Ii.MEDIUMVIOLETRED=Object.freeze(Ii.fromCssColorString("#C71585")),Ii.MIDNIGHTBLUE=Object.freeze(Ii.fromCssColorString("#191970")),Ii.MINTCREAM=Object.freeze(Ii.fromCssColorString("#F5FFFA")),Ii.MISTYROSE=Object.freeze(Ii.fromCssColorString("#FFE4E1")),Ii.MOCCASIN=Object.freeze(Ii.fromCssColorString("#FFE4B5")),Ii.NAVAJOWHITE=Object.freeze(Ii.fromCssColorString("#FFDEAD")),Ii.NAVY=Object.freeze(Ii.fromCssColorString("#000080")),Ii.OLDLACE=Object.freeze(Ii.fromCssColorString("#FDF5E6")),Ii.OLIVE=Object.freeze(Ii.fromCssColorString("#808000")),Ii.OLIVEDRAB=Object.freeze(Ii.fromCssColorString("#6B8E23")),Ii.ORANGE=Object.freeze(Ii.fromCssColorString("#FFA500")),Ii.ORANGERED=Object.freeze(Ii.fromCssColorString("#FF4500")),Ii.ORCHID=Object.freeze(Ii.fromCssColorString("#DA70D6")),Ii.PALEGOLDENROD=Object.freeze(Ii.fromCssColorString("#EEE8AA")),Ii.PALEGREEN=Object.freeze(Ii.fromCssColorString("#98FB98")),Ii.PALETURQUOISE=Object.freeze(Ii.fromCssColorString("#AFEEEE")),Ii.PALEVIOLETRED=Object.freeze(Ii.fromCssColorString("#DB7093")),Ii.PAPAYAWHIP=Object.freeze(Ii.fromCssColorString("#FFEFD5")),Ii.PEACHPUFF=Object.freeze(Ii.fromCssColorString("#FFDAB9")),Ii.PERU=Object.freeze(Ii.fromCssColorString("#CD853F")),Ii.PINK=Object.freeze(Ii.fromCssColorString("#FFC0CB")),Ii.PLUM=Object.freeze(Ii.fromCssColorString("#DDA0DD")),Ii.POWDERBLUE=Object.freeze(Ii.fromCssColorString("#B0E0E6")),Ii.PURPLE=Object.freeze(Ii.fromCssColorString("#800080")),Ii.RED=Object.freeze(Ii.fromCssColorString("#FF0000")),Ii.ROSYBROWN=Object.freeze(Ii.fromCssColorString("#BC8F8F")),Ii.ROYALBLUE=Object.freeze(Ii.fromCssColorString("#4169E1")),Ii.SADDLEBROWN=Object.freeze(Ii.fromCssColorString("#8B4513")),Ii.SALMON=Object.freeze(Ii.fromCssColorString("#FA8072")),Ii.SANDYBROWN=Object.freeze(Ii.fromCssColorString("#F4A460")),Ii.SEAGREEN=Object.freeze(Ii.fromCssColorString("#2E8B57")),Ii.SEASHELL=Object.freeze(Ii.fromCssColorString("#FFF5EE")),Ii.SIENNA=Object.freeze(Ii.fromCssColorString("#A0522D")),Ii.SILVER=Object.freeze(Ii.fromCssColorString("#C0C0C0")),Ii.SKYBLUE=Object.freeze(Ii.fromCssColorString("#87CEEB")),Ii.SLATEBLUE=Object.freeze(Ii.fromCssColorString("#6A5ACD")),Ii.SLATEGRAY=Object.freeze(Ii.fromCssColorString("#708090")),Ii.SLATEGREY=Ii.SLATEGRAY,Ii.SNOW=Object.freeze(Ii.fromCssColorString("#FFFAFA")),Ii.SPRINGGREEN=Object.freeze(Ii.fromCssColorString("#00FF7F")),Ii.STEELBLUE=Object.freeze(Ii.fromCssColorString("#4682B4")),Ii.TAN=Object.freeze(Ii.fromCssColorString("#D2B48C")),Ii.TEAL=Object.freeze(Ii.fromCssColorString("#008080")),Ii.THISTLE=Object.freeze(Ii.fromCssColorString("#D8BFD8")),Ii.TOMATO=Object.freeze(Ii.fromCssColorString("#FF6347")),Ii.TURQUOISE=Object.freeze(Ii.fromCssColorString("#40E0D0")),Ii.VIOLET=Object.freeze(Ii.fromCssColorString("#EE82EE")),Ii.WHEAT=Object.freeze(Ii.fromCssColorString("#F5DEB3")),Ii.WHITE=Object.freeze(Ii.fromCssColorString("#FFFFFF")),Ii.WHITESMOKE=Object.freeze(Ii.fromCssColorString("#F5F5F5")),Ii.YELLOW=Object.freeze(Ii.fromCssColorString("#FFFF00")),Ii.YELLOWGREEN=Object.freeze(Ii.fromCssColorString("#9ACD32")),Ii.TRANSPARENT=Object.freeze(new Ii(0,0,0,0));var Ci={_minimumDisableDepthTestDistance:0,_farToNearRatio:1e3,_logarithmicDepthFarToNearRatio:1e9,_nearToFarDistance2D:175e4,_observerEventWaitTime:500,_terrainExaggeration:1,_max_fps:65,_min_fps:60,_max_frame_time:1e3/60,_create_terrain_num:2,_reclaim_memory_size:1024<<20,_resource_life_time:1e3,_max_range:100,_min_range:8,_drawSpread:.58,_drawDistance:8,_min_observer_height:1,_max_observer_height:12e6,_underground_mode:!1,_camera_height:0,_auxplane_elevation:0,_auxplane_elevation_relative:0,_auxplane_elevation_max:0,_draw_dem_skirt:!0,_auxplane_grid_size:.1,_first_person_height:1.6,_highlight_continue_time:10,_highlight_interval_time:.5,_highlight_color:3372209817,_skyline_valid_distance:1200,_enable_globe_cursor:!0,_default_highlight:!0,_port_list:[],_modelLodRange:{level21:120,level20:450,level19:600},_baseUrlString:"",_server_ip:"",_enable_pack_bim:!1,_waterAnimationSpeed:.004,_waterAmplitude:2};Object.defineProperties(Ci,{minimumDisableDepthTestDistance:{get:function(){return Ci._minimumDisableDepthTestDistance},set:function(e){Ci._minimumDisableDepthTestDistance=e}},farToNearRatio:{get:function(){return Ci._farToNearRatio},set:function(e){Ci._farToNearRatio=e}},logarithmicDepthFarToNearRatio:{get:function(){return Ci._logarithmicDepthFarToNearRatio},set:function(e){Ci._logarithmicDepthFarToNearRatio=e}},nearToFarDistance2D:{get:function(){return Ci._nearToFarDistance2D},set:function(e){Ci._nearToFarDistance2D=e}},observerEventWaitTime:{get:function(){return Ci._observerEventWaitTime},set:function(e){Ci._observerEventWaitTime=e}},terrainExaggeration:{get:function(){return Ci._terrainExaggeration},set:function(e){Ci._terrainExaggeration=e}},max_fps:{get:function(){return Ci._max_fps},set:function(e){Ci._max_fps=e}},min_fps:{get:function(){return Ci._min_fps},set:function(e){e!=Ci._min_fps&&(Ci._min_fps=e,Ci._max_frame_time=1e3/e)}},create_terrain_num:{get:function(){return Ci._create_terrain_num},set:function(e){Ci._create_terrain_num=e}},reclaim_memory_size:{get:function(){return Ci._reclaim_memory_size},set:function(e){Ci._reclaim_memory_size=e}},resource_life_time:{get:function(){return Ci._resource_life_time},set:function(e){Ci._resource_life_time=e}},max_range:{get:function(){return Ci._max_range},set:function(e){Ci._max_range=e}},min_range:{get:function(){return Ci._min_range},set:function(e){Ci._min_range=e}},drawSpread:{get:function(){return Ci._drawSpread},set:function(e){Ci._drawSpread=e}},drawDistance:{get:function(){return Ci._drawDistance},set:function(e){Ci._drawDistance=e}},auxplaneElevationMax:{get:function(){return Ci._auxplane_elevation_max},set:function(e){Ci._auxplane_elevation_max=e}},minObserverHeight:{get:function(){return Ci._min_observer_height},set:function(e){Ci._min_observer_height=e}},maxObserverHeight:{get:function(){return Ci._max_observer_height},set:function(e){Ci._max_observer_height=e}},undergroundMode:{get:function(){return Ci._underground_mode},set:function(e){Ci._underground_mode=e}},cameraHeight:{get:function(){return Ci._camera_height},set:function(e){Ci._camera_height=e}},auxplaneElevation:{get:function(){return Ci._auxplane_elevation},set:function(e){Ci._auxplane_elevation=e}},auxplaneElevationRelative:{get:function(){return Ci._auxplane_elevation_relative},set:function(e){Ci._auxplane_elevation_relative=e}},drawDemSkirt:{get:function(){return Ci._draw_dem_skirt},set:function(e){Ci._draw_dem_skirt=e}},auxplaneGridSize:{get:function(){return Ci._auxplane_grid_size},set:function(e){Ci._auxplane_grid_size=e}},first_person_height:{get:function(){return Ci._first_person_height},set:function(e){Ci._first_person_height=e}},highlight_continue_time:{get:function(){return Ci._highlight_continue_time},set:function(e){Ci._highlight_continue_time=e}},highlight_interval_time:{get:function(){return Ci._highlight_interval_time},set:function(e){Ci._highlight_interval_time=e}},highlight_color:{get:function(){return Ci._highlight_color},set:function(e){Ci._highlight_color=e}},skyline_valid_distance:{get:function(){return Ci._skyline_valid_distance},set:function(e){Ci._skyline_valid_distance=e}},enable_globe_cursor:{get:function(){return Ci._enable_globe_cursor},set:function(e){Ci._enable_globe_cursor=e}},default_highlight:{get:function(){return Ci._default_highlight},set:function(e){Ci._default_highlight=e}},opaqueFrustumNearOffset:{get:function(){return.9999}},port_list:{get:function(){return Ci._port_list}},modelLodRange:{get:function(){return Ci._modelLodRange},set:function(e){null!=e&&(Ci._modelLodRange.level19=e.level19,Ci._modelLodRange.level20=e.level20,Ci._modelLodRange.level21=e.level21)}},baseUrlString:{get:function(){return Ci._baseUrlString},set:function(e){null!=e&&(Ci._baseUrlString=e)}},server_ip:{get:function(){return Ci._server_ip},set:function(e){null!=e&&(Ci._server_ip=e)}},enable_pack_bim:{get:function(){return Ci._enable_pack_bim},set:function(e){null!=e&&(Ci._enable_pack_bim=e)}},waterAnimationSpeed:{get:function(){return Ci._waterAnimationSpeed},set:function(e){Ci._waterAnimationSpeed=e}},waterAmplitude:{get:function(){return Ci._waterAmplitude},set:function(e){Ci._waterAmplitude=e}}});var Pi=Object.freeze({UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5}),Li=Object.freeze({TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3});function Di(e){e=b(e,b.EMPTY_OBJECT);var t=b(e.throttleByServer,!1),r=b(e.throttle,!1);this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=b(e.priority,0),this.throttle=r,this.throttleByServer=t,this.type=b(e.type,Li.OTHER),this.serverKey=e.serverKey,this.state=Pi.UNISSUED,this.deferred=void 0,this.cancelled=!1,this.geoServer=b(e.geoServer,!1)}function zi(e){this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function Fi(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function Ui(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}function Bi(e,t){return t-e}Di.prototype.cancel=function(){this.cancelled=!0},Di.prototype.clone=function(e){return H(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=this.RequestState.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new Di(this)},Object.defineProperties(zi.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){var t=this._length;if(e<t){for(var r=this._array,n=e;n<t;++n)r[n]=void 0;this._length=e,r.length=e}this._maximumLength=e}},comparator:{get:function(){return this._comparator}}}),zi.prototype.reserve=function(e){e=b(e,this._length),this._array.length=e},zi.prototype.heapify=function(e){e=b(e,0);for(var t=this._length,r=this._comparator,n=this._array,i=-1,o=!0;o;){var a=2*(e+1),s=a-1,i=s<t&&r(n[s],n[e])<0?s:e;(i=a<t&&r(n[a],n[i])<0?a:i)!==e?(Fi(n,i,e),e=i):o=!1}},zi.prototype.resort=function(){for(var e=this._length,t=Math.ceil(e/2);0<=t;--t)this.heapify(t)},zi.prototype.insert=function(e){var t,r=this._array,n=this._comparator,i=this._maximumLength,o=this._length++;for(o<r.length?r[o]=e:r.push(e);0!==o;){var a=Math.floor((o-1)/2);if(!(n(r[o],r[a])<0))break;Fi(r,o,a),o=a}return H(i)&&this._length>i&&(t=r[i],this._length=i),t},zi.prototype.pop=function(e){if(e=b(e,0),0!==this._length){var t=this._array,r=t[e];return Fi(t,e,--this._length),this.heapify(e),t[this._length]=void 0,r}},Object.defineProperties(Ui.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}}),Ui.prototype.addEventListener=function(e,t){this._listeners.push(e),this._scopes.push(t);var r=this;return function(){r.removeEventListener(e,t)}},Ui.prototype.removeEventListener=function(e,t){for(var r=this._listeners,n=this._scopes,i=-1,o=0;o<r.length;o++)if(r[o]===e&&n[o]===t){i=o;break}return-1!==i&&(this._insideRaiseEvent?(this._toRemove.push(i),r[i]=void 0,n[i]=void 0):(r.splice(i,1),n.splice(i,1)),!0)},Ui.prototype.raiseEvent=function(){this._insideRaiseEvent=!0;for(var e=this._listeners,t=this._scopes,r=e.length,n=0;n<r;n++)H(e[n])&&e[n].apply(t[n],arguments);var i=this._toRemove;if(0<(r=i.length)){for(i.sort(Bi),n=0;n<r;n++){var o=i[n];e.splice(o,1),t.splice(o,1)}i.length=0}this._insideRaiseEvent=!1};var qi={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},Gi=20,Hi=new zi({comparator:function(e,t){return e.priority-t.priority}});Hi.maximumLength=Gi,Hi.reserve(Gi);var ji=[],Wi={},Vi="undefined"!=typeof document?new ci(document.location.href):new ci,Yi=new Ui;function Xi(){}function ki(e){H(e.priorityFunction)&&(e.priority=e.priorityFunction())}function Zi(e){var t=b(Xi.requestsByServer[e],Xi.maximumRequestsPerServer);return Wi[e]<t}function Ki(e){return e.state===Pi.UNISSUED&&(e.state=Pi.ISSUED,e.deferred=mr.defer()),e.deferred.promise}function Ji(e){var t,r,n=Ki(e);return e.state=Pi.ACTIVE,ji.push(e),++qi.numberOfActiveRequests,++qi.numberOfActiveRequestsEver,++Wi[e.serverKey],e.requestFunction().then((r=e,function(e){var t;r.state!==Pi.CANCELLED&&(t=r.deferred,--qi.numberOfActiveRequests,--Wi[r.serverKey],Yi.raiseEvent(),r.state=Pi.RECEIVED,r.deferred=void 0,t.resolve(e))})).otherwise((t=e,function(e){t.state!==Pi.CANCELLED&&(++qi.numberOfFailedRequests,--qi.numberOfActiveRequests,--Wi[t.serverKey],Yi.raiseEvent(e),t.state=Pi.FAILED,t.deferred.reject(e))})),n}function Qi(e){var t,r=e.state===Pi.ACTIVE;e.state=Pi.CANCELLED,++qi.numberOfCancelledRequests,H(e.deferred)&&(t=e.deferred,e.deferred=void 0,t.reject()),r&&(--qi.numberOfActiveRequests,--Wi[e.serverKey],++qi.numberOfCancelledActiveRequests),H(e.cancelFunction)&&e.cancelFunction()}function $i(e,t,r){this.statusCode=e,this.response=t,this.responseHeaders=r,"string"==typeof this.responseHeaders&&(this.responseHeaders=function(e){var t={};if(!e)return t;for(var r=e.split("\r\n"),n=0;n<r.length;++n){var i,o=r[n],a=o.indexOf(": ");0<a&&(i=o.substring(0,a),a=o.substring(a+2),t[i]=a)}return t}(this.responseHeaders))}Xi.maximumRequests=50,Xi.maximumRequestsPerServer=6,Xi.requestsByServer={"api.cesium.com:443":18,"assets.cesium.com:443":18},Xi.throttleRequests=!0,Xi.debugShowStatistics=!1,Xi.requestCompletedEvent=Yi,Object.defineProperties(Xi,{statistics:{get:function(){return qi}},priorityHeapLength:{get:function(){return Gi},set:function(e){if(e<Gi)for(;Hi.length>e;)Qi(Hi.pop());Gi=e,Hi.maximumLength=e,Hi.reserve(e)}}}),Xi.get_active_request_count=function(){return null==ji?0:ji.length},Xi.update=function(){for(var e,t=0,r=ji.length,n=0;n<r;++n)(e=ji[n]).cancelled&&Qi(e),e.state===Pi.ACTIVE?0<t&&(ji[n-t]=e):++t;ji.length-=t;var i=Hi.internalArray,o=Hi.length;for(n=0;n<o;++n)ki(i[n]);Hi.resort();for(var a=Math.max(Xi.maximumRequests-ji.length,0),s=0;s<a&&0<Hi.length;)!(e=Hi.pop()).cancelled&&(!e.throttleByServer||Zi(e.serverKey))?(Ji(e),++s):Qi(e);Xi.debugShowStatistics&&(0===qi.numberOfActiveRequests&&0<qi.lastNumberOfActiveRequests&&(0<qi.numberOfAttemptedRequests&&(console.log("Number of attempted requests: "+qi.numberOfAttemptedRequests),qi.numberOfAttemptedRequests=0),0<qi.numberOfCancelledRequests&&(console.log("Number of cancelled requests: "+qi.numberOfCancelledRequests),qi.numberOfCancelledRequests=0),0<qi.numberOfCancelledActiveRequests&&(console.log("Number of cancelled active requests: "+qi.numberOfCancelledActiveRequests),qi.numberOfCancelledActiveRequests=0),0<qi.numberOfFailedRequests&&(console.log("Number of failed requests: "+qi.numberOfFailedRequests),qi.numberOfFailedRequests=0)),qi.lastNumberOfActiveRequests=qi.numberOfActiveRequests)},Xi.getServerKey=function(e){var t=new ci(e).resolve(Vi);t.normalize();e=t.authority;return/:/.test(e)||(e=e+":"+("https"===t.scheme?"443":"80")),H(Wi[e])||(Wi[e]=0),e},Xi.request=function(e){if(Ti(e.url)||gi(e.url))return Yi.raiseEvent(),e.state=Pi.RECEIVED,e.requestFunction();if(++qi.numberOfAttemptedRequests,H(e.serverKey)||(e.serverKey=Xi.getServerKey(e.url)),!Xi.throttleRequests||!e.throttleByServer||Zi(e.serverKey)){if(!Xi.throttleRequests||!e.throttle)return Ji(e);if(!(ji.length>=Xi.maximumRequests)){ki(e);var t=Hi.insert(e);if(H(t)){if(t===e)return;Qi(t)}return Ki(e)}}},Xi.clearForSpecs=function(){for(;0<Hi.length;)Qi(Hi.pop());for(var e=ji.length,t=0;t<e;++t)Qi(ji[t]);ji.length=0,Wi={},qi.numberOfAttemptedRequests=0,qi.numberOfActiveRequests=0,qi.numberOfCancelledRequests=0,qi.numberOfCancelledActiveRequests=0,qi.numberOfFailedRequests=0,qi.numberOfActiveRequestsEver=0,qi.lastNumberOfActiveRequests=0},Xi.numberOfActiveRequestsByServer=function(e){return Wi[e]},Xi.requestHeap=Hi,$i.prototype.toString=function(){var e="Request has failed.";return H(this.statusCode)&&(e+=" Status Code: "+this.statusCode),e};var eo=function(){try{var e=new XMLHttpRequest;return e.open("GET","#",!0),(e.responseType="blob")===e.responseType}catch(e){return!1}}();function to(e,t,r,n){var i,o=e.query;if(!H(o)||0===o.length)return 1;o=-1===o.indexOf("=")?((i={})[o]=void 0,i):function(e){var t={};if(""===e)return t;for(var r=e.replace(/\+/g,"%20").split(/[&;]/),n=0,i=r.length;n<i;++n){var o=r[n].split("="),a=decodeURIComponent(o[0]),s=H(s=o[1])?decodeURIComponent(s):"",o=t[a];"string"==typeof o?t[a]=[o,s]:Array.isArray(o)?o.push(s):t[a]=s}return t}(o),t._queryParameters=r?oo(o,t._queryParameters,n):o,e.query=void 0}function ro(e,t){var r=t._queryParameters,t=Object.keys(r);1!==t.length||H(r[t[0]])?e.query=function(e){var t,r="";for(t in e)if(e.hasOwnProperty(t)){var n=e[t],i=encodeURIComponent(t)+"=";if(Array.isArray(n))for(var o=0,a=n.length;o<a;++o)r+=i+encodeURIComponent(n[o])+"&";else r+=i+encodeURIComponent(n)+"&"}return r=r.slice(0,-1)}(r):e.query=t[0]}function no(e,t){return H(e)?H(e.clone)?e.clone():si(e):t}function io(e){e.state=Pi.UNISSUED,e.deferred=void 0}function oo(e,t,r){if(!r)return ui(e,t);var n,i,o,a=si(e,!0);for(n in t)t.hasOwnProperty(n)&&(i=a[n],o=t[n],H(i)?(Array.isArray(i)||(i=a[n]=[i]),a[n]=i.concat(o)):a[n]=Array.isArray(o)?o.slice():o);return a}var ao,so=0;function uo(e){var t,r;"db"===(e="string"==typeof(e=b(e,b.EMPTY_OBJECT))?{url:e}:e).url.substring(0,2)&&(e.url="http"+e.url.substring(2,e.url.length)),0<e.url.indexOf("sde?")&&e.url.indexOf("_sde")<0&&e.isSde&&(e.url+="_sde"),0<Ci.port_list.length&&/\/(sde|sde_pack|dcs|geoserver|filedownload)\?/.test(e.url)&&(null!=(t=/^([^:\/]+)(:\/\/)([^\/]+)(\/.+)$/i.exec(e.url))&&5==t.length&&(/:/.test(t[3])&&(r=t[3].indexOf(":"),t[3]=t[3].substring(0,r)),t[3]=t[3]+":"+Ci.port_list[so],so=(so+1)%Ci.port_list.length,e.url=t[1]+t[2]+t[3]+t[4])),this._version=e.version,this._url=void 0,this._templateValues=no(e.templateValues,{}),this._queryParameters=no(e.queryParameters,{}),this.headers=no(e.headers,{}),this.request=b(e.request,new Di),this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=b(e.retryAttempts,3),this._retryCount=0;e=new ci(e.url);to(e,this,!0,!0),e.fragment=void 0,this._url=e.toString(),this.preDownload=void 0}function co(r){var n=r.resource,i=r.flipY,o=r.preferImageBitmap,a=n.request;a.url=n.url,a.requestFunction=function(){H(r.preDownload)&&n.preDownload();var e=!1;n.isDataUri||n.isBlobUri||(e=n.isCrossOriginUrl);var t=mr.defer();return uo._Implementations.createImage(a,e,t,i,o),t.promise};var e=Xi.request(a);if(H(e))return e.otherwise(function(t){return a.state!==Pi.FAILED?mr.reject(t):n.retryOnError(t).then(function(e){return e?(a.state=Pi.UNISSUED,a.deferred=void 0,co({resource:n,flipY:i,preferImageBitmap:o})):mr.reject(t)})})}uo.createIfNeeded=function(e,t,r){return e instanceof uo?e.getDerivedResource({request:e.request}):"string"!=typeof e?e:new uo({url:e,version:t,isSde:!H(r)||r})},uo.supportsImageBitmapOptions=function(){if(H(ao))return ao;if("function"!=typeof createImageBitmap)return ao=mr.resolve(!1);return ao=uo.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWP4////fwAJ+wP9CNHoHgAAAABJRU5ErkJggg=="}).then(function(e){return createImageBitmap(e,{imageOrientation:"flipY",premultiplyAlpha:"none"})}).then(function(e){return!0}).otherwise(function(){return!1})},Object.defineProperties(uo,{isBlobSupported:{get:function(){return eo}}}),Object.defineProperties(uo.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){var e=this.getUrlComponent(!0,!0);return null!=this._version&&(e+="&version="+this._version),e},set:function(e){e=new ci(e);to(e,this,!1),e.fragment=void 0,this._url=e.toString()}},extension:{get:function(){return e=this._url,(t=new ci(e)).normalize(),e=t.path,e=-1===(t=(e=-1!==(t=e.lastIndexOf("/"))?e.substr(t+1):e).lastIndexOf("."))?"":e.substr(t+1);var e,t}},isDataUri:{get:function(){return Ti(this._url)}},isBlobUri:{get:function(){return gi(this._url)}},isCrossOriginUrl:{get:function(){return function(e){(Ei=!H(Ei)?document.createElement("a"):Ei).href=window.location.href;var t=Ei.host,r=Ei.protocol;return Ei.href=e,Ei.href=Ei.href,r!==Ei.protocol||t!==Ei.host}(this._url)}},hasHeaders:{get:function(){return 0<Object.keys(this.headers).length}}}),uo.prototype.toString=function(){return this.getUrlComponent(!0,!0)},uo.prototype.getUrlComponent=function(e,t){if(this.isDataUri)return this._url;var r=new ci(this._url);e&&ro(r,this);var r=r.toString().replace(/%7B/g,"{").replace(/%7D/g,"}"),n=this._templateValues,r=r.replace(/{(.*?)}/g,function(e,t){t=n[t];return H(t)?encodeURIComponent(t):e});return r=t&&H(this.proxy)?this.proxy.getURL(r):r},uo.prototype.setQueryParameters=function(e,t){this._queryParameters=t?oo(this._queryParameters,e,!1):oo(e,this._queryParameters,!1)},uo.prototype.appendQueryParameters=function(e){this._queryParameters=oo(e,this._queryParameters,!0)},uo.prototype.setTemplateValues=function(e,t){this._templateValues=t?ui(this._templateValues,e):ui(e,this._templateValues)},uo.prototype.getDerivedResource=function(e){var t,r=this.clone();return r._retryCount=0,H(e.url)&&(to(t=new ci(e.url),r,!0,b(e.preserveQueryParameters,!1)),t.fragment=void 0,r._url=t.resolve(new ci(yi(this._url))).toString(),r._url.indexOf("base64")<0&&0<r._url.indexOf("/sde?/")&&r._url.indexOf("_sde")<0&&(r._url+="_sde")),H(e.queryParameters)&&(r._queryParameters=ui(e.queryParameters,r._queryParameters)),H(e.templateValues)&&(r._templateValues=ui(e.templateValues,r.templateValues)),H(e.headers)&&(r.headers=ui(e.headers,r.headers)),H(e.proxy)&&(r.proxy=e.proxy),H(e.request)&&(r.request=e.request),H(e.retryCallback)&&(r.retryCallback=e.retryCallback),H(e.retryAttempts)&&(r.retryAttempts=e.retryAttempts),r},uo.prototype.retryOnError=function(e){var t=this.retryCallback;if("function"!=typeof t||this._retryCount>=this.retryAttempts)return mr(!1);var r=this;return mr(t(this,e)).then(function(e){return++r._retryCount,e})},uo.prototype.clone=function(e){return(e=!H(e)?new uo({url:this._url}):e)._url=this._url,e._queryParameters=si(this._queryParameters),e._templateValues=si(this._templateValues),e.headers=si(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e},uo.prototype.getBaseUri=function(e){return t=this.getUrlComponent(e),r=e,n="",-1!==(e=t.lastIndexOf("/"))&&(n=t.substring(0,e+1)),r&&(H((t=new ci(t)).query)&&(n+="?"+t.query),H(t.fragment)&&(n+="#"+t.fragment)),n;var t,r,n},uo.prototype.appendForwardSlash=function(){var e;this._url=(0!==(e=this._url).length&&"/"===e[e.length-1]||(e+="/"),e)},uo.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},uo.fetchArrayBuffer=function(e){return new uo(e).fetchArrayBuffer()},uo.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},uo.fetchBlob=function(e){return new uo(e).fetchBlob()},uo.prototype.fetchImage=function(e){e=b(e,b.EMPTY_OBJECT);var t=b(e.preferImageBitmap,!1),r=b(e.preferBlob,!1),n=b(e.flipY,!1);if(io(this.request),!eo||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!r)return co({resource:this,flipY:n,preferImageBitmap:t});var i,o,a,s=this.fetchBlob();return H(s)?uo.supportsImageBitmapOptions().then(function(e){return i=e&&t,s}).then(function(e){if(H(e)){if(a=e,i)return uo.createImageBitmapFromBlob(e,{flipY:n,premultiplyAlpha:!1});e=window.URL.createObjectURL(e);return co({resource:o=new uo({url:e}),flipY:n,preferImageBitmap:!1})}}).then(function(e){if(H(e))return e.blob=a,i||window.URL.revokeObjectURL(o.url),e}).otherwise(function(e){return H(o)&&window.URL.revokeObjectURL(o.url),e.blob=a,mr.reject(e)}):void 0},uo.fetchImage=function(e){return new uo(e).fetchImage({flipY:e.flipY,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})},uo.prototype.fetchText=function(){return this.fetch({responseType:"text"})},uo.fetchText=function(e){return new uo(e).fetchText()},uo.prototype.fetchJson=function(){var e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(H(e))return e.then(function(e){if(H(e))return JSON.parse(e)})},uo.fetchJson=function(e){return new uo(e).fetchJson()},uo.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},uo.fetchXML=function(e){return new uo(e).fetchXML()},uo.prototype.fetchJsonp=function(e){var t;for(e=b(e,"callback"),io(this.request);t="loadJsonp"+Math.random().toString().substring(2,8),H(window[t]););return function r(n,i,o){var e={};e[i]=o;n.setQueryParameters(e);var a=n.request;a.url=n.url;a.requestFunction=function(){H(n.preDownload)&&n.preDownload();var t=mr.defer();return window[o]=function(e){t.resolve(e);try{delete window[o]}catch(e){window[o]=void 0}},uo._Implementations.loadAndExecuteScript(n.url,o,t),t.promise};e=Xi.request(a);if(!H(e))return;return e.otherwise(function(t){return a.state!==Pi.FAILED?mr.reject(t):n.retryOnError(t).then(function(e){return e?(a.state=Pi.UNISSUED,a.deferred=void 0,r(n,i,o)):mr.reject(t)})})}(this,e,t)},uo.fetchJsonp=function(e){return new uo(e).fetchJsonp(e.callbackParameterName)},uo.prototype._makeRequest=function(s){var u=this;io(u.request);var c=u.request;c.url=u.url,c.requestFunction=function(){H(u.preDownload)&&u.preDownload();var e=s.responseType,t=ui(s.headers,u.headers),r=s.overrideMimeType,n=s.method,i=s.data,o=mr.defer(),a=uo._Implementations.loadWithXhr(u.url,e,n,i,t,o,r);return H(a)&&H(a.abort)&&(c.cancelFunction=function(){a.abort()}),o.promise};var e=Xi.request(c);if(H(e))return e.then(function(e){return c.cancelFunction=void 0,e}).otherwise(function(t){return c.cancelFunction=void 0,c.state!==Pi.FAILED?mr.reject(t):u.retryOnError(t).then(function(e){return e?(c.state=Pi.UNISSUED,c.deferred=void 0,u.fetch(s)):mr.reject(t)})})};var lo=/^data:(.*?)(;base64)?,(.*)$/;function ho(e,t){t=decodeURIComponent(t);return e?atob(t):t}function fo(e,t){for(var r=ho(e,t),t=new ArrayBuffer(r.length),n=new Uint8Array(t),i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return t}function mo(e,t){switch(t){case"text":return e.toString("utf8");case"json":return JSON.parse(e.toString("utf8"));default:return new Uint8Array(e).buffer}}uo.prototype.fetch=function(e){return(e=no(e,{})).method="GET",this._makeRequest(e)},uo.fetch=function(e){return new uo(e).fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},uo.prototype.delete=function(e){return(e=no(e,{})).method="DELETE",this._makeRequest(e)},uo.delete=function(e){return new uo(e).delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})},uo.prototype.head=function(e){return(e=no(e,{})).method="HEAD",this._makeRequest(e)},uo.head=function(e){return new uo(e).head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},uo.prototype.options=function(e){return(e=no(e,{})).method="OPTIONS",this._makeRequest(e)},uo.options=function(e){return new uo(e).options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},uo.prototype.post=function(e,t){return(t=no(t,{})).method="POST",t.data=e,this._makeRequest(t)},uo.post=function(e){return new uo(e).post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},uo.prototype.put=function(e,t){return(t=no(t,{})).method="PUT",t.data=e,this._makeRequest(t)},uo.put=function(e){return new uo(e).put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},uo.prototype.patch=function(e,t){return(t=no(t,{})).method="PATCH",t.data=e,this._makeRequest(t)},uo.patch=function(e){return new uo(e).patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},(uo._Implementations={}).createImage=function(o,a,s,u,c){var l=o.url;uo.supportsImageBitmapOptions().then(function(e){if(!e||!c)return n=l,e=a,t=s,(r=new Image).onload=function(){t.resolve(r)},r.onerror=function(e){t.reject(e)},e&&(Si.contains(n)?r.crossOrigin="use-credentials":r.crossOrigin=""),void(r.src=n);var t,r,n=mr.defer(),i=uo._Implementations.loadWithXhr(l,"blob","GET",void 0,void 0,n,void 0,void 0,void 0);return H(i)&&H(i.abort)&&(o.cancelFunction=function(){i.abort()}),n.promise.then(function(e){return H(e)?uo.createImageBitmapFromBlob(e,{flipY:u,premultiplyAlpha:!1}):void s.reject(new le("Successfully retrieved "+l+" but it contained no content."))}).then(s.resolve)}).otherwise(s.reject)},uo.createImageBitmapFromBlob=function(e,t){return createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"none",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none"})};var po="undefined"==typeof XMLHttpRequest;function yo(e,t,r,n,i){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=r,this.yPoleOffset=n,this.ut1MinusUtc=i}function Eo(e){var t,r;e=b(e,b.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=b(e.addNewLeapSeconds,!0),H(e.data)?go(this,e.data):H(e.url)?(t=uo.createIfNeeded(e.url),(r=this)._downloadPromise=t.fetchJson().then(function(e){go(r,e)}).otherwise(function(){r._dataError="An error occurred while retrieving the EOP data from the URL "+t.url+"."})):go(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function _o(e,t){return oi.compare(e.julianDate,t)}function go(e,t){if(H(t.columnNames))if(H(t.samples)){var r=t.columnNames.indexOf("modifiedJulianDateUtc"),n=t.columnNames.indexOf("xPoleWanderRadians"),i=t.columnNames.indexOf("yPoleWanderRadians"),o=t.columnNames.indexOf("ut1MinusUtcSeconds"),a=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),s=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),u=t.columnNames.indexOf("taiMinusUtcSeconds");if(r<0||n<0||i<0||o<0||a<0||s<0||u<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var c,l=e._samples=t.samples,h=e._dates=[];e._dateColumn=r,e._xPoleWanderRadiansColumn=n,e._yPoleWanderRadiansColumn=i,e._ut1MinusUtcSecondsColumn=o,e._xCelestialPoleOffsetRadiansColumn=a,e._yCelestialPoleOffsetRadiansColumn=s,e._taiMinusUtcSecondsColumn=u,e._columnCount=t.columnNames.length,e._lastIndex=void 0;for(var f=e._addNewLeapSeconds,m=0,p=l.length;m<p;m+=e._columnCount){var d,y=l[m+r],E=l[m+u],_=new oi(y+Gn.MODIFIED_JULIAN_DATE_DIFFERENCE,E,Hn.TAI);h.push(_),f&&(E===c||!H(c)||(y=zn(d=oi.leapSeconds,_,_o))<0&&(_=new qn(_,E),d.splice(~y,0,_)),c=E)}}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function vo(e,t,r,n,i){n*=r;i.xPoleWander=t[n+e._xPoleWanderRadiansColumn],i.yPoleWander=t[n+e._yPoleWanderRadiansColumn],i.xPoleOffset=t[n+e._xCelestialPoleOffsetRadiansColumn],i.yPoleOffset=t[n+e._yCelestialPoleOffsetRadiansColumn],i.ut1MinusUtc=t[n+e._ut1MinusUtcSecondsColumn]}function To(e,t,r){return t+e*(r-t)}function Ao(e,t,r,n,i,o,a){var s=e._columnCount;if(o>t.length-1)return a.xPoleWander=0,a.yPoleWander=0,a.xPoleOffset=0,a.yPoleOffset=0,a.ut1MinusUtc=0,a;var u=t[i],c=t[o];if(u.equals(c)||n.equals(u))return vo(e,r,i,s,a),a;if(n.equals(c))return vo(e,r,o,s,a),a;var l=oi.secondsDifference(n,u)/oi.secondsDifference(c,u),h=i*s,t=o*s,u=r[h+e._ut1MinusUtcSecondsColumn],i=r[t+e._ut1MinusUtcSecondsColumn],o=i-u;return!(.5<o||o<-.5)||(s=r[h+e._taiMinusUtcSecondsColumn])!==(o=r[t+e._taiMinusUtcSecondsColumn])&&(c.equals(n)?u=i:i-=o-s),a.xPoleWander=To(l,r[h+e._xPoleWanderRadiansColumn],r[t+e._xPoleWanderRadiansColumn]),a.yPoleWander=To(l,r[h+e._yPoleWanderRadiansColumn],r[t+e._yPoleWanderRadiansColumn]),a.xPoleOffset=To(l,r[h+e._xCelestialPoleOffsetRadiansColumn],r[t+e._xCelestialPoleOffsetRadiansColumn]),a.yPoleOffset=To(l,r[h+e._yCelestialPoleOffsetRadiansColumn],r[t+e._yCelestialPoleOffsetRadiansColumn]),a.ut1MinusUtc=To(l,u,i),a}function Ro(e,t,r){this.x=e,this.y=t,this.s=r}uo._Implementations.loadWithXhr=function(e,i,o,t,r,a,n){var s=lo.exec(e);if(null===s){if(po)return u=e,c=i,l=o,h=r,f=a,m=require("url").parse(u),u="https:"===m.protocol?require("https"):require("http"),p=require("zlib"),h={protocol:m.protocol,hostname:m.hostname,port:m.port,path:m.path,query:m.query,method:l,headers:h},void u.request(h).on("response",function(t){var r;t.statusCode<200||300<=t.statusCode?f.reject(new $i(t.statusCode,t,t.headers)):(r=[],t.on("data",function(e){r.push(e)}),t.on("end",function(){var e=Buffer.concat(r);"gzip"===t.headers["content-encoding"]?p.gunzip(e,function(e,t){e?f.reject(new le("Error decompressing response.")):f.resolve(mo(t,c))}):f.resolve(mo(e,c))}))}).on("error",function(e){f.reject(new $i)}).end();var u,c,l,h,f,m,p,d=new XMLHttpRequest;if(Si.contains(e)&&(d.withCredentials=!0),d.open(o,e,!0),H(n)&&H(d.overrideMimeType)&&d.overrideMimeType(n),H(r))for(var y in r)r.hasOwnProperty(y)&&d.setRequestHeader(y,r[y]);H(i)&&(d.responseType=i);var E=!1;return"string"==typeof e&&(E=0===e.indexOf("file://")||"undefined"!=typeof window&&"file://"===window.location.origin),d.onload=function(){if(!(d.status<200||300<=d.status)||E&&0===d.status){var e=d.response,t=d.responseType;if("HEAD"===o||"OPTIONS"===o){var r=d.getAllResponseHeaders().trim().split(/[\r\n]+/),n={};return r.forEach(function(e){var t=e.split(": "),e=t.shift();n[e]=t.join(": ")}),void a.resolve(n)}if(204===d.status)a.resolve();else if(!H(e)||H(i)&&t!==i)if("json"===i&&"string"==typeof e)try{a.resolve(JSON.parse(e))}catch(e){a.reject(e)}else(""===t||"document"===t)&&H(d.responseXML)&&d.responseXML.hasChildNodes()?a.resolve(d.responseXML):""!==t&&"text"!==t||!H(d.responseText)?a.reject(new le("Invalid XMLHttpRequest response type.")):a.resolve(d.responseText);else a.resolve(e)}else a.reject(new $i(d.status,d.response,d.getAllResponseHeaders()))},d.onerror=function(e){a.reject(new $i)},d.send(t),d}a.resolve(function(e,t){t=b(t,"");var r=e[1],n=!!e[2],i=e[3];switch(t){case"":case"text":return ho(n,i);case"arraybuffer":return fo(n,i);case"blob":var o=fo(n,i);return new Blob([o],{type:r});case"document":return(new DOMParser).parseFromString(ho(n,i),r);case"json":return JSON.parse(ho(n,i))}}(s,i))},uo._Implementations.loadAndExecuteScript=function(e,t,r){return function(e){var t=mr.defer(),r=document.createElement("script");r.async=!0,r.src=e;var n=document.getElementsByTagName("head")[0];return r.onload=function(){r.onload=void 0,n.removeChild(r),t.resolve()},r.onerror=function(e){t.reject(e)},n.appendChild(r),t.promise}(e).otherwise(r.reject)},(uo._DefaultImplementations={}).createImage=uo._Implementations.createImage,uo._DefaultImplementations.loadWithXhr=uo._Implementations.loadWithXhr,uo._DefaultImplementations.loadAndExecuteScript=uo._Implementations.loadAndExecuteScript,uo.DEFAULT=Object.freeze(new uo({url:"undefined"==typeof document?"":document.location.href.split("?")[0]})),Eo.NONE=Object.freeze({getPromiseToLoad:function(){return mr.resolve()},compute:function(e,t){return H(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new yo(0,0,0,0,0),t}}),Eo.prototype.getPromiseToLoad=function(){return mr(this._downloadPromise)},Eo.prototype.compute=function(e,t){if(H(this._samples)){if(H(t)||(t=new yo(0,0,0,0,0)),0===this._samples.length)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;var r=this._dates,n=this._lastIndex,i=0,o=0;if(H(n)){var a=r[n],s=r[n+1],u=oi.lessThanOrEquals(a,e),c=!H(s),a=c||oi.greaterThanOrEquals(s,e);if(u&&a)return i=n,!c&&s.equals(e)&&++i,Ao(this,r,this._samples,e,i,o=i+1,t),t}s=zn(r,e,oi.compare,this._dateColumn);return 0<=s?(s<r.length-1&&r[s+1].equals(e)&&++s,o=i=s):(i=(o=~s)-1)<0&&(i=0),this._lastIndex=i,Ao(this,r,this._samples,e,i,o,t),t}};var So,Oo,xo,Io=/((?:.*\/)|^)Cesium\.js(?:\?|\#|$)/;function wo(e){return"undefined"==typeof document?e:((So=!H(So)?document.createElement("a"):So).href=e,So.href=So.href,So.href)}function No(){if(H(Oo))return Oo;var e=void 0!==Ci.baseUrlString?Ci.baseUrlString:"object"==typeof define&&H(define.amd)&&!define.amd.toUrlUndefined&&H(require.toUrl)?yi("..",Co("lib_ax/utility/lib_core/resource/buildModuleUrl.js")):function(){for(var e=document.getElementsByTagName("script"),t=0,r=e.length;t<r;++t){var n=e[t].getAttribute("src"),n=Io.exec(n);if(null!==n)return n[1]}}();return(Oo=new uo({url:wo(e)})).appendForwardSlash(),Oo}function bo(e){return wo(require.toUrl("../"+e))}function Mo(e){return No().getDerivedResource({url:e}).url}function Co(e){return(xo=!H(xo)?"object"==typeof define&&H(define.amd)&&!define.amd.toUrlUndefined&&H(require.toUrl)?bo:Mo:xo)(e)}function Po(e){e=b(e,b.EMPTY_OBJECT),this._xysFileUrlTemplate=uo.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=b(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=b(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new oi(this._sampleZeroJulianEphemerisDate,0,Hn.TAI),this._stepSizeDays=b(e.stepSizeDays,1),this._samplesPerXysFile=b(e.samplesPerXysFile,1e3),this._totalSamples=b(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var t=this._interpolationOrder,r=this._denominators=new Array(t+1),n=this._xTable=new Array(t+1),i=Math.pow(this._stepSizeDays,t),o=0;o<=t;++o){r[o]=i,n[o]=o*this._stepSizeDays;for(var a=0;a<=t;++a)a!==o&&(r[o]*=o-a);r[o]=1/r[o]}this._work=new Array(t+1),this._coef=new Array(t+1)}Co._cesiumScriptRegex=Io,Co._buildModuleUrlFromBaseUrl=Mo,Co._clearBaseResource=function(){Oo=void 0},Co.setBaseUrl=function(e){Oo=uo.DEFAULT.getDerivedResource({url:e})},Co.getCesiumBaseUrl=No;var Lo=new oi(0,0,Hn.TAI);function Do(e,t,r){var n=Lo;return n.dayNumber=t,n.secondsOfDay=r,oi.daysDifference(n,e._sampleZeroDateTT)}function zo(a,s){if(a._chunkDownloadsInProgress[s])return a._chunkDownloadsInProgress[s];var u=mr.defer();a._chunkDownloadsInProgress[s]=u;var e=a._xysFileUrlTemplate;return mr((H(e)?e.getDerivedResource({templateValues:{0:s}}):new uo({url:Co("Assets/IAU2006_XYS/IAU2006_XYS_"+s+".json")})).fetchJson(),function(e){a._chunkDownloadsInProgress[s]=!1;for(var t=a._samples,r=e.samples,n=s*a._samplesPerXysFile*3,i=0,o=r.length;i<o;++i)t[n+i]=r[i];u.resolve()}),u.promise}Po.prototype.preload=function(e,t,r,n){t=Do(this,e,t),n=Do(this,r,n),t=t/this._stepSizeDays-this._interpolationOrder/2|0,n=n/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;n>=this._totalSamples&&(n=this._totalSamples-1);for(var t=(t=t<0?0:t)/this._samplesPerXysFile|0,i=n/this._samplesPerXysFile|0,o=[],a=t;a<=i;++a)o.push(zo(this,a));return mr.all(o)},Po.prototype.computeXysRadians=function(e,t,r){var n=Do(this,e,t);if(!(n<0)){e=n/this._stepSizeDays|0;if(!(e>=this._totalSamples)){var i=this._interpolationOrder,o=e-(i/2|0),t=(o=o<0?0:o)+i;t>=this._totalSamples&&(o=(t=this._totalSamples-1)-i)<0&&(o=0);var e=!1,a=this._samples;if(H(a[3*o])||(zo(this,o/this._samplesPerXysFile|0),e=!0),H(a[3*t])||(zo(this,t/this._samplesPerXysFile|0),e=!0),!e){H(r)?(r.x=0,r.y=0,r.s=0):r=new Ro(0,0,0);for(var s,u=n-o*this._stepSizeDays,c=this._work,l=this._denominators,h=this._coef,f=this._xTable,m=0;m<=i;++m)c[m]=u-f[m];for(m=0;m<=i;++m){for(h[m]=1,s=0;s<=i;++s)s!==m&&(h[m]*=c[s]);h[m]*=l[m];var p=3*(o+m);r.x+=h[m]*a[p++],r.y+=h[m]*a[p++],r.s+=h[m]*a[p]}return r}}}};var Fo={},Uo={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},Bo={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},qo={},Go={east:new W,north:new W,up:new W,west:new W,south:new W,down:new W},Ho=new W,jo=new W,Wo=new W;Fo.localFrameToFixedFrameGenerator=function(i,o){var e,a=Uo[i][o],t=i+o;return H(qo[t])?e=qo[t]:(e=function(e,t,r){var n;return H(r)||(r=new ye),W.equalsEpsilon(e,W.ZERO,j.EPSILON14)?(W.unpack(Bo[i],0,Ho),W.unpack(Bo[o],0,jo),W.unpack(Bo[a],0,Wo)):j.equalsEpsilon(e.x,0,j.EPSILON14)&&j.equalsEpsilon(e.y,0,j.EPSILON14)?(n=j.sign(e.z),W.unpack(Bo[i],0,Ho),"east"!==i&&"west"!==i&&W.multiplyByScalar(Ho,n,Ho),W.unpack(Bo[o],0,jo),"east"!==o&&"west"!==o&&W.multiplyByScalar(jo,n,jo),W.unpack(Bo[a],0,Wo),"east"!==a&&"west"!==a&&W.multiplyByScalar(Wo,n,Wo)):((t=b(t,S.WGS84)).geodeticSurfaceNormal(e,Go.up),n=Go.up,(t=Go.east).x=-e.y,t.y=e.x,t.z=0,W.normalize(t,Go.east),W.cross(n,t,Go.north),W.multiplyByScalar(Go.up,-1,Go.down),W.multiplyByScalar(Go.east,-1,Go.west),W.multiplyByScalar(Go.north,-1,Go.south),Ho=Go[i],jo=Go[o],Wo=Go[a]),r[0]=Ho.x,r[1]=Ho.y,r[2]=Ho.z,r[3]=0,r[4]=jo.x,r[5]=jo.y,r[6]=jo.z,r[7]=0,r[8]=Wo.x,r[9]=Wo.y,r[10]=Wo.z,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,r},qo[t]=e),e},Fo.eastNorthUpToFixedFrame=Fo.localFrameToFixedFrameGenerator("east","north"),Fo.northEastDownToFixedFrame=Fo.localFrameToFixedFrameGenerator("north","east"),Fo.northUpEastToFixedFrame=Fo.localFrameToFixedFrameGenerator("north","up"),Fo.northWestUpToFixedFrame=Fo.localFrameToFixedFrameGenerator("north","west");var Vo=new nn,Yo=new W(1,1,1),Xo=new ye;Fo.headingPitchRollToFixedFrame=function(e,t,r,n,i){n=b(n,Fo.eastNorthUpToFixedFrame);t=nn.fromHeadingPitchRoll(t,Vo),t=ye.fromTranslationQuaternionRotationScale(W.ZERO,t,Yo,Xo);return i=n(e,r,i),ye.multiply(i,t,i)};var ko=new ye,Zo=new re;Fo.headingPitchRollQuaternion=function(e,t,r,n,i){n=Fo.headingPitchRollToFixedFrame(e,t,r,n,ko),n=ye.getMatrix3(n,Zo);return nn.fromRotationMatrix(n,i)};var Ko=new W(1,1,1),Jo=new W,Qo=new ye,$o=new ye,ea=new re,ta=new nn;Fo.fixedFrameToHeadingPitchRoll=function(e,t,r,n){t=b(t,S.WGS84),r=b(r,Fo.eastNorthUpToFixedFrame),H(n)||(n=new Dn);var i=ye.getTranslation(e,Jo);if(W.equals(i,W.ZERO))return n.heading=0,n.pitch=0,n.roll=0,n;t=ye.inverseTransformation(r(i,t,Qo),Qo),e=ye.setScale(e,Ko,$o),e=ye.setTranslation(e,W.ZERO,e),t=ye.multiply(t,e,t),t=nn.fromRotationMatrix(ye.getMatrix3(t,ea),ta),t=nn.normalize(t,t);return Dn.fromQuaternion(t,n)};var ra=j.TWO_PI/86400,na=new oi;Fo.computeTemeToPseudoFixedMatrix=function(e,t){var r=(na=oi.addSeconds(e,-oi.computeTaiMinusUtc(e),na)).dayNumber,n=na.secondsOfDay,e=r-2451545,e=43200<=n?(.5+e)/Gn.DAYS_PER_JULIAN_CENTURY:(e-.5)/Gn.DAYS_PER_JULIAN_CENTURY,r=(24110.54841+e*(8640184.812866+e*(.093104+-62e-7*e)))*ra%j.TWO_PI+(72921158553e-15+11772758384668e-32*(r-2451545.5))*((n+.5*Gn.SECONDS_PER_DAY)%Gn.SECONDS_PER_DAY),n=Math.cos(r),r=Math.sin(r);return H(t)?(t[0]=n,t[1]=-r,t[2]=0,t[3]=r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new re(n,r,0,-r,n,0,0,0,1)},Fo.iau2006XysData=new Po,Fo.earthOrientationParameters=Eo.NONE;var ia=32.184;Fo.preloadIcrfFixed=function(e){var t=e.start.dayNumber,r=e.start.secondsOfDay+ia,n=e.stop.dayNumber,e=e.stop.secondsOfDay+ia,n=Fo.iau2006XysData.preload(t,r,n,e),e=Fo.earthOrientationParameters.getPromiseToLoad();return mr.all([n,e])},Fo.computeIcrfToFixedMatrix=function(e,t){H(t)||(t=new re);e=Fo.computeFixedToIcrfMatrix(e,t);if(H(e))return re.transpose(e,t)};var oa=new Ro(0,0,0),aa=new yo(0,0,0,0,0),sa=new re,ua=new re;Fo.computeFixedToIcrfMatrix=function(e,t){H(t)||(t=new re);var r=Fo.earthOrientationParameters.compute(e,aa);if(H(r)){var n=e.dayNumber,i=e.secondsOfDay+ia,o=Fo.iau2006XysData.computeXysRadians(n,i,oa);if(H(o)){var a=o.x+r.xPoleOffset,s=o.y+r.yPoleOffset,u=1/(1+Math.sqrt(1-a*a-s*s)),c=sa;c[0]=1-u*a*a,c[3]=-u*a*s,c[6]=a,c[1]=-u*a*s,c[4]=1-u*s*s,c[7]=s,c[2]=-a,c[5]=-s,c[8]=1-u*(a*a+s*s);a=re.fromRotationZ(-o.s,ua),s=re.multiply(c,a,sa),o=e.dayNumber,c=(e.secondsOfDay-oi.computeTaiMinusUtc(e)+r.ut1MinusUtc)/Gn.SECONDS_PER_DAY,a=(a=.779057273264+c+.00273781191135448*(o-2451545+c))%1*j.TWO_PI,e=re.fromRotationZ(a,ua),o=re.multiply(s,e,sa),c=Math.cos(r.xPoleWander),a=Math.cos(r.yPoleWander),s=Math.sin(r.xPoleWander),e=Math.sin(r.yPoleWander),r=n-2451545+i/Gn.SECONDS_PER_DAY,n=-47e-6*(r/=36525)*j.RADIANS_PER_DEGREE/3600,i=Math.cos(n),r=Math.sin(n),n=ua;return n[0]=c*i,n[1]=c*r,n[2]=s,n[3]=-a*r+e*s*i,n[4]=a*i+e*s*r,n[5]=-e*c,n[6]=-e*r-a*s*i,n[7]=e*i-a*s*r,n[8]=a*c,re.multiply(o,n,t)}}};var ca=new he;Fo.pointToWindowCoordinates=function(e,t,r,n){return(n=Fo.pointToGLWindowCoordinates(e,t,r,n)).y=2*t[5]-n.y,n},Fo.pointToGLWindowCoordinates=function(e,t,r,n){H(n)||(n=new Y);var i=ca;return ye.multiplyByVector(e,he.fromElements(r.x,r.y,r.z,1,i),i),he.multiplyByScalar(i,1/i.w,i),ye.multiplyByVector(t,i,i),Y.fromCartesian4(i,n)};var la=new W,ha=new W,fa=new W;Fo.rotationMatrixFromPositionVelocity=function(e,t,r,n){r=b(r,S.WGS84).geodeticSurfaceNormal(e,la),e=W.cross(t,r,ha);W.equalsEpsilon(e,W.ZERO,j.EPSILON6)&&(e=W.clone(W.UNIT_X,e));r=W.cross(e,t,fa);return W.normalize(r,r),W.cross(t,r,e),W.negate(e,e),W.normalize(e,e),(n=!H(n)?new re:n)[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=e.x,n[4]=e.y,n[5]=e.z,n[6]=r.x,n[7]=r.y,n[8]=r.z,n};var ma=new ye(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),pa=new R,da=new W,ya=new W,Ea=new re,_a=new ye,ga=new ye;Fo.basisTo2D=function(e,t,r){var n=ye.getTranslation(t,ya),i=e.ellipsoid,o=i.cartesianToCartographic(n,pa),o=e.project(o,da);W.fromElements(o.z,o.x,o.y,o);i=Fo.eastNorthUpToFixedFrame(n,i,_a),i=ye.inverseTransformation(i,ga),t=ye.getMatrix3(t,Ea),t=ye.multiplyByMatrix3(i,t,r);return ye.multiply(ma,t,r),ye.setTranslation(r,o,r),r},Fo.wgs84To2DModelMatrix=function(e,t,r){var n=e.ellipsoid,i=Fo.eastNorthUpToFixedFrame(t,n,_a),i=ye.inverseTransformation(i,ga),t=n.cartesianToCartographic(t,pa),t=e.project(t,da);W.fromElements(t.z,t.x,t.y,t);t=ye.fromTranslation(t,_a);return ye.multiply(ma,i,r),ye.multiply(t,r,r),r};var va=new he;function Ta(e,t){e=(t=b(t,S.WGS84)).scaleToGeodeticSurface(e);var r=Fo.eastNorthUpToFixedFrame(e,t);this._ellipsoid=t,this._origin=e,this._xAxis=W.fromCartesian4(ye.getColumn(r,0,va)),this._yAxis=W.fromCartesian4(ye.getColumn(r,1,va));r=W.fromCartesian4(ye.getColumn(r,2,va));this._plane=sr.fromPointNormal(e,r)}Object.defineProperties(Ta.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},origin:{get:function(){return this._origin}},plane:{get:function(){return this._plane}},xAxis:{get:function(){return this._xAxis}},yAxis:{get:function(){return this._yAxis}},zAxis:{get:function(){return this._plane.normal}}});var Aa=new At;Ta.fromPoints=function(e,t){return new Ta(At.fromPoints(e,Aa).center,t)};var Ra=new Mt,Sa=new W;Ta.prototype.projectPointOntoPlane=function(e,t){var r=Ra;r.origin=e,W.normalize(e,r.direction);e=Ct.rayPlane(r,this._plane,Sa);if(H(e)||(W.negate(r.direction,r.direction),e=Ct.rayPlane(r,this._plane,Sa)),H(e)){r=W.subtract(e,this._origin,e),e=W.dot(this._xAxis,r),r=W.dot(this._yAxis,r);return H(t)?(t.x=e,t.y=r,t):new Y(e,r)}},Ta.prototype.projectPointsOntoPlane=function(e,t){H(t)||(t=[]);for(var r=0,n=e.length,i=0;i<n;i++){var o=this.projectPointOntoPlane(e[i],t[r]);H(o)&&(t[r]=o,r++)}return t.length=r,t},Ta.prototype.projectPointToNearestOnPlane=function(e,t){H(t)||(t=new Y);var r=Ra;r.origin=e,W.clone(this._plane.normal,r.direction);e=Ct.rayPlane(r,this._plane,Sa);H(e)||(W.negate(r.direction,r.direction),e=Ct.rayPlane(r,this._plane,Sa));r=W.subtract(e,this._origin,e),e=W.dot(this._xAxis,r),r=W.dot(this._yAxis,r);return t.x=e,t.y=r,t},Ta.prototype.projectPointsToNearestOnPlane=function(e,t){H(t)||(t=[]);var r=e.length;t.length=r;for(var n=0;n<r;n++)t[n]=this.projectPointToNearestOnPlane(e[n],t[n]);return t};var Oa=new W;function xa(e,t,r,n){this[0]=b(e,0),this[1]=b(r,0),this[2]=b(t,0),this[3]=b(n,0)}Ta.prototype.projectPointOntoEllipsoid=function(e,t){H(t)||(t=new W);var r=this._ellipsoid,n=this._origin,i=this._xAxis,o=this._yAxis,a=Oa;return W.multiplyByScalar(i,e.x,a),t=W.add(n,a,t),W.multiplyByScalar(o,e.y,a),W.add(t,a,t),r.scaleToGeocentricSurface(t,t),t},Ta.prototype.projectPointsOntoEllipsoid=function(e,t){var r=e.length;H(t)?t.length=r:t=new Array(r);for(var n=0;n<r;++n)t[n]=this.projectPointOntoEllipsoid(e[n],t[n]);return t},xa.packedLength=4,xa.pack=function(e,t,r){return r=b(r,0),t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t},xa.unpack=function(e,t,r){return t=b(t,0),(r=!H(r)?new xa:r)[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r},xa.clone=function(e,t){if(H(e))return H(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):new xa(e[0],e[2],e[1],e[3])},xa.fromArray=function(e,t,r){return t=b(t,0),(r=!H(r)?new xa:r)[0]=e[t],r[1]=e[t+1],r[2]=e[t+2],r[3]=e[t+3],r},xa.fromColumnMajorArray=function(e,t){return xa.clone(e,t)},xa.fromRowMajorArray=function(e,t){return H(t)?(t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3],t):new xa(e[0],e[1],e[2],e[3])},xa.fromScale=function(e,t){return H(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=e.y,t):new xa(e.x,0,0,e.y)},xa.fromUniformScale=function(e,t){return H(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=e,t):new xa(e,0,0,e)},xa.fromRotation=function(e,t){var r=Math.cos(e),e=Math.sin(e);return H(t)?(t[0]=r,t[1]=e,t[2]=-e,t[3]=r,t):new xa(r,-e,e,r)},xa.toArray=function(e,t){return H(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):[e[0],e[1],e[2],e[3]]},xa.getElementIndex=function(e,t){return 2*e+t},xa.getColumn=function(e,t,r){var n=2*t,t=e[n],n=e[1+n];return r.x=t,r.y=n,r},xa.setColumn=function(e,t,r,n){t*=2;return(n=xa.clone(e,n))[t]=r.x,n[1+t]=r.y,n},xa.getRow=function(e,t,r){var n=e[t],t=e[t+2];return r.x=n,r.y=t,r},xa.setRow=function(e,t,r,n){return(n=xa.clone(e,n))[t]=r.x,n[t+2]=r.y,n};var Ia=new Y;xa.getScale=function(e,t){return t.x=Y.magnitude(Y.fromElements(e[0],e[1],Ia)),t.y=Y.magnitude(Y.fromElements(e[2],e[3],Ia)),t};var wa=new Y;xa.getMaximumScale=function(e){return xa.getScale(e,wa),Y.maximumComponent(wa)},xa.multiply=function(e,t,r){var n=e[0]*t[0]+e[2]*t[1],i=e[0]*t[2]+e[2]*t[3],o=e[1]*t[0]+e[3]*t[1],t=e[1]*t[2]+e[3]*t[3];return r[0]=n,r[1]=o,r[2]=i,r[3]=t,r},xa.add=function(e,t,r){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r},xa.subtract=function(e,t,r){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r},xa.multiplyByVector=function(e,t,r){var n=e[0]*t.x+e[2]*t.y,t=e[1]*t.x+e[3]*t.y;return r.x=n,r.y=t,r},xa.multiplyByScalar=function(e,t,r){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r},xa.multiplyByScale=function(e,t,r){return r[0]=e[0]*t.x,r[1]=e[1]*t.x,r[2]=e[2]*t.y,r[3]=e[3]*t.y,r},xa.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},xa.transpose=function(e,t){var r=e[0],n=e[2],i=e[1],e=e[3];return t[0]=r,t[1]=n,t[2]=i,t[3]=e,t},xa.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t},xa.equals=function(e,t){return e===t||H(e)&&H(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},xa.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]},xa.equalsEpsilon=function(e,t,r){return r=b(r,0),e===t||H(e)&&H(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r},xa.IDENTITY=Object.freeze(new xa(1,0,0,1)),xa.ZERO=Object.freeze(new xa(0,0,0,0)),xa.COLUMN0ROW0=0,xa.COLUMN0ROW1=1,xa.COLUMN1ROW0=2,xa.COLUMN1ROW1=3,Object.defineProperties(xa.prototype,{length:{get:function(){return xa.packedLength}}}),xa.prototype.clone=function(e){return xa.clone(this,e)},xa.prototype.equals=function(e){return xa.equals(this,e)},xa.prototype.equalsEpsilon=function(e,t){return xa.equalsEpsilon(this,e,t)},xa.prototype.toString=function(){return"("+this[0]+", "+this[2]+")\n("+this[1]+", "+this[3]+")"};var Na=Object.freeze({NONE:0,TRIANGLES:1,LINES:2,POLYLINES:3}),ba={POINTS:pt.POINTS,LINES:pt.LINES,LINE_LOOP:pt.LINE_LOOP,LINE_STRIP:pt.LINE_STRIP,TRIANGLES:pt.TRIANGLES,TRIANGLE_STRIP:pt.TRIANGLE_STRIP,TRIANGLE_FAN:pt.TRIANGLE_FAN,validate:function(e){return e===ba.POINTS||e===ba.LINES||e===ba.LINE_LOOP||e===ba.LINE_STRIP||e===ba.TRIANGLES||e===ba.TRIANGLE_STRIP||e===ba.TRIANGLE_FAN}},Ma=Object.freeze(ba);function Ca(e){e=b(e,b.EMPTY_OBJECT),this.attributes=e.attributes,this.indices=e.indices,this.primitiveType=b(e.primitiveType,Ma.TRIANGLES),this.boundingSphere=e.boundingSphere,this.geometryType=b(e.geometryType,Na.NONE),this.boundingSphereCV=e.boundingSphereCV,this.offsetAttribute=e.offsetAttribute}Ca.computeNumberOfVertices=function(e){var t,r,n=-1;for(t in e.attributes)e.attributes.hasOwnProperty(t)&&H(e.attributes[t])&&H(e.attributes[t].values)&&(n=(r=e.attributes[t]).values.length/r.componentsPerAttribute);return n};var Pa=new R,La=new W,Da=new ye,za=[new R,new R,new R],Fa=[new Y,new Y,new Y],Ua=[new Y,new Y,new Y],Ba=new W,qa=new nn,Ga=new ye,Ha=new xa;function ja(e){e=b(e,b.EMPTY_OBJECT),this.componentDatatype=e.componentDatatype,this.componentsPerAttribute=e.componentsPerAttribute,this.normalize=b(e.normalize,!1),this.values=e.values}function Wa(e){e=b(e,b.EMPTY_OBJECT),this.geometry=e.geometry,this.modelMatrix=ye.clone(b(e.modelMatrix,ye.IDENTITY)),this.id=e.id,this.pickPrimitive=e.pickPrimitive,this.attributes=b(e.attributes,{}),this.westHemisphereGeometry=void 0,this.eastHemisphereGeometry=void 0,this.boundingSphere=e.boundingSphere,this.minTerrainHeight=e.minTerrainHeight,this.maxTerrainHeight=e.maxTerrainHeight,this.rectangle=e.rectangle}Ca._textureCoordinateRotationPoints=function(e,t,r,n){var i=Z.center(n,Pa),o=R.toCartesian(i,r,La),i=Fo.eastNorthUpToFixedFrame(o,r,Da),a=ye.inverse(i,Da),s=Fa,u=za;u[0].longitude=n.west,u[0].latitude=n.south,u[1].longitude=n.west,u[1].latitude=n.north,u[2].longitude=n.east,u[2].latitude=n.south;for(var c=Ba,l=0;l<3;l++)R.toCartesian(u[l],r,c),c=ye.multiplyByPointAsVector(a,c,c),s[l].x=c.x,s[l].y=c.y;var o=nn.fromAxisAngle(W.UNIT_Z,-t,qa),h=re.fromQuaternion(o,Ga),f=e.length,m=Number.POSITIVE_INFINITY,p=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,y=Number.NEGATIVE_INFINITY;for(l=0;l<f;l++)c=ye.multiplyByPointAsVector(a,e[l],c),c=re.multiplyByVector(h,c,c),m=Math.min(m,c.x),p=Math.min(p,c.y),d=Math.max(d,c.x),y=Math.max(y,c.y);var E=xa.fromRotation(t,Ha),_=Ua;_[0].x=m,_[0].y=p,_[1].x=m,_[1].y=y,_[2].x=d,_[2].y=p;var g=s[0],v=s[2].x-g.x,T=s[1].y-g.y;for(l=0;l<3;l++){var A=_[l];xa.multiplyByVector(E,A,A),A.x=(A.x-g.x)/v,A.y=(A.y-g.y)/T}i=_[0],n=_[1],o=_[2],t=new Array(6);return Y.pack(i,t),Y.pack(n,t,2),Y.pack(o,t,4),t};var Va=Object.freeze({NONE:0,TOP:1,ALL:2}),Ya={};function Xa(){this.high=W.clone(W.ZERO),this.low=W.clone(W.ZERO)}Ya.calculateACMR=function(e){var t=(e=b(e,b.EMPTY_OBJECT)).indices,r=e.maximumIndex,n=b(e.cacheSize,24),i=t.length;if(!H(r))for(var r=0,o=0,a=t[o];o<i;)r<a&&(r=a),a=t[++o];for(var s=[],u=0;u<r+1;u++)s[u]=0;for(var c=n+1,l=0;l<i;++l)c-s[t[l]]>n&&(s[t[l]]=c,++c);return(c-n+1)/(i/3)},Ya.tipsify=function(e){var t=(e=b(e,b.EMPTY_OBJECT)).indices,r=e.maximumIndex,n=b(e.cacheSize,24);function i(e,t,r,n,i,o,a){for(var s,u=-1,c=-1,l=0;l<r.length;){var h=r[l];n[h].numLiveTriangles&&(s=0,(c<(s=i-n[h].timeStamp+2*n[h].numLiveTriangles<=t?i-n[h].timeStamp:s)||-1===c)&&(c=s,u=h)),++l}return-1===u?function(e,t,r){for(;1<=t.length;){var n=t[t.length-1];if(t.splice(t.length-1,1),0<e[n].numLiveTriangles)return n}for(;p<r;){if(0<e[p].numLiveTriangles)return++p-1;++p}return-1}(n,o,a):u}var e=t.length,o=0,a=t[S=0],s=e;if(H(r))o=r+1;else{for(;S<s;)o<a&&(o=a),a=t[++S];if(-1===o)return 0;++o}for(var u=[],c=0;c<o;c++)u[c]={numLiveTriangles:0,timeStamp:0,vertexTriangles:[]};for(var l=S=0;S<s;)u[t[S]].vertexTriangles.push(l),++u[t[S]].numLiveTriangles,u[t[S+1]].vertexTriangles.push(l),++u[t[S+1]].numLiveTriangles,u[t[S+2]].vertexTriangles.push(l),++u[t[S+2]].numLiveTriangles,++l,S+=3;var h,f=0,m=n+1,p=1,d=[],y=[],E=0,_=[],g=e/3,v=[];for(c=0;c<g;c++)v[c]=!1;for(;-1!==f;){for(var T,d=[],A=(T=u[f]).vertexTriangles.length,R=0;R<A;++R)if(!v[l=T.vertexTriangles[R]]){v[l]=!0;for(var S=l+l+l,O=0;O<3;++O)h=t[S],d.push(h),y.push(h),_[E]=h,++E,--(h=u[h]).numLiveTriangles,m-h.timeStamp>n&&(h.timeStamp=m,++m),++S}f=i(0,n,d,u,m,y,o)}return _},Xa.encode=function(e,t){var r;return H(t)||(t={high:0,low:0}),0<=e?(r=65536*Math.floor(e/65536),t.high=r,t.low=e-r):(r=65536*Math.floor(-e/65536),t.high=-r,t.low=e+r),t};var ka={high:0,low:0};Xa.fromCartesian=function(e,t){var r=(t=!H(t)?new Xa:t).high,n=t.low;return Xa.encode(e.x,ka),r.x=ka.high,n.x=ka.low,Xa.encode(e.y,ka),r.y=ka.high,n.y=ka.low,Xa.encode(e.z,ka),r.z=ka.high,n.z=ka.low,t};var Za=new Xa;Xa.writeElements=function(e,t,r){Xa.fromCartesian(e,Za);var n=Za.high,e=Za.low;t[r]=n.x,t[r+1]=n.y,t[r+2]=n.z,t[r+3]=e.x,t[r+4]=e.y,t[r+5]=e.z};var Ka={octEncodeInRange:function(e,t,r){var n;return r.x=e.x/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),r.y=e.y/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),e.z<0&&(n=r.x,e=r.y,r.x=(1-Math.abs(e))*j.signNotZero(n),r.y=(1-Math.abs(n))*j.signNotZero(e)),r.x=j.toSNorm(r.x,t),r.y=j.toSNorm(r.y,t),r},octEncode:function(e,t){return Ka.octEncodeInRange(e,255,t)}},Ja=new Y,Qa=new Uint8Array(1);function $a(e){return Qa[0]=e,Qa[0]}Ka.octEncodeToCartesian4=function(e,t){return Ka.octEncodeInRange(e,65535,Ja),t.x=$a(Ja.x*(1/256)),t.y=$a(Ja.x),t.z=$a(Ja.y*(1/256)),t.w=$a(Ja.y),t},Ka.octDecodeInRange=function(e,t,r,n){return n.x=j.fromSNorm(e,r),n.y=j.fromSNorm(t,r),n.z=1-(Math.abs(n.x)+Math.abs(n.y)),n.z<0&&(r=n.x,n.x=(1-Math.abs(n.y))*j.signNotZero(r),n.y=(1-Math.abs(r))*j.signNotZero(n.y)),W.normalize(n,n)},Ka.octDecode=function(e,t,r){return Ka.octDecodeInRange(e,t,255,r)},Ka.octDecodeFromCartesian4=function(e,t){var r=e.x,n=e.y,i=e.z,e=e.w;return Ka.octDecodeInRange(256*r+n,256*i+e,65535,t)},Ka.octPackFloat=function(e){return 256*e.x+e.y};var es=new Y;function ts(e){return e>>1^-(1&e)}Ka.octEncodeFloat=function(e){return Ka.octEncode(e,es),Ka.octPackFloat(es)},Ka.octDecodeFloat=function(e,t){var r=e/256,e=Math.floor(r);return Ka.octDecode(e,256*(r-e),t)},Ka.octPack=function(e,t,r,n){e=Ka.octEncodeFloat(e),t=Ka.octEncodeFloat(t),r=Ka.octEncode(r,es);return n.x=65536*r.x+e,n.y=65536*r.y+t,n},Ka.octUnpack=function(e,t,r,n){var i=e.x/65536,o=Math.floor(i),a=65536*(i-o),i=e.y/65536,e=Math.floor(i),i=65536*(i-e);Ka.octDecodeFloat(a,t),Ka.octDecodeFloat(i,r),Ka.octDecode(o,e,n)},Ka.compressTextureCoordinates=function(e){return 4096*(4095*e.x|0)+(4095*e.y|0)},Ka.decompressTextureCoordinates=function(e,t){var r=Math.floor(e/4096);return t.x=r/4095,t.y=(e-4096*r)/4095,t},Ka.zigZagDeltaDecode=function(e,t,r){for(var n=e.length,i=0,o=0,a=0,s=0;s<n;++s)i+=ts(e[s]),o+=ts(t[s]),e[s]=i,t[s]=o,H(r)&&(a+=ts(r[s]),r[s]=a)};var rs=new W,ns=new W,is=new W;function os(e,t,r,n,i){var o,a,s,u,c,l,h;if(H(i)||(i=new W),H(t.z)){if(W.equalsEpsilon(e,t,j.EPSILON14))return W.clone(W.UNIT_X,i);if(W.equalsEpsilon(e,r,j.EPSILON14))return W.clone(W.UNIT_Y,i);if(W.equalsEpsilon(e,n,j.EPSILON14))return W.clone(W.UNIT_Z,i);o=W.subtract(r,t,rs),a=W.subtract(n,t,ns),s=W.subtract(e,t,is),u=W.dot(o,o),f=W.dot(o,a),c=W.dot(o,s),l=W.dot(a,a),h=W.dot(a,s)}else{if(Y.equalsEpsilon(e,t,j.EPSILON14))return W.clone(W.UNIT_X,i);if(Y.equalsEpsilon(e,r,j.EPSILON14))return W.clone(W.UNIT_Y,i);if(Y.equalsEpsilon(e,n,j.EPSILON14))return W.clone(W.UNIT_Z,i);o=Y.subtract(r,t,rs),a=Y.subtract(n,t,ns),s=Y.subtract(e,t,is),u=Y.dot(o,o),f=Y.dot(o,a),c=Y.dot(o,s),l=Y.dot(a,a),h=Y.dot(a,s)}i.y=l*c-f*h,i.z=u*h-f*c;var f=u*l-f*f;return 0!==i.y&&(i.y/=f),0!==i.z&&(i.z/=f),i.x=1-i.y-i.z,i}var as={UNSIGNED_BYTE:pt.UNSIGNED_BYTE,UNSIGNED_SHORT:pt.UNSIGNED_SHORT,UNSIGNED_INT:pt.UNSIGNED_INT,getSizeInBytes:function(e){switch(e){case as.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case as.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case as.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT}},fromSizeInBytes:function(e){switch(e){case 2:return as.UNSIGNED_SHORT;case 4:return as.UNSIGNED_INT;case 1:return as.UNSIGNED_BYTE}},validate:function(e){return H(e)&&(e===as.UNSIGNED_BYTE||e===as.UNSIGNED_SHORT||e===as.UNSIGNED_INT)},createTypedArray:function(e,t){return new(e>=j.SIXTY_FOUR_KILOBYTES?Uint32Array:Uint16Array)(t)},createTypedArrayFromArrayBuffer:function(e,t,r,n){return new(e>=j.SIXTY_FOUR_KILOBYTES?Uint32Array:Uint16Array)(t,r,n)}},ss=Object.freeze(as),us={};function cs(e,t,r,n,i){e[t++]=r,e[t++]=n,e[t++]=n,e[t++]=i,e[t++]=i,e[t]=r}function ls(e){var t,r,n={};for(t in e)e.hasOwnProperty(t)&&H(e[t])&&H(e[t].values)&&(r=e[t],n[t]=new ja({componentDatatype:r.componentDatatype,componentsPerAttribute:r.componentsPerAttribute,normalize:r.normalize,values:[]}));return n}us.toWireframe=function(e){var t=e.indices;if(H(t)){switch(e.primitiveType){case Ma.TRIANGLES:e.indices=function(e){for(var t=e.length,r=ss.createTypedArray(t,t/3*6),n=0,i=0;i<t;i+=3,n+=6)cs(r,n,e[i],e[i+1],e[i+2]);return r}(t);break;case Ma.TRIANGLE_STRIP:e.indices=function(e){var t=e.length;if(3<=t){var r=ss.createTypedArray(t,6*(t-2));cs(r,0,e[0],e[1],e[2]);for(var n=6,i=3;i<t;++i,n+=6)cs(r,n,e[i-1],e[i],e[i-2]);return r}return new Uint16Array}(t);break;case Ma.TRIANGLE_FAN:e.indices=function(e){if(0<e.length){for(var t=e.length-1,r=ss.createTypedArray(t,6*(t-1)),n=e[0],i=0,o=1;o<t;++o,i+=6)cs(r,i,n,e[o],e[o+1]);return r}return new Uint16Array}(t)}e.primitiveType=Ma.LINES}return e},us.createLineSegmentsForVectors=function(e,t,r){t=b(t,"normal"),r=b(r,1e4);for(var n,i=e.attributes.position.values,o=e.attributes[t].values,a=i.length,s=new Float64Array(2*a),u=0,c=0;c<a;c+=3)s[u++]=i[c],s[u++]=i[c+1],s[u++]=i[c+2],s[u++]=i[c]+o[c]*r,s[u++]=i[c+1]+o[c+1]*r,s[u++]=i[c+2]+o[c+2]*r;e=e.boundingSphere;return H(e)&&(n=new Me(e.center,e.radius+r)),new Ca({attributes:{position:new ja({componentDatatype:yt.DOUBLE,componentsPerAttribute:3,values:s})},primitiveType:Ma.LINES,boundingSphere:n})},us.createAttributeLocations=function(e){for(var t,r=["position","positionHigh","positionLow","position3DHigh","position3DLow","position2DHigh","position2DLow","pickColor","normal","st","tangent","bitangent","extrudeDirection","compressedAttributes"],n=e.attributes,i={},o=0,a=r.length,s=0;s<a;++s){var u=r[s];H(n[u])&&(i[u]=o++)}for(t in n)n.hasOwnProperty(t)&&!H(i[t])&&(i[t]=o++);return i},us.reorderForPreVertexCache=function(e){var t=Ca.computeNumberOfVertices(e),r=e.indices;if(H(r)){for(var n=new Int32Array(t),i=0;i<t;i++)n[i]=-1;for(var o,a=r,s=a.length,u=ss.createTypedArray(t,s),c=0,l=0,h=0;c<s;)-1!==(o=n[a[c]])?u[l]=o:(n[o=a[c]]=h,u[l]=h,++h),++c,++l;e.indices=u;var f,m=e.attributes;for(f in m)if(m.hasOwnProperty(f)&&H(m[f])&&H(m[f].values)){for(var p=m[f],d=p.values,y=0,E=p.componentsPerAttribute,_=yt.createTypedArray(p.componentDatatype,h*E);y<t;){var g=n[y];if(-1!==g)for(var v=0;v<E;v++)_[E*g+v]=d[E*y+v];++y}p.values=_}}return e},us.reorderForPostVertexCache=function(e,t){var r=e.indices;if(e.primitiveType===Ma.TRIANGLES&&H(r)){for(var n=r.length,i=0,o=0;o<n;o++)r[o]>i&&(i=r[o]);e.indices=Ya.tipsify({indices:r,maximumIndex:i,cacheSize:t})}return e},us.fitToUnsignedShortIndices=function(e){var t=[],r=Ca.computeNumberOfVertices(e);if(H(e.indices)&&r>=j.SIXTY_FOUR_KILOBYTES){var n,i=[],o=[],a=0,s=ls(e.attributes),u=e.indices,c=u.length;e.primitiveType===Ma.TRIANGLES?n=3:e.primitiveType===Ma.LINES?n=2:e.primitiveType===Ma.POINTS&&(n=1);for(var l=0;l<c;l+=n){for(var h=0;h<n;++h){var f=u[l+h],m=i[f];H(m)||(m=a++,i[f]=m,function(e,t,r){for(var n in t)if(t.hasOwnProperty(n)&&H(t[n])&&H(t[n].values))for(var i=t[n],o=0;o<i.componentsPerAttribute;++o)e[n].values.push(i.values[r*i.componentsPerAttribute+o])}(s,e.attributes,f)),o.push(m)}a+n>=j.SIXTY_FOUR_KILOBYTES&&(t.push(new Ca({attributes:s,indices:o,primitiveType:e.primitiveType,boundingSphere:e.boundingSphere,boundingSphereCV:e.boundingSphereCV})),i=[],o=[],a=0,s=ls(e.attributes))}0!==o.length&&t.push(new Ca({attributes:s,indices:o,primitiveType:e.primitiveType,boundingSphere:e.boundingSphere,boundingSphereCV:e.boundingSphereCV}))}else t.push(e);return t};var hs=new W,fs=new R;us.projectTo2D=function(e,t,r,n,i){for(var o=e.attributes[t],a=(i=H(i)?i:new F).ellipsoid,s=o.values,u=new Float64Array(s.length),c=0,l=0;l<s.length;l+=3){var h=W.fromArray(s,l,hs),h=a.cartesianToCartographic(h,fs),h=i.project(h,hs);u[c++]=h.x,u[c++]=h.y,u[c++]=h.z}return e.attributes[r]=o,e.attributes[n]=new ja({componentDatatype:yt.DOUBLE,componentsPerAttribute:3,values:u}),delete e.attributes[t],e};var ms={high:0,low:0};us.encodeAttribute=function(e,t,r,n){for(var i=e.attributes[t],o=i.values,a=o.length,s=new Float32Array(a),u=new Float32Array(a),c=0;c<a;++c)Xa.encode(o[c],ms),s[c]=ms.high,u[c]=ms.low;i=i.componentsPerAttribute;return e.attributes[r]=new ja({componentDatatype:yt.FLOAT,componentsPerAttribute:i,values:s}),e.attributes[n]=new ja({componentDatatype:yt.FLOAT,componentsPerAttribute:i,values:u}),delete e.attributes[t],e};var ps=new W;function ds(e,t){if(H(t))for(var r=t.values,n=r.length,i=0;i<n;i+=3)W.unpack(r,i,ps),ye.multiplyByPoint(e,ps,ps),W.pack(ps,r,i)}function ys(e,t){if(H(t))for(var r=t.values,n=r.length,i=0;i<n;i+=3)W.unpack(r,i,ps),re.multiplyByVector(e,ps,ps),ps=W.normalize(ps,ps),W.pack(ps,r,i)}var Es=new ye,_s=new re;us.transformToWorldCoordinates=function(e){var t=e.modelMatrix;if(ye.equals(t,ye.IDENTITY))return e;var r=e.geometry.attributes;ds(t,r.position),ds(t,r.prevPosition),ds(t,r.nextPosition),(H(r.normal)||H(r.tangent)||H(r.bitangent))&&(ye.inverse(t,Es),ye.transpose(Es,Es),ye.getMatrix3(Es,_s),ys(_s,r.normal),ys(_s,r.tangent),ys(_s,r.bitangent));r=e.geometry.boundingSphere;return H(r)&&(e.geometry.boundingSphere=Me.transform(r,t,r)),e.modelMatrix=ye.clone(ye.IDENTITY),e};var gs=new W;function vs(e,t){var r,n,i=e.length;e[0].modelMatrix;var o,a,s,u=H(e[0][t].indices),c=e[0][t].primitiveType,l=function(e,t){var r,n=e.length,i={},o=e[0][t].attributes;for(r in o)if(o.hasOwnProperty(r)&&H(o[r])&&H(o[r].values)){for(var a=o[r],s=a.values.length,u=!0,c=1;c<n;++c){var l=e[c][t].attributes[r];if(!H(l)||a.componentDatatype!==l.componentDatatype||a.componentsPerAttribute!==l.componentsPerAttribute||a.normalize!==l.normalize){u=!1;break}s+=l.values.length}u&&(i[r]=new ja({componentDatatype:a.componentDatatype,componentsPerAttribute:a.componentsPerAttribute,normalize:a.normalize,values:yt.createTypedArray(a.componentDatatype,s)}))}return i}(e,t);for(r in l)if(l.hasOwnProperty(r))for(o=l[r].values,f=g=0;f<i;++f)for(s=(a=e[f][t].attributes[r].values).length,n=0;n<s;++n)o[g++]=a[n];if(u){for(var h=0,f=0;f<i;++f)h+=e[f][t].indices.length;var m=Ca.computeNumberOfVertices(new Ca({attributes:l,primitiveType:Ma.POINTS})),p=ss.createTypedArray(m,h),d=0,y=0;for(f=0;f<i;++f){for(var E=e[f][t].indices,_=E.length,g=0;g<_;++g)p[d++]=y+E[g];y+=Ca.computeNumberOfVertices(e[f][t])}m=p}var v=new W,T=0;for(f=0;f<i;++f){if(!H(A=e[f][t].boundingSphere)){v=void 0;break}W.add(A.center,v,v)}if(H(v))for(W.divideByScalar(v,i,v),f=0;f<i;++f){var A=e[f][t].boundingSphere,R=W.magnitude(W.subtract(A.center,v,gs))+A.radius;T<R&&(T=R)}return new Ca({attributes:l,indices:m,primitiveType:c,boundingSphere:H(v)?new Me(v,T):void 0})}us.combineInstances=function(e){for(var t=[],r=[],n=e.length,i=0;i<n;++i){var o=e[i];H(o.geometry)?t.push(o):H(o.westHemisphereGeometry)&&H(o.eastHemisphereGeometry)&&r.push(o)}var a=[];return 0<t.length&&a.push(vs(t,"geometry")),0<r.length&&(a.push(vs(r,"westHemisphereGeometry")),a.push(vs(r,"eastHemisphereGeometry"))),a};var Ts=new W,As=new W,Rs=new W,Ss=new W;us.computeNormal=function(e){for(var t=e.indices,r=e.attributes,n=r.position.values,i=r.position.values.length/3,o=t.length,a=new Array(i),s=new Array(o/3),u=new Array(o),c=0;c<i;c++)a[c]={indexOffset:0,count:0,currentCount:0};var l=0;for(c=0;c<o;c+=3){var h=t[c],f=t[c+1],m=t[c+2],p=3*h,d=3*f,y=3*m;As.x=n[p],As.y=n[1+p],As.z=n[2+p],Rs.x=n[d],Rs.y=n[1+d],Rs.z=n[2+d],Ss.x=n[y],Ss.y=n[1+y],Ss.z=n[2+y],a[h].count++,a[f].count++,a[m].count++,W.subtract(Rs,As,Rs),W.subtract(Ss,As,Ss),s[l]=W.cross(Rs,Ss,new W),l++}var E,_=0;for(c=0;c<i;c++)a[c].indexOffset+=_,_+=a[c].count;for(c=l=0;c<o;c+=3)u[(E=a[t[c]]).indexOffset+E.currentCount]=l,E.currentCount++,u[(E=a[t[c+1]]).indexOffset+E.currentCount]=l,E.currentCount++,u[(E=a[t[c+2]]).indexOffset+E.currentCount]=l,E.currentCount++,l++;var g=new Float32Array(3*i);for(c=0;c<i;c++){var v=3*c;if(E=a[c],W.clone(W.ZERO,Ts),0<E.count){for(l=0;l<E.count;l++)W.add(Ts,s[u[E.indexOffset+l]],Ts);W.equalsEpsilon(W.ZERO,Ts,j.EPSILON10)&&W.clone(s[u[E.indexOffset]],Ts)}W.equalsEpsilon(W.ZERO,Ts,j.EPSILON10)&&(Ts.z=1),W.normalize(Ts,Ts),g[v]=Ts.x,g[1+v]=Ts.y,g[2+v]=Ts.z}return e.attributes.normal=new ja({componentDatatype:yt.FLOAT,componentsPerAttribute:3,values:g}),e};var Os=new W,xs=new W,Is=new W;us.computeTangentAndBitangent=function(e){e.attributes;for(var t=e.indices,r=e.attributes.position.values,n=e.attributes.normal.values,i=e.attributes.st.values,o=e.attributes.position.values.length/3,a=t.length,s=new Array(3*o),u=0;u<s.length;u++)s[u]=0;for(u=0;u<a;u+=3){var c,l=t[u],h=t[u+1],f=t[u+2],m=3*h,p=3*f,d=2*l,y=2*h,E=2*f,_=r[c=3*l],g=r[c+1],h=r[c+2],f=i[d],l=i[1+d],d=i[1+y]-l,l=i[1+E]-l,f=1/((i[y]-f)*l-(i[E]-f)*d),_=(l*(r[m]-_)-d*(r[p]-_))*f,g=(l*(r[m+1]-g)-d*(r[p+1]-g))*f,f=(l*(r[m+2]-h)-d*(r[p+2]-h))*f;s[c]+=_,s[c+1]+=g,s[c+2]+=f,s[m]+=_,s[m+1]+=g,s[m+2]+=f,s[p]+=_,s[p+1]+=g,s[p+2]+=f}var v=new Float32Array(3*o),T=new Float32Array(3*o);for(u=0;u<o;u++){m=(c=3*u)+1,p=c+2;var A=W.fromArray(n,c,Os),R=W.fromArray(s,c,Is),S=W.dot(A,R);W.multiplyByScalar(A,S,xs),W.normalize(W.subtract(R,xs,R),R),v[c]=R.x,v[m]=R.y,v[p]=R.z,W.normalize(W.cross(A,R,R),R),T[c]=R.x,T[m]=R.y,T[p]=R.z}return e.attributes.tangent=new ja({componentDatatype:yt.FLOAT,componentsPerAttribute:3,values:v}),e.attributes.bitangent=new ja({componentDatatype:yt.FLOAT,componentsPerAttribute:3,values:T}),e};var ws=new Y,Ns=new W,bs=new W,Ms=new W,Cs=new Y;function Ps(e){switch(e.primitiveType){case Ma.TRIANGLE_FAN:return function(e){var t=Ca.computeNumberOfVertices(e),r=ss.createTypedArray(t,3*(t-2));r[0]=1,r[1]=0,r[2]=2;for(var n=3,i=3;i<t;++i)r[n++]=i-1,r[n++]=0,r[n++]=i;return e.indices=r,e.primitiveType=Ma.TRIANGLES,e}(e);case Ma.TRIANGLE_STRIP:return function(e){var t=Ca.computeNumberOfVertices(e),r=ss.createTypedArray(t,3*(t-2));r[0]=0,r[1]=1,r[2]=2,3<t&&(r[3]=0,r[4]=2,r[5]=3);for(var n=6,i=3;i<t-1;i+=2)r[n++]=i,r[n++]=i-1,r[n++]=i+1,i+2<t&&(r[n++]=i,r[n++]=i+1,r[n++]=i+2);return e.indices=r,e.primitiveType=Ma.TRIANGLES,e}(e);case Ma.TRIANGLES:return function(e){if(H(e.indices))return e;for(var t=Ca.computeNumberOfVertices(e),r=ss.createTypedArray(t,t),n=0;n<t;++n)r[n]=n;return e.indices=r,e}(e);case Ma.LINE_STRIP:return function(e){var t=Ca.computeNumberOfVertices(e),r=ss.createTypedArray(t,2*(t-1));r[0]=0,r[1]=1;for(var n=2,i=2;i<t;++i)r[n++]=i-1,r[n++]=i;return e.indices=r,e.primitiveType=Ma.LINES,e}(e);case Ma.LINE_LOOP:return function(e){var t=Ca.computeNumberOfVertices(e),r=ss.createTypedArray(t,2*t);r[0]=0,r[1]=1;for(var n=2,i=2;i<t;++i)r[n++]=i-1,r[n++]=i;return r[n++]=t-1,r[n]=0,e.indices=r,e.primitiveType=Ma.LINES,e}(e);case Ma.LINES:return function(e){if(H(e.indices))return e;for(var t=Ca.computeNumberOfVertices(e),r=ss.createTypedArray(t,t),n=0;n<t;++n)r[n]=n;return e.indices=r,e}(e)}return e}function Ls(e,t){Math.abs(e.y)<j.EPSILON6&&(e.y=t?-j.EPSILON6:j.EPSILON6)}us.compressVertices=function(e){var t=e.attributes.extrudeDirection;if(H(t)){for(var r=t.values,n=r.length/3,i=new Float32Array(2*n),o=0,a=0;a<n;++a)W.fromArray(r,3*a,Ns),W.equals(Ns,W.ZERO)?o+=2:(Cs=Ka.octEncodeInRange(Ns,65535,Cs),i[o++]=Cs.x,i[o++]=Cs.y);return e.attributes.compressedAttributes=new ja({componentDatatype:yt.FLOAT,componentsPerAttribute:2,values:i}),delete e.attributes.extrudeDirection,e}var s=e.attributes.normal,u=e.attributes.st,c=H(s),l=H(u);if(!c&&!l)return e;var h,f,m,p,d=e.attributes.tangent,t=e.attributes.bitangent,y=H(d),E=H(t);c&&(h=s.values),l&&(f=u.values),y&&(m=d.values),E&&(p=t.values);d=n=(c?h:f).length/(c?3:2),t=l&&c?2:1;d*=t+=y||E?1:0;var _=new Float32Array(d),g=0;for(a=0;a<n;++a){l&&(Y.fromArray(f,2*a,ws),_[g++]=Ka.compressTextureCoordinates(ws));var v=3*a;c&&H(m)&&H(p)?(W.fromArray(h,v,Ns),W.fromArray(m,v,bs),W.fromArray(p,v,Ms),Ka.octPack(Ns,bs,Ms,ws),_[g++]=ws.x,_[g++]=ws.y):(c&&(W.fromArray(h,v,Ns),_[g++]=Ka.octEncodeFloat(Ns)),y&&(W.fromArray(m,v,Ns),_[g++]=Ka.octEncodeFloat(Ns)),E&&(W.fromArray(p,v,Ns),_[g++]=Ka.octEncodeFloat(Ns)))}return e.attributes.compressedAttributes=new ja({componentDatatype:yt.FLOAT,componentsPerAttribute:t,values:_}),c&&delete e.attributes.normal,l&&delete e.attributes.st,E&&delete e.attributes.bitangent,y&&delete e.attributes.tangent,e};var Ds=new W;function zs(e,t,r,n){W.add(e,W.multiplyByScalar(W.subtract(t,e,Ds),e.y/(e.y-t.y),Ds),r),W.clone(r,n),Ls(r,!0),Ls(n,!1)}var Fs=new W,Us=new W,Bs=new W,qs=new W,Gs={positions:new Array(7),indices:new Array(9)};function Hs(e,t,r){if(!(0<=e.x||0<=t.x||0<=r.x)){!function(e,t,r){if(0!==e.y&&0!==t.y&&0!==r.y)return Ls(e,e.y<0),Ls(t,t.y<0),Ls(r,r.y<0);var n=Math.abs(e.y),i=Math.abs(t.y),o=Math.abs(r.y),i=i<n?o<n?j.sign(e.y):j.sign(r.y):o<i?j.sign(t.y):j.sign(r.y);Ls(e,i=i<0),Ls(t,i),Ls(r,i)}(e,t,r);var n=e.y<0,i=t.y<0,o=r.y<0,a=0;a+=n?1:0,a+=i?1:0;var s=Gs.indices;1==(a+=o?1:0)?(s[1]=3,s[2]=4,s[5]=6,s[7]=6,s[8]=5,n?(zs(e,t,Fs,Bs),zs(e,r,Us,qs),s[0]=0,s[3]=1,s[4]=2,s[6]=1):i?(zs(t,r,Fs,Bs),zs(t,e,Us,qs),s[0]=1,s[3]=2,s[4]=0,s[6]=2):o&&(zs(r,e,Fs,Bs),zs(r,t,Us,qs),s[0]=2,s[3]=0,s[4]=1,s[6]=0)):2==a&&(s[2]=4,s[4]=4,s[5]=3,s[7]=5,s[8]=6,n?i?o||(zs(r,e,Fs,Bs),zs(r,t,Us,qs),s[0]=0,s[1]=1,s[3]=0,s[6]=2):(zs(t,r,Fs,Bs),zs(t,e,Us,qs),s[0]=2,s[1]=0,s[3]=2,s[6]=1):(zs(e,t,Fs,Bs),zs(e,r,Us,qs),s[0]=1,s[1]=2,s[3]=1,s[6]=0));s=Gs.positions;return s[0]=e,s[1]=t,s[2]=r,s.length=3,1!=a&&2!=a||(s[3]=Fs,s[4]=Us,s[5]=Bs,s[6]=qs,s.length=7),Gs}}function js(e,t){var r=e.attributes;if(0!==r.position.values.length){for(var n in r)r.hasOwnProperty(n)&&H(r[n])&&H(r[n].values)&&((n=r[n]).values=yt.createTypedArray(n.componentDatatype,n.values));var i=Ca.computeNumberOfVertices(e);return e.indices=ss.createTypedArray(i,e.indices),t&&(e.boundingSphere=Me.fromVertices(r.position.values)),e}}function Ws(e){var t,r,n=e.attributes,i={};for(t in n)n.hasOwnProperty(t)&&H(n[t])&&H(n[t].values)&&(r=n[t],i[t]=new ja({componentDatatype:r.componentDatatype,componentsPerAttribute:r.componentsPerAttribute,normalize:r.normalize,values:[]}));return new Ca({attributes:i,indices:[],primitiveType:e.primitiveType})}function Vs(e,t,r){var n=H(e.geometry.boundingSphere);t=js(t,n),H(r=js(r,n))&&!H(t)?e.geometry=r:!H(r)&&H(t)?e.geometry=t:(e.westHemisphereGeometry=t,e.eastHemisphereGeometry=r,e.geometry=void 0)}function Ys(u,c){var l=new u,h=new u,f=new u;return function(e,t,r,n,i,o,a,s){e=u.fromArray(i,e*c,l),t=u.fromArray(i,t*c,h),r=u.fromArray(i,r*c,f);u.multiplyByScalar(e,n.x,e),u.multiplyByScalar(t,n.y,t),u.multiplyByScalar(r,n.z,r);e=u.add(e,t,e);u.add(e,r,e),s&&u.normalize(e,e),u.pack(e,o,a*c)}}var Xs=Ys(he,4),ks=Ys(W,3),Zs=Ys(Y,2),Ks=function(e,t,r,n,i,o,a){e=i[e]*n.x,t=i[t]*n.y,n=i[r]*n.z;o[a]=e+t+n>j.EPSILON6?1:0},Js=new W,Qs=new W,$s=new W,eu=new W;function tu(e,t,r,n,i,o,a,s,u,c,l,h,f,m,p,d){if(H(o)||H(a)||H(s)||H(u)||H(c)||0!==m){var y,E=os(n,W.fromArray(i,3*e,Js),W.fromArray(i,3*t,Qs),W.fromArray(i,3*r,$s),eu);if(H(o)&&ks(e,t,r,E,o,h.normal.values,d,!0),H(c)&&(i=W.fromArray(c,3*e,Js),o=W.fromArray(c,3*t,Qs),c=W.fromArray(c,3*r,$s),W.multiplyByScalar(i,E.x,i),W.multiplyByScalar(o,E.y,o),W.multiplyByScalar(c,E.z,c),W.equals(i,W.ZERO)&&W.equals(o,W.ZERO)&&W.equals(c,W.ZERO)?((y=Js).x=0,y.y=0,y.z=0):(y=W.add(i,o,i),W.add(y,c,y),W.normalize(y,y)),W.pack(y,h.extrudeDirection.values,3*d)),H(l)&&Ks(e,t,r,E,l,h.applyOffset.values,d),H(a)&&ks(e,t,r,E,a,h.tangent.values,d,!0),H(s)&&ks(e,t,r,E,s,h.bitangent.values,d,!0),H(u)&&Zs(e,t,r,E,u,h.st.values,d),0<m)for(var _=0;_<m;_++){var g=f[_];!function(e,t,r,n,i,o,a){var s=o.componentsPerAttribute,u=o.values,c=a.values;switch(s){case 4:Xs(e,t,r,n,u,c,i,!1);break;case 3:ks(e,t,r,n,u,c,i,!1);break;case 2:Zs(e,t,r,n,u,c,i,!1);break;default:c[i]=u[e]*n.x+u[t]*n.y+u[r]*n.z}}(e,t,r,E,d,p[g],h[g])}}}function ru(e,t,r,n,i,o){var a=e.position.values.length/3;if(-1===i)return e.position.values.push(o.x,o.y,o.z),t.push(a),a;n=n[i],i=r[n];return-1===i?(r[n]=a,e.position.values.push(o.x,o.y,o.z),t.push(a),a):(t.push(i),i)}var nu={position:!0,normal:!0,bitangent:!0,tangent:!0,st:!0,extrudeDirection:!0,applyOffset:!0};function iu(e){var t,r=e.geometry,n=r.attributes,i=n.position.values,o=H(n.normal)?n.normal.values:void 0,a=H(n.bitangent)?n.bitangent.values:void 0,s=H(n.tangent)?n.tangent.values:void 0,u=H(n.st)?n.st.values:void 0,c=H(n.extrudeDirection)?n.extrudeDirection.values:void 0,l=H(n.applyOffset)?n.applyOffset.values:void 0,h=r.indices,f=[];for(t in n)n.hasOwnProperty(t)&&!nu[t]&&H(n[t])&&f.push(t);var m,p,d=f.length,y=Ws(r),E=Ws(r),_=[];_.length=i.length/3;var g=[];for(g.length=i.length/3,T=0;T<_.length;++T)_[T]=-1,g[T]=-1;for(var v=h.length,T=0;T<v;T+=3){var A=h[T],R=h[T+1],S=h[T+2],O=W.fromArray(i,3*A),x=W.fromArray(i,3*R),I=W.fromArray(i,3*S),w=Hs(O,x,I);if(H(w)&&3<w.positions.length)for(var N=w.positions,b=w.indices,M=b.length,C=0;C<M;++C){var P=b[C],L=N[P],D=L.y<0?(m=E.attributes,p=E.indices,_):(m=y.attributes,p=y.indices,g);tu(A,R,S,L,i,o,s,a,u,c,l,m,f,d,n,ru(m,p,D,h,P<3?T+P:-1,L))}else H(w)&&(O=w.positions[0],x=w.positions[1],I=w.positions[2]),D=O.y<0?(m=E.attributes,p=E.indices,_):(m=y.attributes,p=y.indices,g),tu(A,R,S,O,i,o,s,a,u,c,l,m,f,d,n,ru(m,p,D,h,T,O)),tu(A,R,S,x,i,o,s,a,u,c,l,m,f,d,n,ru(m,p,D,h,T+1,x)),tu(A,R,S,I,i,o,s,a,u,c,l,m,f,d,n,ru(m,p,D,h,T+2,I))}Vs(e,E,y)}var ou=sr.fromPointNormal(W.ZERO,W.UNIT_Y),au=new W,su=new W;function uu(e,t,r,n,i,o,a){H(a)&&(n=W.fromArray(n,3*e,Js),W.equalsEpsilon(n,r,j.EPSILON10)?o.applyOffset.values[i]=a[e]:o.applyOffset.values[i]=a[t])}function cu(e){var t,r=e.geometry,n=r.attributes,i=n.position.values,o=H(n.applyOffset)?n.applyOffset.values:void 0,a=r.indices,s=Ws(r),u=Ws(r),c=a.length,l=[];l.length=i.length/3;var h=[];for(h.length=i.length/3,t=0;t<l.length;++t)l[t]=-1,h[t]=-1;for(t=0;t<c;t+=2){var f=a[t],m=a[t+1],p=W.fromArray(i,3*f,Js),d=W.fromArray(i,3*m,Qs);Math.abs(p.y)<j.EPSILON6&&(p.y<0?p.y=-j.EPSILON6:p.y=j.EPSILON6),Math.abs(d.y)<j.EPSILON6&&(d.y<0?d.y=-j.EPSILON6:d.y=j.EPSILON6);var y,E,_,g,v=s.attributes,T=s.indices,A=h,R=u.attributes,S=u.indices,O=l,x=Ct.lineSegmentPlane(p,d,ou,$s);H(x)?(y=W.multiplyByScalar(W.UNIT_Y,5*j.EPSILON9,au),p.y<0&&(W.negate(y,y),v=u.attributes,T=u.indices,A=l,R=s.attributes,S=s.indices,O=h),E=W.add(x,y,su),uu(f,m,p,i,ru(v,T,A,a,t,p),v,o),uu(f,m,E,i,ru(v,T,A,a,-1,E),v,o),W.negate(y,y),W.add(x,y,E),uu(f,m,E,i,ru(R,S,O,a,-1,E),R,o),uu(f,m,d,i,ru(R,S,O,a,t+1,d),R,o)):(R=p.y<0?(_=u.attributes,g=u.indices,l):(_=s.attributes,g=s.indices,h),uu(f,m,p,i,ru(_,g,R,a,t,p),_,o),uu(f,m,d,i,ru(_,g,R,a,t+1,d),_,o))}Vs(e,u,s)}var lu=new Y,hu=new Y,fu=new W,mu=new W,pu=new W,du=new W,yu=new W,Eu=new W,_u=new he;function gu(e){for(var e=e.attributes,t=e.position.values,r=e.prevPosition.values,n=e.nextPosition.values,i=t.length,o=0;o<i;o+=3){var a,s=W.unpack(t,o,fu);0<s.x||(a=W.unpack(r,o,mu),(s.y<0&&0<a.y||0<s.y&&a.y<0)&&(0<o-3?(r[o]=t[o-3],r[o+1]=t[o-2],r[o+2]=t[o-1]):W.pack(s,r,o)),a=W.unpack(n,o,pu),(s.y<0&&0<a.y||0<s.y&&a.y<0)&&(o+3<i?(n[o]=t[o+3],n[o+1]=t[o+4],n[o+2]=t[o+5]):W.pack(s,n,o)))}}var vu=5*j.EPSILON9,Tu=j.EPSILON6;us.splitLongitude=function(e){var t=e.geometry,r=t.boundingSphere;if(H(r)&&(0<r.center.x-r.radius||Me.intersectPlane(r,sr.ORIGIN_ZX_PLANE)!==k.INTERSECTING))return e;if(t.geometryType!==Na.NONE)switch(t.geometryType){case Na.POLYLINES:!function(e){for(var t=e.geometry,r=t.attributes,n=r.position.values,i=r.prevPosition.values,o=r.nextPosition.values,a=r.expandAndWidth.values,s=H(r.st)?r.st.values:void 0,u=H(r.color)?r.color.values:void 0,c=Ws(t),l=Ws(t),h=!1,f=n.length/3,m=0;m<f;m+=4){var p=m,d=m+2,y=W.fromArray(n,3*p,fu),E=W.fromArray(n,3*d,mu);if(Math.abs(y.y)<Tu)for(y.y=Tu*(E.y<0?-1:1),n[3*m+1]=y.y,n[3*(m+1)+1]=y.y,w=3*p;w<3*p+12;w+=3)i[w]=n[3*m],i[w+1]=n[3*m+1],i[w+2]=n[3*m+2];if(Math.abs(E.y)<Tu)for(E.y=Tu*(y.y<0?-1:1),n[3*(m+2)+1]=E.y,n[3*(m+3)+1]=E.y,w=3*p;w<3*p+12;w+=3)o[w]=n[3*(m+2)],o[w+1]=n[3*(m+2)+1],o[w+2]=n[3*(m+2)+2];var _=c.attributes,g=c.indices,v=l.attributes,T=l.indices,A=Ct.lineSegmentPlane(y,E,ou,du);if(H(A)){var h=!0,R=W.multiplyByScalar(W.UNIT_Y,vu,yu);y.y<0&&(W.negate(R,R),_=l.attributes,g=l.indices,v=c.attributes,T=c.indices);var S=W.add(A,R,Eu);_.position.values.push(y.x,y.y,y.z,y.x,y.y,y.z),_.position.values.push(S.x,S.y,S.z),_.position.values.push(S.x,S.y,S.z),_.prevPosition.values.push(i[3*p],i[3*p+1],i[3*p+2]),_.prevPosition.values.push(i[3*p+3],i[3*p+4],i[3*p+5]),_.prevPosition.values.push(y.x,y.y,y.z,y.x,y.y,y.z),_.nextPosition.values.push(S.x,S.y,S.z),_.nextPosition.values.push(S.x,S.y,S.z),_.nextPosition.values.push(S.x,S.y,S.z),_.nextPosition.values.push(S.x,S.y,S.z),W.negate(R,R),W.add(A,R,S),v.position.values.push(S.x,S.y,S.z),v.position.values.push(S.x,S.y,S.z),v.position.values.push(E.x,E.y,E.z,E.x,E.y,E.z),v.prevPosition.values.push(S.x,S.y,S.z),v.prevPosition.values.push(S.x,S.y,S.z),v.prevPosition.values.push(S.x,S.y,S.z),v.prevPosition.values.push(S.x,S.y,S.z),v.nextPosition.values.push(E.x,E.y,E.z,E.x,E.y,E.z),v.nextPosition.values.push(o[3*d],o[3*d+1],o[3*d+2]),v.nextPosition.values.push(o[3*d+3],o[3*d+4],o[3*d+5]);var O=Y.fromArray(a,2*p,lu),x=Math.abs(O.y);_.expandAndWidth.values.push(-1,x,1,x),_.expandAndWidth.values.push(-1,-x,1,-x),v.expandAndWidth.values.push(-1,x,1,x),v.expandAndWidth.values.push(-1,-x,1,-x);R=W.magnitudeSquared(W.subtract(A,y,pu));if(R/=W.magnitudeSquared(W.subtract(E,y,pu)),H(u)){for(var S=he.fromArray(u,4*p,_u),I=he.fromArray(u,4*d,_u),O=j.lerp(S.x,I.x,R),x=j.lerp(S.y,I.y,R),A=j.lerp(S.z,I.z,R),I=j.lerp(S.w,I.w,R),w=4*p;w<4*p+8;++w)_.color.values.push(u[w]);for(_.color.values.push(O,x,A,I),_.color.values.push(O,x,A,I),v.color.values.push(O,x,A,I),v.color.values.push(O,x,A,I),w=4*d;w<4*d+8;++w)v.color.values.push(u[w])}if(H(s)){var I=Y.fromArray(s,2*p,lu),N=Y.fromArray(s,2*(m+3),hu),R=j.lerp(I.x,N.x,R);for(w=2*p;w<2*p+4;++w)_.st.values.push(s[w]);for(_.st.values.push(R,I.y),_.st.values.push(R,N.y),v.st.values.push(R,I.y),v.st.values.push(R,N.y),w=2*d;w<2*d+4;++w)v.st.values.push(s[w])}N=_.position.values.length/3-4,g.push(N,N+2,N+1),g.push(N+1,N+2,N+3),N=v.position.values.length/3-4,T.push(N,N+2,N+1),T.push(N+1,N+2,N+3)}else{var b,T=y.y<0?(b=l.attributes,l.indices):(b=c.attributes,c.indices);for(b.position.values.push(y.x,y.y,y.z),b.position.values.push(y.x,y.y,y.z),b.position.values.push(E.x,E.y,E.z),b.position.values.push(E.x,E.y,E.z),w=3*m;w<3*m+12;++w)b.prevPosition.values.push(i[w]),b.nextPosition.values.push(o[w]);for(w=2*m;w<2*m+8;++w)b.expandAndWidth.values.push(a[w]),H(s)&&b.st.values.push(s[w]);if(H(u))for(w=4*m;w<4*m+16;++w)b.color.values.push(u[w]);N=b.position.values.length/3-4,T.push(N,N+2,N+1),T.push(N+1,N+2,N+3)}}h&&(gu(l),gu(c)),Vs(e,l,c)}(e);break;case Na.TRIANGLES:iu(e);break;case Na.LINES:cu(e)}else Ps(t),t.primitiveType===Ma.TRIANGLES?iu(e):t.primitiveType===Ma.LINES&&cu(e);return e};var Au=j.EPSILON10;function Ru(e,t,r){if(H(e)){r=b(r,!1);var n,i,o,a=e.length;if(a<2)return e;for(n=1;n<a&&!t(i=e[n-1],o=e[n],Au);++n);if(n===a)return r&&t(e[0],e[e.length-1],Au)?e.slice(1):e;for(var s=e.slice(0,n);n<a;++n)t(i,o=e[n],Au)||(s.push(o),i=o);return r&&1<s.length&&t(s[0],s[s.length-1],Au)&&s.shift(),s}}function Su(e,t,r){if(0===e)return t*r;var n=e*e,i=n*n,o=i*n,a=o*n,s=a*n,e=s*n,r=r;return t*((1-n/4-3*i/64-5*o/256-175*a/16384-441*s/65536-4851*e/1048576)*r-(3*n/8+3*i/32+45*o/1024+105*a/4096+2205*s/131072+6237*e/524288)*Math.sin(2*r)+(15*i/256+45*o/1024+525*a/16384+1575*s/65536+155925*e/8388608)*Math.sin(4*r)-(35*o/3072+175*a/12288+3675*s/262144+13475*e/1048576)*Math.sin(6*r)+(315*a/131072+2205*s/524288+43659*e/8388608)*Math.sin(8*r)-(693*s/1310720+6237*e/5242880)*Math.sin(10*r)+1001*e/8388608*Math.sin(12*r))}function Ou(e,t){if(0===e)return Math.log(Math.tan(.5*(j.PI_OVER_TWO+t)));var r=e*Math.sin(t);return Math.log(Math.tan(.5*(j.PI_OVER_TWO+t)))-e/2*Math.log((1+r)/(1-r))}var xu=new W,Iu=new W;function wu(e,t,r,n){W.normalize(n.cartographicToCartesian(t,Iu),xu),W.normalize(n.cartographicToCartesian(r,Iu),Iu);var i,o,a=n.maximumRadius,s=n.minimumRadius,u=a*a;e._ellipticitySquared=(u-s*s)/u,e._ellipticity=Math.sqrt(e._ellipticitySquared),e._start=R.clone(t,e._start),e._start.height=0,e._end=R.clone(r,e._end),e._end.height=0,e._heading=(i=e,o=t.longitude,a=t.latitude,s=r.longitude,u=r.latitude,a=Ou(i._ellipticity,a),u=Ou(i._ellipticity,u),Math.atan2(j.negativePiToPi(s-o),u-a)),e._distance=(s=e,o=n.maximumRadius,u=n.minimumRadius,a=t.longitude,e=t.latitude,n=r.longitude,t=r.latitude,r=s._heading,n-=a,a=0,a=j.equalsEpsilon(Math.abs(r),j.PI_OVER_TWO,j.EPSILON8)?o===u?o*Math.cos(e)*j.negativePiToPi(n):(u=Math.sin(e),o*Math.cos(e)*j.negativePiToPi(n)/Math.sqrt(1-s._ellipticitySquared*u*u)):(e=Su(s._ellipticity,o,e),(Su(s._ellipticity,o,t)-e)/Math.cos(r)),Math.abs(a))}function Nu(e,t,r,n,i,o){var a,s,u,c=i*i;return u=Math.abs(j.PI_OVER_TWO-Math.abs(t))>j.EPSILON8?(a=function(e,t,r){var n=e/r;if(0===t)return n;var i=n*n,o=i*n,a=o*n,s=t*t,u=s*s,c=u*s,l=c*s,h=l*s,f=h*s,m=Math.sin(2*n),p=Math.cos(2*n),d=Math.sin(4*n),y=Math.cos(4*n),E=Math.sin(6*n),_=Math.cos(6*n),e=Math.sin(8*n),r=Math.cos(8*n),t=Math.sin(10*n);return n+n*s/4+7*n*u/64+15*n*c/256+579*n*l/16384+1515*n*h/65536+16837*n*f/1048576+(3*n*u/16+45*n*c/256-n*(32*i-561)*l/4096-n*(232*i-1677)*h/16384+n*(399985-90560*i+512*a)*f/5242880)*p+(21*n*c/256+483*n*l/4096-n*(224*i-1969)*h/16384-n*(33152*i-112599)*f/1048576)*y+(151*n*l/4096+4681*n*h/65536+1479*n*f/16384-453*o*f/32768)*_+(1097*n*h/65536+42783*n*f/1048576)*r+8011*n*f/1048576*Math.cos(10*n)+(3*s/8+3*u/16+213*c/2048-3*i*c/64+255*l/4096-33*i*l/512+20861*h/524288-33*i*h/512+a*h/1024+28273*f/1048576-471*i*f/8192+9*a*f/4096)*m+(21*u/256+21*c/256+533*l/8192-21*i*l/512+197*h/4096-315*i*h/4096+584039*f/16777216-12517*i*f/131072+7*a*f/2048)*d+(151*c/6144+151*l/4096+5019*h/131072-453*i*h/16384+26965*f/786432-8607*i*f/131072)*E+(1097*l/131072+1097*h/65536+225797*f/10485760-1097*i*f/65536)*e+(8011*h/2621440+8011*f/1048576)*t+293393*f/251658240*Math.sin(12*n)}(Su(i,n,e.latitude)+r*Math.cos(t),i,n),u=Ou(i,e.latitude),s=Ou(i,a),u=Math.tan(t)*(s-u),j.negativePiToPi(e.longitude+u)):(a=e.latitude,u=r/(0===i?n*Math.cos(e.latitude):(i=Math.sin(e.latitude),n*Math.cos(e.latitude)/Math.sqrt(1-c*i*i))),0<t?j.negativePiToPi(e.longitude+u):j.negativePiToPi(e.longitude-u)),H(o)?(o.longitude=u,o.latitude=a,o.height=0,o):new R(u,a,0)}function bu(e,t,r){r=b(r,S.WGS84);this._ellipsoid=r,this._start=new R,this._end=new R,this._heading=void 0,this._distance=void 0,this._ellipticity=void 0,this._ellipticitySquared=void 0,H(e)&&H(t)&&wu(this,e,t,r)}function Mu(e){e=b(e,b.EMPTY_OBJECT),this.position=e.position,this.normal=e.normal,this.st=e.st,this.bitangent=e.bitangent,this.tangent=e.tangent,this.color=e.color}Object.defineProperties(bu.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},heading:{get:function(){return this._heading}}}),bu.fromStartHeadingDistance=function(e,t,r,n,i){var o=b(n,S.WGS84),a=o.maximumRadius,s=o.minimumRadius,a=a*a,a=Math.sqrt((a-s*s)/a),a=Nu(e,t=j.negativePiToPi(t),r,o.maximumRadius,a);return!H(i)||H(n)&&!n.equals(i.ellipsoid)?new bu(e,a,o):(i.setEndPoints(e,a),i)},bu.prototype.setEndPoints=function(e,t){wu(this,e,t,this._ellipsoid)},bu.prototype.interpolateUsingFraction=function(e,t){return this.interpolateUsingSurfaceDistance(e*this._distance,t)},bu.prototype.interpolateUsingSurfaceDistance=function(e,t){return Nu(this._start,this._heading,e,this._ellipsoid.maximumRadius,this._ellipticity,t)},bu.prototype.findIntersectionWithLongitude=function(e,t){var r=this._ellipticity,n=this._heading,i=Math.abs(n),o=this._start;if(e=j.negativePiToPi(e),j.equalsEpsilon(Math.abs(e),Math.PI,j.EPSILON14)&&(e=j.sign(o.longitude)*Math.PI),H(t)||(t=new R),Math.abs(j.PI_OVER_TWO-i)<=j.EPSILON8)return t.longitude=e,t.latitude=o.latitude,t.height=0,t;if(j.equalsEpsilon(Math.abs(j.PI_OVER_TWO-i),j.PI_OVER_TWO,j.EPSILON8))return j.equalsEpsilon(e,o.longitude,j.EPSILON12)?void 0:(t.longitude=e,t.latitude=j.PI_OVER_TWO*j.sign(j.PI_OVER_TWO-n),t.height=0,t);var a=o.latitude,i=r*Math.sin(a),s=Math.tan(.5*(j.PI_OVER_TWO+a))*Math.exp((e-o.longitude)/Math.tan(n)),u=(1+i)/(1-i),c=o.latitude;do{var l=c,h=r*Math.sin(l),c=2*Math.atan(s*Math.pow((1+h)/(1-h)/u,r/2))-j.PI_OVER_TWO}while(!j.equalsEpsilon(c,l,j.EPSILON12));return t.longitude=e,t.latitude=c,t.height=0,t},bu.prototype.findIntersectionWithLatitude=function(e,t){var r=this._ellipticity,n=this._heading,i=this._start;if(!j.equalsEpsilon(Math.abs(n),j.PI_OVER_TWO,j.EPSILON8)){var o=Ou(r,i.latitude),r=Ou(r,e),o=Math.tan(n)*(r-o),o=j.negativePiToPi(i.longitude+o);return H(t)?(t.longitude=o,t.latitude=e,t.height=0,t):new R(o,e,0)}};var Cu={};function Pu(e,t,r,n,i){e[t++]=r,e[t++]=n,e[t++]=n,e[t++]=i,e[t++]=i,e[t]=r}function Lu(e){var t,r,n={};for(t in e)e.hasOwnProperty(t)&&H(e[t])&&H(e[t].values)&&(r=e[t],n[t]=new ja({componentDatatype:r.componentDatatype,componentsPerAttribute:r.componentsPerAttribute,normalize:r.normalize,values:[]}));return n}Cu.toWireframe=function(e){var t=e.indices;if(H(t)){switch(e.primitiveType){case Ma.TRIANGLES:e.indices=function(e){for(var t=e.length,r=ss.createTypedArray(t,t/3*6),n=0,i=0;i<t;i+=3,n+=6)Pu(r,n,e[i],e[i+1],e[i+2]);return r}(t);break;case Ma.TRIANGLE_STRIP:e.indices=function(e){var t=e.length;if(3<=t){var r=ss.createTypedArray(t,6*(t-2));Pu(r,0,e[0],e[1],e[2]);for(var n=6,i=3;i<t;++i,n+=6)Pu(r,n,e[i-1],e[i],e[i-2]);return r}return new Uint16Array}(t);break;case Ma.TRIANGLE_FAN:e.indices=function(e){if(0<e.length){for(var t=e.length-1,r=ss.createTypedArray(t,6*(t-1)),n=e[0],i=0,o=1;o<t;++o,i+=6)Pu(r,i,n,e[o],e[o+1]);return r}return new Uint16Array}(t)}e.primitiveType=Ma.LINES}return e},Cu.createLineSegmentsForVectors=function(e,t,r){t=b(t,"normal"),r=b(r,1e4);for(var n,i=e.attributes.position.values,o=e.attributes[t].values,a=i.length,s=new Float64Array(2*a),u=0,c=0;c<a;c+=3)s[u++]=i[c],s[u++]=i[c+1],s[u++]=i[c+2],s[u++]=i[c]+o[c]*r,s[u++]=i[c+1]+o[c+1]*r,s[u++]=i[c+2]+o[c+2]*r;e=e.boundingSphere;return H(e)&&(n=new Me(e.center,e.radius+r)),new Ca({attributes:{position:new ja({componentDatatype:yt.DOUBLE,componentsPerAttribute:3,values:s})},primitiveType:Ma.LINES,boundingSphere:n})},Cu.createAttributeLocations=function(e){for(var t,r=["position","positionHigh","positionLow","position3DHigh","position3DLow","position2DHigh","position2DLow","pickColor","normal","st","tangent","bitangent","extrudeDirection","compressedAttributes"],n=e.attributes,i={},o=0,a=r.length,s=0;s<a;++s){var u=r[s];H(n[u])&&(i[u]=o++)}for(t in n)n.hasOwnProperty(t)&&!H(i[t])&&(i[t]=o++);return i},Cu.reorderForPreVertexCache=function(e){var t=Ca.computeNumberOfVertices(e),r=e.indices;if(H(r)){for(var n=new Int32Array(t),i=0;i<t;i++)n[i]=-1;for(var o,a=r,s=a.length,u=ss.createTypedArray(t,s),c=0,l=0,h=0;c<s;)-1!==(o=n[a[c]])?u[l]=o:(n[o=a[c]]=h,u[l]=h,++h),++c,++l;e.indices=u;var f,m=e.attributes;for(f in m)if(m.hasOwnProperty(f)&&H(m[f])&&H(m[f].values)){for(var p=m[f],d=p.values,y=0,E=p.componentsPerAttribute,_=yt.createTypedArray(p.componentDatatype,h*E);y<t;){var g=n[y];if(-1!==g)for(var v=0;v<E;v++)_[E*g+v]=d[E*y+v];++y}p.values=_}}return e},Cu.reorderForPostVertexCache=function(e,t){var r=e.indices;if(e.primitiveType===Ma.TRIANGLES&&H(r)){for(var n=r.length,i=0,o=0;o<n;o++)r[o]>i&&(i=r[o]);e.indices=Ya.tipsify({indices:r,maximumIndex:i,cacheSize:t})}return e},Cu.fitToUnsignedShortIndices=function(e){var t=[],r=Ca.computeNumberOfVertices(e);if(H(e.indices)&&r>=j.SIXTY_FOUR_KILOBYTES){var n,i=[],o=[],a=0,s=Lu(e.attributes),u=e.indices,c=u.length;e.primitiveType===Ma.TRIANGLES?n=3:e.primitiveType===Ma.LINES?n=2:e.primitiveType===Ma.POINTS&&(n=1);for(var l=0;l<c;l+=n){for(var h=0;h<n;++h){var f=u[l+h],m=i[f];H(m)||(m=a++,i[f]=m,function(e,t,r){for(var n in t)if(t.hasOwnProperty(n)&&H(t[n])&&H(t[n].values))for(var i=t[n],o=0;o<i.componentsPerAttribute;++o)e[n].values.push(i.values[r*i.componentsPerAttribute+o])}(s,e.attributes,f)),o.push(m)}a+n>=j.SIXTY_FOUR_KILOBYTES&&(t.push(new Ca({attributes:s,indices:o,primitiveType:e.primitiveType,boundingSphere:e.boundingSphere,boundingSphereCV:e.boundingSphereCV})),i=[],o=[],a=0,s=Lu(e.attributes))}0!==o.length&&t.push(new Ca({attributes:s,indices:o,primitiveType:e.primitiveType,boundingSphere:e.boundingSphere,boundingSphereCV:e.boundingSphereCV}))}else t.push(e);return t};var Du=new W,zu=new R;Cu.projectTo2D=function(e,t,r,n,i){for(var o=e.attributes[t],a=(i=H(i)?i:new F).ellipsoid,s=o.values,u=new Float64Array(s.length),c=0,l=0;l<s.length;l+=3){var h=W.fromArray(s,l,Du),h=a.cartesianToCartographic(h,zu),h=i.project(h,Du);u[c++]=h.x,u[c++]=h.y,u[c++]=h.z}return e.attributes[r]=o,e.attributes[n]=new ja({componentDatatype:yt.DOUBLE,componentsPerAttribute:3,values:u}),delete e.attributes[t],e};var Fu={high:0,low:0};Cu.encodeAttribute=function(e,t,r,n){for(var i=e.attributes[t],o=i.values,a=o.length,s=new Float32Array(a),u=new Float32Array(a),c=0;c<a;++c)Xa.encode(o[c],Fu),s[c]=Fu.high,u[c]=Fu.low;i=i.componentsPerAttribute;return e.attributes[r]=new ja({componentDatatype:yt.FLOAT,componentsPerAttribute:i,values:s}),e.attributes[n]=new ja({componentDatatype:yt.FLOAT,componentsPerAttribute:i,values:u}),delete e.attributes[t],e};var Uu=new W;function Bu(e,t){if(H(t))for(var r=t.values,n=r.length,i=0;i<n;i+=3)W.unpack(r,i,Uu),ye.multiplyByPoint(e,Uu,Uu),W.pack(Uu,r,i)}function qu(e,t){if(H(t))for(var r=t.values,n=r.length,i=0;i<n;i+=3)W.unpack(r,i,Uu),re.multiplyByVector(e,Uu,Uu),Uu=W.normalize(Uu,Uu),W.pack(Uu,r,i)}var Gu=new ye,Hu=new re;Cu.transformToWorldCoordinates=function(e){var t=e.modelMatrix;if(ye.equals(t,ye.IDENTITY))return e;var r=e.geometry.attributes;Bu(t,r.position),Bu(t,r.prevPosition),Bu(t,r.nextPosition),(H(r.normal)||H(r.tangent)||H(r.bitangent))&&(ye.inverse(t,Gu),ye.transpose(Gu,Gu),ye.getMatrix3(Gu,Hu),qu(Hu,r.normal),qu(Hu,r.tangent),qu(Hu,r.bitangent));r=e.geometry.boundingSphere;return H(r)&&(e.geometry.boundingSphere=Me.transform(r,t,r)),e.modelMatrix=ye.clone(ye.IDENTITY),e};var ju=new W;function Wu(e,t){var r,n,i=e.length;e[0].modelMatrix;var o,a,s,u=H(e[0][t].indices),c=e[0][t].primitiveType,l=function(e,t){var r,n=e.length,i={},o=e[0][t].attributes;for(r in o)if(o.hasOwnProperty(r)&&H(o[r])&&H(o[r].values)){for(var a=o[r],s=a.values.length,u=!0,c=1;c<n;++c){var l=e[c][t].attributes[r];if(!H(l)||a.componentDatatype!==l.componentDatatype||a.componentsPerAttribute!==l.componentsPerAttribute||a.normalize!==l.normalize){u=!1;break}s+=l.values.length}u&&(i[r]=new ja({componentDatatype:a.componentDatatype,componentsPerAttribute:a.componentsPerAttribute,normalize:a.normalize,values:yt.createTypedArray(a.componentDatatype,s)}))}return i}(e,t);for(r in l)if(l.hasOwnProperty(r))for(o=l[r].values,f=g=0;f<i;++f)for(s=(a=e[f][t].attributes[r].values).length,n=0;n<s;++n)o[g++]=a[n];if(u){for(var h=0,f=0;f<i;++f)h+=e[f][t].indices.length;var m=Ca.computeNumberOfVertices(new Ca({attributes:l,primitiveType:Ma.POINTS})),p=ss.createTypedArray(m,h),d=0,y=0;for(f=0;f<i;++f){for(var E=e[f][t].indices,_=E.length,g=0;g<_;++g)p[d++]=y+E[g];y+=Ca.computeNumberOfVertices(e[f][t])}m=p}var v=new W,T=0;for(f=0;f<i;++f){if(!H(A=e[f][t].boundingSphere)){v=void 0;break}W.add(A.center,v,v)}if(H(v))for(W.divideByScalar(v,i,v),f=0;f<i;++f){var A=e[f][t].boundingSphere,R=W.magnitude(W.subtract(A.center,v,ju))+A.radius;T<R&&(T=R)}return new Ca({attributes:l,indices:m,primitiveType:c,boundingSphere:H(v)?new Me(v,T):void 0})}Cu.combineInstances=function(e){for(var t=[],r=[],n=e.length,i=0;i<n;++i){var o=e[i];H(o.geometry)?t.push(o):H(o.westHemisphereGeometry)&&H(o.eastHemisphereGeometry)&&r.push(o)}var a=[];return 0<t.length&&a.push(Wu(t,"geometry")),0<r.length&&(a.push(Wu(r,"westHemisphereGeometry")),a.push(Wu(r,"eastHemisphereGeometry"))),a};var Vu=new W,Yu=new W,Xu=new W,ku=new W;Cu.computeNormal=function(e){for(var t=e.indices,r=e.attributes,n=r.position.values,i=r.position.values.length/3,o=t.length,a=new Array(i),s=new Array(o/3),u=new Array(o),c=0;c<i;c++)a[c]={indexOffset:0,count:0,currentCount:0};var l=0;for(c=0;c<o;c+=3){var h=t[c],f=t[c+1],m=t[c+2],p=3*h,d=3*f,y=3*m;Yu.x=n[p],Yu.y=n[1+p],Yu.z=n[2+p],Xu.x=n[d],Xu.y=n[1+d],Xu.z=n[2+d],ku.x=n[y],ku.y=n[1+y],ku.z=n[2+y],a[h].count++,a[f].count++,a[m].count++,W.subtract(Xu,Yu,Xu),W.subtract(ku,Yu,ku),s[l]=W.cross(Xu,ku,new W),l++}var E,_=0;for(c=0;c<i;c++)a[c].indexOffset+=_,_+=a[c].count;for(c=l=0;c<o;c+=3)u[(E=a[t[c]]).indexOffset+E.currentCount]=l,E.currentCount++,u[(E=a[t[c+1]]).indexOffset+E.currentCount]=l,E.currentCount++,u[(E=a[t[c+2]]).indexOffset+E.currentCount]=l,E.currentCount++,l++;var g=new Float32Array(3*i);for(c=0;c<i;c++){var v=3*c;if(E=a[c],W.clone(W.ZERO,Vu),0<E.count){for(l=0;l<E.count;l++)W.add(Vu,s[u[E.indexOffset+l]],Vu);W.equalsEpsilon(W.ZERO,Vu,j.EPSILON10)&&W.clone(s[u[E.indexOffset]],Vu)}W.equalsEpsilon(W.ZERO,Vu,j.EPSILON10)&&(Vu.z=1),W.normalize(Vu,Vu),g[v]=Vu.x,g[1+v]=Vu.y,g[2+v]=Vu.z}return e.attributes.normal=new ja({componentDatatype:yt.FLOAT,componentsPerAttribute:3,values:g}),e};var Zu=new W,Ku=new W,Ju=new W;Cu.computeTangentAndBitangent=function(e){e.attributes;for(var t=e.indices,r=e.attributes.position.values,n=e.attributes.normal.values,i=e.attributes.st.values,o=e.attributes.position.values.length/3,a=t.length,s=new Array(3*o),u=0;u<s.length;u++)s[u]=0;for(u=0;u<a;u+=3){var c,l=t[u],h=t[u+1],f=t[u+2],m=3*h,p=3*f,d=2*l,y=2*h,E=2*f,_=r[c=3*l],g=r[c+1],h=r[c+2],f=i[d],l=i[1+d],d=i[1+y]-l,l=i[1+E]-l,f=1/((i[y]-f)*l-(i[E]-f)*d),_=(l*(r[m]-_)-d*(r[p]-_))*f,g=(l*(r[m+1]-g)-d*(r[p+1]-g))*f,f=(l*(r[m+2]-h)-d*(r[p+2]-h))*f;s[c]+=_,s[c+1]+=g,s[c+2]+=f,s[m]+=_,s[m+1]+=g,s[m+2]+=f,s[p]+=_,s[p+1]+=g,s[p+2]+=f}var v=new Float32Array(3*o),T=new Float32Array(3*o);for(u=0;u<o;u++){m=(c=3*u)+1,p=c+2;var A=W.fromArray(n,c,Zu),R=W.fromArray(s,c,Ju),S=W.dot(A,R);W.multiplyByScalar(A,S,Ku),W.normalize(W.subtract(R,Ku,R),R),v[c]=R.x,v[m]=R.y,v[p]=R.z,W.normalize(W.cross(A,R,R),R),T[c]=R.x,T[m]=R.y,T[p]=R.z}return e.attributes.tangent=new ja({componentDatatype:yt.FLOAT,componentsPerAttribute:3,values:v}),e.attributes.bitangent=new ja({componentDatatype:yt.FLOAT,componentsPerAttribute:3,values:T}),e};var Qu=new Y,$u=new W,ec=new W,tc=new W,rc=new Y;function nc(e){switch(e.primitiveType){case Ma.TRIANGLE_FAN:return function(e){var t=Ca.computeNumberOfVertices(e),r=ss.createTypedArray(t,3*(t-2));r[0]=1,r[1]=0,r[2]=2;for(var n=3,i=3;i<t;++i)r[n++]=i-1,r[n++]=0,r[n++]=i;return e.indices=r,e.primitiveType=Ma.TRIANGLES,e}(e);case Ma.TRIANGLE_STRIP:return function(e){var t=Ca.computeNumberOfVertices(e),r=ss.createTypedArray(t,3*(t-2));r[0]=0,r[1]=1,r[2]=2,3<t&&(r[3]=0,r[4]=2,r[5]=3);for(var n=6,i=3;i<t-1;i+=2)r[n++]=i,r[n++]=i-1,r[n++]=i+1,i+2<t&&(r[n++]=i,r[n++]=i+1,r[n++]=i+2);return e.indices=r,e.primitiveType=Ma.TRIANGLES,e}(e);case Ma.TRIANGLES:return function(e){if(H(e.indices))return e;for(var t=Ca.computeNumberOfVertices(e),r=ss.createTypedArray(t,t),n=0;n<t;++n)r[n]=n;return e.indices=r,e}(e);case Ma.LINE_STRIP:return function(e){var t=Ca.computeNumberOfVertices(e),r=ss.createTypedArray(t,2*(t-1));r[0]=0,r[1]=1;for(var n=2,i=2;i<t;++i)r[n++]=i-1,r[n++]=i;return e.indices=r,e.primitiveType=Ma.LINES,e}(e);case Ma.LINE_LOOP:return function(e){var t=Ca.computeNumberOfVertices(e),r=ss.createTypedArray(t,2*t);r[0]=0,r[1]=1;for(var n=2,i=2;i<t;++i)r[n++]=i-1,r[n++]=i;return r[n++]=t-1,r[n]=0,e.indices=r,e.primitiveType=Ma.LINES,e}(e);case Ma.LINES:return function(e){if(H(e.indices))return e;for(var t=Ca.computeNumberOfVertices(e),r=ss.createTypedArray(t,t),n=0;n<t;++n)r[n]=n;return e.indices=r,e}(e)}return e}function ic(e,t){Math.abs(e.y)<j.EPSILON6&&(e.y=t?-j.EPSILON6:j.EPSILON6)}Cu.compressVertices=function(e){var t=e.attributes.extrudeDirection;if(H(t)){for(var r=t.values,n=r.length/3,i=new Float32Array(2*n),o=0,a=0;a<n;++a)W.fromArray(r,3*a,$u),W.equals($u,W.ZERO)?o+=2:(rc=Ka.octEncodeInRange($u,65535,rc),i[o++]=rc.x,i[o++]=rc.y);return e.attributes.compressedAttributes=new ja({componentDatatype:yt.FLOAT,componentsPerAttribute:2,values:i}),delete e.attributes.extrudeDirection,e}var s=e.attributes.normal,u=e.attributes.st,c=H(s),l=H(u);if(!c&&!l)return e;var h,f,m,p,d=e.attributes.tangent,t=e.attributes.bitangent,y=H(d),E=H(t);c&&(h=s.values),l&&(f=u.values),y&&(m=d.values),E&&(p=t.values);d=n=(c?h:f).length/(c?3:2),t=l&&c?2:1;d*=t+=y||E?1:0;var _=new Float32Array(d),g=0;for(a=0;a<n;++a){l&&(Y.fromArray(f,2*a,Qu),_[g++]=Ka.compressTextureCoordinates(Qu));var v=3*a;c&&H(m)&&H(p)?(W.fromArray(h,v,$u),W.fromArray(m,v,ec),W.fromArray(p,v,tc),Ka.octPack($u,ec,tc,Qu),_[g++]=Qu.x,_[g++]=Qu.y):(c&&(W.fromArray(h,v,$u),_[g++]=Ka.octEncodeFloat($u)),y&&(W.fromArray(m,v,$u),_[g++]=Ka.octEncodeFloat($u)),E&&(W.fromArray(p,v,$u),_[g++]=Ka.octEncodeFloat($u)))}return e.attributes.compressedAttributes=new ja({componentDatatype:yt.FLOAT,componentsPerAttribute:t,values:_}),c&&delete e.attributes.normal,l&&delete e.attributes.st,E&&delete e.attributes.bitangent,y&&delete e.attributes.tangent,e};var oc=new W;function ac(e,t,r,n){W.add(e,W.multiplyByScalar(W.subtract(t,e,oc),e.y/(e.y-t.y),oc),r),W.clone(r,n),ic(r,!0),ic(n,!1)}var sc=new W,uc=new W,cc=new W,lc=new W,hc={positions:new Array(7),indices:new Array(9)};function fc(e,t,r){if(!(0<=e.x||0<=t.x||0<=r.x)){!function(e,t,r){if(0!==e.y&&0!==t.y&&0!==r.y)return ic(e,e.y<0),ic(t,t.y<0),ic(r,r.y<0);var n=Math.abs(e.y),i=Math.abs(t.y),o=Math.abs(r.y),i=i<n?o<n?j.sign(e.y):j.sign(r.y):o<i?j.sign(t.y):j.sign(r.y);ic(e,i=i<0),ic(t,i),ic(r,i)}(e,t,r);var n=e.y<0,i=t.y<0,o=r.y<0,a=0;a+=n?1:0,a+=i?1:0;var s=hc.indices;1==(a+=o?1:0)?(s[1]=3,s[2]=4,s[5]=6,s[7]=6,s[8]=5,n?(ac(e,t,sc,cc),ac(e,r,uc,lc),s[0]=0,s[3]=1,s[4]=2,s[6]=1):i?(ac(t,r,sc,cc),ac(t,e,uc,lc),s[0]=1,s[3]=2,s[4]=0,s[6]=2):o&&(ac(r,e,sc,cc),ac(r,t,uc,lc),s[0]=2,s[3]=0,s[4]=1,s[6]=0)):2==a&&(s[2]=4,s[4]=4,s[5]=3,s[7]=5,s[8]=6,n?i?o||(ac(r,e,sc,cc),ac(r,t,uc,lc),s[0]=0,s[1]=1,s[3]=0,s[6]=2):(ac(t,r,sc,cc),ac(t,e,uc,lc),s[0]=2,s[1]=0,s[3]=2,s[6]=1):(ac(e,t,sc,cc),ac(e,r,uc,lc),s[0]=1,s[1]=2,s[3]=1,s[6]=0));s=hc.positions;return s[0]=e,s[1]=t,s[2]=r,s.length=3,1!=a&&2!=a||(s[3]=sc,s[4]=uc,s[5]=cc,s[6]=lc,s.length=7),hc}}function mc(e,t){var r=e.attributes;if(0!==r.position.values.length){for(var n in r)r.hasOwnProperty(n)&&H(r[n])&&H(r[n].values)&&((n=r[n]).values=yt.createTypedArray(n.componentDatatype,n.values));var i=Ca.computeNumberOfVertices(e);return e.indices=ss.createTypedArray(i,e.indices),t&&(e.boundingSphere=Me.fromVertices(r.position.values)),e}}function pc(e){var t,r,n=e.attributes,i={};for(t in n)n.hasOwnProperty(t)&&H(n[t])&&H(n[t].values)&&(r=n[t],i[t]=new ja({componentDatatype:r.componentDatatype,componentsPerAttribute:r.componentsPerAttribute,normalize:r.normalize,values:[]}));return new Ca({attributes:i,indices:[],primitiveType:e.primitiveType})}function dc(e,t,r){var n=H(e.geometry.boundingSphere);t=mc(t,n),H(r=mc(r,n))&&!H(t)?e.geometry=r:!H(r)&&H(t)?e.geometry=t:(e.westHemisphereGeometry=t,e.eastHemisphereGeometry=r,e.geometry=void 0)}function yc(u,c){var l=new u,h=new u,f=new u;return function(e,t,r,n,i,o,a,s){e=u.fromArray(i,e*c,l),t=u.fromArray(i,t*c,h),r=u.fromArray(i,r*c,f);u.multiplyByScalar(e,n.x,e),u.multiplyByScalar(t,n.y,t),u.multiplyByScalar(r,n.z,r);e=u.add(e,t,e);u.add(e,r,e),s&&u.normalize(e,e),u.pack(e,o,a*c)}}var Ec=yc(he,4),_c=yc(W,3),gc=yc(Y,2),vc=function(e,t,r,n,i,o,a){e=i[e]*n.x,t=i[t]*n.y,n=i[r]*n.z;o[a]=e+t+n>j.EPSILON6?1:0},Tc=new W,Ac=new W,Rc=new W,Sc=new W;function Oc(e,t,r,n,i,o,a,s,u,c,l,h,f,m,p,d){if(H(o)||H(a)||H(s)||H(u)||H(c)||0!==m){var y,E=os(n,W.fromArray(i,3*e,Tc),W.fromArray(i,3*t,Ac),W.fromArray(i,3*r,Rc),Sc);if(H(o)&&_c(e,t,r,E,o,h.normal.values,d,!0),H(c)&&(i=W.fromArray(c,3*e,Tc),o=W.fromArray(c,3*t,Ac),c=W.fromArray(c,3*r,Rc),W.multiplyByScalar(i,E.x,i),W.multiplyByScalar(o,E.y,o),W.multiplyByScalar(c,E.z,c),W.equals(i,W.ZERO)&&W.equals(o,W.ZERO)&&W.equals(c,W.ZERO)?((y=Tc).x=0,y.y=0,y.z=0):(y=W.add(i,o,i),W.add(y,c,y),W.normalize(y,y)),W.pack(y,h.extrudeDirection.values,3*d)),H(l)&&vc(e,t,r,E,l,h.applyOffset.values,d),H(a)&&_c(e,t,r,E,a,h.tangent.values,d,!0),H(s)&&_c(e,t,r,E,s,h.bitangent.values,d,!0),H(u)&&gc(e,t,r,E,u,h.st.values,d),0<m)for(var _=0;_<m;_++){var g=f[_];!function(e,t,r,n,i,o,a){var s=o.componentsPerAttribute,u=o.values,c=a.values;switch(s){case 4:Ec(e,t,r,n,u,c,i,!1);break;case 3:_c(e,t,r,n,u,c,i,!1);break;case 2:gc(e,t,r,n,u,c,i,!1);break;default:c[i]=u[e]*n.x+u[t]*n.y+u[r]*n.z}}(e,t,r,E,d,p[g],h[g])}}}function xc(e,t,r,n,i,o){var a=e.position.values.length/3;if(-1===i)return e.position.values.push(o.x,o.y,o.z),t.push(a),a;n=n[i],i=r[n];return-1===i?(r[n]=a,e.position.values.push(o.x,o.y,o.z),t.push(a),a):(t.push(i),i)}var Ic={position:!0,normal:!0,bitangent:!0,tangent:!0,st:!0,extrudeDirection:!0,applyOffset:!0};function wc(e){var t,r=e.geometry,n=r.attributes,i=n.position.values,o=H(n.normal)?n.normal.values:void 0,a=H(n.bitangent)?n.bitangent.values:void 0,s=H(n.tangent)?n.tangent.values:void 0,u=H(n.st)?n.st.values:void 0,c=H(n.extrudeDirection)?n.extrudeDirection.values:void 0,l=H(n.applyOffset)?n.applyOffset.values:void 0,h=r.indices,f=[];for(t in n)n.hasOwnProperty(t)&&!Ic[t]&&H(n[t])&&f.push(t);var m,p,d=f.length,y=pc(r),E=pc(r),_=[];_.length=i.length/3;var g=[];for(g.length=i.length/3,T=0;T<_.length;++T)_[T]=-1,g[T]=-1;for(var v=h.length,T=0;T<v;T+=3){var A=h[T],R=h[T+1],S=h[T+2],O=W.fromArray(i,3*A),x=W.fromArray(i,3*R),I=W.fromArray(i,3*S),w=fc(O,x,I);if(H(w)&&3<w.positions.length)for(var N=w.positions,b=w.indices,M=b.length,C=0;C<M;++C){var P=b[C],L=N[P],D=L.y<0?(m=E.attributes,p=E.indices,_):(m=y.attributes,p=y.indices,g);Oc(A,R,S,L,i,o,s,a,u,c,l,m,f,d,n,xc(m,p,D,h,P<3?T+P:-1,L))}else H(w)&&(O=w.positions[0],x=w.positions[1],I=w.positions[2]),D=O.y<0?(m=E.attributes,p=E.indices,_):(m=y.attributes,p=y.indices,g),Oc(A,R,S,O,i,o,s,a,u,c,l,m,f,d,n,xc(m,p,D,h,T,O)),Oc(A,R,S,x,i,o,s,a,u,c,l,m,f,d,n,xc(m,p,D,h,T+1,x)),Oc(A,R,S,I,i,o,s,a,u,c,l,m,f,d,n,xc(m,p,D,h,T+2,I))}dc(e,E,y)}var Nc=sr.fromPointNormal(W.ZERO,W.UNIT_Y),bc=new W,Mc=new W;function Cc(e,t,r,n,i,o,a){H(a)&&(n=W.fromArray(n,3*e,Tc),W.equalsEpsilon(n,r,j.EPSILON10)?o.applyOffset.values[i]=a[e]:o.applyOffset.values[i]=a[t])}function Pc(e){var t,r=e.geometry,n=r.attributes,i=n.position.values,o=H(n.applyOffset)?n.applyOffset.values:void 0,a=r.indices,s=pc(r),u=pc(r),c=a.length,l=[];l.length=i.length/3;var h=[];for(h.length=i.length/3,t=0;t<l.length;++t)l[t]=-1,h[t]=-1;for(t=0;t<c;t+=2){var f=a[t],m=a[t+1],p=W.fromArray(i,3*f,Tc),d=W.fromArray(i,3*m,Ac);Math.abs(p.y)<j.EPSILON6&&(p.y<0?p.y=-j.EPSILON6:p.y=j.EPSILON6),Math.abs(d.y)<j.EPSILON6&&(d.y<0?d.y=-j.EPSILON6:d.y=j.EPSILON6);var y,E,_,g,v=s.attributes,T=s.indices,A=h,R=u.attributes,S=u.indices,O=l,x=Ct.lineSegmentPlane(p,d,Nc,Rc);H(x)?(y=W.multiplyByScalar(W.UNIT_Y,5*j.EPSILON9,bc),p.y<0&&(W.negate(y,y),v=u.attributes,T=u.indices,A=l,R=s.attributes,S=s.indices,O=h),E=W.add(x,y,Mc),Cc(f,m,p,i,xc(v,T,A,a,t,p),v,o),Cc(f,m,E,i,xc(v,T,A,a,-1,E),v,o),W.negate(y,y),W.add(x,y,E),Cc(f,m,E,i,xc(R,S,O,a,-1,E),R,o),Cc(f,m,d,i,xc(R,S,O,a,t+1,d),R,o)):(R=p.y<0?(_=u.attributes,g=u.indices,l):(_=s.attributes,g=s.indices,h),Cc(f,m,p,i,xc(_,g,R,a,t,p),_,o),Cc(f,m,d,i,xc(_,g,R,a,t+1,d),_,o))}dc(e,u,s)}var Lc=new Y,Dc=new Y,zc=new W,Fc=new W,Uc=new W,Bc=new W,qc=new W,Gc=new W,Hc=new he;function jc(e){for(var e=e.attributes,t=e.position.values,r=e.prevPosition.values,n=e.nextPosition.values,i=t.length,o=0;o<i;o+=3){var a,s=W.unpack(t,o,zc);0<s.x||(a=W.unpack(r,o,Fc),(s.y<0&&0<a.y||0<s.y&&a.y<0)&&(0<o-3?(r[o]=t[o-3],r[o+1]=t[o-2],r[o+2]=t[o-1]):W.pack(s,r,o)),a=W.unpack(n,o,Uc),(s.y<0&&0<a.y||0<s.y&&a.y<0)&&(o+3<i?(n[o]=t[o+3],n[o+1]=t[o+4],n[o+2]=t[o+5]):W.pack(s,n,o)))}}var Wc=5*j.EPSILON9,Vc=j.EPSILON6;function Yc(e,t,r){r=r||2;var n,i,o,a,s,u=t&&t.length,c=u?t[0]*r:e.length,l=Xc(e,0,c,r,!0),h=[];if(!l||l.next===l.prev)return h;if(u&&(l=function(e,t,r,n){var i,o,a,s,u=[];for(i=0,o=t.length;i<o;i++)a=t[i]*n,s=i<o-1?t[i+1]*n:e.length,(s=Xc(e,a,s,n,!1))===s.next&&(s.steiner=!0),u.push(function(e){var t=e,r=e;for(;(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next,t!==e;);return r}(s));for(u.sort(Kc),i=0;i<u.length;i++)!function(e,t){(t=function(e,t){var r,n=t,i=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&a<s){if((a=s)===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}}while(n=n.next,n!==t);if(!r)return null;if(i===a)return r;var u,c=r,l=r.x,h=r.y,f=1/0;n=r;for(;i>=n.x&&n.x>=l&&i!==n.x&&Qc(o<h?i:a,o,l,h,o<h?a:i,o,n.x,n.y)&&(u=Math.abs(o-n.y)/(i-n.x),il(n,e)&&(u<f||u===f&&(n.x>r.x||n.x===r.x&&function(e,t){return $c(e.prev,e,t.prev)<0&&$c(t.next,e,e.next)<0}(r,n)))&&(r=n,f=u)),n=n.next,n!==c;);return r}(e,t))&&kc(e=ol(t,e),e.next)}(u[i],r),r=kc(r,r.next);return r}(e,t,l,r)),e.length>80*r){for(var f=n=e[0],m=i=e[1],p=r;p<c;p+=r)(o=e[p])<f&&(f=o),(a=e[p+1])<m&&(m=a),n<o&&(n=o),i<a&&(i=a);s=0!==(s=Math.max(n-f,i-m))?1/s:0}return Zc(l,h,r,f,m,s),h}function Xc(e,t,r,n,i){var o,a;if(i===0<cl(e,t,r,n))for(o=t;o<r;o+=n)a=al(o,e[o],e[o+1],a);else for(o=r-n;t<=o;o-=n)a=al(o,e[o],e[o+1],a);return a&&el(a,a.next)&&(sl(a),a=a.next),a}function kc(e,t){if(!e)return e;t=t||e;var r,n=e;do{if(r=!1,n.steiner||!el(n,n.next)&&0!==$c(n.prev,n,n.next))n=n.next;else{if(sl(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function Zc(e,t,r,n,i,o,a){if(e){!a&&o&&function(e,t,r,n){var i=e;for(;null===i.z&&(i.z=Jc(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next,i!==e;);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,o,a,s,u,c=1;do{for(r=e,o=e=null,a=0;r;){for(a++,n=r,t=s=0;t<c&&(s++,n=n.nextZ);t++);for(u=c;0<s||0<u&&n;)0!==s&&(0===u||!n||r.z<=n.z)?(r=(i=r).nextZ,s--):(n=(i=n).nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}}while(o.nextZ=null,c*=2,1<a)}(i)}(e,n,i,o);for(var s,u,c=e;e.prev!==e.next;)if(s=e.prev,u=e.next,o?function(e,t,r,n){var i=e.prev,o=e,a=e.next;if(0<=$c(i,o,a))return!1;var s=(i.x<o.x?i.x<a.x?i:a:o.x<a.x?o:a).x,u=(i.y<o.y?i.y<a.y?i:a:o.y<a.y?o:a).y,c=(i.x>o.x?i.x>a.x?i:a:o.x>a.x?o:a).x,l=(i.y>o.y?i.y>a.y?i:a:o.y>a.y?o:a).y,h=Jc(s,u,t,r,n),f=Jc(c,l,t,r,n),m=e.prevZ,p=e.nextZ;for(;m&&m.z>=h&&p&&p.z<=f;){if(m!==e.prev&&m!==e.next&&Qc(i.x,i.y,o.x,o.y,a.x,a.y,m.x,m.y)&&0<=$c(m.prev,m,m.next))return!1;if(m=m.prevZ,p!==e.prev&&p!==e.next&&Qc(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&0<=$c(p.prev,p,p.next))return!1;p=p.nextZ}for(;m&&m.z>=h;){if(m!==e.prev&&m!==e.next&&Qc(i.x,i.y,o.x,o.y,a.x,a.y,m.x,m.y)&&0<=$c(m.prev,m,m.next))return!1;m=m.prevZ}for(;p&&p.z<=f;){if(p!==e.prev&&p!==e.next&&Qc(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&0<=$c(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(e,n,i,o):function(e){var t=e.prev,r=e,n=e.next;if(0<=$c(t,r,n))return!1;var i=e.next.next;for(;i!==e.prev;){if(Qc(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&0<=$c(i.prev,i,i.next))return!1;i=i.next}return!0}(e))t.push(s.i/r),t.push(e.i/r),t.push(u.i/r),sl(e),e=u.next,c=u.next;else if((e=u)===c){a?1===a?Zc(e=function(e,t,r){var n=e;do{var i=n.prev,o=n.next.next}while(!el(i,o)&&tl(i,n,n.next,o)&&il(i,o)&&il(o,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(o.i/r),sl(n),sl(n.next),n=e=o),n=n.next,n!==e);return kc(n)}(kc(e),t,r),t,r,n,i,o,2):2===a&&function(e,t,r,n,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&function(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&tl(r,r.next,e,t))return!0}while(r=r.next,r!==e);return!1}(e,t)&&(il(e,t)&&il(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;for(;r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next,r!==e;);return n}(e,t)&&($c(e.prev,e,t.prev)||$c(e,t.prev,t))||el(e,t)&&0<$c(e.prev,e,e.next)&&0<$c(t.prev,t,t.next))}(a,s)){var u=ol(a,s);return a=kc(a,a.next),u=kc(u,u.next),Zc(a,t,r,n,i,o),Zc(u,t,r,n,i,o)}s=s.next}}while(a=a.next,a!==e)}(e,t,r,n,i,o):Zc(kc(e),t,r,n,i,o,1);break}}}function Kc(e,t){return e.x-t.x}function Jc(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Qc(e,t,r,n,i,o,a,s){return 0<=(i-a)*(t-s)-(e-a)*(o-s)&&0<=(e-a)*(n-s)-(r-a)*(t-s)&&0<=(r-a)*(o-s)-(i-a)*(n-s)}function $c(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function el(e,t){return e.x===t.x&&e.y===t.y}function tl(e,t,r,n){var i=nl($c(e,t,r)),o=nl($c(e,t,n)),a=nl($c(r,n,e)),s=nl($c(r,n,t));return i!==o&&a!==s||(0===i&&rl(e,r,t)||(0===o&&rl(e,n,t)||(0===a&&rl(r,e,n)||!(0!==s||!rl(r,t,n)))))}function rl(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function nl(e){return 0<e?1:e<0?-1:0}function il(e,t){return $c(e.prev,e,e.next)<0?0<=$c(e,t,e.next)&&0<=$c(e,e.prev,t):$c(e,t,e.prev)<0||$c(e,e.next,t)<0}function ol(e,t){var r=new ul(e.i,e.x,e.y),n=new ul(t.i,t.x,t.y),i=e.next,o=t.prev;return(e.next=t).prev=e,(r.next=i).prev=r,(n.next=r).prev=n,(o.next=n).prev=o,n}function al(e,t,r,n){r=new ul(e,t,r);return n?(r.next=n.next,(r.prev=n).next.prev=r,n.next=r):(r.prev=r).next=r,r}function sl(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ul(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function cl(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}Cu.splitLongitude=function(e){var t=e.geometry,r=t.boundingSphere;if(H(r)&&(0<r.center.x-r.radius||Me.intersectPlane(r,sr.ORIGIN_ZX_PLANE)!==k.INTERSECTING))return e;if(t.geometryType!==Na.NONE)switch(t.geometryType){case Na.POLYLINES:!function(e){for(var t=e.geometry,r=t.attributes,n=r.position.values,i=r.prevPosition.values,o=r.nextPosition.values,a=r.expandAndWidth.values,s=H(r.st)?r.st.values:void 0,u=H(r.color)?r.color.values:void 0,c=pc(t),l=pc(t),h=!1,f=n.length/3,m=0;m<f;m+=4){var p=m,d=m+2,y=W.fromArray(n,3*p,zc),E=W.fromArray(n,3*d,Fc);if(Math.abs(y.y)<Vc)for(y.y=Vc*(E.y<0?-1:1),n[3*m+1]=y.y,n[3*(m+1)+1]=y.y,w=3*p;w<3*p+12;w+=3)i[w]=n[3*m],i[w+1]=n[3*m+1],i[w+2]=n[3*m+2];if(Math.abs(E.y)<Vc)for(E.y=Vc*(y.y<0?-1:1),n[3*(m+2)+1]=E.y,n[3*(m+3)+1]=E.y,w=3*p;w<3*p+12;w+=3)o[w]=n[3*(m+2)],o[w+1]=n[3*(m+2)+1],o[w+2]=n[3*(m+2)+2];var _=c.attributes,g=c.indices,v=l.attributes,T=l.indices,A=Ct.lineSegmentPlane(y,E,Nc,Bc);if(H(A)){var h=!0,R=W.multiplyByScalar(W.UNIT_Y,Wc,qc);y.y<0&&(W.negate(R,R),_=l.attributes,g=l.indices,v=c.attributes,T=c.indices);var S=W.add(A,R,Gc);_.position.values.push(y.x,y.y,y.z,y.x,y.y,y.z),_.position.values.push(S.x,S.y,S.z),_.position.values.push(S.x,S.y,S.z),_.prevPosition.values.push(i[3*p],i[3*p+1],i[3*p+2]),_.prevPosition.values.push(i[3*p+3],i[3*p+4],i[3*p+5]),_.prevPosition.values.push(y.x,y.y,y.z,y.x,y.y,y.z),_.nextPosition.values.push(S.x,S.y,S.z),_.nextPosition.values.push(S.x,S.y,S.z),_.nextPosition.values.push(S.x,S.y,S.z),_.nextPosition.values.push(S.x,S.y,S.z),W.negate(R,R),W.add(A,R,S),v.position.values.push(S.x,S.y,S.z),v.position.values.push(S.x,S.y,S.z),v.position.values.push(E.x,E.y,E.z,E.x,E.y,E.z),v.prevPosition.values.push(S.x,S.y,S.z),v.prevPosition.values.push(S.x,S.y,S.z),v.prevPosition.values.push(S.x,S.y,S.z),v.prevPosition.values.push(S.x,S.y,S.z),v.nextPosition.values.push(E.x,E.y,E.z,E.x,E.y,E.z),v.nextPosition.values.push(o[3*d],o[3*d+1],o[3*d+2]),v.nextPosition.values.push(o[3*d+3],o[3*d+4],o[3*d+5]);var O=Y.fromArray(a,2*p,Lc),x=Math.abs(O.y);_.expandAndWidth.values.push(-1,x,1,x),_.expandAndWidth.values.push(-1,-x,1,-x),v.expandAndWidth.values.push(-1,x,1,x),v.expandAndWidth.values.push(-1,-x,1,-x);R=W.magnitudeSquared(W.subtract(A,y,Uc));if(R/=W.magnitudeSquared(W.subtract(E,y,Uc)),H(u)){for(var S=he.fromArray(u,4*p,Hc),I=he.fromArray(u,4*d,Hc),O=j.lerp(S.x,I.x,R),x=j.lerp(S.y,I.y,R),A=j.lerp(S.z,I.z,R),I=j.lerp(S.w,I.w,R),w=4*p;w<4*p+8;++w)_.color.values.push(u[w]);for(_.color.values.push(O,x,A,I),_.color.values.push(O,x,A,I),v.color.values.push(O,x,A,I),v.color.values.push(O,x,A,I),w=4*d;w<4*d+8;++w)v.color.values.push(u[w])}if(H(s)){var I=Y.fromArray(s,2*p,Lc),N=Y.fromArray(s,2*(m+3),Dc),R=j.lerp(I.x,N.x,R);for(w=2*p;w<2*p+4;++w)_.st.values.push(s[w]);for(_.st.values.push(R,I.y),_.st.values.push(R,N.y),v.st.values.push(R,I.y),v.st.values.push(R,N.y),w=2*d;w<2*d+4;++w)v.st.values.push(s[w])}N=_.position.values.length/3-4,g.push(N,N+2,N+1),g.push(N+1,N+2,N+3),N=v.position.values.length/3-4,T.push(N,N+2,N+1),T.push(N+1,N+2,N+3)}else{var b,T=y.y<0?(b=l.attributes,l.indices):(b=c.attributes,c.indices);for(b.position.values.push(y.x,y.y,y.z),b.position.values.push(y.x,y.y,y.z),b.position.values.push(E.x,E.y,E.z),b.position.values.push(E.x,E.y,E.z),w=3*m;w<3*m+12;++w)b.prevPosition.values.push(i[w]),b.nextPosition.values.push(o[w]);for(w=2*m;w<2*m+8;++w)b.expandAndWidth.values.push(a[w]),H(s)&&b.st.values.push(s[w]);if(H(u))for(w=4*m;w<4*m+16;++w)b.color.values.push(u[w]);N=b.position.values.length/3-4,T.push(N,N+2,N+1),T.push(N+1,N+2,N+3)}}h&&(jc(l),jc(c)),dc(e,l,c)}(e);break;case Na.TRIANGLES:wc(e);break;case Na.LINES:Pc(e)}else nc(t),t.primitiveType===Ma.TRIANGLES?wc(e):t.primitiveType===Ma.LINES&&Pc(e);return e},Yc.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,a=Math.abs(cl(e,0,o,r));if(i)for(var s=0,u=t.length;s<u;s++){var c=t[s]*r,l=s<u-1?t[s+1]*r:e.length;a-=Math.abs(cl(e,c,l,r))}for(var h=0,s=0;s<n.length;s+=3){var f=n[s]*r,m=n[s+1]*r,p=n[s+2]*r;h+=Math.abs((e[f]-e[p])*(e[1+m]-e[1+f])-(e[f]-e[m])*(e[1+p]-e[1+f]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},Yc.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);0<i&&(n+=e[i-1].length,r.holes.push(n))}return r};var ll={CLOCKWISE:pt.CW,COUNTER_CLOCKWISE:pt.CCW,validate:function(e){return e===ll.CLOCKWISE||e===ll.COUNTER_CLOCKWISE}},hl=Object.freeze(ll),fl=new W,ml=new W,pl={computeArea2D:function(e){for(var t=e.length,r=0,n=t-1,i=0;i<t;n=i++){var o=e[n],a=e[i];r+=o.x*a.y-a.x*o.y}return.5*r},computeWindingOrder2D:function(e){return 0<pl.computeArea2D(e)?hl.COUNTER_CLOCKWISE:hl.CLOCKWISE},triangulate:function(e,t){return Yc(Y.packArray(e),t,2)}},dl=new W,yl=new W,El=new W,_l=new W,gl=new W,vl=new W,Tl=new W;pl.computeSubdivision=function(e,t,r,n){n=b(n,j.RADIANS_PER_DEGREE);for(var i=r.slice(0),o=t.length,a=new Array(3*o),s=0,u=0;u<o;u++){var c=t[u];a[s++]=c.x,a[s++]=c.y,a[s++]=c.z}for(var l=[],h={},f=e.maximumRadius,n=j.chordLength(n,f),m=n*n;0<i.length;){var p,d,y=i.pop(),E=i.pop(),_=i.pop(),g=W.fromArray(a,3*_,dl),v=W.fromArray(a,3*E,yl),T=W.fromArray(a,3*y,El),A=W.multiplyByScalar(W.normalize(g,_l),f,_l),R=W.multiplyByScalar(W.normalize(v,gl),f,gl),S=W.multiplyByScalar(W.normalize(T,vl),f,vl),O=W.magnitudeSquared(W.subtract(A,R,Tl)),R=W.magnitudeSquared(W.subtract(R,S,Tl)),S=W.magnitudeSquared(W.subtract(S,A,Tl)),A=Math.max(O,R,S);m<A?O===A?(H(u=h[p=Math.min(_,E)+" "+Math.max(_,E)])||(d=W.add(g,v,Tl),W.multiplyByScalar(d,.5,d),a.push(d.x,d.y,d.z),u=a.length/3-1,h[p]=u),i.push(_,u,y),i.push(u,E,y)):R===A?(H(u=h[p=Math.min(E,y)+" "+Math.max(E,y)])||(d=W.add(v,T,Tl),W.multiplyByScalar(d,.5,d),a.push(d.x,d.y,d.z),u=a.length/3-1,h[p]=u),i.push(E,u,_),i.push(u,y,_)):S===A&&(H(u=h[p=Math.min(y,_)+" "+Math.max(y,_)])||(d=W.add(T,g,Tl),W.multiplyByScalar(d,.5,d),a.push(d.x,d.y,d.z),u=a.length/3-1,h[p]=u),i.push(y,u,E),i.push(u,_,E)):(l.push(_),l.push(E),l.push(y))}return new Ca({attributes:{position:new ja({componentDatatype:yt.DOUBLE,componentsPerAttribute:3,values:a})},indices:l,primitiveType:Ma.TRIANGLES})};var Al=new R,Rl=new R,Sl=new R,Ol=new R;function xl(){this._array=[],this._offset=0,this._length=0}pl.computeRhumbLineSubdivision=function(e,t,r,n){n=b(n,j.RADIANS_PER_DEGREE);for(var i=r.slice(0),o=t.length,a=new Array(3*o),s=0,u=0;u<o;u++){var c=t[u];a[s++]=c.x,a[s++]=c.y,a[s++]=c.z}for(var l=[],h={},r=e.maximumRadius,f=j.chordLength(n,r),m=new bu(void 0,void 0,e),p=new bu(void 0,void 0,e),d=new bu(void 0,void 0,e);0<i.length;){var y=i.pop(),E=i.pop(),_=i.pop(),g=W.fromArray(a,3*_,dl),v=W.fromArray(a,3*E,yl),T=W.fromArray(a,3*y,El),A=e.cartesianToCartographic(g,Al),R=e.cartesianToCartographic(v,Rl),S=e.cartesianToCartographic(T,Sl);m.setEndPoints(A,R);var O=m.surfaceDistance;p.setEndPoints(R,S);g=p.surfaceDistance;d.setEndPoints(S,A);var x,I,w,N,v=d.surfaceDistance,T=Math.max(O,g,v);f<T?O===T?(H(u=h[x=Math.min(_,E)+" "+Math.max(_,E)])||(I=m.interpolateUsingFraction(.5,Ol),w=.5*(A.height+R.height),N=W.fromRadians(I.longitude,I.latitude,w,e,Tl),a.push(N.x,N.y,N.z),u=a.length/3-1,h[x]=u),i.push(_,u,y),i.push(u,E,y)):g===T?(H(u=h[x=Math.min(E,y)+" "+Math.max(E,y)])||(I=p.interpolateUsingFraction(.5,Ol),w=.5*(R.height+S.height),N=W.fromRadians(I.longitude,I.latitude,w,e,Tl),a.push(N.x,N.y,N.z),u=a.length/3-1,h[x]=u),i.push(E,u,_),i.push(u,y,_)):v===T&&(H(u=h[x=Math.min(y,_)+" "+Math.max(y,_)])||(I=d.interpolateUsingFraction(.5,Ol),w=.5*(S.height+A.height),N=W.fromRadians(I.longitude,I.latitude,w,e,Tl),a.push(N.x,N.y,N.z),u=a.length/3-1,h[x]=u),i.push(y,u,E),i.push(u,_,E)):(l.push(_),l.push(E),l.push(y))}return new Ca({attributes:{position:new ja({componentDatatype:yt.DOUBLE,componentsPerAttribute:3,values:a})},indices:l,primitiveType:Ma.TRIANGLES})},pl.scaleToGeodeticHeight=function(e,t,r,n){r=b(r,S.WGS84);var i=fl,o=ml;if(t=b(t,0),n=b(n,!0),H(e))for(var a=e.length,s=0;s<a;s+=3)W.fromArray(e,s,o),n&&(o=r.scaleToGeodeticSurface(o,o)),0!==t&&(i=r.geodeticSurfaceNormal(o,i),W.multiplyByScalar(i,t,i),W.add(o,i,o)),e[s]=o.x,e[s+1]=o.y,e[s+2]=o.z;return e},Object.defineProperties(xl.prototype,{length:{get:function(){return this._length}}}),xl.prototype.enqueue=function(e){this._array.push(e),this._length++},xl.prototype.dequeue=function(){if(0!==this._length){var e=this._array,t=this._offset,r=e[t];return e[t]=void 0,10<++t&&2*t>e.length&&(this._array=e.slice(t),t=0),this._offset=t,this._length--,r}},xl.prototype.peek=function(){if(0!==this._length)return this._array[this._offset]},xl.prototype.contains=function(e){return-1!==this._array.indexOf(e)},xl.prototype.clear=function(){this._array.length=this._offset=this._length=0},xl.prototype.sort=function(e){0<this._offset&&(this._array=this._array.slice(this._offset),this._offset=0),this._array.sort(e)};var Il={computeHierarchyPackedLength:function(e){for(var t=0,r=[e];0<r.length;){var n=r.pop();if(H(n)){t+=2;var i=n.positions,o=n.holes;if(H(i)&&(t+=i.length*W.packedLength),H(o))for(var a=o.length,s=0;s<a;++s)r.push(o[s])}}return t},packPolygonHierarchy:function(e,t,r){for(var n=[e];0<n.length;){var i=n.pop();if(H(i)){var o=i.positions,a=i.holes;if(t[r++]=H(o)?o.length:0,t[r++]=H(a)?a.length:0,H(o))for(var s=o.length,u=0;u<s;++u,r+=3)W.pack(o[u],t,r);if(H(a))for(var c=a.length,l=0;l<c;++l)n.push(a[l])}}return r},unpackPolygonHierarchy:function(e,t){for(var r=e[t++],n=e[t++],i=new Array(r),o=0<n?new Array(n):void 0,a=0;a<r;++a,t+=W.packedLength)i[a]=W.unpack(e,t);for(var s=0;s<n;++s)o[s]=Il.unpackPolygonHierarchy(e,t),t=o[s].startingIndex,delete o[s].startingIndex;return{positions:i,holes:o,startingIndex:t}}},wl=new W;Il.subdivideLineCount=function(e,t,r){t=W.distance(e,t),r=Math.max(0,Math.ceil(j.log2(t/r)));return Math.pow(2,r)};var Nl=new R,bl=new R,Ml=new R,Cl=new W;Il.subdivideRhumbLineCount=function(e,t,r,n){n=new bu(e.cartesianToCartographic(t,Nl),e.cartesianToCartographic(r,bl),e).surfaceDistance/n,n=Math.max(0,Math.ceil(j.log2(n)));return Math.pow(2,n)},Il.subdivideLine=function(e,t,r,n){var i=Il.subdivideLineCount(e,t,r),o=W.distance(e,t),a=o/i,s=n=!H(n)?[]:n;s.length=3*i;for(var u,c,l=0,h=0;h<i;h++){var f=(u=h*a,c=o,W.subtract(t,f=e,wl),W.multiplyByScalar(wl,u/c,wl),W.add(f,wl,wl),[wl.x,wl.y,wl.z]);s[l++]=f[0],s[l++]=f[1],s[l++]=f[2]}return s},Il.subdivideRhumbLine=function(e,t,r,n,i){var o=new bu(e.cartesianToCartographic(t,Nl),e.cartesianToCartographic(r,bl),e),n=o.surfaceDistance/n,n=Math.max(0,Math.ceil(j.log2(n))),a=Math.pow(2,n),s=o.surfaceDistance/a,u=i=!H(i)?[]:i;u.length=3*a;for(var c=0,l=0;l<a;l++){var h=o.interpolateUsingSurfaceDistance(l*s,Ml),h=e.cartographicToCartesian(h,Cl);u[c++]=h.x,u[c++]=h.y,u[c++]=h.z}return u};var Pl=new W,Ll=new W,Dl=new W,zl=new W;Il.scaleToGeodeticHeightExtruded=function(e,t,r,n,i){n=b(n,S.WGS84);var o=Pl,a=Ll,s=Dl,u=zl;if(H(e)&&H(e.attributes)&&H(e.attributes.position))for(var c=e.attributes.position.values,l=c.length/2,h=0;h<l;h+=3)W.fromArray(c,h,s),n.geodeticSurfaceNormal(s,o),u=n.scaleToGeodeticSurface(s,u),a=W.multiplyByScalar(o,r,a),a=W.add(u,a,a),c[h+l]=a.x,c[h+1+l]=a.y,c[h+2+l]=a.z,i&&(u=W.clone(s,u)),a=W.multiplyByScalar(o,t,a),a=W.add(u,a,a),c[h]=a.x,c[h+1]=a.y,c[h+2]=a.z;return e},Il.polygonOutlinesFromHierarchy=function(e,t,r){var n,i,o=[],a=new xl;for(a.enqueue(e);0!==a.length;){var s=a.dequeue(),u=s.positions;if(t)for(i=u.length,l=0;l<i;l++)r.scaleToGeodeticSurface(u[l],u[l]);if(!((u=Ru(u,W.equalsEpsilon,!0)).length<3)){for(var c=s.holes?s.holes.length:0,l=0;l<c;l++){var h=s.holes[l],f=h.positions;if(t)for(i=f.length,n=0;n<i;++n)r.scaleToGeodeticSurface(f[n],f[n]);if(!((f=Ru(f,W.equalsEpsilon,!0)).length<3)){o.push(f);var m=0;for(H(h.holes)&&(m=h.holes.length),n=0;n<m;n++)a.enqueue(h.holes[n])}}o.push(u)}}return o},Il.polygonsFromHierarchy=function(e,t,r,n){var i=[],o=[],a=new xl;for(a.enqueue(e);0!==a.length;){var s,u=a.dequeue(),c=u.positions,l=u.holes;if(r)for(s=c.length,y=0;y<s;y++)n.scaleToGeodeticSurface(c[y],c[y]);if(!((c=Ru(c,W.equalsEpsilon,!0)).length<3))if(H(v=t(c))){var h=[];pl.computeWindingOrder2D(v)===hl.CLOCKWISE&&(v.reverse(),c=c.slice().reverse());for(var f,m=c.slice(),p=H(l)?l.length:0,d=[],y=0;y<p;y++){var E=l[y],_=E.positions;if(r)for(s=_.length,f=0;f<s;++f)n.scaleToGeodeticSurface(_[f],_[f]);if(!((_=Ru(_,W.equalsEpsilon,!0)).length<3)){var g=t(_);if(H(g)){pl.computeWindingOrder2D(g)===hl.CLOCKWISE&&(g.reverse(),_=_.slice().reverse()),d.push(_),h.push(m.length);var m=m.concat(_),v=v.concat(g),T=0;for(H(E.holes)&&(T=E.holes.length),f=0;f<T;f++)a.enqueue(E.holes[f])}}}i.push({outerRing:c,holes:d}),o.push({positions:m,positions2D:v,holes:h})}}return{hierarchy:i,polygons:o}};var Fl=new Y,Ul=new W,Bl=new nn,ql=new re;Il.computeBoundingRectangle=function(e,t,r,n,i){for(var n=nn.fromAxisAngle(e,n,Bl),o=re.fromQuaternion(n,ql),a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,l=r.length,h=0;h<l;++h){var f=W.clone(r[h],Ul);re.multiplyByVector(o,f,f);f=t(f,Fl);H(f)&&(a=Math.min(a,f.x),s=Math.max(s,f.x),u=Math.min(u,f.y),c=Math.max(c,f.y))}return i.x=a,i.y=u,i.width=s-a,i.height=c-u,i},Il.createGeometryFromPositions=function(e,t,r,n,i,o){var a=pl.triangulate(t.positions2D,t.holes);a.length<3&&(a=[0,1,2]);var s=t.positions;if(n){for(var u=s.length,c=new Array(3*u),l=0,h=0;h<u;h++){var f=s[h];c[l++]=f.x,c[l++]=f.y,c[l++]=f.z}n=new Ca({attributes:{position:new ja({componentDatatype:yt.DOUBLE,componentsPerAttribute:3,values:c})},indices:a,primitiveType:Ma.TRIANGLES});return i.normal?Cu.computeNormal(n):n}return o===z.GEODESIC?pl.computeSubdivision(e,s,a,r):o===z.RHUMB?pl.computeRhumbLineSubdivision(e,s,a,r):void 0};var Gl=[],Hl=new W,jl=new W;function Wl(e){e=b(e,b.EMPTY_OBJECT),this.position=b(e.position,!1),this.normal=b(e.normal,!1),this.st=b(e.st,!1),this.bitangent=b(e.bitangent,!1),this.tangent=b(e.tangent,!1),this.color=b(e.color,!1)}Il.computeWallGeometry=function(e,t,r,n,i){var o,a,s,u=e.length,c=0;if(n)for(a=3*u*2,o=new Array(2*a),s=0;s<u;s++)m=e[s],p=e[(s+1)%u],o[c]=o[c+a]=m.x,o[++c]=o[c+a]=m.y,o[++c]=o[c+a]=m.z,o[++c]=o[c+a]=p.x,o[++c]=o[c+a]=p.y,o[++c]=o[c+a]=p.z,++c;else{var l=j.chordLength(r,t.maximumRadius),h=0;if(i===z.GEODESIC)for(s=0;s<u;s++)h+=Il.subdivideLineCount(e[s],e[(s+1)%u],l);else if(i===z.RHUMB)for(s=0;s<u;s++)h+=Il.subdivideRhumbLineCount(t,e[s],e[(s+1)%u],l);for(a=3*(h+u),o=new Array(2*a),s=0;s<u;s++){var f,m=e[s],p=e[(s+1)%u];i===z.GEODESIC?f=Il.subdivideLine(m,p,l,Gl):i===z.RHUMB&&(f=Il.subdivideRhumbLine(t,m,p,l,Gl));for(var d=f.length,y=0;y<d;++y,++c)o[c]=f[y],o[c+a]=f[y];o[c]=p.x,o[c+a]=p.x,o[++c]=p.y,o[c+a]=p.y,o[++c]=p.z,o[c+a]=p.z,++c}}var u=o.length,E=ss.createTypedArray(u/3,u-6*e.length),_=0;for(u/=6,s=0;s<u;s++){var g=s,v=g+1,T=g+u,A=T+1;m=W.fromArray(o,3*g,Hl),p=W.fromArray(o,3*v,jl),W.equalsEpsilon(m,p,j.EPSILON10,j.EPSILON10)||(E[_++]=g,E[_++]=T,E[_++]=v,E[_++]=v,E[_++]=T,E[_++]=A)}return new Ca({attributes:new Mu({position:new ja({componentDatatype:yt.DOUBLE,componentsPerAttribute:3,values:o})}),indices:E,primitiveType:Ma.TRIANGLES})},Wl.POSITION_ONLY=Object.freeze(new Wl({position:!0})),Wl.POSITION_AND_NORMAL=Object.freeze(new Wl({position:!0,normal:!0})),Wl.POSITION_NORMAL_AND_ST=Object.freeze(new Wl({position:!0,normal:!0,st:!0})),Wl.POSITION_AND_ST=Object.freeze(new Wl({position:!0,st:!0})),Wl.POSITION_AND_COLOR=Object.freeze(new Wl({position:!0,color:!0})),Wl.ALL=Object.freeze(new Wl({position:!0,normal:!0,st:!0,tangent:!0,bitangent:!0})),Wl.DEFAULT=Wl.POSITION_NORMAL_AND_ST,Wl.packedLength=6,Wl.pack=function(e,t,r){return r=b(r,0),t[r++]=e.position?1:0,t[r++]=e.normal?1:0,t[r++]=e.st?1:0,t[r++]=e.tangent?1:0,t[r++]=e.bitangent?1:0,t[r]=e.color?1:0,t},Wl.unpack=function(e,t,r){return t=b(t,0),(r=!H(r)?new Wl:r).position=1===e[t++],r.normal=1===e[t++],r.st=1===e[t++],r.tangent=1===e[t++],r.bitangent=1===e[t++],r.color=1===e[t],r},Wl.clone=function(e,t){if(H(e))return(t=!H(t)?new Wl:t).position=e.position,t.normal=e.normal,t.st=e.st,t.tangent=e.tangent,t.bitangent=e.bitangent,t.color=e.color,t};var Vl=new R,Yl=new R;var Xl=new J,kl=new W,Zl=new W,Kl=new W,Jl=new W,Ql=new W,$l=new W,eh=new W,th=new W,rh=new W,nh=new Y,ih=new Y,oh=new W,ah=new nn,sh=new re,uh=new re;function ch(e){var t,r=e.vertexFormat,n=e.geometry,i=e.shadowVolume,o=n.attributes.position.values,a=o.length,s=e.wall,u=e.top||s,c=e.bottom||s;if(r.st||r.normal||r.tangent||r.bitangent||i){var l=e.boundingRectangle,h=e.tangentPlane,f=e.ellipsoid,m=e.stRotation,p=e.perPositionHeight,d=nh;d.x=l.x,d.y=l.y;var y,E=r.st?new Float32Array(a/3*2):void 0;r.normal&&(y=p&&u&&!s?n.attributes.normal.values:new Float32Array(a));var _,g=r.tangent?new Float32Array(a):void 0,v=r.bitangent?new Float32Array(a):void 0,T=i?new Float32Array(a):void 0,A=0,R=0,S=Zl,O=Kl,x=Jl,I=!0,w=sh,N=uh;N=0!==m?(_=nn.fromAxisAngle(h._plane.normal,m,ah),w=re.fromQuaternion(_,w),_=nn.fromAxisAngle(h._plane.normal,-m,ah),re.fromQuaternion(_,N)):(w=re.clone(re.IDENTITY,w),re.clone(re.IDENTITY,N));var b=0,M=0;u&&c&&(b=a/2,M=a/3,a/=2);for(var C=0;C<a;C+=3){var P,L,D,z,F,U,B,q,G=W.fromArray(o,C,oh);r.st&&(P=re.multiplyByVector(w,G,kl),P=f.scaleToGeodeticSurface(P,P),L=h.projectPointOntoPlane(P,ih),Y.subtract(L,d,L),D=j.clamp(L.x/l.width,0,1),z=j.clamp(L.y/l.height,0,1),c&&(E[A+M]=D,E[A+1+M]=z),u&&(E[A]=D,E[A+1]=z),A+=2),(r.normal||r.tangent||r.bitangent||i)&&(F=R+1,U=R+2,s?(C+3<a&&(B=W.fromArray(o,C+3,Ql),I&&(q=W.fromArray(o,C+a,$l),p&&(t=G,P=B,L=q,D=void 0,D=(z=f).cartesianToCartographic(t,Vl).height,(t=z.cartesianToCartographic(P,Yl)).height=D,z.cartographicToCartesian(t,P),(P=z.cartesianToCartographic(L,Yl)).height=D-100,z.cartographicToCartesian(P,L)),W.subtract(B,G,B),W.subtract(q,G,q),S=W.normalize(W.cross(q,B,S),S),I=!1),W.equalsEpsilon(B,G,j.EPSILON10)&&(I=!0)),(r.tangent||r.bitangent)&&(x=f.geodeticSurfaceNormal(G,x),r.tangent&&(O=W.normalize(W.cross(x,S,O),O)))):(S=f.geodeticSurfaceNormal(G,S),(r.tangent||r.bitangent)&&(p&&(eh=W.fromArray(y,R,eh),th=W.cross(W.UNIT_Z,eh,th),th=W.normalize(re.multiplyByVector(N,th,th),th),r.bitangent&&(rh=W.normalize(W.cross(eh,th,rh),rh))),O=W.cross(W.UNIT_Z,S,O),O=W.normalize(re.multiplyByVector(N,O,O),O),r.bitangent&&(x=W.normalize(W.cross(S,O,x),x)))),r.normal&&(e.wall?(y[R+b]=S.x,y[F+b]=S.y,y[U+b]=S.z):c&&(y[R+b]=-S.x,y[F+b]=-S.y,y[U+b]=-S.z),(u&&!p||s)&&(y[R]=S.x,y[F]=S.y,y[U]=S.z)),i&&(s&&(S=f.geodeticSurfaceNormal(G,S)),T[R+b]=-S.x,T[F+b]=-S.y,T[U+b]=-S.z),r.tangent&&(e.wall?(g[R+b]=O.x,g[F+b]=O.y,g[U+b]=O.z):c&&(g[R+b]=-O.x,g[F+b]=-O.y,g[U+b]=-O.z),u&&(p?(g[R]=th.x,g[F]=th.y,g[U]=th.z):(g[R]=O.x,g[F]=O.y,g[U]=O.z))),r.bitangent&&(c&&(v[R+b]=x.x,v[F+b]=x.y,v[U+b]=x.z),u&&(p?(v[R]=rh.x,v[F]=rh.y,v[U]=rh.z):(v[R]=x.x,v[F]=x.y,v[U]=x.z))),R+=3)}r.st&&(n.attributes.st=new ja({componentDatatype:yt.FLOAT,componentsPerAttribute:2,values:E})),r.normal&&(n.attributes.normal=new ja({componentDatatype:yt.FLOAT,componentsPerAttribute:3,values:y})),r.tangent&&(n.attributes.tangent=new ja({componentDatatype:yt.FLOAT,componentsPerAttribute:3,values:g})),r.bitangent&&(n.attributes.bitangent=new ja({componentDatatype:yt.FLOAT,componentsPerAttribute:3,values:v})),i&&(n.attributes.extrudeDirection=new ja({componentDatatype:yt.FLOAT,componentsPerAttribute:3,values:T}))}return e.extrude&&H(e.offsetAttribute)&&(m=o.length/3,_=new Uint8Array(m),e.offsetAttribute===Va.TOP?u&&c||s?_=V(_,1,0,m/2):u&&(_=V(_,1)):_=V(_,e.offsetAttribute===Va.NONE?0:1),n.attributes.applyOffset=new ja({componentDatatype:yt.UNSIGNED_BYTE,componentsPerAttribute:1,values:_})),n}var lh=new R,hh=new R,fh={westOverIDL:0,eastOverIDL:0},mh=new Tt;function ph(e,t,r,n,i){if(i=b(i,new Z),!H(e)||e.length<3)return i.west=0,i.north=0,i.south=0,i.east=0,i;if(r===z.RHUMB)return Z.fromCartesianArray(e,t,i);mh.ellipsoid.equals(t)||(mh=new Tt(void 0,void 0,t)),i.west=Number.POSITIVE_INFINITY,i.east=Number.NEGATIVE_INFINITY,i.south=Number.POSITIVE_INFINITY,i.north=Number.NEGATIVE_INFINITY,fh.westOverIDL=Number.POSITIVE_INFINITY,fh.eastOverIDL=Number.NEGATIVE_INFINITY;for(var o,a=1/j.chordLength(n,t.maximumRadius),s=e.length,u=t.cartesianToCartographic(e[0],hh),c=lh,l=1;l<s;l++)o=c,c=u,u=t.cartesianToCartographic(e[l],o),mh.setEndPoints(c,u),yh(mh,a,i,fh);return o=c,c=u,u=t.cartesianToCartographic(e[0],o),mh.setEndPoints(c,u),yh(mh,a,i,fh),i.east-i.west>fh.eastOverIDL-fh.westOverIDL&&(i.west=fh.westOverIDL,i.east=fh.eastOverIDL,i.east>j.PI&&(i.east=i.east-j.TWO_PI),i.west>j.PI&&(i.west=i.west-j.TWO_PI)),i}var dh=new R;function yh(e,t,r,n){for(var i=e.surfaceDistance,o=Math.ceil(i*t),a=0<o?i/(o-1):Number.POSITIVE_INFINITY,s=0,u=0;u<o;u++){var c=e.interpolateUsingSurfaceDistance(s,dh);s+=a;var l=c.longitude,c=c.latitude;r.west=Math.min(r.west,l),r.east=Math.max(r.east,l),r.south=Math.min(r.south,c),r.north=Math.max(r.north,c);l=0<=l?l:l+j.TWO_PI;n.westOverIDL=Math.min(n.westOverIDL,l),n.eastOverIDL=Math.max(n.eastOverIDL,l)}}var Eh=[];function _h(e){var t,r=e.polygonHierarchy,n=b(e.vertexFormat,Wl.DEFAULT),i=b(e.ellipsoid,S.WGS84),o=b(e.granularity,j.RADIANS_PER_DEGREE),a=b(e.stRotation,0),s=b(e.perPositionHeight,!1),u=s&&H(e.extrudedHeight),c=b(e.height,0),l=b(e.extrudedHeight,c);u||(t=Math.max(c,l),l=Math.min(c,l),c=t),this._vertexFormat=Wl.clone(n),this._ellipsoid=S.clone(i),this._granularity=o,this._stRotation=a,this._height=c,this._extrudedHeight=l,this._closeTop=b(e.closeTop,!0),this._closeBottom=b(e.closeBottom,!0),this._polygonHierarchy=r,this._perPositionHeight=s,this._perPositionHeightExtrude=u,this._shadowVolume=b(e.shadowVolume,!1),this._workerName="createPolygonGeometry",this._offsetAttribute=e.offsetAttribute,this._arcType=b(e.arcType,z.GEODESIC),this._rectangle=void 0,this._textureCoordinateRotationPoints=void 0,this.packedLength=Il.computeHierarchyPackedLength(r)+S.packedLength+Wl.packedLength+12}_h.fromPositions=function(e){return new _h({polygonHierarchy:{positions:(e=b(e,b.EMPTY_OBJECT)).positions},height:e.height,extrudedHeight:e.extrudedHeight,vertexFormat:e.vertexFormat,stRotation:e.stRotation,ellipsoid:e.ellipsoid,granularity:e.granularity,perPositionHeight:e.perPositionHeight,closeTop:e.closeTop,closeBottom:e.closeBottom,offsetAttribute:e.offsetAttribute,arcType:e.arcType})},_h.pack=function(e,t,r){return r=b(r,0),r=Il.packPolygonHierarchy(e._polygonHierarchy,t,r),S.pack(e._ellipsoid,t,r),Wl.pack(e._vertexFormat,t,r+=S.packedLength),r+=Wl.packedLength,t[r++]=e._height,t[r++]=e._extrudedHeight,t[r++]=e._granularity,t[r++]=e._stRotation,t[r++]=e._perPositionHeightExtrude?1:0,t[r++]=e._perPositionHeight?1:0,t[r++]=e._closeTop?1:0,t[r++]=e._closeBottom?1:0,t[r++]=e._shadowVolume?1:0,t[r++]=b(e._offsetAttribute,-1),t[r++]=e._arcType,t[r]=e.packedLength,t};var gh=S.clone(S.UNIT_SPHERE),vh=new Wl,Th={polygonHierarchy:{}};return _h.unpack=function(e,t,r){t=b(t,0);var n=Il.unpackPolygonHierarchy(e,t);t=n.startingIndex,delete n.startingIndex;var i=S.unpack(e,t,gh),o=Wl.unpack(e,t+=S.packedLength,vh);t+=Wl.packedLength;var a=e[t++],s=e[t++],u=e[t++],c=e[t++],l=1===e[t++],h=1===e[t++],f=1===e[t++],m=1===e[t++],p=1===e[t++],d=e[t++],y=e[t++],t=e[t];return(r=!H(r)?new _h(Th):r)._polygonHierarchy=n,r._ellipsoid=S.clone(i,r._ellipsoid),r._vertexFormat=Wl.clone(o,r._vertexFormat),r._height=a,r._extrudedHeight=s,r._granularity=u,r._stRotation=c,r._perPositionHeightExtrude=l,r._perPositionHeight=h,r._closeTop=f,r._closeBottom=m,r._shadowVolume=p,r._offsetAttribute=-1===d?void 0:d,r._arcType=y,r.packedLength=t,r},_h.computeRectangle=function(e,t){var r=b(e.granularity,j.RADIANS_PER_DEGREE),n=b(e.arcType,z.GEODESIC),i=e.polygonHierarchy,e=b(e.ellipsoid,S.WGS84);return ph(i.positions,e,n,r,t)},_h.createGeometry=function(e){var t=e._vertexFormat,r=e._ellipsoid,n=e._granularity,i=e._stRotation,o=e._polygonHierarchy,a=e._perPositionHeight,s=e._closeTop,u=e._closeBottom,c=e._arcType;if(!((p=o.positions).length<3)){var l=Ta.fromPoints(p,r),o=Il.polygonsFromHierarchy(o,l.projectPointsOntoPlane.bind(l),!a,r),h=o.hierarchy,f=o.polygons;if(0!==h.length){var m,p=h[0].outerRing,p=Il.computeBoundingRectangle(l.plane.normal,l.projectPointOntoPlane.bind(l),p,i,Xl),d=[],y=e._height,E=e._extrudedHeight,_={perPositionHeight:a,vertexFormat:t,geometry:void 0,tangentPlane:l,boundingRectangle:p,ellipsoid:r,stRotation:i,bottom:!1,top:!0,wall:!1,extrude:!1,arcType:c};if(e._perPositionHeightExtrude||!j.equalsEpsilon(y,E,0,j.EPSILON2))for(_.extrude=!0,_.top=s,_.bottom=u,_.shadowVolume=e._shadowVolume,_.offsetAttribute=e._offsetAttribute,m=0;m<f.length;m++){var g,v=function(e,t,r,n,i,o,a,s,u){var c={walls:[]};if(o||a){var l=Il.createGeometryFromPositions(e,t,r,i,s,u),t=l.attributes.position.values,h=l.indices;if(o&&a){var f,o=t.concat(t),m=o.length/3;(f=ss.createTypedArray(m,2*h.length)).set(h);for(var p=h.length,d=m/2,y=0;y<p;y+=3){var E=f[y]+d,_=f[y+1]+d,g=f[y+2]+d;f[y+p]=g,f[y+1+p]=_,f[y+2+p]=E}l.attributes.position.values=o,i&&s.normal&&(s=l.attributes.normal.values,l.attributes.normal.values=new Float32Array(o.length),l.attributes.normal.values.set(s)),l.indices=f}else if(a){for(m=t.length/3,f=ss.createTypedArray(m,h.length),y=0;y<h.length;y+=3)f[y]=h[y+2],f[y+1]=h[y+1],f[y+2]=h[y];l.indices=f}c.topAndBottom=new Wa({geometry:l})}var l=n.outerRing,v=Ta.fromPoints(l,e).projectPointsOntoPlane(l,Eh);pl.computeWindingOrder2D(v)===hl.CLOCKWISE&&(l=l.slice().reverse());var T=Il.computeWallGeometry(l,e,r,i,u);c.walls.push(new Wa({geometry:T}));var A=n.holes;for(y=0;y<A.length;y++){var R=A[y],v=Ta.fromPoints(R,e).projectPointsOntoPlane(R,Eh);pl.computeWindingOrder2D(v)===hl.COUNTER_CLOCKWISE&&(R=R.slice().reverse()),T=Il.computeWallGeometry(R,e,r,i,u),c.walls.push(new Wa({geometry:T}))}return c}(r,f[m],n,h[m],a,s,u,t,c);s&&u?(g=v.topAndBottom,_.geometry=Il.scaleToGeodeticHeightExtruded(g.geometry,y,E,r,a)):s?((g=v.topAndBottom).geometry.attributes.position.values=pl.scaleToGeodeticHeight(g.geometry.attributes.position.values,y,r,!a),_.geometry=g.geometry):u&&((g=v.topAndBottom).geometry.attributes.position.values=pl.scaleToGeodeticHeight(g.geometry.attributes.position.values,E,r,!0),_.geometry=g.geometry),(s||u)&&(_.wall=!1,g.geometry=ch(_),d.push(g));var T=v.walls;_.wall=!0;for(var A=0;A<T.length;A++){var R=T[A];_.geometry=Il.scaleToGeodeticHeightExtruded(R.geometry,y,E,r,a),R.geometry=ch(_),d.push(R)}}else for(m=0;m<f.length;m++){var S,O=new Wa({geometry:Il.createGeometryFromPositions(r,f[m],n,a,t,c)});O.geometry.attributes.position.values=pl.scaleToGeodeticHeight(O.geometry.attributes.position.values,y,r,!a),_.geometry=O.geometry,O.geometry=ch(_),H(e._offsetAttribute)&&(S=O.geometry.attributes.position.values.length,V(S=new Uint8Array(S/3),e._offsetAttribute===Va.NONE?0:1),O.geometry.attributes.applyOffset=new ja({componentDatatype:yt.UNSIGNED_BYTE,componentsPerAttribute:1,values:S})),d.push(O)}l=us.combineInstances(d)[0];l.attributes.position.values=new Float64Array(l.attributes.position.values),l.indices=ss.createTypedArray(l.attributes.position.values.length/3,l.indices);p=l.attributes,i=Me.fromVertices(p.position.values);return t.position||delete p.position,new Ca({attributes:p,indices:l.indices,primitiveType:l.primitiveType,boundingSphere:i,offsetAttribute:e._offsetAttribute})}}},_h.createShadowVolume=function(e,t,r){var n=e._granularity,i=e._ellipsoid,t=t(n,i),r=r(n,i);return new _h({polygonHierarchy:e._polygonHierarchy,ellipsoid:i,stRotation:e._stRotation,granularity:n,perPositionHeight:!1,extrudedHeight:t,height:r,vertexFormat:Wl.POSITION_ONLY,shadowVolume:!0,arcType:e._arcType})},Object.defineProperties(_h.prototype,{rectangle:{get:function(){var e;return H(this._rectangle)||(e=this._polygonHierarchy.positions,this._rectangle=ph(e,this._ellipsoid,this._arcType,this._granularity)),this._rectangle}},textureCoordinateRotationPoints:{get:function(){return H(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=function(e){var t=-e._stRotation;if(0==t)return[0,0,0,1,1,0];var r=e._ellipsoid,n=e._polygonHierarchy.positions,e=e.rectangle;return Ca._textureCoordinateRotationPoints(n,t,r,e)}(this)),this._textureCoordinateRotationPoints}}}),function(e,t){return(e=H(t)?_h.unpack(e,t):e)._ellipsoid=S.clone(e._ellipsoid),_h.createGeometry(e)}});
