define(function(){"use strict";function Me(e){return null!=e}function a(e){var t;this.name="DeveloperError",this.message=e;try{throw new Error}catch(e){t=e.stack}this.stack=t}Me(Object.create)&&((a.prototype=Object.create(Error.prototype)).constructor=a),a.prototype.toString=function(){var e=this.name+": "+this.message;return Me(this.stack)&&(e+="\n"+this.stack.toString()),e},a.throwInstantiationError=function(){throw new a("This function defines an interface and should not be called directly.")};var i={};function r(e,t,r){return"Expected "+r+" to be typeof "+t+", actual typeof was "+e}function Ne(e,t){return null!=e?e:t}function t(e){null==e&&(e=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,this.init_genrand(e)}i.typeOf={},i.defined=function(e,t){if(!Me(t))throw new a(e+" is required, actual value was undefined")},i.typeOf.func=function(e,t){if("function"!=typeof t)throw new a(r(typeof t,"function",e))},i.typeOf.string=function(e,t){if("string"!=typeof t)throw new a(r(typeof t,"string",e))},i.typeOf.number=function(e,t){if("number"!=typeof t)throw new a(r(typeof t,"number",e))},i.typeOf.number.lessThan=function(e,t,r){if(i.typeOf.number(e,t),r<=t)throw new a("Expected "+e+" to be less than "+r+", actual value was "+t)},i.typeOf.number.lessThanOrEquals=function(e,t,r){if(i.typeOf.number(e,t),r<t)throw new a("Expected "+e+" to be less than or equal to "+r+", actual value was "+t)},i.typeOf.number.greaterThan=function(e,t,r){if(i.typeOf.number(e,t),t<=r)throw new a("Expected "+e+" to be greater than "+r+", actual value was "+t)},i.typeOf.number.greaterThanOrEquals=function(e,t,r){if(i.typeOf.number(e,t),t<r)throw new a("Expected "+e+" to be greater than or equal to"+r+", actual value was "+t)},i.typeOf.object=function(e,t){if("object"!=typeof t)throw new a(r(typeof t,"object",e))},i.typeOf.bool=function(e,t){if("boolean"!=typeof t)throw new a(r(typeof t,"boolean",e))},i.typeOf.number.equals=function(e,t,r,n){if(i.typeOf.number(e,r),i.typeOf.number(t,n),r!==n)throw new a(e+" must be equal to "+t+", the actual values are "+r+" and "+n)},Ne.EMPTY_OBJECT=Object.freeze({}),t.prototype.init_genrand=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0}},t.prototype.genrand_int32=function(){var e,t,r=new Array(0,this.MATRIX_A);if(this.mti>=this.N){for(this.mti==this.N+1&&this.init_genrand(5489),t=0;t<this.N-this.M;t++)e=this.mt[t]&this.UPPER_MASK|this.mt[t+1]&this.LOWER_MASK,this.mt[t]=this.mt[t+this.M]^e>>>1^r[1&e];for(;t<this.N-1;t++)e=this.mt[t]&this.UPPER_MASK|this.mt[t+1]&this.LOWER_MASK,this.mt[t]=this.mt[t+(this.M-this.N)]^e>>>1^r[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^r[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0},t.prototype.random=function(){return this.genrand_int32()*(1/4294967296)};var Ce={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,EPSILON21:1e-21,GRAVITATIONALPARAMETER:3986004418e5,SOLAR_RADIUS:6955e5,LUNAR_RADIUS:1737400,SIXTY_FOUR_KILOBYTES:65536,FOUR_GIGABYTES:4294967296};Ce.sign=Ne(Math.sign,function(e){return 0===(e=+e)||e!=e?e:0<e?1:-1}),Ce.signNotZero=function(e){return e<0?-1:1},Ce.toSNorm=function(e,t){return t=Ne(t,255),Math.round((.5*Ce.clamp(e,-1,1)+.5)*t)},Ce.fromSNorm=function(e,t){return t=Ne(t,255),Ce.clamp(e,0,t)/t*2-1},Ce.normalize=function(e,t,r){return 0===(r=Math.max(r-t,0))?0:Ce.clamp((e-t)/r,0,1)},Ce.sinh=Ne(Math.sinh,function(e){return(Math.exp(e)-Math.exp(-e))/2}),Ce.cosh=Ne(Math.cosh,function(e){return(Math.exp(e)+Math.exp(-e))/2}),Ce.lerp=function(e,t,r){return(1-r)*e+r*t},Ce.PI=Math.PI,Ce.ONE_OVER_PI=1/Math.PI,Ce.PI_OVER_TWO=Math.PI/2,Ce.PI_OVER_THREE=Math.PI/3,Ce.PI_OVER_FOUR=Math.PI/4,Ce.PI_OVER_SIX=Math.PI/6,Ce.THREE_PI_OVER_TWO=3*Math.PI/2,Ce.TWO_PI=2*Math.PI,Ce.ONE_OVER_TWO_PI=1/(2*Math.PI),Ce.RADIANS_PER_DEGREE=Math.PI/180,Ce.DEGREES_PER_RADIAN=180/Math.PI,Ce.RADIANS_PER_ARCSECOND=Ce.RADIANS_PER_DEGREE/3600,Ce.toRadians=function(e){return e*Ce.RADIANS_PER_DEGREE},Ce.toDegrees=function(e){return e*Ce.DEGREES_PER_RADIAN},Ce.convertLongitudeRange=function(e){var t=Ce.TWO_PI,e=e-Math.floor(e/t)*t;return e<-Math.PI?e+t:e>=Math.PI?e-t:e},Ce.clampToLatitudeRange=function(e){return Ce.clamp(e,-1*Ce.PI_OVER_TWO,Ce.PI_OVER_TWO)},Ce.negativePiToPi=function(e){return Ce.zeroToTwoPi(e+Ce.PI)-Ce.PI},Ce.zeroToTwoPi=function(e){var t=Ce.mod(e,Ce.TWO_PI);return Math.abs(t)<Ce.EPSILON14&&Math.abs(e)>Ce.EPSILON14?Ce.TWO_PI:t},Ce.mod=function(e,t){return(e%t+t)%t},Ce.equalsEpsilon=function(e,t,r,n){r=Ne(r,0),n=Ne(n,r);var i=Math.abs(e-t);return i<=n||i<=r*Math.max(Math.abs(e),Math.abs(t))},Ce.lessThan=function(e,t,r){return e-t<-r},Ce.lessThanOrEquals=function(e,t,r){return e-t<r},Ce.greaterThan=function(e,t,r){return r<e-t},Ce.greaterThanOrEquals=function(e,t,r){return-r<e-t};var o=[1];Ce.factorial=function(e){var t=o.length;if(t<=e)for(var r=o[t-1],n=t;n<=e;n++){var i=r*n;o.push(i),r=i}return o[e]},Ce.incrementWrap=function(e,t,r){return r=Ne(r,0),e=t<++e?r:e},Ce.isPowerOfTwo=function(e){return 0!==e&&0==(e&e-1)},Ce.nextPowerOfTwo=function(e){return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e},Ce.clamp=function(e,t,r){return e<t?t:r<e?r:e};var n=new t;function ve(e,t,r){this.x=Ne(e,0),this.y=Ne(t,0),this.z=Ne(r,0)}Ce.setRandomNumberSeed=function(e){n=new t(e)},Ce.nextRandomNumber=function(){return n.random()},Ce.randomBetween=function(e,t){return Ce.nextRandomNumber()*(t-e)+e},Ce.acosClamped=function(e){return Math.acos(Ce.clamp(e,-1,1))},Ce.asinClamped=function(e){return Math.asin(Ce.clamp(e,-1,1))},Ce.chordLength=function(e,t){return 2*t*Math.sin(.5*e)},Ce.logBase=function(e,t){return Math.log(e)/Math.log(t)},Ce.cbrt=Ne(Math.cbrt,function(e){var t=Math.pow(Math.abs(e),1/3);return e<0?-t:t}),Ce.log2=Ne(Math.log2,function(e){return Math.log(e)*Math.LOG2E}),Ce.fog=function(e,t){t*=e;return 1-Math.exp(-t*t)},Ce.fastApproximateAtan=function(e){return e*(-.1784*Math.abs(e)-.0663*e*e+1.0301)},Ce.fastApproximateAtan2=function(e,t){var r=Math.abs(e),n=Math.abs(t),i=Math.max(r,n);n=Math.min(r,n);r=Ce.fastApproximateAtan(n/i);return r=Math.abs(t)>Math.abs(e)?Ce.PI_OVER_TWO-r:r,r=e<0?Ce.PI-r:r,r=t<0?-r:r},ve.fromSpherical=function(e,t){Me(t)||(t=new ve);var r=e.clock,n=e.cone,i=Ne(e.magnitude,1),e=i*Math.sin(n);return t.x=e*Math.cos(r),t.y=e*Math.sin(r),t.z=i*Math.cos(n),t},ve.fromElements=function(e,t,r,n){return Me(n)?(n.x=e,n.y=t,n.z=r,n):new ve(e,t,r)},ve.fromCartesian4=ve.clone=function(e,t){if(Me(e))return Me(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t):new ve(e.x,e.y,e.z)},ve.packedLength=3,ve.pack=function(e,t,r){return r=Ne(r,0),t[r++]=e.x,t[r++]=e.y,t[r]=e.z,t},ve.unpack=function(e,t,r){return t=Ne(t,0),(r=!Me(r)?new ve:r).x=e[t++],r.y=e[t++],r.z=e[t],r},ve.packArray=function(e,t){var r=e.length,n=3*r;if(Me(t)){if(!Array.isArray(t)&&t.length!==n)throw new a("If result is a typed array, it must have exactly array.length * 3 elements");t.length!==n&&(t.length=n)}else t=new Array(n);for(var i=0;i<r;++i)ve.pack(e[i],t,3*i);return t},ve.unpackArray=function(e,t){var r=e.length;Me(t)?t.length=r/3:t=new Array(r/3);for(var n=0;n<r;n+=3){var i=n/3;t[i]=ve.unpack(e,n,t[i])}return t},ve.fromArray=ve.unpack,ve.maximumComponent=function(e){return Math.max(e.x,e.y,e.z)},ve.minimumComponent=function(e){return Math.min(e.x,e.y,e.z)},ve.minimumByComponent=function(e,t,r){return r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r.z=Math.min(e.z,t.z),r},ve.maximumByComponent=function(e,t,r){return r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r.z=Math.max(e.z,t.z),r},ve.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z},ve.magnitude=function(e){return Math.sqrt(ve.magnitudeSquared(e))};var s=new ve;ve.distance=function(e,t){return ve.subtract(e,t,s),ve.magnitude(s)},ve.distanceSquared=function(e,t){return ve.subtract(e,t,s),ve.magnitudeSquared(s)},ve.normalize=function(e,t){var r=ve.magnitude(e);return 0!=r?(t.x=e.x/r,t.y=e.y/r,t.z=e.z/r):ve.clone(e,t),Math.abs(t.x)<Ce.EPSILON8&&(t.x=0),Math.abs(t.y)<Ce.EPSILON8&&(t.y=0),Math.abs(t.z)<Ce.EPSILON8&&(t.z=0),t},ve.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},ve.multiplyComponents=function(e,t,r){return r.x=e.x*t.x,r.y=e.y*t.y,r.z=e.z*t.z,r},ve.divideComponents=function(e,t,r){return r.x=e.x/t.x,r.y=e.y/t.y,r.z=e.z/t.z,r},ve.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r},ve.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r},ve.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r},ve.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r},ve.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t},ve.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t};var u=new ve;ve.lerp=function(e,t,r,n){return ve.multiplyByScalar(t,r,u),n=ve.multiplyByScalar(e,1-r,n),ve.add(u,n,n)};var c=new ve,l=new ve;ve.angleBetween=function(e,t){ve.normalize(e,c),ve.normalize(t,l);e=ve.dot(c,l),t=ve.magnitude(ve.cross(c,l,c));return Math.atan2(t,e)};var f=new ve;ve.mostOrthogonalAxis=function(e,t){e=ve.normalize(e,f);return ve.abs(e,e),t=e.x<=e.y?e.x<=e.z?ve.clone(ve.UNIT_X,t):ve.clone(ve.UNIT_Z,t):e.y<=e.z?ve.clone(ve.UNIT_Y,t):ve.clone(ve.UNIT_Z,t)},ve.projectVector=function(e,t,r){e=ve.dot(e,t)/ve.dot(t,t);return ve.multiplyByScalar(t,e,r)},ve.equals=function(e,t){return e===t||Me(e)&&Me(t)&&Math.abs(e.x-t.x)<1e-10&&Math.abs(e.y-t.y)<1e-10&&Math.abs(e.z-t.z)<1e-10},ve.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]&&e.z===t[r+2]},ve.equalsEpsilon=function(e,t,r,n){return e===t||Me(e)&&Me(t)&&Ce.equalsEpsilon(e.x,t.x,r,n)&&Ce.equalsEpsilon(e.y,t.y,r,n)&&Ce.equalsEpsilon(e.z,t.z,r,n)},ve.cross=function(e,t,r){var n=e.x,i=e.y,a=e.z,o=t.x,s=t.y,e=t.z,t=a*o-n*e,o=n*s-i*o;return r.x=i*e-a*s,r.y=t,r.z=o,r},ve.midpoint=function(e,t,r){return r.x=.5*(e.x+t.x),r.y=.5*(e.y+t.y),r.z=.5*(e.z+t.z),r},ve.fromDegrees=function(e,t,r,n,i){return e=Ce.toRadians(e),t=Ce.toRadians(t),ve.fromRadians(e,t,r,n,i)};var h=new ve,m=new ve,d=new ve(40680631590769,40680631590769,40408299984661.445);ve.fromRadians=function(e,t,r,n,i){r=Ne(r,0);var a=Me(n)?n.radiiSquared:d,n=Math.cos(t);h.x=n*Math.cos(e),h.y=n*Math.sin(e),h.z=Math.sin(t),h=ve.normalize(h,h),ve.multiplyComponents(a,h,m);a=Math.sqrt(ve.dot(h,m));return m=ve.divideByScalar(m,a,m),h=ve.multiplyByScalar(h,r,h),Me(i)||(i=new ve),ve.add(m,h,i)},ve.fromDegreesArray=function(e,t,r){var n=e.length;Me(r)?r.length=n/2:r=new Array(n/2);for(var i=0;i<n;i+=2){var a=e[i],o=e[i+1],s=i/2;r[s]=ve.fromDegrees(a,o,0,t,r[s])}return r},ve.fromRadiansArray=function(e,t,r){var n=e.length;Me(r)?r.length=n/2:r=new Array(n/2);for(var i=0;i<n;i+=2){var a=e[i],o=e[i+1],s=i/2;r[s]=ve.fromRadians(a,o,0,t,r[s])}return r},ve.fromDegreesArrayHeights=function(e,t,r){var n=e.length;Me(r)?r.length=n/3:r=new Array(n/3);for(var i=0;i<n;i+=3){var a=e[i],o=e[i+1],s=e[i+2],u=i/3;r[u]=ve.fromDegrees(a,o,s,t,r[u])}return r},ve.fromRadiansArrayHeights=function(e,t,r){var n=e.length;Me(r)?r.length=n/3:r=new Array(n/3);for(var i=0;i<n;i+=3){var a=e[i],o=e[i+1],s=e[i+2],u=i/3;r[u]=ve.fromRadians(a,o,s,t,r[u])}return r},ve.ZERO=Object.freeze(new ve(0,0,0)),ve.UNIT_X=Object.freeze(new ve(1,0,0)),ve.UNIT_Y=Object.freeze(new ve(0,1,0)),ve.UNIT_Z=Object.freeze(new ve(0,0,1)),ve.prototype.clone=function(e){return ve.clone(this,e)},ve.prototype.equals=function(e){return ve.equals(this,e)},ve.prototype.equalsEpsilon=function(e,t,r){return ve.equalsEpsilon(this,e,t,r)},ve.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},ve.prototype.applyMatrix4=function(e,t,r){Me(r)||(r=new ve);var n=e.x,i=e.y,a=e.z,e=1/(t[3]*n+t[7]*i+t[11]*a+t[15]);return r.x=(t[0]*n+t[4]*i+t[8]*a+t[12])*e,r.y=(t[1]*n+t[5]*i+t[9]*a+t[13])*e,r.z=(t[2]*n+t[6]*i+t[10]*a+t[14])*e,r},ve.prototype.set=function(e,t,r){this.x=e,this.y=t,this.z=r},ve.prototype.fromArray=function(e,t){return this.x=e[t=void 0===t?0:t],this.y=e[t+1],this.z=e[t+2],this},ve.prototype.toArray=function(e,t){return(e=void 0===e?[]:e)[t=void 0===t?0:t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e};var x=new ve,I=new ve;function p(e,t,r,n,i){var a=e.x,o=e.y,s=e.z,u=t.x,c=t.y,t=t.z,l=a*a*u*u,f=o*o*c*c,h=s*s*t*t,u=l+f+h,c=Math.sqrt(1/u),t=ve.multiplyByScalar(e,c,x);if(u<n)return isFinite(c)?ve.clone(t,i):void 0;var m=r.x,d=r.y,p=r.z,r=I;r.x=t.x*m*2,r.y=t.y*d*2,r.z=t.z*p*2;var E=(1-c)*ve.magnitude(e)/(.5*ve.magnitude(r)),_=0;do{var y,g,T,A,R,S,O,_=(O=l*(A=(y=1/(1+(E-=_)*m))*y)+f*(R=(g=1/(1+E*d))*g)+h*(S=(T=1/(1+E*p))*T)-1)/(-2*(l*(A*y)*m+f*(R*g)*d+h*(S*T)*p))}while(Math.abs(O)>Ce.EPSILON12);return Me(i)?(i.x=a*y,i.y=o*g,i.z=s*T,i):new ve(a*y,o*g,s*T)}function T(e,t,r){this.longitude=Ne(e,0),this.latitude=Ne(t,0),this.height=Ne(r,0)}T.fromRadians=function(e,t,r,n){return r=Ne(r,0),Me(n)?(n.longitude=e,n.latitude=t,n.height=r,n):new T(e,t,r)},T.fromDegrees=function(e,t,r,n){return e=Ce.toRadians(e),t=Ce.toRadians(t),T.fromRadians(e,t,r,n)};var E=new ve,_=new ve,y=new ve,g=new ve(1/6378137,1/6378137,1/6356752.314245179),A=new ve(1/40680631590769,1/40680631590769,1/40408299984661.445),R=Ce.EPSILON1;function S(e,t,r,n){t=Ne(t,0),r=Ne(r,0),n=Ne(n,0),e._radii=new ve(t,r,n),e._radiiSquared=new ve(t*t,r*r,n*n),e._radiiToTheFourth=new ve(t*t*t*t,r*r*r*r,n*n*n*n),e._oneOverRadii=new ve(0===t?0:1/t,0===r?0:1/r,0===n?0:1/n),e._oneOverRadiiSquared=new ve(0===t?0:1/(t*t),0===r?0:1/(r*r),0===n?0:1/(n*n)),e._minimumRadius=Math.min(t,r,n),e._maximumRadius=Math.max(t,r,n),e._centerToleranceSquared=Ce.EPSILON1,0!==e._radiiSquared.z&&(e._squaredXOverSquaredZ=e._radiiSquared.x/e._radiiSquared.z)}function be(e,t,r){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,S(this,e,t,r)}T.fromCartesian=function(e,t,r){var n=Me(t)?t.oneOverRadii:g,i=Me(t)?t.oneOverRadiiSquared:A,n=p(e,n,i,Me(t)?t._centerToleranceSquared:R,_);if(Me(n)){t=ve.multiplyComponents(n,i,E),t=ve.normalize(t,t),i=ve.subtract(e,n,y),n=Math.atan2(t.y,t.x),t=Math.asin(t.z),i=Ce.sign(ve.dot(i,e))*ve.magnitude(i);return Me(r)?(r.longitude=n,r.latitude=t,r.height=i,r):new T(n,t,i)}},T.toCartesian=function(e,t,r){return ve.fromRadians(e.longitude,e.latitude,e.height,t,r)},T.clone=function(e,t){if(Me(e))return Me(t)?(t.longitude=e.longitude,t.latitude=e.latitude,t.height=e.height,t):new T(e.longitude,e.latitude,e.height)},T.equals=function(e,t){return e===t||Me(e)&&Me(t)&&e.longitude===t.longitude&&e.latitude===t.latitude&&e.height===t.height},T.equalsEpsilon=function(e,t,r){return r=Ne(r,0),e===t||Me(e)&&Me(t)&&Math.abs(e.longitude-t.longitude)<=r&&Math.abs(e.latitude-t.latitude)<=r&&Math.abs(e.height-t.height)<=r},T.ZERO=Object.freeze(new T(0,0,0)),T.prototype.clone=function(e){return T.clone(this,e)},T.prototype.equals=function(e){return T.equals(this,e)},T.prototype.equalsEpsilon=function(e,t){return T.equalsEpsilon(this,e,t)},T.prototype.toString=function(){return"("+this.longitude+", "+this.latitude+", "+this.height+")"},T.geodeticParallelLength=function(e,t,r){return e*r*Math.cos(t)},T.geodeticCircleRadians=function(e,t,r,n){n=Math.cos(t)*Math.cos(n)*Math.cos(e-r)+Math.sin(t)*Math.sin(n);return Math.abs(Math.acos(n))},T.add=function(e,t,r){return r.longitude=e.longitude+t.longitude,r.latitude=e.latitude+t.latitude,r.height=e.height+t.height,r},T.subtract=function(e,t,r){return r.longitude=e.longitude-t.longitude,r.latitude=e.latitude-t.latitude,r.height=e.height-t.height,r},T.multiplyByScalar=function(e,t,r){return r.longitude=e.longitude*t,r.latitude=e.latitude*t,r.height=e.height*t,r},T.divideByScalar=function(e,t,r){return r.longitude=e.longitude/t,r.latitude=e.latitude/t,r.height=e.height/t,r},T.distance=function(e,t){e=new Cartesian2(e.longitude,e.latitude),t=new Cartesian2(t.longitude,t.latitude);return Cartesian2.distance(e,t)},Object.defineProperties(be.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),be.clone=function(e,t){if(Me(e)){var r=e._radii;return Me(t)?(ve.clone(r,t._radii),ve.clone(e._radiiSquared,t._radiiSquared),ve.clone(e._radiiToTheFourth,t._radiiToTheFourth),ve.clone(e._oneOverRadii,t._oneOverRadii),ve.clone(e._oneOverRadiiSquared,t._oneOverRadiiSquared),t._minimumRadius=e._minimumRadius,t._maximumRadius=e._maximumRadius,t._centerToleranceSquared=e._centerToleranceSquared,t):new be(r.x,r.y,r.z)}},be.fromCartesian3=function(e,t){return Me(t)||(t=new be),Me(e)&&S(t,e.x,e.y,e.z),t},be.WGS84=Object.freeze(new be(6378137,6378137,6356752.314245179)),be.UNIT_SPHERE=Object.freeze(new be(1,1,1)),be.MOON=Object.freeze(new be(Ce.LUNAR_RADIUS,Ce.LUNAR_RADIUS,Ce.LUNAR_RADIUS)),be.DATUM_PLANE=-100,be.prototype.clone=function(e){return be.clone(this,e)},be.packedLength=ve.packedLength,be.pack=function(e,t,r){return r=Ne(r,0),ve.pack(e._radii,t,r),t},be.unpack=function(e,t,r){t=Ne(t,0);t=ve.unpack(e,t);return be.fromCartesian3(t,r)},be.prototype.geocentricSurfaceNormal=ve.normalize,be.prototype.geodeticSurfaceNormalCartographic=function(e,t){var r=e.longitude,n=e.latitude,i=Math.cos(n),e=i*Math.cos(r),r=i*Math.sin(r),n=Math.sin(n);return(t=!Me(t)?new ve:t).x=e,t.y=r,t.z=n,ve.normalize(t,t)},be.prototype.geodeticSurfaceNormal=function(e,t){if(!ve.equalsEpsilon(e,ve.ZERO,Ce.EPSILON14))return Me(t)||(t=new ve),t=ve.multiplyComponents(e,this._oneOverRadiiSquared,t),ve.normalize(t,t)};var O=new ve,w=new ve;be.prototype.cartographicToCartesian=function(e,t){var r=O,n=w;this.geodeticSurfaceNormalCartographic(e,r),ve.multiplyComponents(this._radiiSquared,r,n);var i=Math.sqrt(ve.dot(r,n));return ve.divideByScalar(n,i,n),ve.multiplyByScalar(r,e.height,r),Me(t)||(t=new ve),ve.add(n,r,t)},be.prototype.cartographicArrayToCartesianArray=function(e,t){var r=e.length;Me(t)?t.length=r:t=new Array(r);for(var n=0;n<r;n++)t[n]=this.cartographicToCartesian(e[n],t[n]);return t};var M=new ve,N=new ve,C=new ve;be.prototype.cartesianToCartographic=function(e,t){var r=this.scaleToGeodeticSurface(e,N);if(Me(r)){var n=this.geodeticSurfaceNormal(r,M),i=ve.subtract(e,r,C),r=Math.atan2(n.y,n.x),n=Math.asin(n.z),i=Ce.sign(ve.dot(i,e))*ve.magnitude(i);return Me(t)?(t.longitude=r,t.latitude=n,t.height=i,t):new T(r,n,i)}},be.prototype.cartesianArrayToCartographicArray=function(e,t){var r=e.length;Me(t)?t.length=r:t=new Array(r);for(var n=0;n<r;++n)t[n]=this.cartesianToCartographic(e[n],t[n]);return t},be.prototype.scaleToGeodeticSurface=function(e,t){return p(e,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,t)},be.prototype.scaleToGeocentricSurface=function(e,t){Me(t)||(t=new ve);var r=e.x,n=e.y,i=e.z,a=this._oneOverRadiiSquared,a=1/Math.sqrt(r*r*a.x+n*n*a.y+i*i*a.z);return ve.multiplyByScalar(e,a,t)},be.prototype.transformPositionToScaledSpace=function(e,t){return Me(t)||(t=new ve),ve.multiplyComponents(e,this._oneOverRadii,t)},be.prototype.transformPositionFromScaledSpace=function(e,t){return Me(t)||(t=new ve),ve.multiplyComponents(e,this._radii,t)},be.prototype.equals=function(e){return this===e||Me(e)&&ve.equals(this._radii,e._radii)},be.prototype.toString=function(){return this._radii.toString()},be.prototype.getSurfaceNormalIntersectionWithZAxis=function(e,t,r){t=Ne(t,0);var n=this._squaredXOverSquaredZ;if((r=!Me(r)?new ve:r).x=0,r.y=0,r.z=e.z*(1-n),!(Math.abs(r.z)>=this._radii.z-t))return r};var v=[.14887433898163,.43339539412925,.67940956829902,.86506336668898,.97390652851717,0],b=[.29552422471475,.26926671930999,.21908636251598,.14945134915058,.066671344308684,0];function U(e,t,r){for(var n=.5*(t+e),i=.5*(t-e),a=0,o=0;o<5;o++){var s=i*v[o];a+=b[o]*(r(n+s)+r(n-s))}return a*=i}be.prototype.surfaceArea=function(e){for(var t=e.west,i=e.east,r=e.south,n=e.north;i<t;)i+=Ce.TWO_PI;var e=this._radiiSquared,a=e.x,o=e.y,s=e.z,u=a*o;return U(r,n,function(e){var r=Math.cos(e),n=Math.sin(e);return Math.cos(e)*U(t,i,function(e){var t=Math.cos(e),e=Math.sin(e);return Math.sqrt(u*n*n+s*(o*t*t+a*e*e)*r*r)})})};var D=Object.freeze({NONE:0,LERC:1});function Ue(e,t,r,n,i,a){this.west=Ne(e,Math.PI),this.south=Ne(t,Math.PI/2),this.east=Ne(r,-Math.PI),this.north=Ne(n,-Math.PI/2),this.minHeight=Ne(i,0),this.maxHeight=Ne(a,0)}Object.defineProperties(Ue.prototype,{width:{get:function(){return Ue.computeWidth(this)}},height:{get:function(){return Ue.computeHeight(this)}}}),Ue.packedLength=4,Ue.pack=function(e,t,r){return r=Ne(r,0),t[r++]=e.west,t[r++]=e.south,t[r++]=e.east,t[r]=e.north,t},Ue.unpack=function(e,t,r){return t=Ne(t,0),(r=!Me(r)?new Ue:r).west=e[t++],r.south=e[t++],r.east=e[t++],r.north=e[t],r},Ue.computeWidth=function(e){var t=e.east,e=e.west;return t<e&&(t+=Ce.TWO_PI),t-e},Ue.computeHeight=function(e){return e.north-e.south},Ue.fromDegrees=function(e,t,r,n,i){return e=Ce.toRadians(Ne(e,0)),t=Ce.toRadians(Ne(t,0)),r=Ce.toRadians(Ne(r,0)),n=Ce.toRadians(Ne(n,0)),Me(i)?(i.west=e,i.south=t,i.east=r,i.north=n,i):new Ue(e,t,r,n)},Ue.fromRadians=function(e,t,r,n,i){return Me(i)?(i.west=Ne(e,0),i.south=Ne(t,0),i.east=Ne(r,0),i.north=Ne(n,0),i):new Ue(e,t,r,n)},Ue.fromCartographicArray=function(e,t){for(var r=Number.MAX_VALUE,n=-Number.MAX_VALUE,i=Number.MAX_VALUE,a=-Number.MAX_VALUE,o=Number.MAX_VALUE,s=-Number.MAX_VALUE,u=0,c=e.length;u<c;u++)var l=e[u],r=Math.min(r,l.longitude),n=Math.max(n,l.longitude),o=Math.min(o,l.latitude),s=Math.max(s,l.latitude),l=0<=l.longitude?l.longitude:l.longitude+Ce.TWO_PI,i=Math.min(i,l),a=Math.max(a,l);return a-i<n-r&&(r=i,(n=a)>Ce.PI&&(n-=Ce.TWO_PI),r>Ce.PI&&(r-=Ce.TWO_PI)),Me(t)?(t.west=r,t.south=o,t.east=n,t.north=s,t):new Ue(r,o,n,s)},Ue.fromCartesianArray=function(e,t,r){t=Ne(t,be.WGS84);for(var n=Number.MAX_VALUE,i=-Number.MAX_VALUE,a=Number.MAX_VALUE,o=-Number.MAX_VALUE,s=Number.MAX_VALUE,u=-Number.MAX_VALUE,c=Number.MAX_VALUE,l=-Number.MAX_VALUE,f=0,h=e.length;f<h;f++)var m=t.cartesianToCartographic(e[f]),n=Math.min(n,m.longitude),i=Math.max(i,m.longitude),s=Math.min(s,m.latitude),u=Math.max(u,m.latitude),c=Math.min(c,m.height),l=Math.max(l,m.height),m=0<=m.longitude?m.longitude:m.longitude+Ce.TWO_PI,a=Math.min(a,m),o=Math.max(o,m);return o-a<i-n&&(n=a,(i=o)>Ce.PI&&(i-=Ce.TWO_PI),n>Ce.PI&&(n-=Ce.TWO_PI)),Me(r)?(r.west=n,r.south=s,r.east=i,r.north=u,r.minHeight=c,r.maxHeight=l,r):new Ue(n,s,i,u,c,l)},Ue.clone=function(e,t){if(Me(e))return Me(t)?(t.west=e.west,t.south=e.south,t.east=e.east,t.north=e.north,t.minHeight=e.minHeight,t.maxHeight=e.maxHeight,t):new Ue(e.west,e.south,e.east,e.north,e.minHeight,e.maxHeight)},Ue.equalsEpsilon=function(e,t,r){return r=Ne(r,0),e===t||Me(e)&&Me(t)&&Math.abs(e.west-t.west)<=r&&Math.abs(e.south-t.south)<=r&&Math.abs(e.east-t.east)<=r&&Math.abs(e.north-t.north)<=r&&Math.abs(e.minHeight-t.minHeight)<=r&&Math.abs(e.maxHeight-t.maxHeight)<=r},Ue.prototype.clone=function(e){return Ue.clone(this,e)},Ue.prototype.equals=function(e){return Ue.equals(this,e)},Ue.prototype.intersect=function(e){return Ue.intersect(this,e)},Ue.equals=function(e,t){return e===t||Me(e)&&Me(t)&&e.west===t.west&&e.south===t.south&&e.east===t.east&&e.north===t.north},Ue.prototype.equalsEpsilon=function(e,t){return Ue.equalsEpsilon(this,e,t)},Ue.validate=function(e){},Ue.southwest=function(e,t){return Me(t)?(t.longitude=e.west,t.latitude=e.south,t.height=0,t):new T(e.west,e.south)},Ue.northwest=function(e,t){return Me(t)?(t.longitude=e.west,t.latitude=e.north,t.height=0,t):new T(e.west,e.north)},Ue.northeast=function(e,t){return Me(t)?(t.longitude=e.east,t.latitude=e.north,t.height=0,t):new T(e.east,e.north)},Ue.southeast=function(e,t){return Me(t)?(t.longitude=e.east,t.latitude=e.south,t.height=0,t):new T(e.east,e.south)},Ue.center=function(e,t){var r=e.east,n=e.west;r<n&&(r+=Ce.TWO_PI);r=Ce.negativePiToPi(.5*(n+r)),e=.5*(e.south+e.north);return Me(t)?(t.longitude=r,t.latitude=e,t.height=0,t):new T(r,e)},Ue.intersection=function(e,t,r){var n=e.east,i=e.west,a=t.east,o=t.west;n<i&&0<a?n+=Ce.TWO_PI:a<o&&0<n&&(a+=Ce.TWO_PI),n<i&&o<0?o+=Ce.TWO_PI:a<o&&i<0&&(i+=Ce.TWO_PI);o=Ce.negativePiToPi(Math.max(i,o)),n=Ce.negativePiToPi(Math.min(n,a));if(!((e.west<e.east||t.west<t.east)&&n<=o)){a=Math.max(e.south,t.south),t=Math.min(e.north,t.north);if(!(t<=a))return Me(r)?(r.west=o,r.south=a,r.east=n,r.north=t,r):new Ue(o,a,n,t)}},Ue.simpleIntersection=function(e,t,r){var n=Math.max(e.west,t.west),i=Math.max(e.south,t.south),a=Math.min(e.east,t.east),t=Math.min(e.north,t.north);if(!(t<=i||a<=n))return Me(r)?(r.west=n,r.south=i,r.east=a,r.north=t,r):new Ue(n,i,a,t)},Ue.union=function(e,t,r){Me(r)||(r=new Ue);var n=e.east,i=e.west,a=t.east,o=t.west;n<i&&0<a?n+=Ce.TWO_PI:a<o&&0<n&&(a+=Ce.TWO_PI),n<i&&o<0?o+=Ce.TWO_PI:a<o&&i<0&&(i+=Ce.TWO_PI);o=Ce.convertLongitudeRange(Math.min(i,o)),a=Ce.convertLongitudeRange(Math.max(n,a));return r.west=o,r.south=Math.min(e.south,t.south),r.east=a,r.north=Math.max(e.north,t.north),r},Ue.expand=function(e,t,r){return(r=!Me(r)?new Ue:r).west=Math.min(e.west,t.longitude),r.south=Math.min(e.south,t.latitude),r.east=Math.max(e.east,t.longitude),r.north=Math.max(e.north,t.latitude),r},Ue.contains=function(e,t){var r=t.longitude,n=t.latitude,i=e.west,t=e.east;return t<i&&(t+=Ce.TWO_PI,r<0&&(r+=Ce.TWO_PI)),(i<r||Ce.equalsEpsilon(r,i,Ce.EPSILON14))&&(r<t||Ce.equalsEpsilon(r,t,Ce.EPSILON14))&&n>=e.south&&n<=e.north};var P=new T;function F(e){var t;this.name="RuntimeError",this.message=e;try{throw new Error}catch(e){t=e.stack}this.stack=t}Ue.subsample=function(e,t,r,n){t=Ne(t,be.WGS84),r=Ne(r,0),Me(n)||(n=[]);var i=0,a=e.north,o=e.south,s=e.east,u=e.west,c=P;c.height=r,c.longitude=u,c.latitude=a,n[i]=t.cartographicToCartesian(c,n[i]),i++,c.longitude=s,n[i]=t.cartographicToCartesian(c,n[i]),i++,c.latitude=o,n[i]=t.cartographicToCartesian(c,n[i]),i++,c.longitude=u,n[i]=t.cartographicToCartesian(c,n[i]),i++,c.latitude=a<0?a:0<o?o:0;for(var l=1;l<8;++l)c.longitude=-Math.PI+l*Ce.PI_OVER_TWO,Ue.contains(e,c)&&(n[i]=t.cartographicToCartesian(c,n[i]),i++);return 0===c.latitude&&(c.longitude=u,n[i]=t.cartographicToCartesian(c,n[i]),i++,c.longitude=s,n[i]=t.cartographicToCartesian(c,n[i]),i++),n.length=i,n},Ue.intersect=function(e,t){return e.north>=t.south&&e.south<=t.north&&e.east>=t.west&&e.west<=t.east},Ue.intersect_lon_lat_region=function(e,t){for(var r=t.get_count(),n=0;n<r;n++)if(Ue.check_rect_line(e,t.getItem(n),t.getItem((n+1)%r)))return!0;return!!t.containRect(e)},Ue.check_rect_line_vertical=function(e,t,r,n,i){if(r<e.longitude&&r<t.longitude)return!1;if(r>e.longitude&&r>t.longitude)return!1;if(e.longitude==t.longitude)return r==e.longitude&&(!(e.latitude<n&&t.latitude<n)&&!(e.latitude>i&&t.latitude>i));e=(t.latitude-e.latitude)*(r-e.longitude)/(t.longitude-e.longitude)+e.latitude;return n<=e&&e<=i},Ue.check_rect_line_horizontal=function(e,t,r,n,i){if(r<e.latitude&&r<t.latitude)return!1;if(r>e.latitude&&r>t.latitude)return!1;if(e.latitude==t.latitude)return r==e.latitude&&(!(e.longitude<n&&t.longitude<n)&&!(e.longitude>i&&t.longitude>i));e=(t.longitude-e.longitude)*(r-e.latitude)/(t.latitude-e.latitude)+e.longitude;return n<=e&&e<=i},Ue.check_rect_line=function(e,t,r){var n=!1;return Ue.containPoint(e,t)||Ue.containPoint(e,r)?n=!0:(n|=Ue.check_rect_line_horizontal(t,r,e.north,e.west,e.east),n|=Ue.check_rect_line_horizontal(t,r,e.south,e.west,e.east),n|=Ue.check_rect_line_vertical(t,r,e.west,e.south,e.north),n|=Ue.check_rect_line_vertical(t,r,e.east,e.south,e.north)),n},Ue.intersectAabb=function(e,t){for(var r=new Ue,n=t.get_corners(),i=new T,a=0;a<8;a++){var o=T.fromCartesian(n[a],void 0,i);Ue.combine(r,o)}return Ue.intersect(e,r)},Ue.fromGeoAabb=function(e){for(var t=new Ue,r=e.get_corners(),n=new T,i=0;i<8;i++){var a=T.fromCartesian(r[i],void 0,n);Ue.combine(t,a)}return t},Ue.containsRect=function(e,t){var r=Ce.EPSILON6;return t.east<=e.east+r&&t.west>=e.west-r&&t.north<=e.north+r&&t.south>=e.south-r},Ue.combine=function(e,t){e.west>t.longitude&&(e.west=t.longitude),e.east<t.longitude&&(e.east=t.longitude),e.north<t.latitude&&(e.north=t.latitude),e.south>t.latitude&&(e.south=t.latitude),e.maxHeight<t.height&&(e.maxHeight=t.height),e.minHeight>t.height&&(e.minHeight=t.height)},Ue.fromAabb=function(e,t){var r=t.minimum,n=t.maximum,i=n.z/be.WGS84.maximumRadius*1e3,t=r.z/be.WGS84.maximumRadius*1e3,n=n.x/be.WGS84.maximumRadius*1e3,r=r.x/be.WGS84.maximumRadius*1e3;return new Ue(e.longitude+r,e.latitude+t,e.longitude+n,e.latitude+i)},Ue.containPoint=function(e,t){return t.longitude<=e.east&&t.longitude>=e.west&&t.latitude<=e.north&&t.latitude>=e.south},Ue.MAX_VALUE=Object.freeze(new Ue(-Math.PI,-Ce.PI_OVER_TWO,Math.PI,Ce.PI_OVER_TWO)),Me(Object.create)&&((F.prototype=Object.create(Error.prototype)).constructor=F),F.prototype.toString=function(){var e=this.name+": "+this.message;return Me(this.stack)&&(e+="\n"+this.stack.toString()),e};var z,L,B,q,G,V,e,k,j,H,W,X={};z={defaultNoDataValue:-34027999387901484e22,decode:function(e,t){var r=(t=t||{}).encodedMaskData||null===t.encodedMaskData,n=G(e,t.inputOffset||0,r),e=null!==t.noDataValue?t.noDataValue:z.defaultNoDataValue,r=L(n,t.pixelType||Float32Array,t.encodedMaskData,e,t.returnMask),e={width:n.width,height:n.height,pixelData:r.resultPixels,minValue:r.minValue,maxValue:n.pixels.maxValue,noDataValue:e};return r.resultMask&&(e.maskData=r.resultMask),t.returnEncodedMask&&n.mask&&(e.encodedMaskData=n.mask.bitset||null),t.returnFileInfo&&(e.fileInfo=B(n),t.computeUsedBitDepths&&(e.fileInfo.bitDepths=q(n))),e}},L=function(e,t,r,n,i){var a,o,s,u=0,c=e.pixels.numBlocksX,l=e.pixels.numBlocksY,f=Math.floor(e.width/c),h=Math.floor(e.height/l),m=2*e.maxZError,d=Number.MAX_VALUE;r=r||(e.mask?e.mask.bitset:null),o=new t(e.width*e.height),i&&r&&(s=new Uint8Array(e.width*e.height));for(var p,E,_=new Float32Array(f*h),y=0;y<=l;y++){var g=y!==l?h:e.height%l;if(0!==g)for(var T=0;T<=c;T++){var A=T!==c?f:e.width%c;if(0!==A){var R,S,O,x,I=y*e.width*h+T*f,w=e.width-A,M=e.pixels.blocks[u];if(M.encoding<2?(R=0===M.encoding?M.rawData:(V(M.stuffedData,M.bitsPerPixel,M.numValidPixels,M.offset,m,_,e.pixels.maxValue),_),S=0):O=2===M.encoding?0:M.offset,r)for(E=0;E<g;E++){for(7&I&&(x=r[I>>3],x<<=7&I),p=0;p<A;p++)128&(x=!(7&I)?r[I>>3]:x)?(s&&(s[I]=1),d=(a=M.encoding<2?R[S++]:O)<d?a:d,o[I++]=a):(s&&(s[I]=0),o[I++]=n),x<<=1;I+=w}else if(M.encoding<2)for(E=0;E<g;E++){for(p=0;p<A;p++)d=(a=R[S++])<d?a:d,o[I++]=a;I+=w}else for(d=O<d?O:d,E=0;E<g;E++){for(p=0;p<A;p++)o[I++]=O;I+=w}if(1===M.encoding&&S!==M.numValidPixels)throw"Block and Mask do not match";u++}}}return{resultPixels:o,resultMask:s,minValue:d}},B=function(e){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,noDataValue:e.noDataValue}}},q=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,r={},n=0;n<t;n++){var i=e.pixels.blocks[n];0===i.encoding?r.float32=!0:1===i.encoding?r[i.bitsPerPixel]=!0:r[0]=!0}return Object.keys(r)},G=function(e,t,r){var n={},i=new Uint8Array(e,t,10);if(n.fileIdentifierString=String.fromCharCode.apply(null,i),"CntZImage"!==n.fileIdentifierString.trim())throw"Unexpected file identifier string: "+n.fileIdentifierString;t+=10;var a=new DataView(e,t,24);if(n.fileVersion=a.getInt32(0,!0),n.imageType=a.getInt32(4,!0),n.height=a.getUint32(8,!0),n.width=a.getUint32(12,!0),n.maxZError=a.getFloat64(16,!0),t+=24,!r)if(a=new DataView(e,t,16),n.mask={},n.mask.numBlocksY=a.getUint32(0,!0),n.mask.numBlocksX=a.getUint32(4,!0),n.mask.numBytes=a.getUint32(8,!0),n.mask.maxValue=a.getFloat32(12,!0),t+=16,0<n.mask.numBytes){var o=new Uint8Array(Math.ceil(n.width*n.height/8)),s=(a=new DataView(e,t,n.mask.numBytes)).getInt16(0,!0),u=2,c=0;do{if(0<s)for(;s--;)o[c++]=a.getUint8(u++);else for(var l=a.getUint8(u++),s=-s;s--;)o[c++]=l}while(s=a.getInt16(u,!0),(u+=2)<n.mask.numBytes);if(-32768!==s||c<o.length)throw"Unexpected end of mask RLE encoding";n.mask.bitset=o,t+=n.mask.numBytes}else 0==(n.mask.numBytes|n.mask.numBlocksY|n.mask.maxValue)&&(n.mask.bitset=new Uint8Array(Math.ceil(n.width*n.height/8)));a=new DataView(e,t,16),n.pixels={},n.pixels.numBlocksY=a.getUint32(0,!0),n.pixels.numBlocksX=a.getUint32(4,!0),n.pixels.numBytes=a.getUint32(8,!0),n.pixels.maxValue=a.getFloat32(12,!0),t+=16;var i=n.pixels.numBlocksX,r=n.pixels.numBlocksY,f=i+(0<n.width%i?1:0),h=r+(0<n.height%r?1:0);n.pixels.blocks=new Array(f*h);for(var m=0,d=0;d<h;d++)for(var p=0;p<f;p++){var E=0,_=e.byteLength-t;a=new DataView(e,t,Math.min(10,_));var y={};n.pixels.blocks[m++]=y;var g,_=a.getUint8(0);if(E++,y.encoding=63&_,3<y.encoding)throw"Invalid block encoding ("+y.encoding+")";if(2!==y.encoding){if(0!==_&&2!==_){if(_>>=6,2===(y.offsetType=_))y.offset=a.getInt8(1),E++;else if(1===_)y.offset=a.getInt16(1,!0),E+=2;else{if(0!==_)throw"Invalid block offset type";y.offset=a.getFloat32(1,!0),E+=4}if(1===y.encoding)if(_=a.getUint8(E),E++,y.bitsPerPixel=63&_,_>>=6,2===(y.numValidPixelsType=_))y.numValidPixels=a.getUint8(E),E++;else if(1===_)y.numValidPixels=a.getUint16(E,!0),E+=2;else{if(0!==_)throw"Invalid valid pixel count type";y.numValidPixels=a.getUint32(E,!0),E+=4}}if(t+=E,3!==y.encoding)if(0===y.encoding){var T=(n.pixels.numBytes-1)/4;if(T!==Math.floor(T))throw"uncompressed block has invalid length";g=new ArrayBuffer(4*T),new Uint8Array(g).set(new Uint8Array(e,t,4*T));var A=new Float32Array(g);y.rawData=A,t+=4*T}else 1===y.encoding&&(A=Math.ceil(y.numValidPixels*y.bitsPerPixel/8),T=Math.ceil(A/4),g=new ArrayBuffer(4*T),new Uint8Array(g).set(new Uint8Array(e,t,A)),y.stuffedData=new Uint32Array(g),t+=A)}else t++}return n.eofOffset=t,n},V=function(e,t,r,n,i,a,o){var s,u,c,l,f=(1<<t)-1,h=0,m=0,d=Math.ceil((o-n)/i),p=4*e.length-Math.ceil(t*r/8);for(e[e.length-1]<<=8*p,s=0;s<r;s++)0===m&&(l=e[h++],m=32),t<=m?(c=l>>>m-t&f,m-=t):(c=(l&f)<<(u=t-m)&f,c+=(l=e[h++])>>>(m=32-u)),a[s]=c<d?n+c*i:o;return a},k=z,j=function(){var T=function(e,t,r,n,i,a,o,s){var u,c,l,f,h,m=(1<<r)-1,d=0,p=0,E=4*e.length-Math.ceil(r*n/8);if(e[e.length-1]<<=8*E,i)for(u=0;u<n;u++)0===p&&(l=e[d++],p=32),r<=p?(c=l>>>p-r&m,p-=r):(c=(l&m)<<(f=r-p)&m,c+=(l=e[d++])>>>(p=32-f)),t[u]=i[c];else for(h=Math.ceil((s-a)/o),u=0;u<n;u++)0===p&&(l=e[d++],p=32),r<=p?(c=l>>>p-r&m,p-=r):(c=(l&m)<<(f=r-p)&m,c+=(l=e[d++])>>>(p=32-f)),t[u]=c<h?a+c*o:s},A=function(e,t,r,n,i,a){var o,s,u=(1<<t)-1,c=0,l=0,f=0,h=0,m=[],d=4*e.length-Math.ceil(t*r/8);e[e.length-1]<<=8*d;for(var p=Math.ceil((a-n)/i),l=0;l<r;l++)0===f&&(s=e[c++],f=32),t<=f?(h=s>>>f-t&u,f-=t):(h=(s&u)<<(o=t-f)&u,h+=(s=e[c++])>>>(f=32-o)),m[l]=h<p?n+h*i:a;return m.unshift(n),m},R=function(e,t,r,n,i,a,o,s){var u,c,l,f=(1<<r)-1,h=0,m=0,d=0;if(i)for(E=0;E<n;E++)0===m&&(c=e[h++],m=32,d=0),r<=m?(u=c>>>d&f,m-=r,d+=r):(u=c>>>d&f,m=32-(l=r-m),u|=((c=e[h++])&(1<<l)-1)<<r-l,d=l),t[E]=i[u];else for(var p=Math.ceil((s-a)/o),E=0;E<n;E++)0===m&&(c=e[h++],m=32,d=0),r<=m?(u=c>>>d&f,m-=r,d+=r):(u=c>>>d&f,m=32-(l=r-m),u|=((c=e[h++])&(1<<l)-1)<<r-l,d=l),t[E]=u<p?a+u*o:s;return t},S=function(e,t,r,n,i,a){for(var o,s,u=(1<<t)-1,c=0,l=0,f=0,h=0,m=0,d=[],p=Math.ceil((a-n)/i),l=0;l<r;l++)0===f&&(s=e[c++],f=32,m=0),t<=f?(h=s>>>m&u,f-=t,m+=t):(h=s>>>m&u,f=32-(o=t-f),h|=((s=e[c++])&(1<<o)-1)<<t-o,m=o),d[l]=h<p?n+h*i:a;return d.unshift(n),d},O=function(e,t,r,n){var i,a,o,s,u=(1<<r)-1,c=0,l=0,f=4*e.length-Math.ceil(r*n/8);for(e[e.length-1]<<=8*f,i=0;i<n;i++)0===l&&(o=e[c++],l=32),r<=l?(a=o>>>l-r&u,l-=r):(a=(o&u)<<(s=r-l)&u,a+=(o=e[c++])>>>(l=32-s)),t[i]=a;return t},x=function(e,t,r,n){for(var i,a,o,s=(1<<r)-1,u=0,c=0,l=0,f=0;f<n;f++)0===c&&(a=e[u++],c=32,l=0),r<=c?(i=a>>>l&s,c-=r,l+=r):(i=a>>>l&s,c=32-(o=r-c),i|=((a=e[u++])&(1<<o)-1)<<r-o,l=o),t[f]=i;return t},B={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(e){for(var t=65535,r=65535,n=e.length,i=Math.floor(n/2),a=0;i;){var o=359<=i?359:i;for(i-=o;t+=e[a++]<<8,r+=t+=e[a++],--o;);t=(65535&t)+(t>>>16),r=(65535&r)+(r>>>16)}return 1&n&&(r+=t+=e[a]<<8),((r=(65535&r)+(r>>>16))<<16|(t=(65535&t)+(t>>>16)))>>>0},readHeaderInfo:function(e,t){var r=t.ptr,n=new Uint8Array(e,r,6),i={};if(i.fileIdentifierString=String.fromCharCode.apply(null,n),0!==i.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+i.fileIdentifierString;r+=6;var a=new DataView(e,r,8),n=a.getInt32(0,!0);if(r+=4,3<=(i.fileVersion=n)&&(i.checksum=a.getUint32(4,!0),r+=4),a=new DataView(e,r,12),i.height=a.getUint32(0,!0),i.width=a.getUint32(4,!0),r+=8,4<=n?(i.numDims=a.getUint32(8,!0),r+=4):i.numDims=1,a=new DataView(e,r,40),i.numValidPixel=a.getUint32(0,!0),i.microBlockSize=a.getInt32(4,!0),i.blobSize=a.getInt32(8,!0),i.imageType=a.getInt32(12,!0),i.maxZError=a.getFloat64(16,!0),i.zMin=a.getFloat64(24,!0),i.zMax=a.getFloat64(32,!0),r+=40,t.headerInfo=i,t.ptr=r,3<=n&&this.computeChecksumFletcher32(new Uint8Array(e,r-(4<=n?52:48),i.blobSize-14))!==i.checksum)throw"Checksum failed.";return!0},checkMinMaxRanges:function(e,t){var r=t.headerInfo,n=this.getDataTypeArray(r.imageType),i=r.numDims*this.getDataTypeSize(r.imageType),a=this.readSubArray(e,t.ptr,n,i),o=this.readSubArray(e,t.ptr+i,n,i);t.ptr+=2*i;for(var s=!0,u=0;u<r.numDims;u++)if(a[u]!==o[u]){s=!1;break}return r.minValues=a,r.maxValues=o,s},readSubArray:function(e,t,r,n){var i=r===Uint8Array?new Uint8Array(e,t,n):(i=new ArrayBuffer(n),new Uint8Array(i).set(new Uint8Array(e,t,n)),new r(i));return i},readMask:function(e,t){var r=t.ptr,n=t.headerInfo,i=n.width*n.height,n=n.numValidPixel,a=new DataView(e,r,4),o={};if(o.numBytes=a.getUint32(0,!0),r+=4,(0===n||i===n)&&0!==o.numBytes)throw"invalid mask";if(0===n)u=new Uint8Array(Math.ceil(i/8)),o.bitset=u,h=new Uint8Array(i),t.pixels.resultMask=h,r+=o.numBytes;else if(0<o.numBytes){var s,u=new Uint8Array(Math.ceil(i/8)),c=(a=new DataView(e,r,o.numBytes)).getInt16(0,!0),l=2,f=0;do{if(0<c)for(;c--;)u[f++]=a.getUint8(l++);else for(s=a.getUint8(l++),c=-c;c--;)u[f++]=s}while(c=a.getInt16(l,!0),(l+=2)<o.numBytes);if(-32768!==c||f<u.length)throw"Unexpected end of mask RLE encoding";for(var h=new Uint8Array(i),m=0,d=0,d=0;d<i;d++)7&d?(m=u[d>>3],m<<=7&d):m=u[d>>3],128&m&&(h[d]=1);t.pixels.resultMask=h,o.bitset=u,r+=o.numBytes}return t.ptr=r,t.mask=o,!0},readDataOneSweep:function(e,t,r){var n=t.ptr,i=t.headerInfo,a=i.numDims,o=i.width*i.height,s=i.imageType,i=i.numValidPixel*B.getDataTypeSize(s)*a,u=t.pixels.resultMask,c=r===Uint8Array?new Uint8Array(e,n,i):(s=new ArrayBuffer(i),new Uint8Array(s).set(new Uint8Array(e,n,i)),new r(s));if(c.length===o*a)t.pixels.resultPixels=c;else{t.pixels.resultPixels=new r(o*a);var l,f=0,h=0,m=0;if(1<a)for(m=0;m<a;m++)for(l=m*o,h=0;h<o;h++)u[h]&&(t.pixels.resultPixels[l+h]=c[f++]);else for(h=0;h<o;h++)u[h]&&(t.pixels.resultPixels[h]=c[f++])}return t.ptr=n+=i,!0},readHuffmanTree:function(e,t){var r=this.HUFFMAN_LUT_BITS_MAX,n=new DataView(e,t.ptr,16);if(t.ptr+=16,n.getInt32(0,!0)<2)throw"unsupported Huffman version";var i=n.getInt32(4,!0),a=n.getInt32(8,!0),o=n.getInt32(12,!0);if(o<=a)return!1;var s=new Uint32Array(o-a);B.decodeBits(e,t,s);for(var u,c,l,f=[],h=a;h<o;h++)f[u=h-(h<i?0:i)]={first:s[h-a],second:null};var m=e.byteLength-t.ptr,n=Math.ceil(m/4),n=new ArrayBuffer(4*n);new Uint8Array(n).set(new Uint8Array(e,t.ptr,m));var d=new Uint32Array(n),p=0,E=0,_=d[0];for(h=a;h<o;h++)0<(l=f[u=h-(h<i?0:i)].first)&&(f[u].second=_<<p>>>32-l,l<=32-p?32===(p+=l)&&(p=0,_=d[++E]):(_=d[++E],f[u].second|=_>>>32-(p+=l-32)));var y=0,g=0,T=new w;for(h=0;h<f.length;h++)void 0!==f[h]&&(y=Math.max(y,f[h].first));g=r<=y?r:y,30<=y&&console.log("WARning, large NUM LUT BITS IS "+y);var A,R,S,O,x,I=[];for(h=a;h<o;h++)if(0<(l=f[u=h-(h<i?0:i)].first))if(A=[l,u],l<=g)for(R=f[u].second<<g-l,S=1<<g-l,c=0;c<S;c++)I[R|c]=A;else for(R=f[u].second,x=T,O=l-1;0<=O;O--)x=R>>>O&1?(x.right||(x.right=new w),x.right):(x.left||(x.left=new w),x.left),0!==O||x.val||(x.val=A[1]);return{decodeLut:I,numBitsLUTQick:g,numBitsLUT:y,tree:T,stuffedData:d,srcPtr:E,bitPos:p}},readHuffman:function(e,t,r){var n,i,a,o,s,u,c,l,f,h=t.headerInfo,m=h.numDims,d=t.headerInfo.height,p=t.headerInfo.width,E=p*d,e=this.readHuffmanTree(e,t),_=e.decodeLut,y=e.tree,g=e.stuffedData,T=e.srcPtr,A=e.bitPos,R=e.numBitsLUTQick,S=e.numBitsLUT,O=0===t.headerInfo.imageType?128:0,x=t.pixels.resultMask,I=0;0<A&&(T++,A=0);for(var w=g[T],M=1===t.encodeMode,N=new r(E*m),C=N,v=0;v<h.numDims;v++){if(1<m&&(C=new r(N.buffer,E*v,E),I=0),t.headerInfo.numValidPixel===p*d)for(u=l=0;u<d;u++)for(c=0;c<p;c++,l++){if(i=0,s=o=w<<A>>>32-R,_[s=32-A<R?o|=g[T+1]>>>64-A-R:s])i=_[s][1],A+=_[s][0];else for(s=o=w<<A>>>32-S,32-A<S&&(s=o|=g[T+1]>>>64-A-S),n=y,f=0;f<S;f++)if(!(n=o>>>S-f-1&1?n.right:n.left).left&&!n.right){i=n.val,A=A+f+1;break}32<=A&&(A-=32,w=g[++T]),a=i-O,M?(a+=!(0<c)&&0<u?C[l-p]:I,a&=255,I=C[l]=a):C[l]=a}else for(u=l=0;u<d;u++)for(c=0;c<p;c++,l++)if(x[l]){if(i=0,s=o=w<<A>>>32-R,_[s=32-A<R?o|=g[T+1]>>>64-A-R:s])i=_[s][1],A+=_[s][0];else for(s=o=w<<A>>>32-S,32-A<S&&(s=o|=g[T+1]>>>64-A-S),n=y,f=0;f<S;f++)if(!(n=o>>>S-f-1&1?n.right:n.left).left&&!n.right){i=n.val,A=A+f+1;break}32<=A&&(A-=32,w=g[++T]),a=i-O,M?(!(0<c&&x[l-1])&&0<u&&x[l-p]?a+=C[l-p]:a+=I,a&=255,I=C[l]=a):C[l]=a}t.ptr=t.ptr+4*(T+1)+(0<A?4:0)}t.pixels.resultPixels=N},decodeBits:function(e,t,r,n,i){var a=t.headerInfo,o=a.fileVersion,s=0,u=5<=e.byteLength-t.ptr?5:e.byteLength-t.ptr,c=new DataView(e,t.ptr,u),l=c.getUint8(0);s++;var f=l>>6,h=0==f?4:3-f,u=0<(32&l),f=31&l,l=0;if(1==h)l=c.getUint8(s),s++;else if(2==h)l=c.getUint16(s,!0),s+=2;else{if(4!=h)throw"Invalid valid pixel count type";l=c.getUint32(s,!0),s+=4}var m,d,p,E,_,y,g,h=2*a.maxZError,a=1<a.numDims?a.maxValues[i]:a.zMax;if(u){for(t.counter.lut++,y=c.getUint8(s),s++,E=Math.ceil((y-1)*f/8),_=Math.ceil(E/4),d=new ArrayBuffer(4*_),p=new Uint8Array(d),t.ptr+=s,p.set(new Uint8Array(e,t.ptr,E)),c=new Uint32Array(d),t.ptr+=E,g=0;y-1>>>g;)g++;E=Math.ceil(l*g/8),_=Math.ceil(E/4),d=new ArrayBuffer(4*_),(p=new Uint8Array(d)).set(new Uint8Array(e,t.ptr,E)),m=new Uint32Array(d),t.ptr+=E,c=(3<=o?S:A)(c,f,y-1,n,h,a),(3<=o?R:T)(m,r,g,l,c)}else t.counter.bitstuffer++,g=f,t.ptr+=s,0<g&&(E=Math.ceil(l*g/8),_=Math.ceil(E/4),d=new ArrayBuffer(4*_),(p=new Uint8Array(d)).set(new Uint8Array(e,t.ptr,E)),m=new Uint32Array(d),t.ptr+=E,3<=o?null===n?x(m,r,g,l):R(m,r,g,l,!1,n,h,a):null===n?O(m,r,g,l):T(m,r,g,l,!1,n,h,a))},readTiles:function(e,t,r){var n=t.headerInfo,i=n.width,a=n.height,o=n.microBlockSize,s=n.imageType,u=B.getDataTypeSize(s),c=Math.ceil(i/o),l=Math.ceil(a/o);t.pixels.numBlocksY=l,t.pixels.numBlocksX=c;for(var f,h,m,d,p,E,_,y,g,T,A,R,S,O,x=t.pixels.ptr=0,I=0,w=0,M=0,N=0,C=0,v=0,b=0,U=new r(o*o),D=a%o||o,P=i%o||o,F=n.numDims,z=t.pixels.resultMask,L=t.pixels.resultPixels,w=0;w<l;w++)for(f=w!==l-1?o:D,M=0;M<c;M++)for(N=w*i*o+M*o,E=i-(h=M!==c-1?o:P),O=0;O<F;O++){if(1<F&&(L=new r(t.pixels.resultPixels.buffer,i*a*O*u,i*a)),m=e.byteLength-t.ptr,g={},b=0,b++,p=(d=(y=new DataView(e,t.ptr,Math.min(10,m))).getUint8(0))>>6&255,(d>>2&15)!=(M*o>>3&15))throw"integrity issue";if(3<(A=3&d))throw t.ptr+=b,"Invalid block encoding ("+A+")";if(2!=A)if(0==A){if(t.counter.uncompressed++,t.ptr+=b,C=(C=f*h*u)<(_=e.byteLength-t.ptr)?C:_,R=new ArrayBuffer(C%u==0?C:C+u-C%u),new Uint8Array(R).set(new Uint8Array(e,t.ptr,C)),T=new r(R),v=0,z)for(x=0;x<f;x++){for(I=0;I<h;I++)z[N]&&(L[N]=T[v++]),N++;N+=E}else for(x=0;x<f;x++){for(I=0;I<h;I++)L[N++]=T[v++];N+=E}t.ptr+=v*u}else if(R=B.getDataTypeUsed(s,p),S=B.getOnePixel(g,b,R,y),b+=B.getDataTypeSize(R),3==A)if(t.ptr+=b,t.counter.constantoffset++,z)for(x=0;x<f;x++){for(I=0;I<h;I++)z[N]&&(L[N]=S),N++;N+=E}else for(x=0;x<f;x++){for(I=0;I<h;I++)L[N++]=S;N+=E}else if(t.ptr+=b,B.decodeBits(e,t,U,S,O),b=0,z)for(x=0;x<f;x++){for(I=0;I<h;I++)z[N]&&(L[N]=U[b++]),N++;N+=E}else for(x=0;x<f;x++){for(I=0;I<h;I++)L[N++]=U[b++];N+=E}else t.counter.constant++,t.ptr+=b}},formatFileInfo:function(e){return{fileIdentifierString:e.headerInfo.fileIdentifierString,fileVersion:e.headerInfo.fileVersion,imageType:e.headerInfo.imageType,height:e.headerInfo.height,width:e.headerInfo.width,numValidPixel:e.headerInfo.numValidPixel,microBlockSize:e.headerInfo.microBlockSize,blobSize:e.headerInfo.blobSize,maxZError:e.headerInfo.maxZError,pixelType:B.getPixelType(e.headerInfo.imageType),eofOffset:e.eofOffset,mask:e.mask?{numBytes:e.mask.numBytes}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,maxValue:e.headerInfo.zMax,minValue:e.headerInfo.zMin,noDataValue:e.noDataValue}}},constructConstantSurface:function(e){var t,r=e.headerInfo.zMax,n=e.headerInfo.numDims,i=e.headerInfo.height*e.headerInfo.width,a=i*n,o=0,s=0,u=e.pixels.resultMask;if(u)if(1<n)for(o=0;o<n;o++)for(t=o*i,s=0;s<i;s++)u[s]&&(e.pixels.resultPixels[t+s]=r);else for(s=0;s<i;s++)u[s]&&(e.pixels.resultPixels[s]=r);else if(e.pixels.resultPixels.fill)e.pixels.resultPixels.fill(r);else for(s=0;s<a;s++)e.pixels.resultPixels[s]=r},getDataTypeArray:function(e){var t;switch(e){case 0:t=Int8Array;break;case 1:t=Uint8Array;break;case 2:t=Int16Array;break;case 3:t=Uint16Array;break;case 4:t=Int32Array;break;case 5:t=Uint32Array;break;case 6:t=Float32Array;break;case 7:t=Float64Array;break;default:t=Float32Array}return t},getPixelType:function(e){var t;switch(e){case 0:t="S8";break;case 1:t="U8";break;case 2:t="S16";break;case 3:t="U16";break;case 4:t="S32";break;case 5:t="U32";break;case 6:t="F32";break;case 7:t="F64";break;default:t="F32"}return t},isValidPixelValue:function(e,t){if(null===t)return!1;var r;switch(e){case 0:r=-128<=t&&t<=127;break;case 1:r=0<=t&&t<=255;break;case 2:r=-32768<=t&&t<=32767;break;case 3:r=0<=t&&t<=65536;break;case 4:r=-2147483648<=t&&t<=2147483647;break;case 5:r=0<=t&&t<=4294967296;break;case 6:r=-34027999387901484e22<=t&&t<=34027999387901484e22;break;case 7:r=5e-324<=t&&t<=17976931348623157e292;break;default:r=!1}return r},getDataTypeSize:function(e){var t=0;switch(e){case 0:case 1:t=1;break;case 2:case 3:t=2;break;case 4:case 5:case 6:t=4;break;case 7:t=8;break;default:t=e}return t},getDataTypeUsed:function(e,t){var r=e;switch(e){case 2:case 4:r=e-t;break;case 3:case 5:r=e-2*t;break;case 6:r=0===t?e:1===t?2:1;break;case 7:r=0===t?e:e-2*t+1;break;default:r=e}return r},getOnePixel:function(e,t,r,n){var i=0;switch(r){case 0:i=n.getInt8(t);break;case 1:i=n.getUint8(t);break;case 2:i=n.getInt16(t,!0);break;case 3:i=n.getUint16(t,!0);break;case 4:i=n.getInt32(t,!0);break;case 5:i=n.getUInt32(t,!0);break;case 6:i=n.getFloat32(t,!0);break;case 7:i=n.getFloat64(t,!0);break;default:throw"the decoder does not understand this pixel type"}return i}},w=function(e,t,r){this.val=e,this.left=t,this.right=r};return{decode:function(e,t){var r=(t=t||{}).noDataValue,n=0,i={};i.ptr=t.inputOffset||0,i.pixels={},B.readHeaderInfo(e,i);var a=i.headerInfo,o=a.fileVersion,s=B.getDataTypeArray(a.imageType);B.readMask(e,i),a.numValidPixel===a.width*a.height||i.pixels.resultMask||(i.pixels.resultMask=t.maskData);var u,c=a.width*a.height;if(i.pixels.resultPixels=new s(c*a.numDims),i.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0},0!==a.numValidPixel)if(a.zMax===a.zMin)B.constructConstantSurface(i);else if(4<=o&&B.checkMinMaxRanges(e,i))B.constructConstantSurface(i);else{var l=new DataView(e,i.ptr,2),f=l.getUint8(0);if(i.ptr++,f)B.readDataOneSweep(e,i,s);else if(1<o&&a.imageType<=1&&Math.abs(a.maxZError-.5)<1e-5){l=l.getUint8(1);if(i.ptr++,2<(i.encodeMode=l)||o<4&&1<l)throw"Invalid Huffman flag "+l;l?B.readHuffman(e,i,s):B.readTiles(e,i,s)}else B.readTiles(e,i,s)}i.eofOffset=i.ptr,t.inputOffset?(u=i.headerInfo.blobSize+t.inputOffset-i.ptr,1<=Math.abs(u)&&(i.eofOffset=t.inputOffset+i.headerInfo.blobSize)):(u=i.headerInfo.blobSize-i.ptr,1<=Math.abs(u)&&(i.eofOffset=i.headerInfo.blobSize));var h={width:a.width,height:a.height,pixelData:i.pixels.resultPixels,minValue:a.zMin,maxValue:a.zMax,validPixelCount:a.numValidPixel,dimCount:a.numDims,dimStats:{minValues:a.minValues,maxValues:a.maxValues},maskData:i.pixels.resultMask};if(i.pixels.resultMask&&B.isValidPixelValue(a.imageType,r)){for(var m=i.pixels.resultMask,n=0;n<c;n++)m[n]||(h.pixelData[n]=r);h.noDataValue=r}return i.noDataValue=r,t.returnFileInfo&&(h.fileInfo=B.formatFileInfo(i)),h},getBandCount:function(e){for(var t=0,r=0,n={ptr:0,pixels:{}};r<e.byteLength-58;)B.readHeaderInfo(e,n),r+=n.headerInfo.blobSize,t++,n.ptr=r;return t}}}(),e=new ArrayBuffer(4),W=new Uint8Array(e),H=(new Uint32Array(e)[0]=1)===W[0],W={decode:function(e,t){if(!H)throw"Big endian system is not supported.";var r,n,i=(t=t||{}).inputOffset||0,a=new Uint8Array(e,i,10),a=String.fromCharCode.apply(null,a);if("CntZImage"===a.trim())r=k,n=1;else{if("Lerc2"!==a.substring(0,5))throw"Unexpected file identifier string: "+a;r=j,n=2}for(var o,s,u,c,l,f,h=0,m=e.byteLength-10,d=[],p={width:0,height:0,pixels:[],pixelType:t.pixelType,mask:null,statistics:[]};i<m;){var E=r.decode(e,{inputOffset:i,encodedMaskData:o,maskData:u,returnMask:0===h,returnEncodedMask:0===h,returnFileInfo:!0,pixelType:t.pixelType||null,noDataValue:t.noDataValue||null}),i=E.fileInfo.eofOffset;0===h&&(o=E.encodedMaskData,u=E.maskData,p.width=E.width,p.height=E.height,p.dimCount=E.dimCount||1,p.pixelType=E.pixelType||E.fileInfo.pixelType,p.mask=E.maskData),1<n&&E.fileInfo.mask&&0<E.fileInfo.mask.numBytes&&d.push(E.maskData),h++,p.pixels.push(E.pixelData),p.statistics.push({minValue:E.minValue,maxValue:E.maxValue,noDataValue:E.noDataValue,dimStats:E.dimStats})}if(1<n&&1<d.length){for(f=p.width*p.height,p.bandMasks=d,(u=new Uint8Array(f)).set(d[0]),c=1;c<d.length;c++)for(s=d[c],l=0;l<f;l++)u[l]=u[l]&s[l];p.maskData=u}return p}},X.Lerc=W;var Y,K,Z,J=X.Lerc;function Q(e,t,r,n){return $(e).then(t,r,n)}function $(e){var t,r,e=e instanceof ee?e:ne(e)?(t=re(),e.then(function(e){t.resolve(e)},function(e){t.reject(e)},function(e){t.progress(e)}),t.promise):(r=e,new ee(function(e){try{return $(e?e(r):r)}catch(e){return te(e)}}));return e}function ee(e){this.then=e}function te(r){return new ee(function(e,t){try{return t?$(t(r)):te(r)}catch(e){return te(e)}})}function re(){var e=new ee(i),o=[],s=[],n=function(t,r,n){var i=re(),a="function"==typeof n?function(e){try{i.progress(n(e))}catch(e){i.progress(e)}}:function(e){i.progress(e)};return o.push(function(e){e.then(t,r).then(i.resolve,i.reject,a)}),s.push(a),i.promise},t=function(e){return se(s,e),e},r=function(e){return e=$(e),n=e.then,r=$,t=ue,se(o,e),s=o=Z,e};return{then:i,resolve:a,reject:u,progress:c,promise:e,resolver:{resolve:a,reject:u,progress:c}};function i(e,t,r){return n(e,t,r)}function a(e){return r(e)}function u(e){return r(te(e))}function c(e){return t(e)}}function ne(e){return e&&"function"==typeof e.then}function ie(e,m,d,p,E){return Q(e,function(e){var t,r,n,i,a=e.length>>>0,o=Math.max(0,Math.min(m,a)),s=[],u=a-o+1,c=[],l=re();if(o)for(n=l.progress,r=function(e){c.push(e),--u||(t=r=ue,l.reject(c))},t=function(e){s.push(e),--o||(t=r=ue,l.resolve(s))},i=0;i<a;++i)i in e&&Q(e[i],h,f,n);else l.resolve(s);return l.then(d,p,E);function f(e){r(e)}function h(e){t(e)}})}function ae(e,t,r,n){return oe(e,ce).then(t,r,n)}function oe(e,s){return Q(e,function(e){var t,r,n,i=t=e.length>>>0,a=[],o=re();if(i)for(r=function(e,t){Q(e,s).then(function(e){a[t]=e,--i||o.resolve(a)},o.reject)},n=0;n<t;n++)n in e?r(e[n],n):--i;else o.resolve(a);return o.promise})}function se(e,t){for(var r,n=0;r=e[n++];)r(t)}function ue(){}function ce(e){return e}function le(e){this._ellipsoid=Ne(e,be.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Q.defer=re,Q.resolve=$,Q.reject=function(e){return Q(e,te)},Q.join=function(){return oe(arguments,ce)},Q.all=ae,Q.map=oe,Q.reduce=function(e,a){var t=K.call(arguments,1);return Q(e,function(e){var i=e.length;return t[0]=function(e,r,n){return Q(e,function(t){return Q(r,function(e){return a(t,e,n,i)})})},Y.apply(e,t)})},Q.any=function(e,t,r,n){return ie(e,1,function(e){return t?t(e[0]):e[0]},r,n)},Q.some=ie,Q.chain=function(e,t,r){var n=2<arguments.length;return Q(e,function(e){return t.resolve(e=n?r:e),e},function(e){return t.reject(e),te(e)},t.progress)},Q.isPromise=ne,ee.prototype={always:function(e,t){return this.then(e,e,t)},otherwise:function(e){return this.then(Z,e)},yield:function(e){return this.then(function(){return e})},spread:function(t){return this.then(function(e){return ae(e,function(e){return t.apply(Z,e)})})}},K=[].slice,Y=[].reduce||function(e){var t,r=0,n=Object(this),i=n.length>>>0,a=arguments;if(a.length<=1)for(;;){if(r in n){t=n[r++];break}if(++r>=i)throw new TypeError}else t=a[1];for(;r<i;++r)r in n&&(t=e(t,n[r],r,n));return t},Object.defineProperties(le.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),le.prototype.project=function(e,t){this._semimajorAxis;var r=e.longitude,n=e.latitude,e=e.height;return Me(t)?(t.x=r,t.y=n,t.z=e,t):new ve(r,n,e)},le.prototype.unproject=function(e,t){this._oneOverSemimajorAxis;var r=e.x,n=e.y,e=e.z;return Me(t)?(t.longitude=r,t.latitude=n,t.height=e,t):new T(r,n,e)};var fe=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});function he(e,t){this.start=Ne(e,0),this.stop=Ne(t,0)}function me(e,t,r,n,i,a,o,s,u){this[0]=Ne(e,0),this[1]=Ne(n,0),this[2]=Ne(o,0),this[3]=Ne(t,0),this[4]=Ne(i,0),this[5]=Ne(s,0),this[6]=Ne(r,0),this[7]=Ne(a,0),this[8]=Ne(u,0)}me.packedLength=9,me.pack=function(e,t,r){return r=Ne(r,0),t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t[r++]=e[4],t[r++]=e[5],t[r++]=e[6],t[r++]=e[7],t[r++]=e[8],t},me.unpack=function(e,t,r){return t=Ne(t,0),(r=!Me(r)?new me:r)[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r[4]=e[t++],r[5]=e[t++],r[6]=e[t++],r[7]=e[t++],r[8]=e[t++],r},me.clone=function(e,t){if(Me(e))return Me(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):new me(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])},me.fromArray=function(e,t,r){return t=Ne(t,0),(r=!Me(r)?new me:r)[0]=e[t],r[1]=e[t+1],r[2]=e[t+2],r[3]=e[t+3],r[4]=e[t+4],r[5]=e[t+5],r[6]=e[t+6],r[7]=e[t+7],r[8]=e[t+8],r},me.fromColumnMajorArray=function(e,t){return me.clone(e,t)},me.fromRowMajorArray=function(e,t){return Me(t)?(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t):new me(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},me.fromQuaternion=function(e,t){var r=e.x*e.x,n=e.x*e.y,i=e.x*e.z,a=e.x*e.w,o=e.y*e.y,s=e.y*e.z,u=e.y*e.w,c=e.z*e.z,l=e.z*e.w,f=e.w*e.w,h=r-o-c+f,m=2*(n-l),d=2*(i+u),e=2*(n+l),n=o-r-c+f,l=2*(s-a),u=2*(i-u),a=2*(s+a),f=-r-o+c+f;return Me(t)?(t[0]=h,t[1]=e,t[2]=u,t[3]=m,t[4]=n,t[5]=a,t[6]=d,t[7]=l,t[8]=f,t):new me(h,m,d,e,n,l,u,a,f)},me.fromHeadingPitchRoll=function(e,t){var r=Math.cos(-e.pitch),n=Math.cos(-e.heading),i=Math.cos(e.roll),a=Math.sin(-e.pitch),o=Math.sin(-e.heading),s=Math.sin(e.roll),u=r*n,c=-i*o+s*a*n,l=s*o+i*a*n,f=r*o,e=i*n+s*a*o,o=-s*n+i*a*o,a=-a,s=s*r,r=i*r;return Me(t)?(t[0]=u,t[1]=f,t[2]=a,t[3]=c,t[4]=e,t[5]=s,t[6]=l,t[7]=o,t[8]=r,t):new me(u,c,l,f,e,o,a,s,r)},me.fromScale=function(e,t){return Me(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=e.y,t[5]=0,t[6]=0,t[7]=0,t[8]=e.z,t):new me(e.x,0,0,0,e.y,0,0,0,e.z)},me.fromUniformScale=function(e,t){return Me(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=e,t):new me(e,0,0,0,e,0,0,0,e)},me.fromCrossProduct=function(e,t){return Me(t)?(t[0]=0,t[1]=e.z,t[2]=-e.y,t[3]=-e.z,t[4]=0,t[5]=e.x,t[6]=e.y,t[7]=-e.x,t[8]=0,t):new me(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0)},me.fromRotationX=function(e,t){var r=Math.cos(e),e=Math.sin(e);return Me(t)?(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=r,t[5]=e,t[6]=0,t[7]=-e,t[8]=r,t):new me(1,0,0,0,r,-e,0,e,r)},me.fromRotationY=function(e,t){var r=Math.cos(e),e=Math.sin(e);return Me(t)?(t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=1,t[5]=0,t[6]=e,t[7]=0,t[8]=r,t):new me(r,0,e,0,1,0,-e,0,r)},me.fromRotationZ=function(e,t){var r=Math.cos(e),e=Math.sin(e);return Me(t)?(t[0]=r,t[1]=e,t[2]=0,t[3]=-e,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new me(r,-e,0,e,r,0,0,0,1)},me.toArray=function(e,t){return Me(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},me.getElementIndex=function(e,t){return 3*e+t},me.getColumn=function(e,t,r){var n=3*t,i=e[n],t=e[1+n],n=e[2+n];return r.x=i,r.y=t,r.z=n,r},me.setColumn=function(e,t,r,n){t*=3;return(n=me.clone(e,n))[t]=r.x,n[1+t]=r.y,n[2+t]=r.z,n},me.getRow=function(e,t,r){var n=e[t],i=e[t+3],t=e[t+6];return r.x=n,r.y=i,r.z=t,r},me.setRow=function(e,t,r,n){return(n=me.clone(e,n))[t]=r.x,n[t+3]=r.y,n[t+6]=r.z,n};var de=new ve;me.getScale=function(e,t){return t.x=ve.magnitude(ve.fromElements(e[0],e[1],e[2],de)),t.y=ve.magnitude(ve.fromElements(e[3],e[4],e[5],de)),t.z=ve.magnitude(ve.fromElements(e[6],e[7],e[8],de)),t};var pe=new ve;me.getMaximumScale=function(e){return me.getScale(e,pe),ve.maximumComponent(pe)},me.multiply=function(e,t,r){var n=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],i=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],a=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],o=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],s=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],u=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],c=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],l=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],t=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return r[0]=n,r[1]=i,r[2]=a,r[3]=o,r[4]=s,r[5]=u,r[6]=c,r[7]=l,r[8]=t,r},me.add=function(e,t,r){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r},me.subtract=function(e,t,r){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r},me.multiplyByVector=function(e,t,r){var n=t.x,i=t.y,a=t.z,o=e[0]*n+e[3]*i+e[6]*a,t=e[1]*n+e[4]*i+e[7]*a,a=e[2]*n+e[5]*i+e[8]*a;return r.x=o,r.y=t,r.z=a,r},me.multiplyByScalar=function(e,t,r){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r},me.multiplyByScale=function(e,t,r){return r[0]=e[0]*t.x,r[1]=e[1]*t.x,r[2]=e[2]*t.x,r[3]=e[3]*t.y,r[4]=e[4]*t.y,r[5]=e[5]*t.y,r[6]=e[6]*t.z,r[7]=e[7]*t.z,r[8]=e[8]*t.z,r},me.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t},me.transpose=function(e,t){var r=e[0],n=e[3],i=e[6],a=e[1],o=e[4],s=e[7],u=e[2],c=e[5],e=e[8];return t[0]=r,t[1]=n,t[2]=i,t[3]=a,t[4]=o,t[5]=s,t[6]=u,t[7]=c,t[8]=e,t};var Ee=new ve(1,1,1);me.getRotation=function(e,t){var r=ve.divideComponents(Ee,me.getScale(e,pe),pe);return t=me.multiplyByScale(e,r,t)};var _e=[1,0,0],ye=[2,2,1];var ge=new me,Te=new me;function Ae(e,t,r,n){this.x=Ne(e,0),this.y=Ne(t,0),this.z=Ne(r,0),this.w=Ne(n,0)}me.computeEigenDecomposition=function(e,t){for(var r=Ce.EPSILON20,n=0,i=0,a=(t=!Me(t)?{}:t).unitary=me.clone(me.IDENTITY,t.unitary),o=t.diagonal=me.clone(e,t.diagonal),s=r*function(e){for(var t=0,r=0;r<9;++r){var n=e[r];t+=n*n}return Math.sqrt(t)}(o);i<10&&function(e){for(var t=0,r=0;r<3;++r){var n=e[me.getElementIndex(ye[r],_e[r])];t+=2*n*n}return Math.sqrt(t)}(o)>s;)!function(e,t){for(var r=Ce.EPSILON15,n=0,i=1,a=0;a<3;++a){var o=Math.abs(e[me.getElementIndex(ye[a],_e[a])]);n<o&&(i=a,n=o)}var s=1,u=0,c=_e[i],l=ye[i];Math.abs(e[me.getElementIndex(l,c)])>r&&(u=(r=(r=(e[me.getElementIndex(l,l)]-e[me.getElementIndex(c,c)])/2/e[me.getElementIndex(l,c)])<0?-1/(-r+Math.sqrt(1+r*r)):1/(r+Math.sqrt(1+r*r)))*(s=1/Math.sqrt(1+r*r))),(t=me.clone(me.IDENTITY,t))[me.getElementIndex(c,c)]=t[me.getElementIndex(l,l)]=s,t[me.getElementIndex(l,c)]=u,t[me.getElementIndex(c,l)]=-u}(o,ge),me.transpose(ge,Te),me.multiply(o,ge,o),me.multiply(Te,o,o),me.multiply(a,ge,a),2<++n&&(++i,n=0);return t},me.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t},me.determinant=function(e){var t=e[0],r=e[3],n=e[6],i=e[1],a=e[4],o=e[7],s=e[2],u=e[5],e=e[8];return t*(a*e-u*o)+i*(u*n-r*e)+s*(r*o-a*n)},me.inverse=function(e,t){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8],e=me.determinant(e);return t[0]=o*l-c*s,t[1]=c*i-n*l,t[2]=n*s-o*i,t[3]=u*s-a*l,t[4]=r*l-u*i,t[5]=a*i-r*s,t[6]=a*c-u*o,t[7]=u*n-r*c,t[8]=r*o-a*n,me.multiplyByScalar(t,1/e,t)},me.equals=function(e,t){return e===t||Me(e)&&Me(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},me.equalsEpsilon=function(e,t,r){return r=Ne(r,0),e===t||Me(e)&&Me(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r},me.IDENTITY=Object.freeze(new me(1,0,0,0,1,0,0,0,1)),me.ZERO=Object.freeze(new me(0,0,0,0,0,0,0,0,0)),me.COLUMN0ROW0=0,me.COLUMN0ROW1=1,me.COLUMN0ROW2=2,me.COLUMN1ROW0=3,me.COLUMN1ROW1=4,me.COLUMN1ROW2=5,me.COLUMN2ROW0=6,me.COLUMN2ROW1=7,me.COLUMN2ROW2=8,Object.defineProperties(me.prototype,{length:{get:function(){return me.packedLength}}}),me.prototype.clone=function(e){return me.clone(this,e)},me.prototype.equals=function(e){return me.equals(this,e)},me.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]},me.prototype.equalsEpsilon=function(e,t){return me.equalsEpsilon(this,e,t)},me.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+")\n("+this[1]+", "+this[4]+", "+this[7]+")\n("+this[2]+", "+this[5]+", "+this[8]+")"},Ae.fromElements=function(e,t,r,n,i){return Me(i)?(i.x=e,i.y=t,i.z=r,i.w=n,i):new Ae(e,t,r,n)},Ae.fromColor=function(e,t){return Me(t)?(t.x=e.red,t.y=e.green,t.z=e.blue,t.w=e.alpha,t):new Ae(e.red,e.green,e.blue,e.alpha)},Ae.clone=function(e,t){if(Me(e))return Me(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new Ae(e.x,e.y,e.z,e.w)},Ae.packedLength=4,Ae.pack=function(e,t,r){return r=Ne(r,0),t[r++]=e.x,t[r++]=e.y,t[r++]=e.z,t[r]=e.w,t},Ae.unpack=function(e,t,r){return t=Ne(t,0),(r=!Me(r)?new Ae:r).x=e[t++],r.y=e[t++],r.z=e[t++],r.w=e[t],r},Ae.packArray=function(e,t){var r=e.length,n=4*r;if(Me(t)){if(!Array.isArray(t)&&t.length!==n)throw new a("If result is a typed array, it must have exactly array.length * 4 elements");t.length!==n&&(t.length=n)}else t=new Array(n);for(var i=0;i<r;++i)Ae.pack(e[i],t,4*i);return t},Ae.unpackArray=function(e,t){var r=e.length;Me(t)?t.length=r/4:t=new Array(r/4);for(var n=0;n<r;n+=4){var i=n/4;t[i]=Ae.unpack(e,n,t[i])}return t},Ae.fromArray=Ae.unpack,Ae.maximumComponent=function(e){return Math.max(e.x,e.y,e.z,e.w)},Ae.minimumComponent=function(e){return Math.min(e.x,e.y,e.z,e.w)},Ae.minimumByComponent=function(e,t,r){return r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r.z=Math.min(e.z,t.z),r.w=Math.min(e.w,t.w),r},Ae.maximumByComponent=function(e,t,r){return r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r.z=Math.max(e.z,t.z),r.w=Math.max(e.w,t.w),r},Ae.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},Ae.magnitude=function(e){return Math.sqrt(Ae.magnitudeSquared(e))};var Re=new Ae;Ae.distance=function(e,t){return Ae.subtract(e,t,Re),Ae.magnitude(Re)},Ae.distanceSquared=function(e,t){return Ae.subtract(e,t,Re),Ae.magnitudeSquared(Re)},Ae.normalize=function(e,t){var r=Ae.magnitude(e);return 0!=r?(t.x=e.x/r,t.y=e.y/r,t.z=e.z/r,t.w=e.w/r):Ae.clone(e,t),Math.abs(t.x)<Ce.EPSILON8&&(t.x=0),Math.abs(t.y)<Ce.EPSILON8&&(t.y=0),Math.abs(t.z)<Ce.EPSILON8&&(t.z=0),Math.abs(t.w)<Ce.EPSILON8&&(t.w=0),t},Ae.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},Ae.multiplyComponents=function(e,t,r){return r.x=e.x*t.x,r.y=e.y*t.y,r.z=e.z*t.z,r.w=e.w*t.w,r},Ae.divideComponents=function(e,t,r){return r.x=e.x/t.x,r.y=e.y/t.y,r.z=e.z/t.z,r.w=e.w/t.w,r},Ae.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r},Ae.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},Ae.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},Ae.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},Ae.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},Ae.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t.w=Math.abs(e.w),t};var Se=new Ae;Ae.lerp=function(e,t,r,n){return Ae.multiplyByScalar(t,r,Se),n=Ae.multiplyByScalar(e,1-r,n),Ae.add(Se,n,n)};var Oe=new Ae;Ae.mostOrthogonalAxis=function(e,t){e=Ae.normalize(e,Oe);return Ae.abs(e,e),t=e.x<=e.y?e.x<=e.z?e.x<=e.w?Ae.clone(Ae.UNIT_X,t):Ae.clone(Ae.UNIT_W,t):e.z<=e.w?Ae.clone(Ae.UNIT_Z,t):Ae.clone(Ae.UNIT_W,t):e.y<=e.z?e.y<=e.w?Ae.clone(Ae.UNIT_Y,t):Ae.clone(Ae.UNIT_W,t):e.z<=e.w?Ae.clone(Ae.UNIT_Z,t):Ae.clone(Ae.UNIT_W,t)},Ae.equals=function(e,t){return e===t||Me(e)&&Me(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},Ae.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]&&e.z===t[r+2]&&e.w===t[r+3]},Ae.equalsEpsilon=function(e,t,r,n){return e===t||Me(e)&&Me(t)&&Ce.equalsEpsilon(e.x,t.x,r,n)&&Ce.equalsEpsilon(e.y,t.y,r,n)&&Ce.equalsEpsilon(e.z,t.z,r,n)&&Ce.equalsEpsilon(e.w,t.w,r,n)},Ae.ZERO=Object.freeze(new Ae(0,0,0,0)),Ae.UNIT_X=Object.freeze(new Ae(1,0,0,0)),Ae.UNIT_Y=Object.freeze(new Ae(0,1,0,0)),Ae.UNIT_Z=Object.freeze(new Ae(0,0,1,0)),Ae.UNIT_W=Object.freeze(new Ae(0,0,0,1)),Ae.WHITE=Object.freeze(new Ae(1,1,1,1)),Ae.prototype.clone=function(e){return Ae.clone(this,e)},Ae.prototype.equals=function(e){return Ae.equals(this,e)},Ae.prototype.equalsEpsilon=function(e,t,r){return Ae.equalsEpsilon(this,e,t,r)},Ae.prototype.toString=function(e){if(Me(e)&&16==e){var t=parseInt(255*this.x).toString(16),r=parseInt(255*this.y).toString(16),e=parseInt(255*this.z).toString(16);return"00".substring(0,2-t.length)+t+"00".substring(0,2-r.length)+r+"00".substring(0,2-e.length)+e}return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var xe=new Float32Array(1);function De(e,t,r,n,i,a,o,s,u,c,l,f,h,m,d,p){this[0]=Ne(e,0),this[1]=Ne(i,0),this[2]=Ne(u,0),this[3]=Ne(h,0),this[4]=Ne(t,0),this[5]=Ne(a,0),this[6]=Ne(c,0),this[7]=Ne(m,0),this[8]=Ne(r,0),this[9]=Ne(o,0),this[10]=Ne(l,0),this[11]=Ne(d,0),this[12]=Ne(n,0),this[13]=Ne(s,0),this[14]=Ne(f,0),this[15]=Ne(p,0)}Ae.packFloat=function(e,t){if(Me(t)||(t=new Ae),xe[0]=e,0===(e=xe[0]))return Ae.clone(Ae.ZERO,t);var r,n=e<0?1:0;isFinite(e)?(e=Math.abs(e),r=Math.floor(Ce.logBase(e,10))+1,e/=Math.pow(10,r)):(e=.1,r=38);e*=256;return t.x=Math.floor(e),e=256*(e-t.x),t.y=Math.floor(e),e=256*(e-t.y),t.z=Math.floor(e),t.w=2*(r+38)+n,t},Ae.unpackFloat=function(e){var t=e.w/2,r=Math.floor(t),n=-(n=2*(n=2*(t-r))-1);if(38<=(r-=38))return n<0?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY;t=n*e.x*(1/256);return t+=n*e.y*(1/65536),(t+=n*e.z*(1/16777216))*Math.pow(10,r)},De.packedLength=16,De.pack=function(e,t,r){return r=Ne(r,0),t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t[r++]=e[4],t[r++]=e[5],t[r++]=e[6],t[r++]=e[7],t[r++]=e[8],t[r++]=e[9],t[r++]=e[10],t[r++]=e[11],t[r++]=e[12],t[r++]=e[13],t[r++]=e[14],t[r]=e[15],t},De.unpack=function(e,t,r){return t=Ne(t,0),(r=!Me(r)?new De:r)[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r[4]=e[t++],r[5]=e[t++],r[6]=e[t++],r[7]=e[t++],r[8]=e[t++],r[9]=e[t++],r[10]=e[t++],r[11]=e[t++],r[12]=e[t++],r[13]=e[t++],r[14]=e[t++],r[15]=e[t],r},De.clone=function(e,t){if(Me(e))return Me(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):new De(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},De.fromArray=De.unpack,De.fromColumnMajorArray=function(e,t){return De.clone(e,t)},De.fromRowMajorArray=function(e,t){return Me(t)?(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t):new De(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},De.fromRotationTranslation=function(e,t,r){return t=Ne(t,ve.ZERO),Me(r)?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=0,r[4]=e[3],r[5]=e[4],r[6]=e[5],r[7]=0,r[8]=e[6],r[9]=e[7],r[10]=e[8],r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,r):new De(e[0],e[3],e[6],t.x,e[1],e[4],e[7],t.y,e[2],e[5],e[8],t.z,0,0,0,1)},De.fromTranslationQuaternionRotationScale=function(e,t,r,n){Me(n)||(n=new De);var i=r.x,a=r.y,o=r.z,s=t.x*t.x,u=t.x*t.y,c=t.x*t.z,l=t.x*t.w,f=t.y*t.y,h=t.y*t.z,m=t.y*t.w,d=t.z*t.z,p=t.z*t.w,E=t.w*t.w,_=2*(u-p),r=2*(c+m),t=2*(u+p),u=f-s-d+E,p=2*(h-l),m=2*(c-m),h=2*(h+l),l=-s-f+d+E;return n[0]=(s-f-d+E)*i,n[1]=t*i,n[2]=m*i,n[3]=0,n[4]=_*a,n[5]=u*a,n[6]=h*a,n[7]=0,n[8]=r*o,n[9]=p*o,n[10]=l*o,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,n},De.fromTranslationRotationScale=function(e,t){return De.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t)},De.fromTranslation=function(e,t){return De.fromRotationTranslation(me.IDENTITY,e,t)},De.fromScale=function(e,t){return Me(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e.y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e.z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new De(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},De.fromUniformScale=function(e,t){return Me(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new De(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)};var Ie=new ve,we=new ve,Pe=new ve;De.fromObserver=function(e,t){var r=e.position,n=e.direction,i=e.up;ve.normalize(n,Ie),ve.normalize(ve.cross(Ie,i,we),we),ve.normalize(ve.cross(we,Ie,Pe),Pe);var a=we.x,o=we.y,s=we.z,u=Ie.x,c=Ie.y,l=Ie.z,f=Pe.x,h=Pe.y,m=Pe.z,d=r.x,e=r.y,n=r.z,i=a*-d+o*-e+s*-n,r=f*-d+h*-e+m*-n,n=u*d+c*e+l*n;return Me(t)?(t[0]=a,t[1]=f,t[2]=-u,t[3]=0,t[4]=o,t[5]=h,t[6]=-c,t[7]=0,t[8]=s,t[9]=m,t[10]=-l,t[11]=0,t[12]=i,t[13]=r,t[14]=n,t[15]=1,t):new De(a,o,s,i,f,h,m,r,-u,-c,-l,n,0,0,0,1)},De.computePerspectiveFieldOfView=function(e,t,r,n,i){var a=1/Math.tan(.5*e),e=(n+r)/(r-n),n=2*n*r/(r-n);return i[0]=a/t,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=a,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=e,i[11]=-1,i[12]=0,i[13]=0,i[14]=n,i[15]=0,i},De.computeOrthographicOffCenter=function(e,t,r,n,i,a,o){var s=1/(t-e),u=1/(n-r),c=1/(a-i),e=-(t+e)*s,r=-(n+r)*u,i=-(a+i)*c;return u*=2,c*=-2,o[0]=s*=2,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=u,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=c,o[11]=0,o[12]=e,o[13]=r,o[14]=i,o[15]=1,o},De.computePerspectiveOffCenter=function(e,t,r,n,i,a,o){var s=2*i/(n-r),u=(t+e)/(t-e),n=(n+r)/(n-r),r=-(a+i)/(a-i),a=-2*a*i/(a-i);return o[0]=2*i/(t-e),o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=s,o[6]=0,o[7]=0,o[8]=u,o[9]=n,o[10]=r,o[11]=-1,o[12]=0,o[13]=0,o[14]=a,o[15]=0,o},De.computeInfinitePerspectiveOffCenter=function(e,t,r,n,i,a){var o=2*i/(n-r),s=(t+e)/(t-e),n=(n+r)/(n-r),r=-2*i;return a[0]=2*i/(t-e),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=o,a[6]=0,a[7]=0,a[8]=s,a[9]=n,a[10]=-1,a[11]=-1,a[12]=0,a[13]=0,a[14]=r,a[15]=0,a},De.computeViewportTransformation=function(e,t,r,n){Me(n)||(n=new De),e=Ne(e,Ne.EMPTY_OBJECT);var i=Ne(e.x,0),a=Ne(e.y,0),o=Ne(e.width,0),s=Ne(e.height,0);t=Ne(t,0);var u=.5*o,e=.5*s,o=.5*((r=Ne(r,1))-t),s=e,r=o,i=i+u,e=a+e,o=t+o;return n[0]=u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=r,n[11]=0,n[12]=i,n[13]=e,n[14]=o,n[15]=1,n},De.computeView=function(e,t,r,n,i){return i[0]=n.x,i[1]=r.x,i[2]=-t.x,i[3]=0,i[4]=n.y,i[5]=r.y,i[6]=-t.y,i[7]=0,i[8]=n.z,i[9]=r.z,i[10]=-t.z,i[11]=0,i[12]=-ve.dot(n,e),i[13]=-ve.dot(r,e),i[14]=ve.dot(t,e),i[15]=1,i};var Fe=new ve,ze=new ve,Le=new ve;De.computeViewByLookAt=function(e,t,r,n){var i=Fe,a=ze,o=Le;return ve.subtract(e,t,i),ve.normalize(i,i),ve.cross(r,i,o),ve.normalize(o,o),ve.cross(i,o,a),ve.normalize(a,a),De.computeView(e,i,a,o,n)},De.computeViewByLookAtEx=function(e,t,r,n){var i=Fe,a=ze,o=Le;return ve.subtract(t,e,i),ve.normalize(i,i),ve.cross(r,i,o),ve.normalize(o,o),ve.cross(i,o,a),ve.normalize(a,a),De.computeView(e,i,a,o,n)},De.toArray=function(e,t){return Me(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},De.getElementIndex=function(e,t){return 4*e+t},De.getColumn=function(e,t,r){var n=4*t,i=e[n],a=e[1+n],t=e[2+n],n=e[3+n];return r.x=i,r.y=a,r.z=t,r.w=n,r},De.setColumn=function(e,t,r,n){t*=4;return(n=De.clone(e,n))[t]=r.x,n[1+t]=r.y,n[2+t]=r.z,n[3+t]=r.w,n},De.setTranslation=function(e,t,r){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=e[15],r};var Be=new ve;De.setScale=function(e,t,r){var n=De.getScale(e,Be),n=ve.divideComponents(t,n,Be);return De.multiplyByScale(e,n,r)},De.getRow=function(e,t,r){var n=e[t],i=e[t+4],a=e[t+8],t=e[t+12];return r.x=n,r.y=i,r.z=a,r.w=t,r},De.setRow=function(e,t,r,n){return(n=De.clone(e,n))[t]=r.x,n[t+4]=r.y,n[t+8]=r.z,n[t+12]=r.w,n};var qe=new ve;De.getScale=function(e,t){return t.x=ve.magnitude(ve.fromElements(e[0],e[1],e[2],qe)),t.y=ve.magnitude(ve.fromElements(e[4],e[5],e[6],qe)),t.z=ve.magnitude(ve.fromElements(e[8],e[9],e[10],qe)),t};var Ge=new ve;De.getMaximumScale=function(e){return De.getScale(e,Ge),ve.maximumComponent(Ge)},De.multiply=function(e,t,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],m=e[10],d=e[11],p=e[12],E=e[13],_=e[14],y=e[15],g=t[0],T=t[1],A=t[2],R=t[3],S=t[4],O=t[5],x=t[6],I=t[7],w=t[8],M=t[9],N=t[10],C=t[11],v=t[12],b=t[13],U=t[14],D=t[15],P=i*g+u*T+h*A+E*R,F=a*g+c*T+m*A+_*R,z=o*g+l*T+d*A+y*R,L=n*S+s*O+f*x+p*I,e=i*S+u*O+h*x+E*I,t=a*S+c*O+m*x+_*I,S=o*S+l*O+d*x+y*I,O=n*w+s*M+f*N+p*C,x=i*w+u*M+h*N+E*C,I=a*w+c*M+m*N+_*C,N=o*w+l*M+d*N+y*C,C=n*v+s*b+f*U+p*D,E=i*v+u*b+h*U+E*D,_=a*v+c*b+m*U+_*D,D=o*v+l*b+d*U+y*D;return r[0]=n*g+s*T+f*A+p*R,r[1]=P,r[2]=F,r[3]=z,r[4]=L,r[5]=e,r[6]=t,r[7]=S,r[8]=O,r[9]=x,r[10]=I,r[11]=N,r[12]=C,r[13]=E,r[14]=_,r[15]=D,r},De.add=function(e,t,r){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r[9]=e[9]+t[9],r[10]=e[10]+t[10],r[11]=e[11]+t[11],r[12]=e[12]+t[12],r[13]=e[13]+t[13],r[14]=e[14]+t[14],r[15]=e[15]+t[15],r},De.subtract=function(e,t,r){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r[9]=e[9]-t[9],r[10]=e[10]-t[10],r[11]=e[11]-t[11],r[12]=e[12]-t[12],r[13]=e[13]-t[13],r[14]=e[14]-t[14],r[15]=e[15]-t[15],r},De.multiplyTransformation=function(e,t,r){var n=e[0],i=e[1],a=e[2],o=e[4],s=e[5],u=e[6],c=e[8],l=e[9],f=e[10],h=e[12],m=e[13],d=e[14],p=t[0],E=t[1],_=t[2],y=t[4],g=t[5],T=t[6],A=t[8],R=t[9],S=t[10],O=t[12],x=t[13],I=t[14],w=i*p+s*E+l*_,M=a*p+u*E+f*_,e=n*y+o*g+c*T,t=i*y+s*g+l*T,y=a*y+u*g+f*T,g=n*A+o*R+c*S,T=i*A+s*R+l*S,S=a*A+u*R+f*S,h=n*O+o*x+c*I+h,m=i*O+s*x+l*I+m,d=a*O+u*x+f*I+d;return r[0]=n*p+o*E+c*_,r[1]=w,r[2]=M,r[3]=0,r[4]=e,r[5]=t,r[6]=y,r[7]=0,r[8]=g,r[9]=T,r[10]=S,r[11]=0,r[12]=h,r[13]=m,r[14]=d,r[15]=1,r},De.multiplyByMatrix3=function(e,t,r){var n=e[0],i=e[1],a=e[2],o=e[4],s=e[5],u=e[6],c=e[8],l=e[9],f=e[10],h=t[0],m=t[1],d=t[2],p=t[3],E=t[4],_=t[5],y=t[6],g=t[7],T=t[8],A=i*h+s*m+l*d,R=a*h+u*m+f*d,S=n*p+o*E+c*_,t=i*p+s*E+l*_,E=a*p+u*E+f*_,_=n*y+o*g+c*T,l=i*y+s*g+l*T,T=a*y+u*g+f*T;return r[0]=n*h+o*m+c*d,r[1]=A,r[2]=R,r[3]=0,r[4]=S,r[5]=t,r[6]=E,r[7]=0,r[8]=_,r[9]=l,r[10]=T,r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},De.multiplyByTranslation=function(e,t,r){var n=t.x,i=t.y,a=t.z,o=n*e[0]+i*e[4]+a*e[8]+e[12],t=n*e[1]+i*e[5]+a*e[9]+e[13],a=n*e[2]+i*e[6]+a*e[10]+e[14];return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=o,r[13]=t,r[14]=a,r[15]=e[15],r};var Ve=new ve;De.multiplyByUniformScale=function(e,t,r){return Ve.x=t,Ve.y=t,Ve.z=t,De.multiplyByScale(e,Ve,r)},De.multiplyByScale=function(e,t,r){var n=t.x,i=t.y,t=t.z;return 1===n&&1===i&&1===t?De.clone(e,r):(r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=0,r[4]=i*e[4],r[5]=i*e[5],r[6]=i*e[6],r[7]=0,r[8]=t*e[8],r[9]=t*e[9],r[10]=t*e[10],r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=1,r)},De.multiplyByVector=function(e,t,r){var n=t.x,i=t.y,a=t.z,o=Me(t.w)?t.w:1,s=e[0]*n+e[4]*i+e[8]*a+e[12]*o,u=e[1]*n+e[5]*i+e[9]*a+e[13]*o,t=e[2]*n+e[6]*i+e[10]*a+e[14]*o,o=e[3]*n+e[7]*i+e[11]*a+e[15]*o;return r.x=s,r.y=u,r.z=t,Me(r.w)&&(r.w=o),r},De.multiplyByPointAsVector=function(e,t,r){var n=t.x,i=t.y,a=t.z,o=e[0]*n+e[4]*i+e[8]*a,t=e[1]*n+e[5]*i+e[9]*a,a=e[2]*n+e[6]*i+e[10]*a;return r.x=o,r.y=t,r.z=a,r},De.multiplyByPoint=function(e,t,r){var n=t.x,i=t.y,a=t.z,o=e[0]*n+e[4]*i+e[8]*a+e[12],t=e[1]*n+e[5]*i+e[9]*a+e[13],e=e[2]*n+e[6]*i+e[10]*a+e[14];return r.x=o,r.y=t,r.z=e,r},De.multiplyByScalar=function(e,t,r){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12]*t,r[13]=e[13]*t,r[14]=e[14]*t,r[15]=e[15]*t,r},De.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},De.transpose=function(e,t){var r=e[1],n=e[2],i=e[3],a=e[6],o=e[7],s=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[10]=e[10],t[11]=e[14],t[12]=i,t[13]=o,t[14]=s,t[15]=e[15],t},De.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t[9]=Math.abs(e[9]),t[10]=Math.abs(e[10]),t[11]=Math.abs(e[11]),t[12]=Math.abs(e[12]),t[13]=Math.abs(e[13]),t[14]=Math.abs(e[14]),t[15]=Math.abs(e[15]),t},De.equals=function(e,t){return e===t||Me(e)&&Me(t)&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[3]===t[3]&&e[7]===t[7]&&e[11]===t[11]&&e[15]===t[15]},De.equalsEpsilon=function(e,t,r){return r=Ne(r,0),e===t||Me(e)&&Me(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r&&Math.abs(e[9]-t[9])<=r&&Math.abs(e[10]-t[10])<=r&&Math.abs(e[11]-t[11])<=r&&Math.abs(e[12]-t[12])<=r&&Math.abs(e[13]-t[13])<=r&&Math.abs(e[14]-t[14])<=r&&Math.abs(e[15]-t[15])<=r},De.getTranslation=function(e,t){return t.x=e[12],t.y=e[13],t.z=e[14],t},De.getMatrix3=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t};var ke=new me,je=new me,He=new Ae,We=new Ae(0,0,0,1);function Xe(e,t){this.center=ve.clone(Ne(e,ve.ZERO)),this.radius=Ne(t,0)}De.inverse=function(e,t){var r=e[0],n=e[4],i=e[8],a=e[12],o=e[1],s=e[5],u=e[9],c=e[13],l=e[2],f=e[6],h=e[10],m=e[14],d=e[3],p=e[7],E=e[11],_=e[15],y=h*_,g=m*E,T=f*_,A=m*p,R=f*E,S=h*p,O=l*_,x=m*d,I=l*E,w=h*d,M=l*p,N=f*d,C=y*s+A*u+R*c-(g*s+T*u+S*c),v=g*o+O*u+w*c-(y*o+x*u+I*c),b=T*o+x*s+M*c-(A*o+O*s+N*c),U=S*o+I*s+N*u-(R*o+w*s+M*u),D=g*n+T*i+S*a-(y*n+A*i+R*a),P=y*r+x*i+I*a-(g*r+O*i+w*a),F=A*r+O*n+N*a-(T*r+x*n+M*a),z=R*r+w*n+M*i-(S*r+I*n+N*i),L=(y=i*c)*p+(A=a*s)*E+(R=n*u)*_-((g=a*u)*p+(T=n*c)*E+(S=i*s)*_),u=g*d+(O=r*c)*E+(w=i*o)*_-(y*d+(x=a*o)*E+(I=r*u)*_),_=T*d+x*p+(M=r*s)*_-(A*d+O*p+(N=n*o)*_),p=S*d+I*p+N*E-(R*d+w*p+M*E),E=T*h+S*m+g*f-(R*m+y*f+A*h),g=I*m+y*l+x*h-(O*h+w*m+g*l),x=O*f+N*m+A*l-(M*m+T*l+x*f),l=M*h+R*l+w*f-(I*f+N*h+S*l),a=r*C+n*v+i*b+a*U;return Math.abs(a)<Ce.EPSILON21&&me.equalsEpsilon(De.getMatrix3(e,ke),je,Ce.EPSILON7)&&Ae.equals(De.getRow(e,3,He),We)?(t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=1):(t[0]=C*(a=1/a),t[1]=v*a,t[2]=b*a,t[3]=U*a,t[4]=D*a,t[5]=P*a,t[6]=F*a,t[7]=z*a,t[8]=L*a,t[9]=u*a,t[10]=_*a,t[11]=p*a,t[12]=E*a,t[13]=g*a,t[14]=x*a,t[15]=l*a),t},De.inverseTransformation=function(e,t){var r=e[0],n=e[1],i=e[2],a=e[4],o=e[5],s=e[6],u=e[8],c=e[9],l=e[10],f=e[12],h=e[13],m=e[14],d=-r*f-n*h-i*m,e=-a*f-o*h-s*m,m=-u*f-c*h-l*m;return t[0]=r,t[1]=a,t[2]=u,t[3]=0,t[4]=n,t[5]=o,t[6]=c,t[7]=0,t[8]=i,t[9]=s,t[10]=l,t[11]=0,t[12]=d,t[13]=e,t[14]=m,t[15]=1,t},De.IDENTITY=Object.freeze(new De(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),De.ZERO=Object.freeze(new De(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),De.TRANSYZ=Object.freeze(new De(1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1)),De.COLUMN0ROW0=0,De.COLUMN0ROW1=1,De.COLUMN0ROW2=2,De.COLUMN0ROW3=3,De.COLUMN1ROW0=4,De.COLUMN1ROW1=5,De.COLUMN1ROW2=6,De.COLUMN1ROW3=7,De.COLUMN2ROW0=8,De.COLUMN2ROW1=9,De.COLUMN2ROW2=10,De.COLUMN2ROW3=11,De.COLUMN3ROW0=12,De.COLUMN3ROW1=13,De.COLUMN3ROW2=14,De.COLUMN3ROW3=15,Object.defineProperties(De.prototype,{length:{get:function(){return De.packedLength}}}),De.prototype.clone=function(e){return De.clone(this,e)},De.prototype.equals=function(e){return De.equals(this,e)},De.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]&&e[9]===t[r+9]&&e[10]===t[r+10]&&e[11]===t[r+11]&&e[12]===t[r+12]&&e[13]===t[r+13]&&e[14]===t[r+14]&&e[15]===t[r+15]},De.prototype.equalsEpsilon=function(e,t){return De.equalsEpsilon(this,e,t)},De.prototype.toString=function(){return"("+this[0]+", "+this[4]+", "+this[8]+", "+this[12]+")\n("+this[1]+", "+this[5]+", "+this[9]+", "+this[13]+")\n("+this[2]+", "+this[6]+", "+this[10]+", "+this[14]+")\n("+this[3]+", "+this[7]+", "+this[11]+", "+this[15]+")"},De.from_tnbp=function(e,t,r,n,i){return Me(i)?(i[0]=e.x,i[4]=t.x,i[8]=r.x,i[12]=n.x,i[1]=e.y,i[5]=t.y,i[9]=r.y,i[13]=n.y,i[2]=e.z,i[6]=t.z,i[10]=r.z,i[14]=n.z,i[3]=0,i[7]=0,i[11]=0,i[15]=1):i=new De(e.x,t.x,r.x,n.x,e.y,t.y,r.y,n.y,e.z,t.z,r.z,n.z,0,0,0,1),i},De.rotate_axis_rh=function(e,t,r){var n=De.clone(De.IDENTITY),i=ve.distance(t,e),a=Math.cos(r),o=1-a,s=Math.sin(r),u=(t.x-e.x)/i,r=(t.y-e.y)/i,i=(t.z-e.z)/i;n[0]=u*u*o+a,n[1]=u*r*o-i*s,n[2]=u*i*o+r*s,n[4]=r*u*o+i*s,n[5]=r*r*o+a,n[6]=r*i*o-u*s,n[8]=i*u*o-r*s,n[9]=i*r*o+u*s,n[10]=i*i*o+a;a=De.translation(-e.x,-e.y,-e.z),e=De.translation(e.x,e.y,e.z);return De.multiply(e,De.multiply(n,a,new De),new De)},De.rotate_axis_lh=function(e,t,r){var n=De.clone(De.IDENTITY),i=ve.distance(t,e),a=Math.cos(r),o=1-a,s=Math.sin(r),u=(t.x-e.x)/i,r=(t.y-e.y)/i,i=(t.z-e.z)/i;n[0]=u*u*o+a,n[1]=u*r*o+i*s,n[2]=u*i*o-r*s,n[4]=r*u*o-i*s,n[5]=r*r*o+a,n[6]=r*i*o+u*s,n[8]=i*u*o+r*s,n[9]=i*r*o-u*s,n[10]=i*i*o+a;a=De.translation(-e.x,-e.y,-e.z),e=De.translation(e.x,e.y,e.z);return De.multiply(a,De.multiply(n,e,new De),new De)},De.translation=function(e,t,r,n){n=De.clone(De.IDENTITY,n);return n[12]=e,n[13]=t,n[14]=r,n},De.scaling=function(e,t,r,n){n=De.clone(De.IDENTITY,n);return n[0]=e,n[5]=t,n[10]=r,n},De.rotate_y=function(e){var t=De.clone(De.IDENTITY);return t[0]=t[10]=Math.cos(e),t[2]=t[8]=Math.sin(e),t[2]=-t[2],t},De.perspective=function(e,t,r,n,i){var a=1/Math.tan(.5*e),e=n/(n-r),n=n*r/(r-n);return i[0]=a/t,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=a,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=e,i[11]=-1,i[12]=0,i[13]=0,i[14]=n,i[15]=0,i},De.prototype.makeRotationAxis=function(e,t,r){Me(r)||(r=new De);var n=Math.cos(t),i=Math.sin(t),a=1-n,o=e.x,s=e.y,u=e.z,t=a*o,e=a*s;return r[0]=t*o+n,r[1]=t*s+i*u,r[2]=t*u-i*s,r[3]=0,r[4]=t*s-i*u,r[5]=e*s+n,r[6]=e*u+i*o,r[7]=0,r[8]=t*u+i*s,r[9]=e*u-i*o,r[10]=a*u*u+n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},De.transformNormal=function(e,t,r){Me(r)||(r=new ve);var n=new ve;n.x=t[0]*e.x+t[4]*e.y+t[8]*e.z+t[12],n.y=t[1]*e.x+t[5]*e.y+t[9]*e.z+t[13],n.z=t[2]*e.x+t[6]*e.y+t[10]*e.z+t[14];t=t[3]*e.x+t[7]*e.y+t[11]*e.z+t[15];return n.x*=t=1/t,n.y*=t,n.z*=t,ve.clone(n,r),r},De.rotate_normal=function(e,t,r){Me(r)||(r=new ve);var n=new ve;return n.x=t[0]*e.x+t[4]*e.y+t[8]*e.z,n.y=t[1]*e.x+t[5]*e.y+t[9]*e.z,n.z=t[2]*e.x+t[6]*e.y+t[10]*e.z,ve.clone(n,r),n},De.fromQuaternion=function(e,t){void 0===t&&(t=new De),t=De.clone(De.IDENTITY,t);var r=e.x*e.x,n=e.x*e.y,i=e.x*e.z,a=e.x*e.w,o=e.y*e.y,s=e.y*e.z,u=e.y*e.w,c=e.z*e.z,e=e.z*e.w;return t[0]=1-2*(o+c),t[1]=2*(n+e),t[2]=2*(i-u),t[4]=2*(n-e),t[5]=1-2*(r+c),t[6]=2*(s+a),t[8]=2*(i+u),t[9]=2*(s-a),t[10]=1-2*(r+o),t[3]=t[7]=t[11]=t[12]=t[13]=t[14]=0,t[15]=1,t};var Ye=new ve,Ke=new ve,Ze=new ve,Je=new ve,Qe=new ve,$e=new ve,et=new ve,tt=new ve,rt=new ve,nt=new ve,it=new ve,at=new ve,ot=4/3*Ce.PI;Xe.fromPoints=function(e,t){if(Me(t)||(t=new Xe),!Me(e)||0===e.length)return t.center=ve.clone(ve.ZERO,t.center),t.radius=0,t;for(var r=ve.clone(e[0],et),n=ve.clone(r,Ye),i=ve.clone(r,Ke),a=ve.clone(r,Ze),o=ve.clone(r,Je),s=ve.clone(r,Qe),u=ve.clone(r,$e),c=e.length,l=1;l<c;l++){ve.clone(e[l],r);var f=r.x,h=r.y,m=r.z;f<n.x&&ve.clone(r,n),f>o.x&&ve.clone(r,o),h<i.y&&ve.clone(r,i),h>s.y&&ve.clone(r,s),m<a.z&&ve.clone(r,a),m>u.z&&ve.clone(r,u)}var d=ve.magnitudeSquared(ve.subtract(o,n,tt)),p=ve.magnitudeSquared(ve.subtract(s,i,tt)),E=ve.magnitudeSquared(ve.subtract(u,a,tt)),_=n,y=o,g=d;d<p&&(g=p,_=i,y=s),g<E&&(g=E,_=a,y=u);var T=rt;T.x=.5*(_.x+y.x),T.y=.5*(_.y+y.y),T.z=.5*(_.z+y.z);var A=ve.magnitudeSquared(ve.subtract(y,T,tt)),R=Math.sqrt(A),_=nt;_.x=n.x,_.y=i.y,_.z=a.z;y=it;y.x=o.x,y.y=s.y,y.z=u.z;var S=ve.midpoint(_,y,at),O=0;for(l=0;l<c;l++){ve.clone(e[l],r);var x=ve.magnitude(ve.subtract(r,S,tt));O<x&&(O=x);var I=ve.magnitudeSquared(ve.subtract(r,T,tt));A<I&&(A=(R=.5*(R+(x=Math.sqrt(I))))*R,T.x=(R*T.x+(I=x-R)*r.x)/x,T.y=(R*T.y+I*r.y)/x,T.z=(R*T.z+I*r.z)/x)}return R<O?(ve.clone(T,t.center),t.radius=R):(ve.clone(S,t.center),t.radius=O),t};var st=new le,ut=new ve,ct=new ve,lt=new T,ft=new T;Xe.fromRectangle2D=function(e,t,r){return Xe.fromRectangleWithHeights2D(e,t,0,0,r)},Xe.fromRectangleWithHeights2D=function(e,t,r,n,i){if(Me(i)||(i=new Xe),!Me(e))return i.center=ve.clone(ve.ZERO,i.center),i.radius=0,i;t=Ne(t,st),Ue.southwest(e,lt),lt.height=r,Ue.northeast(e,ft),ft.height=n;var a=t.project(lt,ut),r=t.project(ft,ct),e=r.x-a.x,n=r.y-a.y,t=r.z-a.z;i.radius=.5*Math.sqrt(e*e+n*n+t*t);r=i.center;return r.x=a.x+.5*e,r.y=a.y+.5*n,r.z=a.z+.5*t,i};var ht=[];Xe.fromRectangle3D=function(e,t,r,n){if(t=Ne(t,be.WGS84),r=Ne(r,0),Me(n)||(n=new Xe),!Me(e))return n.center=ve.clone(ve.ZERO,n.center),n.radius=0,n;r=Ue.subsample(e,t,r,ht);return Xe.fromPoints(r,n)},Xe.fromVertices=function(e,t,r,n){if(Me(n)||(n=new Xe),!Me(e)||0===e.length)return n.center=ve.clone(ve.ZERO,n.center),n.radius=0,n;t=Ne(t,ve.ZERO),r=Ne(r,3);var i=et;i.x=e[0]+t.x,i.y=e[1]+t.y,i.z=e[2]+t.z;for(var a=ve.clone(i,Ye),o=ve.clone(i,Ke),s=ve.clone(i,Ze),u=ve.clone(i,Je),c=ve.clone(i,Qe),l=ve.clone(i,$e),f=e.length,h=0;h<f;h+=r){var m=e[h]+t.x,d=e[h+1]+t.y,p=e[h+2]+t.z;i.x=m,i.y=d,i.z=p,m<a.x&&ve.clone(i,a),m>u.x&&ve.clone(i,u),d<o.y&&ve.clone(i,o),d>c.y&&ve.clone(i,c),p<s.z&&ve.clone(i,s),p>l.z&&ve.clone(i,l)}var E=ve.magnitudeSquared(ve.subtract(u,a,tt)),_=ve.magnitudeSquared(ve.subtract(c,o,tt)),y=ve.magnitudeSquared(ve.subtract(l,s,tt)),g=a,T=u,A=E;E<_&&(A=_,g=o,T=c),A<y&&(A=y,g=s,T=l);var R=rt;R.x=.5*(g.x+T.x),R.y=.5*(g.y+T.y),R.z=.5*(g.z+T.z);var S=ve.magnitudeSquared(ve.subtract(T,R,tt)),O=Math.sqrt(S),g=nt;g.x=a.x,g.y=o.y,g.z=s.z;T=it;T.x=u.x,T.y=c.y,T.z=l.z;var x=ve.midpoint(g,T,at),I=0;for(h=0;h<f;h+=r){i.x=e[h]+t.x,i.y=e[h+1]+t.y,i.z=e[h+2]+t.z;var w=ve.magnitude(ve.subtract(i,x,tt));I<w&&(I=w);var M=ve.magnitudeSquared(ve.subtract(i,R,tt));S<M&&(S=(O=.5*(O+(w=Math.sqrt(M))))*O,R.x=(O*R.x+(M=w-O)*i.x)/w,R.y=(O*R.y+M*i.y)/w,R.z=(O*R.z+M*i.z)/w)}return O<I?(ve.clone(R,n.center),n.radius=O):(ve.clone(x,n.center),n.radius=I),n},Xe.fromEncodedCartesianVertices=function(e,t,r){if(Me(r)||(r=new Xe),!Me(e)||!Me(t)||e.length!==t.length||0===e.length)return r.center=ve.clone(ve.ZERO,r.center),r.radius=0,r;var n=et;n.x=e[0]+t[0],n.y=e[1]+t[1],n.z=e[2]+t[2];for(var i=ve.clone(n,Ye),a=ve.clone(n,Ke),o=ve.clone(n,Ze),s=ve.clone(n,Je),u=ve.clone(n,Qe),c=ve.clone(n,$e),l=e.length,f=0;f<l;f+=3){var h=e[f]+t[f],m=e[f+1]+t[f+1],d=e[f+2]+t[f+2];n.x=h,n.y=m,n.z=d,h<i.x&&ve.clone(n,i),h>s.x&&ve.clone(n,s),m<a.y&&ve.clone(n,a),m>u.y&&ve.clone(n,u),d<o.z&&ve.clone(n,o),d>c.z&&ve.clone(n,c)}var p=ve.magnitudeSquared(ve.subtract(s,i,tt)),E=ve.magnitudeSquared(ve.subtract(u,a,tt)),_=ve.magnitudeSquared(ve.subtract(c,o,tt)),y=i,g=s,T=p;p<E&&(T=E,y=a,g=u),T<_&&(T=_,y=o,g=c);var A=rt;A.x=.5*(y.x+g.x),A.y=.5*(y.y+g.y),A.z=.5*(y.z+g.z);var R=ve.magnitudeSquared(ve.subtract(g,A,tt)),S=Math.sqrt(R),y=nt;y.x=i.x,y.y=a.y,y.z=o.z;g=it;g.x=s.x,g.y=u.y,g.z=c.z;var O=ve.midpoint(y,g,at),x=0;for(f=0;f<l;f+=3){n.x=e[f]+t[f],n.y=e[f+1]+t[f+1],n.z=e[f+2]+t[f+2];var I=ve.magnitude(ve.subtract(n,O,tt));x<I&&(x=I);var w=ve.magnitudeSquared(ve.subtract(n,A,tt));R<w&&(R=(S=.5*(S+(I=Math.sqrt(w))))*S,A.x=(S*A.x+(w=I-S)*n.x)/I,A.y=(S*A.y+w*n.y)/I,A.z=(S*A.z+w*n.z)/I)}return S<x?(ve.clone(A,r.center),r.radius=S):(ve.clone(O,r.center),r.radius=x),r},Xe.fromCornerPoints=function(e,t,r){Me(r)||(r=new Xe);e=ve.midpoint(e,t,r.center);return r.radius=ve.distance(e,t),r},Xe.fromEllipsoid=function(e,t){return Me(t)||(t=new Xe),ve.clone(ve.ZERO,t.center),t.radius=e.maximumRadius,t};var mt=new ve;Xe.fromBoundingSpheres=function(e,t){if(Me(t)||(t=new Xe),!Me(e)||0===e.length)return t.center=ve.clone(ve.ZERO,t.center),t.radius=0,t;var r=e.length;if(1===r)return Xe.clone(e[0],t);if(2===r)return Xe.union(e[0],e[1],t);for(var n=[],i=0;i<r;i++)n.push(e[i].center);var a=(t=Xe.fromPoints(n,t)).center,o=t.radius;for(i=0;i<r;i++)var s=e[i],o=Math.max(o,ve.distance(a,s.center,mt)+s.radius);return t.radius=o,t};var dt=new ve,pt=new ve,Et=new ve;Xe.fromOrientedBoundingBox=function(e,t){Me(t)||(t=new Xe);var r=e.halfAxes,n=me.getColumn(r,0,dt),i=me.getColumn(r,1,pt),r=me.getColumn(r,2,Et);return ve.add(n,i,n),ve.add(n,r,n),t.center=ve.clone(e.center,t.center),t.radius=ve.magnitude(n),t},Xe.clone=function(e,t){if(Me(e))return Me(t)?(t.center=ve.clone(e.center,t.center),t.radius=e.radius,t):new Xe(e.center,e.radius)},Xe.packedLength=4,Xe.pack=function(e,t,r){r=Ne(r,0);var n=e.center;return t[r++]=n.x,t[r++]=n.y,t[r++]=n.z,t[r]=e.radius,t},Xe.unpack=function(e,t,r){t=Ne(t,0);var n=(r=!Me(r)?new Xe:r).center;return n.x=e[t++],n.y=e[t++],n.z=e[t++],r.radius=e[t],r};var _t=new ve,yt=new ve;Xe.union=function(e,t,r){Me(r)||(r=new Xe);var n=e.center,i=e.radius,a=t.center,o=t.radius,s=ve.subtract(a,n,_t),a=ve.magnitude(s);if(a+o<=i)return e.clone(r),r;if(a+i<=o)return t.clone(r),r;o=.5*(i+a+o),a=ve.multiplyByScalar(s,(o-i)/a,yt);return ve.add(a,n,a),ve.clone(a,r.center),r.radius=o,r};var gt=new ve;Xe.expand=function(e,t,r){r=Xe.clone(e,r);t=ve.magnitude(ve.subtract(t,r.center,gt));return t>r.radius&&(r.radius=t),r},Xe.intersectPlane=function(e,t){var r=e.center,n=e.radius,e=t.normal,t=ve.dot(e,r)+t.distance;return t<-n?fe.OUTSIDE:t<n?fe.INTERSECTING:fe.INSIDE},Xe.intersectRay=function(e,t,r){var n=ve.subtract(t.origin,e.center,new ve),i=ve.dot(n,n),a=i-e.radius*e.radius;if(a<=0){var o=ve.dot(n,t.direction),i=Math.sqrt(e.radius*e.radius-(i-o*o));return r=ve.multiplyByScalar(t.direction,i-o,r),r=ve.subtract(t.origin,r,r),fe.INTERSECTING}n=ve.dot(t.direction,n);if(0<=n)return fe.OUTSIDE;a=n*n-a;if(a<0)return fe.OUTSIDE;if(a>=Ce.EPSILON10){o=-n-Math.sqrt(a);return r=ve.multiplyByScalar(t.direction,o,r),r=ve.add(t.origin,r,r),fe.INTERSECTING}return r=ve.multiplyByScalar(t.direction,n,r),r=ve.subtract(t.origin,r,r),fe.INTERSECTING},Xe.transform=function(e,t,r){return(r=!Me(r)?new Xe:r).center=De.multiplyByPoint(t,e.center,r.center),r.radius=De.getMaximumScale(t)*e.radius,r};var Tt=new ve;Xe.distanceSquaredTo=function(e,t){t=ve.subtract(e.center,t,Tt);return ve.magnitudeSquared(t)-e.radius*e.radius},Xe.transformWithoutScale=function(e,t,r){return(r=!Me(r)?new Xe:r).center=De.multiplyByPoint(t,e.center,r.center),r.radius=e.radius,r};var At=new ve;Xe.computePlaneDistances=function(e,t,r,n){Me(n)||(n=new he);t=ve.subtract(e.center,t,At),t=ve.dot(r,t);return n.start=t-e.radius,n.stop=t+e.radius,n};for(var Rt=new ve,St=new ve,Ot=new ve,xt=new ve,It=new ve,wt=new T,Mt=new Array(8),Nt=0;Nt<8;++Nt)Mt[Nt]=new ve;var Ct=new le;function vt(e,t,r){this.minimum=ve.clone(Ne(e,ve.ZERO)),this.maximum=ve.clone(Ne(t,ve.ZERO)),r=Me(r)?ve.clone(r):ve.midpoint(this.minimum,this.maximum,new ve),this.center=r}Xe.projectTo2D=function(e,t,r){var n=(t=Ne(t,Ct)).ellipsoid,i=e.center,a=e.radius,o=ve.equals(i,ve.ZERO)?ve.clone(ve.UNIT_X,Rt):n.geodeticSurfaceNormal(i,Rt),s=ve.cross(ve.UNIT_Z,o,St);ve.normalize(s,s);var u=ve.cross(o,s,Ot);ve.normalize(u,u),ve.multiplyByScalar(o,a,o),ve.multiplyByScalar(u,a,u),ve.multiplyByScalar(s,a,s);var c=ve.negate(u,It),e=ve.negate(s,xt),l=Mt,a=l[0];ve.add(o,u,a),ve.add(a,s,a),a=l[1],ve.add(o,u,a),ve.add(a,e,a),a=l[2],ve.add(o,c,a),ve.add(a,e,a),a=l[3],ve.add(o,c,a),ve.add(a,s,a),ve.negate(o,o),a=l[4],ve.add(o,u,a),ve.add(a,s,a),a=l[5],ve.add(o,u,a),ve.add(a,e,a),a=l[6],ve.add(o,c,a),ve.add(a,e,a),a=l[7],ve.add(o,c,a),ve.add(a,s,a);for(var f=l.length,h=0;h<f;++h){var m=l[h];ve.add(i,m,m);var d=n.cartesianToCartographic(m,wt);t.project(d,m)}c=(i=(r=Xe.fromPoints(l,r)).center).x,s=i.y,a=i.z;return i.x=a,i.y=c,i.z=s,r},Xe.isOccluded=function(e,t){return!t.isBoundingSphereVisible(e)},Xe.equals=function(e,t){return e===t||Me(e)&&Me(t)&&ve.equals(e.center,t.center)&&e.radius===t.radius},Xe.prototype.intersectPlane=function(e){return Xe.intersectPlane(this,e)},Xe.prototype.intersectRay=function(e,t){return Xe.intersectRay(this,e,t)},Xe.prototype.distanceSquaredTo=function(e){return Xe.distanceSquaredTo(this,e)},Xe.prototype.computePlaneDistances=function(e,t,r){return Xe.computePlaneDistances(this,e,t,r)},Xe.prototype.isOccluded=function(e){return Xe.isOccluded(this,e)},Xe.prototype.equals=function(e){return Xe.equals(this,e)},Xe.prototype.clone=function(e){return Xe.clone(this,e)},Xe.prototype.volume=function(){var e=this.radius;return ot*e*e*e},Xe.prototype.project_area=function(e){return this.radius*this.radius*Ce.PI},Xe.prototype.height=function(e){return 2*this.radius},vt.fromPoints=function(e,t){if(Me(t)||(t=new vt),!Me(e)||0===e.length)return t.minimum=ve.clone(ve.ZERO,t.minimum),t.maximum=ve.clone(ve.ZERO,t.maximum),t.center=ve.clone(ve.ZERO,t.center),t;for(var r=e[0].x,n=e[0].y,i=e[0].z,a=e[0].x,o=e[0].y,s=e[0].z,u=e.length,c=1;c<u;c++)var l=e[c],f=l.x,h=l.y,l=l.z,r=Math.min(f,r),a=Math.max(f,a),n=Math.min(h,n),o=Math.max(h,o),i=Math.min(l,i),s=Math.max(l,s);var m=t.minimum;m.x=r,m.y=n,m.z=i;var d=t.maximum;return d.x=a,d.y=o,d.z=s,t.center=ve.midpoint(m,d,t.center),t},vt.clone=function(e,t){if(Me(e))return Me(t)?(t.minimum=ve.clone(e.minimum,t.minimum),t.maximum=ve.clone(e.maximum,t.maximum),t.center=ve.clone(e.center,t.center),t):new vt(e.minimum,e.maximum,e.center)},vt.equals=function(e,t){return e===t||Me(e)&&Me(t)&&ve.equals(e.center,t.center)&&ve.equals(e.minimum,t.minimum)&&ve.equals(e.maximum,t.maximum)};var bt=new ve;function Ut(e,t){this.x=Ne(e,0),this.y=Ne(t,0)}vt.intersectPlane=function(e,t){bt=ve.subtract(e.maximum,e.minimum,bt);var r=ve.multiplyByScalar(bt,.5,bt),n=t.normal,r=r.x*Math.abs(n.x)+r.y*Math.abs(n.y)+r.z*Math.abs(n.z),t=ve.dot(e.center,n)+t.distance;return 0<t-r?fe.INSIDE:t+r<0?fe.OUTSIDE:fe.INTERSECTING},vt.prototype.clone=function(e){return vt.clone(this,e)},vt.prototype.intersectPlane=function(e){return vt.intersectPlane(this,e)},vt.prototype.equals=function(e){return vt.equals(this,e)},vt.prototype.width=function(){return this.maximum.x-this.minimum.x},vt.prototype.height=function(){return this.maximum.y-this.minimum.y},vt.prototype.length=function(){return this.maximum.z-this.minimum.z},vt.prototype.get_max_radius=function(){return ve.distance(this.maximum,this.minimum)},vt.prototype.combine_box=function(e){this.combine_vertex(e.minimum),this.combine_vertex(e.maximum)},vt.prototype.combine_vertex=function(e){e.x<this.minimum.x&&(this.minimum.x=e.x),e.x>this.maximum.x&&(this.maximum.x=e.x),e.y<this.minimum.y&&(this.minimum.y=e.y),e.y>this.maximum.y&&(this.maximum.y=e.y),e.z<this.minimum.z&&(this.minimum.z=e.z),e.z>this.maximum.z&&(this.maximum.z=e.z),this.center=ve.midpoint(this.minimum,this.maximum,new ve)},vt.prototype.nearest_distance_to_point=function(e){var t=ve.clone(e);return ve.maximumByComponent(this.minimum,t,t),ve.minimumByComponent(this.maximum,t,t),ve.distance(t,e)},vt.prototype.nearest_point_to_point=function(e){e=ve.clone(e);return ve.maximumByComponent(this.minimum,e,e),ve.minimumByComponent(this.maximum,e,e),e},vt.prototype.project_area=function(e){var t=this.maximum.x-this.minimum.x,r=this.maximum.y-this.minimum.y,n=this.maximum.z-this.minimum.z;return Math.abs(r*n*e.x)+Math.abs(t*n*e.y)+Math.abs(t*r*e.z)},vt.prototype.get_corners=function(){for(var e=[],t=0;t<8;++t)e.push(new ve);return e[0]=ve.clone(this.minimum),e[1].x=this.minimum.x,e[1].y=this.maximum.y,e[1].z=this.minimum.z,e[2].x=this.maximum.x,e[2].y=this.maximum.y,e[2].z=this.minimum.z,e[3].x=this.maximum.x,e[3].y=this.minimum.y,e[3].z=this.minimum.z,e[4]=ve.clone(this.maximum),e[5].x=this.minimum.x,e[5].y=this.maximum.y,e[5].z=this.maximum.z,e[6].x=this.minimum.x,e[6].y=this.minimum.y,e[6].z=this.maximum.z,e[7].x=this.maximum.x,e[7].y=this.minimum.y,e[7].z=this.maximum.z,e},vt.prototype.transform=function(e,t){for(var r=this.get_corners(),n=new ve(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),i=new ve(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),a=0;a<8;a++)r[a]=De.multiplyByPoint(e,r[a],r[a]),ve.minimumByComponent(r[a],n,n),ve.maximumByComponent(r[a],i,i);return Me(t)?(t.minimum=n,t.maximum=i,t):t=new vt(n,i)},vt.prototype.is_valid=function(){return!(this.minimum.x>this.maximum.x||this.minimum.y>this.maximum.y||this.minimum.z>this.maximum.z)},vt.intersectRay=function(e,t){var r=new Array(3);ve.pack(e.minimum,r);var n=new Array(3);ve.pack(e.maximum,n);var i=new Array(3);ve.pack(t.origin,i);e=new Array(3);return ve.pack(t.direction,e),function(e,t,r,n,i){for(var a,o=!0,s=new Array(3),u=new Array(3),c=new Array(3),l=0;l<3;l++)r[l]<e[l]?(s[l]=1,c[l]=e[l],o=!1):r[l]>t[l]?(s[l]=0,c[l]=t[l],o=!1):s[l]=2;if(o)return i=r,!0;for(l=0;l<3;l++)2!=s[l]&&Math.abs(n[l])>Ce.EPSILON10?u[l]=(c[l]-r[l])/n[l]:u[l]=-1;for(a=0,l=1;l<3;l++)u[a]<u[l]&&(a=l);if(u[a]<0)return!1;for(l=0;l<3;l++)if(a!=l){if(i[l]=r[l]+u[a]*n[l],i[l]<e[l]||i[l]>t[l])return!1}else i[l]=c[l];return!0}(r,n,i,e,new Array(3))},vt.prototype.intersectRay=function(e){return vt.intersectRay(this,e)},vt.prototype.make_invalid=function(){this.minimum.x=this.minimum.y=this.minimum.z=Number.MAX_VALUE,this.maximum.x=this.maximum.y=this.maximum.z=-Number.MAX_VALUE},vt.prototype.toBoundingSphere=function(e){return new Xe(void 0===e?this.center:De.multiplyByPoint(e,this.center,new ve),this.get_max_radius()/2)},vt.intersect=function(e,t){return!(t.minimum.x>e.maximum.x||t.maximum.x<e.minimum.x||t.minimum.y>e.maximum.y||t.maximum.y<e.minimum.y||t.minimum.z>e.maximum.z||t.maximum.z<e.minimum.z)&&!(t.minimum.x>e.minimum.x&&t.maximum.x<e.maximum.x&&t.minimum.y>e.minimum.y&&t.maximum.y<e.maximum.y&&t.minimum.z>e.minimum.z&&t.maximum.z<e.maximum.z&&e.minimum.x>t.minimum.x&&e.maximum.x<t.maximum.x&&e.minimum.y>t.minimum.y&&e.maximum.y<t.maximum.y&&e.minimum.z>t.minimum.z&&e.maximum.z<t.maximum.z)},Ut.fromElements=function(e,t,r){return Me(r)?(r.x=e,r.y=t,r):new Ut(e,t)},Ut.fromCartesian3=Ut.clone=function(e,t){if(Me(e))return Me(t)?(t.x=e.x,t.y=e.y,t):new Ut(e.x,e.y)},Ut.fromCartesian4=Ut.clone,Ut.packedLength=2,Ut.pack=function(e,t,r){return r=Ne(r,0),t[r++]=e.x,t[r]=e.y,t},Ut.unpack=function(e,t,r){return t=Ne(t,0),(r=!Me(r)?new Ut:r).x=e[t++],r.y=e[t],r},Ut.packArray=function(e,t){var r=e.length,n=2*r;if(Me(t)){if(!Array.isArray(t)&&t.length!==n)throw new a("If result is a typed array, it must have exactly array.length * 2 elements");t.length!==n&&(t.length=n)}else t=new Array(n);for(var i=0;i<r;++i)Ut.pack(e[i],t,2*i);return t},Ut.unpackArray=function(e,t){var r=e.length;Me(t)?t.length=r/2:t=new Array(r/2);for(var n=0;n<r;n+=2){var i=n/2;t[i]=Ut.unpack(e,n,t[i])}return t},Ut.fromArray=Ut.unpack,Ut.maximumComponent=function(e){return Math.max(e.x,e.y)},Ut.minimumComponent=function(e){return Math.min(e.x,e.y)},Ut.minimumByComponent=function(e,t,r){return r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r},Ut.maximumByComponent=function(e,t,r){return r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r},Ut.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},Ut.magnitude=function(e){return Math.sqrt(Ut.magnitudeSquared(e))};var Dt=new Ut;Ut.distance=function(e,t){return Ut.subtract(e,t,Dt),Ut.magnitude(Dt)},Ut.distanceSquared=function(e,t){return Ut.subtract(e,t,Dt),Ut.magnitudeSquared(Dt)},Ut.normalize=function(e,t){var r=Ut.magnitude(e);return 0!=r?(t.x=e.x/r,t.y=e.y/r):Ut.clone(e,t),Math.abs(t.x)<Ce.EPSILON8&&(t.x=0),Math.abs(t.y)<Ce.EPSILON8&&(t.y=0),t},Ut.dot=function(e,t){return e.x*t.x+e.y*t.y},Ut.multiplyComponents=function(e,t,r){return r.x=e.x*t.x,r.y=e.y*t.y,r},Ut.divideComponents=function(e,t,r){return r.x=e.x/t.x,r.y=e.y/t.y,r},Ut.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r},Ut.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r},Ut.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r},Ut.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r},Ut.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t},Ut.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t};var Pt=new Ut;Ut.lerp=function(e,t,r,n){return Ut.multiplyByScalar(t,r,Pt),n=Ut.multiplyByScalar(e,1-r,n),Ut.add(Pt,n,n)};var Ft=new Ut,zt=new Ut;Ut.angleBetween=function(e,t){return Ut.normalize(e,Ft),Ut.normalize(t,zt),Ce.acosClamped(Ut.dot(Ft,zt))};var Lt=new Ut;function Bt(e,t){this.normal=ve.clone(e),this.distance=t}Ut.mostOrthogonalAxis=function(e,t){e=Ut.normalize(e,Lt);return Ut.abs(e,e),t=e.x<=e.y?Ut.clone(Ut.UNIT_X,t):Ut.clone(Ut.UNIT_Y,t)},Ut.equals=function(e,t){return e===t||Me(e)&&Me(t)&&e.x===t.x&&e.y===t.y},Ut.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]},Ut.equalsEpsilon=function(e,t,r,n){return e===t||Me(e)&&Me(t)&&Ce.equalsEpsilon(e.x,t.x,r,n)&&Ce.equalsEpsilon(e.y,t.y,r,n)},Ut.ZERO=Object.freeze(new Ut(0,0)),Ut.UNIT_X=Object.freeze(new Ut(1,0)),Ut.UNIT_Y=Object.freeze(new Ut(0,1)),Ut.prototype.clone=function(e){return Ut.clone(this,e)},Ut.prototype.equals=function(e){return Ut.equals(this,e)},Ut.prototype.equalsEpsilon=function(e,t,r){return Ut.equalsEpsilon(this,e,t,r)},Ut.prototype.toString=function(){return"("+this.x+", "+this.y+")"},Ut.prototype.set=function(e,t){this.x=e,this.y=t},Ut.prototype.fromArray=function(e,t){return this.x=e[t=void 0===t?0:t],this.y=e[t+1],this},Ut.prototype.toArray=function(e,t){return(e=void 0===e?[]:e)[t=void 0===t?0:t]=this.x,e[t+1]=this.y,e},Bt.fromPointNormal=function(e,t,r){e=-ve.dot(t,e);return Me(r)?(ve.clone(t,r.normal),r.distance=e,r):new Bt(t,e)};var qt=new ve;Bt.fromCartesian4=function(e,t){var r=ve.fromCartesian4(e,qt),e=e.w;return Me(t)?(ve.clone(r,t.normal),t.distance=e,t):new Bt(r,e)},Bt.fromPoints=function(e,t,r,n){var i=ve.subtract(t,e,new ve),t=ve.subtract(r,t,new ve);ve.normalize(i,i),ve.normalize(t,t);t=ve.cross(i,t,new ve);ve.normalize(t,t);e=-ve.dot(t,e);return Me(n)?(ve.clone(t,n.normal),n.distance=e,n):new Bt(t,e)},Bt.getPointDistance=function(e,t){return ve.dot(e.normal,t)+e.distance};var Gt=new ve;Bt.projectPointOntoPlane=function(e,t,r){Me(r)||(r=new ve);var n=Bt.getPointDistance(e,t),n=ve.multiplyByScalar(e.normal,n,Gt);return ve.subtract(t,n,r)},Bt.projection=function(e,t,r){var n=ve.dot(t,e.normal),n=ve.multiplyByScalar(e.normal,n,Gt);return Me(r)||(r=new ve),ve.subtract(t,n,r)};var Vt=new ve;Bt.transform=function(e,t,r){return De.multiplyByPointAsVector(t,e.normal,qt),ve.normalize(qt,qt),ve.multiplyByScalar(e.normal,-e.distance,Vt),De.multiplyByPoint(t,Vt,Vt),Bt.fromPointNormal(Vt,qt,r)},Bt.clone=function(e,t){return Me(t)?(ve.clone(e.normal,t.normal),t.distance=e.distance,t):new Bt(e.normal,e.distance)},Bt.equals=function(e,t){return e.distance===t.distance&&ve.equals(e.normal,t.normal)},Bt.prototype.intersect=function(e,t){Me(t)||(t=new ve);var r,n=e.origin,i=e.direction,e=ve.dot(i,this.normal);return Math.abs(e)<Ce.EPSILON15?(r=n.x*this.normal.x*n.y*this.normal.y+n.z*this.normal.z+this.distance)<Ce.EPSILON15?(ve.clone(n,t),t):void 0:(r=-(this.normal.x*n.x+this.normal.y*n.y+this.normal.z*n.z+this.distance),t=ve.multiplyByScalar(i,r/=e,t),t=ve.add(n,t,t))},Bt.ORIGIN_XY_PLANE=Object.freeze(new Bt(ve.UNIT_Z,0)),Bt.ORIGIN_YZ_PLANE=Object.freeze(new Bt(ve.UNIT_X,0)),Bt.ORIGIN_ZX_PLANE=Object.freeze(new Bt(ve.UNIT_Y,0));var kt={};function jt(e,t,r){var n=e+t;return Ce.sign(e)!==Ce.sign(t)&&Math.abs(n/Math.max(Math.abs(e),Math.abs(t)))<r?0:n}kt.computeDiscriminant=function(e,t,r){return t*t-4*e*r},kt.computeRealRoots=function(e,t,r){if(0===e)return 0===t?[]:[-r/t];if(0===t){if(0===r)return[0,0];var n=Math.abs(r),i=Math.abs(e);if(n<i&&n/i<Ce.EPSILON14)return[0,0];if(i<n&&i/n<Ce.EPSILON14)return[];if((i=-r/e)<0)return[];n=Math.sqrt(i);return[-n,n]}if(0===r)return(i=-t/e)<0?[i,0]:[0,i];i=jt(t*t,-(4*e*r),Ce.EPSILON14);if(i<0)return[];i=-.5*jt(t,Ce.sign(t)*Math.sqrt(i),Ce.EPSILON14);return 0<t?[i/e,r/i]:[r/i,i/e]};var Ht={};function Wt(e,t,r,n){var i=e,a=t/3,o=r/3,s=n,u=i*o,c=a*s,l=a*a,f=o*o,h=i*o-l,e=i*s-a*o,t=a*s-f,r=4*h*t-e*e;if(r<0){var n=u*f<=l*c?-2*a*(p=h)+(d=i)*e:-(d=s)*e+2*o*(p=t),m=-(n<0?-1:1)*Math.abs(d)*Math.sqrt(-r),d=(E=m-n)/2,d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),m=E===m?-d:-p/d,m=p<=0?d+m:-n/(d*d+m*m+p);return u*f<=l*c?[(m-a)/i]:[-s/(m+o)]}var p=h,u=-2*a*h+i*e,f=t,l=-s*e+2*o*t,c=Math.sqrt(r),h=Math.sqrt(3)/2,e=Math.abs(Math.atan2(i*c,-u)/3);m=2*Math.sqrt(-p);t=Math.cos(e);E=m*t;var r=m*(-t/2-h*Math.sin(e)),u=2*a<E+r?E-a:r-a,p=i,i=u/p,e=Math.abs(Math.atan2(s*c,-l)/3),s=-s,e=(E=(m=2*Math.sqrt(-f))*(t=Math.cos(e)))+(r=m*(-t/2-h*Math.sin(e)))<2*o?E+o:r+o,E=s/e,r=-u*e-p*s,e=(o*r-a*(u*s))/(-a*r+o*(p*e));return i<=e?i<=E?e<=E?[i,e,E]:[i,E,e]:[E,i,e]:i<=E?[e,i,E]:e<=E?[e,E,i]:[E,e,i]}Ht.computeDiscriminant=function(e,t,r,n){var i=t*t,a=r*r;return 18*e*t*r*n+i*a-27*(e*e)*(n*n)-4*(e*a*r+i*t*n)},Ht.computeRealRoots=function(e,t,r,n){var i;if(0===e)return kt.computeRealRoots(t,r,n);if(0!==t)return 0===r?0===n?(a=-t/e)<0?[a,0,0]:[0,0,a]:Wt(e,t,0,n):0===n?0===(i=kt.computeRealRoots(e,t,r)).length?[0]:i[1]<=0?[i[0],i[1],0]:0<=i[0]?[0,i[0],i[1]]:[i[0],0,i[1]]:Wt(e,t,r,n);if(0!==r)return 0===n?0===(i=kt.computeRealRoots(e,0,r)).Length?[0]:[i[0],0,i[1]]:Wt(e,0,r,n);if(0===n)return[0,0,0];var a=(a=-n/e)<0?-Math.pow(-a,1/3):Math.pow(a,1/3);return[a,a,a]};var Xt={};function Yt(e,t,r,n){var i=e*e,a=t-3*i/8,o=r-t*e/2+i*e/8,n=n-r*e/4+t*i/16-3*i*i/256,r=Ht.computeRealRoots(1,2*a,a*a-4*n,-o*o);if(0<r.length){t=-e/4,i=r[r.length-1];if(Math.abs(i)<Ce.EPSILON14){e=kt.computeRealRoots(1,a,n);if(2===e.length){var r=e[0],s=e[1];if(0<=r&&0<=s){n=Math.sqrt(r),e=Math.sqrt(s);return[t-e,t-n,t+n,t+e]}if(0<=r&&s<0)return[t-(u=Math.sqrt(r)),t+u];if(r<0&&0<=s)return[t-(u=Math.sqrt(s)),t+u]}return[]}if(0<i){var s=Math.sqrt(i),u=(a+i+o/s)/2,o=kt.computeRealRoots(1,s,(a+i-o/s)/2),u=kt.computeRealRoots(1,-s,u);return 0!==o.length?(o[0]+=t,o[1]+=t,0!==u.length?(u[0]+=t,u[1]+=t,o[1]<=u[0]?[o[0],o[1],u[0],u[1]]:u[1]<=o[0]?[u[0],u[1],o[0],o[1]]:o[0]>=u[0]&&o[1]<=u[1]?[u[0],o[0],o[1],u[1]]:u[0]>=o[0]&&u[1]<=o[1]?[o[0],u[0],u[1],o[1]]:o[0]>u[0]&&o[0]<u[1]?[u[0],o[0],u[1],o[1]]:[o[0],u[0],o[1],u[1]]):o):0!==u.length?(u[0]+=t,u[1]+=t,u):[]}}return[]}function Kt(e,t,r,n){var i=e*e,a=Ht.computeRealRoots(1,-2*t,r*e+t*t-4*n,i*n-r*t*e+r*r);if(0<a.length){var o,s,u,c,l=a[0],f=t-l,h=f*f,m=e/2,a=f/2,t=h-4*n,f=h+4*Math.abs(n),h=i-4*l,i=i+4*Math.abs(l);s=l<0||t*i<h*f?(o=(h=Math.sqrt(h))/2,0===h?0:(e*a-r)/h):(o=0===(s=Math.sqrt(t))?0:(e*a-r)/s,s/2),0==m&&0===o?c=u=0:Ce.sign(m)===Ce.sign(o)?c=l/(u=m+o):u=l/(c=m-o),0==a&&0===s?p=d=0:Ce.sign(a)===Ce.sign(s)?p=n/(d=a+s):d=n/(p=a-s);var d=kt.computeRealRoots(1,u,d),p=kt.computeRealRoots(1,c,p);if(0!==d.length)return 0!==p.length?d[1]<=p[0]?[d[0],d[1],p[0],p[1]]:p[1]<=d[0]?[p[0],p[1],d[0],d[1]]:d[0]>=p[0]&&d[1]<=p[1]?[p[0],d[0],d[1],p[1]]:p[0]>=d[0]&&p[1]<=d[1]?[d[0],p[0],p[1],d[1]]:d[0]>p[0]&&d[0]<p[1]?[p[0],d[0],p[1],d[1]]:[d[0],p[0],d[1],p[1]]:d;if(0!==p.length)return p}return[]}function Zt(e,t){t=ve.clone(Ne(t,ve.ZERO)),ve.equals(t,ve.ZERO)||ve.normalize(t,t),this.origin=ve.clone(Ne(e,ve.ZERO)),this.direction=t}Xt.computeDiscriminant=function(e,t,r,n,i){var a=e*e,o=t*t,s=o*t,u=r*r,c=u*r,l=n*n,f=l*n,h=i*i;return o*u*l-4*s*f-4*e*c*l+18*e*t*r*f-27*a*l*l+256*(a*e)*(h*i)+i*(18*s*r*n-4*o*c+16*e*u*u-80*e*t*u*n-6*e*o*l+144*a*r*l)+h*(144*e*o*r-27*o*o-128*a*u-192*a*t*n)},Xt.computeRealRoots=function(e,t,r,n,i){if(Math.abs(e)<Ce.EPSILON15)return Ht.computeRealRoots(t,r,n,i);var a=t/e,o=r/e,s=n/e,u=i/e,e=a<0?1:0;switch(e+=o<0?e+1:e,e+=s<0?e+1:e,e+=u<0?e+1:e){case 0:return Yt(a,o,s,u);case 1:case 2:return Kt(a,o,s,u);case 3:case 4:return Yt(a,o,s,u);case 5:return Kt(a,o,s,u);case 6:case 7:return Yt(a,o,s,u);case 8:return Kt(a,o,s,u);case 9:case 10:return Yt(a,o,s,u);case 11:return Kt(a,o,s,u);case 12:case 13:case 14:case 15:return Yt(a,o,s,u);default:return}},Zt.clone=function(e,t){if(Me(e))return Me(t)?(t.origin=ve.clone(e.origin),t.direction=ve.clone(e.direction),t):new Zt(e.origin,e.direction)},Zt.getPoint=function(e,t,r){return Me(r)||(r=new ve),r=ve.multiplyByScalar(e.direction,t,r),ve.add(e.origin,r,r)};var Jt={rayPlane:function(e,t,r){Me(r)||(r=new ve);var n=e.origin,i=e.direction,a=t.normal,e=ve.dot(a,i);if(!(Math.abs(e)<Ce.EPSILON15)){e=(-t.distance-ve.dot(a,n))/e;if(!(e<0))return r=ve.multiplyByScalar(i,e,r),ve.add(n,r,r)}}},Qt=new ve,$t=new ve,er=new ve,tr=new ve,rr=new ve;Jt.rayTriangleParametric=function(e,t,r,n,i){i=Ne(i,!1);var a,o,s,u=e.origin,c=e.direction,l=ve.subtract(r,t,Qt),e=ve.subtract(n,t,$t),r=ve.cross(c,e,er),n=ve.dot(l,r);if(i){if(n<Ce.EPSILON6)return;if(h=ve.subtract(u,t,tr),(f=ve.dot(h,r))<0||n<f)return;if(a=ve.cross(h,l,rr),(o=ve.dot(c,a))<0||n<f+o)return;s=ve.dot(e,a)/n}else{if(Math.abs(n)<Ce.EPSILON6)return;var f,n=1/n,h=ve.subtract(u,t,tr);if((f=ve.dot(h,r)*n)<0||1<f)return;if(a=ve.cross(h,l,rr),(o=ve.dot(c,a)*n)<0||1<f+o)return;s=ve.dot(e,a)*n}return s},Jt.rayTriangle=function(e,t,r,n,i,a){i=Jt.rayTriangleParametric(e,t,r,n,i);if(Me(i)&&!(i<0))return Me(a)||(a=new ve),ve.multiplyByScalar(e.direction,i,a),ve.add(e.origin,a,a)};var nr=new Zt;Jt.lineSegmentTriangle=function(e,t,r,n,i,a,o){var s=nr;ve.clone(e,s.origin),ve.subtract(t,e,s.direction),ve.normalize(s.direction,s.direction);a=Jt.rayTriangleParametric(s,r,n,i,a);if(!(!Me(a)||a<0||a>ve.distance(e,t)))return Me(o)||(o=new ve),ve.multiplyByScalar(s.direction,a,o),ve.add(s.origin,o,o)};var ir={root0:0,root1:0};function ar(e,t,r){Me(r)||(r=new he);var n=e.origin,i=e.direction,e=t.center,t=t.radius*t.radius,e=ve.subtract(n,e,er),t=function(e,t,r,n){if(!((a=t*t-4*e*r)<0)){if(0<a){var i=1/(2*e),r=Math.sqrt(a),a=(-t+r)*i,i=(-t-r)*i;return a<i?(n.root0=a,n.root1=i):(n.root0=i,n.root1=a),n}e=-t/(2*e);if(0!=e)return n.root0=n.root1=e,n}}(ve.dot(i,i),2*ve.dot(i,e),ve.magnitudeSquared(e)-t,ir);if(Me(t))return r.start=t.root0,r.stop=t.root1,r}Jt.raySphere=function(e,t,r){if(Me(r=ar(e,t,r))&&!(r.stop<0))return r.start=Math.max(r.start,0),r};var or=new Zt;Jt.lineSegmentSphere=function(e,t,r,n){var i=or;ve.clone(e,i.origin);t=ve.subtract(t,e,i.direction),e=ve.magnitude(t);if(ve.normalize(t,t),!(!Me(n=ar(i,r,n))||n.stop<0||n.start>e))return n.start=Math.max(n.start,0),n.stop=Math.min(n.stop,e),n};var sr=new ve,ur=new ve;function cr(e,t,r){var n=e+t;return Ce.sign(e)!==Ce.sign(t)&&Math.abs(n/Math.max(Math.abs(e),Math.abs(t)))<r?0:n}Jt.rayEllipsoid=function(e,t){var r=t.oneOverRadii,n=ve.multiplyComponents(r,e.origin,sr),t=ve.multiplyComponents(r,e.direction,ur),r=ve.magnitudeSquared(n),e=ve.dot(n,t);if(1<r){if(0<=e)return;var i,a,n=e*e,o=r-1;if(n<(a=(i=ve.magnitudeSquared(t))*o))return;if(a<n){var s,u=e*e-a,c=(s=-e+Math.sqrt(u))/i,n=o/s;return c<n?new he(c,n):{start:n,stop:c}}c=Math.sqrt(o/i);return new he(c,c)}return r<1?(o=r-1,u=e*e-(a=(i=ve.magnitudeSquared(t))*o),new he(0,(s=-e+Math.sqrt(u))/i)):e<0?new he(0,-e/(i=ve.magnitudeSquared(t))):void 0};var lr=new ve,fr=new ve,hr=new ve,mr=new ve,dr=new ve,pr=new me,Er=new me,_r=new me,yr=new me,gr=new me,Tr=new me,Ar=new me,Rr=new ve,Sr=new ve,Or=new T;Jt.grazingAltitudeLocation=function(e,t){var r=e.origin,n=e.direction;if(!ve.equals(r,ve.ZERO)){var i=t.geodeticSurfaceNormal(r,lr);if(0<=ve.dot(n,i))return r}var a=Me(this.rayEllipsoid(e,t)),o=t.transformPositionToScaledSpace(n,lr),i=ve.normalize(o,o),e=ve.mostOrthogonalAxis(o,mr),o=ve.normalize(ve.cross(e,i,fr),fr),e=ve.normalize(ve.cross(i,o,hr),hr),s=pr;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=o.x,s[4]=o.y,s[5]=o.z,s[6]=e.x,s[7]=e.y,s[8]=e.z;var i=me.transpose(s,Er),u=me.fromScale(t.radii,_r),o=me.fromScale(t.oneOverRadii,yr),e=gr;e[0]=0,e[1]=-n.z,e[2]=n.y,e[3]=n.z,e[4]=0,e[5]=-n.x,e[6]=-n.y,e[7]=n.x,e[8]=0;var o=me.multiply(me.multiply(i,o,Tr),e,Tr),e=me.multiply(me.multiply(o,u,Ar),s,Ar),o=me.multiplyByVector(o,r,dr),c=function(e,t,r,n,i){var a=n*n,o=i*i,s=(e[me.COLUMN1ROW1]-e[me.COLUMN2ROW2])*o,u=i*(n*cr(e[me.COLUMN1ROW0],e[me.COLUMN0ROW1],Ce.EPSILON15)+t.y),c=e[me.COLUMN0ROW0]*a+e[me.COLUMN2ROW2]*o+n*t.x+r,l=o*cr(e[me.COLUMN2ROW1],e[me.COLUMN1ROW2],Ce.EPSILON15),f=i*(n*cr(e[me.COLUMN2ROW0],e[me.COLUMN0ROW2])+t.z),h=[];if(0==f&&0==l){if(0===(_=kt.computeRealRoots(s,u,c)).length)return h;var m=_[0],d=Math.sqrt(Math.max(1-m*m,0));return h.push(new ve(n,i*m,i*-d)),h.push(new ve(n,i*m,i*d)),2===_.length&&(p=_[1],E=Math.sqrt(Math.max(1-p*p,0)),h.push(new ve(n,i*p,i*-E)),h.push(new ve(n,i*p,i*E))),h}var p=s*s+(m=l*l),E=2*(u*s+(d=f*l)),m=2*c*s+u*u-m+(t=f*f),d=2*(c*u-d);if(0==p&&0==E&&0==m&&0==d)return h;var _,y=(_=Xt.computeRealRoots(p,E,m,d,c*c-t)).length;if(0===y)return h;for(var g=0;g<y;++g){var T=_[g],A=T*T,R=Math.max(1-A,0),R=Math.sqrt(R),A=Ce.sign(s)===Ce.sign(c)?cr(s*A+c,u*T,Ce.EPSILON12):Ce.sign(c)===Ce.sign(u*T)?cr(s*A,u*T+c,Ce.EPSILON12):cr(s*A+u*T,c,Ce.EPSILON12),A=A*cr(l*T,f,Ce.EPSILON15);A<0?h.push(new ve(n,i*T,i*R)):0<A?h.push(new ve(n,i*T,i*-R)):0!==R?(h.push(new ve(n,i*T,i*-R)),h.push(new ve(n,i*T,i*R)),++g):h.push(new ve(n,i*T,i*R))}return h}(e,ve.negate(o,lr),0,0,1),l=c.length;if(0<l){for(var f=ve.clone(ve.ZERO,Sr),h=Number.NEGATIVE_INFINITY,m=0;m<l;++m){var d=me.multiplyByVector(u,me.multiplyByVector(s,c[m],Rr),Rr),p=ve.normalize(ve.subtract(d,r,mr),mr),p=ve.dot(p,n);h<p&&(h=p,f=ve.clone(d,f))}e=t.cartesianToCartographic(f,Or),h=Ce.clamp(h,0,1),o=ve.magnitude(ve.subtract(f,r,mr))*Math.sqrt(1-h*h);return e.height=o=a?-o:o,t.cartographicToCartesian(e,new ve)}};var xr,Ir=new ve;Jt.lineSegmentPlane=function(e,t,r,n){Me(n)||(n=new ve);var i=ve.subtract(t,e,Ir),a=r.normal,t=ve.dot(a,i);if(!(Math.abs(t)<Ce.EPSILON6)){a=ve.dot(a,e),t=-(r.distance+a)/t;if(!(t<0||1<t))return ve.multiplyByScalar(i,t,n),ve.add(e,n,n),n}},Jt.trianglePlaneIntersection=function(e,t,r,n){var i,a,o=n.normal,s=n.distance,u=ve.dot(o,e)+s<0,c=ve.dot(o,t)+s<0,o=ve.dot(o,r)+s<0,s=0;if(s+=u?1:0,s+=c?1:0,1!=(s+=o?1:0)&&2!=s||(i=new ve,a=new ve),1==s){if(u)return Jt.lineSegmentPlane(e,t,n,i),Jt.lineSegmentPlane(e,r,n,a),{positions:[e,t,r,i,a],indices:[0,3,4,1,2,4,1,4,3]};if(c)return Jt.lineSegmentPlane(t,r,n,i),Jt.lineSegmentPlane(t,e,n,a),{positions:[e,t,r,i,a],indices:[1,3,4,2,0,4,2,4,3]};if(o)return Jt.lineSegmentPlane(r,e,n,i),Jt.lineSegmentPlane(r,t,n,a),{positions:[e,t,r,i,a],indices:[2,3,4,0,1,4,0,4,3]}}else if(2==s){if(!u)return Jt.lineSegmentPlane(t,e,n,i),Jt.lineSegmentPlane(r,e,n,a),{positions:[e,t,r,i,a],indices:[1,2,4,1,4,3,0,3,4]};if(!c)return Jt.lineSegmentPlane(r,t,n,i),Jt.lineSegmentPlane(e,t,n,a),{positions:[e,t,r,i,a],indices:[2,0,4,2,4,3,1,3,4]};if(!o)return Jt.lineSegmentPlane(e,r,n,i),Jt.lineSegmentPlane(t,r,n,a),{positions:[e,t,r,i,a],indices:[0,1,4,0,4,3,2,3,4]}}};var wr,Mr,Nr,Cr,vr,br,Ur,Dr,Pr,Fr,zr,Lr,Br,qr,Gr,Vr,kr,jr={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},Hr={};function Wr(e){for(var t=e.split("."),r=0,n=t.length;r<n;++r)t[r]=parseInt(t[r],10);return t}function Xr(){var e;return Me(Mr)||(Mr=!1,Jr()||null!==(e=/ Chrome\/([\.0-9]+)/.exec(wr.userAgent))&&(Mr=!0,Nr=Wr(e[1]))),Mr}function Yr(){var e;return Me(Cr)||(Cr=!1,Xr()||Jr()||!/ Safari\/[\.0-9]+/.test(wr.userAgent)||null!==(e=/ Version\/([\.0-9]+)/.exec(wr.userAgent))&&(Cr=!0,vr=Wr(e[1]))),Cr}function Kr(){var e;return Me(br)||(br=!1,null!==(e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(wr.userAgent))&&(br=!0,(Ur=Wr(e[1])).isNightly=!!e[2])),br}function Zr(){var e;return Me(Dr)||(Dr=!1,"Microsoft Internet Explorer"===wr.appName?null!==(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(wr.userAgent))&&(Dr=!0,Pr=Wr(e[1])):"Netscape"===wr.appName&&null!==(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(wr.userAgent))&&(Dr=!0,Pr=Wr(e[1]))),Dr}function Jr(){var e;return Me(Fr)||(Fr=!1,null!==(e=/ Edge\/([\.0-9]+)/.exec(wr.userAgent))&&(Fr=!0,zr=Wr(e[1]))),Fr}function Qr(){var e;return Me(Lr)||(Lr=!1,null!==(e=/Firefox\/([\.0-9]+)/.exec(wr.userAgent))&&(Lr=!0,Br=Wr(e[1]))),Lr}function $r(){var e;return Me(kr)||((e=document.createElement("canvas")).setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;"),e=e.style.imageRendering,(kr=Me(e)&&""!==e)&&(Vr=e)),kr}function en(){return en._result}Object.defineProperties(Hr,{element:{get:function(){if(Hr.supportsFullscreen())return document[jr.fullscreenElement]}},changeEventName:{get:function(){if(Hr.supportsFullscreen())return jr.fullscreenchange}},errorEventName:{get:function(){if(Hr.supportsFullscreen())return jr.fullscreenerror}},enabled:{get:function(){if(Hr.supportsFullscreen())return document[jr.fullscreenEnabled]}},fullscreen:{get:function(){if(Hr.supportsFullscreen())return null!==Hr.element}}}),Hr.supportsFullscreen=function(){if(Me(xr))return xr;xr=!1;var e=document.body;if("function"==typeof e.requestFullscreen)return jr.requestFullscreen="requestFullscreen",jr.exitFullscreen="exitFullscreen",jr.fullscreenEnabled="fullscreenEnabled",jr.fullscreenElement="fullscreenElement",jr.fullscreenchange="fullscreenchange",jr.fullscreenerror="fullscreenerror",xr=!0;for(var t=["webkit","moz","o","ms","khtml"],r=0,n=t.length;r<n;++r){var i,a=t[r];"function"!=typeof e[i=a+"RequestFullscreen"]&&"function"!=typeof e[i=a+"RequestFullScreen"]||(jr.requestFullscreen=i,xr=!0),i=a+"ExitFullscreen","function"==typeof document[i]?jr.exitFullscreen=i:(i=a+"CancelFullScreen","function"==typeof document[i]&&(jr.exitFullscreen=i)),i=a+"FullscreenEnabled",void 0!==document[i]?jr.fullscreenEnabled=i:(i=a+"FullScreenEnabled",void 0!==document[i]&&(jr.fullscreenEnabled=i)),i=a+"FullscreenElement",void 0!==document[i]?jr.fullscreenElement=i:(i=a+"FullScreenElement",void 0!==document[i]&&(jr.fullscreenElement=i)),i=a+"fullscreenchange",void 0!==document["on"+i]&&(jr.fullscreenchange=i="ms"===a?"MSFullscreenChange":i),i=a+"fullscreenerror",void 0!==document["on"+i]&&(jr.fullscreenerror=i="ms"===a?"MSFullscreenError":i)}return xr},Hr.requestFullscreen=function(e,t){Hr.supportsFullscreen()&&e[jr.requestFullscreen]({vrDisplay:t})},Hr.exitFullscreen=function(){Hr.supportsFullscreen()&&document[jr.exitFullscreen]()},Hr._names=jr,wr="undefined"!=typeof navigator?navigator:{},en._promise=void 0,en._result=void 0,en.initialize=function(){if(Me(en._promise))return en._promise;var e=Q.defer();if(en._promise=e.promise,Jr())return en._result=!1,e.resolve(en._result),e.promise;var t=new Image;return t.onload=function(){en._result=0<t.width&&0<t.height,e.resolve(en._result)},t.onerror=function(){en._result=!1,e.resolve(en._result)},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.promise},Object.defineProperties(en,{initialized:{get:function(){return Me(en._result)}}});X=[];"undefined"!=typeof ArrayBuffer&&(X.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&X.push(Uint8ClampedArray),"undefined"!=typeof Uint8ClampedArray&&X.push(Uint8ClampedArray));var tn={isChrome:Xr,chromeVersion:function(){return Xr()&&Nr},isSafari:Yr,safariVersion:function(){return Yr()&&vr},isWebkit:Kr,webkitVersion:function(){return Kr()&&Ur},isInternetExplorer:Zr,internetExplorerVersion:function(){return Zr()&&Pr},isEdge:Jr,edgeVersion:function(){return Jr()&&zr},isFirefox:Qr,firefoxVersion:function(){return Qr()&&Br},isWindows:function(){return qr=!Me(qr)?/Windows/i.test(wr.appVersion):qr},hardwareConcurrency:Ne(wr.hardwareConcurrency,3),supportsPointerEvents:function(){return Gr=!Me(Gr)?!Qr()&&"undefined"!=typeof PointerEvent&&(!Me(wr.pointerEnabled)||wr.pointerEnabled):Gr},supportsImageRenderingPixelated:$r,supportsWebP:en,imageRenderingValue:function(){return $r()?Vr:void 0},typedArrayTypes:X};function rn(e,t,r,n){this.x=Ne(e,0),this.y=Ne(t,0),this.z=Ne(r,0),this.w=Ne(n,0)}tn.supportsFullscreen=function(){return Hr.supportsFullscreen()},tn.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer},tn.supportsWebWorkers=function(){return"undefined"!=typeof Worker},tn.supportsWebAssembly=function(){return"undefined"!=typeof WebAssembly&&!tn.isEdge()};var nn=new ve;rn.fromAxisAngle=function(e,t,r){var n=t/2,i=Math.sin(n),t=(nn=ve.normalize(e,nn)).x*i,e=nn.y*i,i=nn.z*i,n=Math.cos(n);return Me(r)?(r.x=t,r.y=e,r.z=i,r.w=n,r):new rn(t,e,i,n)};var an=[1,2,0],on=new Array(3);rn.fromRotationMatrix=function(e,t){var r,n,i,a,o=e[me.COLUMN0ROW0],s=e[me.COLUMN1ROW1],u=e[me.COLUMN2ROW2],c=o+s+u,l=0<c?(i=.5*(a=Math.sqrt(c+1)),r=(e[me.COLUMN1ROW2]-e[me.COLUMN2ROW1])*(a=.5/a),n=(e[me.COLUMN2ROW0]-e[me.COLUMN0ROW2])*a,(e[me.COLUMN0ROW1]-e[me.COLUMN1ROW0])*a):(s=an[o=an[u=o<u&&s<u?2:o<s?1:0]],a=Math.sqrt(e[me.getElementIndex(u,u)]-e[me.getElementIndex(o,o)]-e[me.getElementIndex(s,s)]+1),(l=on)[u]=.5*a,a=.5/a,i=(e[me.getElementIndex(s,o)]-e[me.getElementIndex(o,s)])*a,l[o]=(e[me.getElementIndex(o,u)]+e[me.getElementIndex(u,o)])*a,l[s]=(e[me.getElementIndex(s,u)]+e[me.getElementIndex(u,s)])*a,r=-l[0],n=-l[1],-l[2]);return Me(t)?(t.x=r,t.y=n,t.z=l,t.w=i,t):new rn(r,n,l,i)};var sn,un,cn,ln=new rn;new rn,new rn,new rn;rn.fromHeadingPitchRoll=function(e,t){return cn=rn.fromAxisAngle(ve.UNIT_X,e.roll,ln),un=rn.fromAxisAngle(ve.UNIT_Y,-e.pitch,t),t=rn.multiply(un,cn,un),sn=rn.fromAxisAngle(ve.UNIT_Z,-e.heading,ln),rn.multiply(sn,t,t)};var fn=new ve,hn=new ve;rn.fromNormal=function(e,t,r){var n=ve.add(e,t,fn);ve.normalize(n,n);var i,a,o,s,u=ve.dot(e,n),t=u;return s=0!=u?(a=(i=ve.cross(e,n,hn)).x,o=i.y,i.z):Math.abs(e.x)>=Math.abs(e.y)?(s=1/Math.sqrt(e.x*e.x+e.z*e.z),a=-e.z*s,o=0,e.x*s):(s=1/Math.sqrt(e.x*e.x+e.z*e.z),a=0,o=e.z*s,-e.y*s),Me(r)?(r.x=a,r.y=o,r.z=s,r.w=t,r):new rn(a,o,s,t)};var mn=new ve,dn=new ve,pn=new rn,En=new rn,_n=new rn;rn.packedLength=4,rn.pack=function(e,t,r){return r=Ne(r,0),t[r++]=e.x,t[r++]=e.y,t[r++]=e.z,t[r]=e.w,t},rn.unpack=function(e,t,r){return t=Ne(t,0),(r=!Me(r)?new rn:r).x=e[t],r.y=e[t+1],r.z=e[t+2],r.w=e[t+3],r},rn.packedInterpolationLength=3,rn.convertPackedArrayForInterpolation=function(e,t,r,n){rn.unpack(e,4*r,_n),rn.conjugate(_n,_n);for(var i=0,a=r-t+1;i<a;i++){var o=3*i;rn.unpack(e,4*(t+i),pn),rn.multiply(pn,_n,pn),pn.w<0&&rn.negate(pn,pn),rn.computeAxis(pn,mn);var s=rn.computeAngle(pn);(n=!Me(n)?[]:n)[o]=mn.x*s,n[1+o]=mn.y*s,n[2+o]=mn.z*s}},rn.unpackInterpolationResult=function(e,t,r,n,i){Me(i)||(i=new rn),ve.fromArray(e,0,dn);e=ve.magnitude(dn);return rn.unpack(t,4*n,En),0===e?rn.clone(rn.IDENTITY,pn):rn.fromAxisAngle(dn,e,pn),rn.multiply(pn,En,i)},rn.clone=function(e,t){if(Me(e))return Me(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new rn(e.x,e.y,e.z,e.w)},rn.conjugate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},rn.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},rn.magnitude=function(e){return Math.sqrt(rn.magnitudeSquared(e))},rn.normalize=function(e,t){var r=1/rn.magnitude(e),n=e.x*r,i=e.y*r,a=e.z*r,r=e.w*r;return t.x=n,t.y=i,t.z=a,t.w=r,t},rn.inverse=function(e,t){var r=rn.magnitudeSquared(e);return t=rn.conjugate(e,t),rn.multiplyByScalar(t,1/r,t)},rn.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r},rn.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},rn.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},rn.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},rn.multiply=function(e,t,r){var n=e.x,i=e.y,a=e.z,o=e.w,s=t.x,u=t.y,c=t.z,l=t.w,f=o*u-n*c+i*l+a*s,e=o*c+n*u-i*s+a*l,t=o*l-n*s-i*u-a*c;return r.x=o*s+n*l+i*c-a*u,r.y=f,r.z=e,r.w=t,r},rn.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},rn.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},rn.computeAxis=function(e,t){var r=e.w;if(Math.abs(r-1)<Ce.EPSILON6)return t.x=t.y=t.z=0,t;r=1/Math.sqrt(1-r*r);return t.x=e.x*r,t.y=e.y*r,t.z=e.z*r,t},rn.computeAngle=function(e){return Math.abs(e.w-1)<Ce.EPSILON6?0:2*Math.acos(e.w)};var yn=new rn;rn.lerp=function(e,t,r,n){return yn=rn.multiplyByScalar(t,r,yn),n=rn.multiplyByScalar(e,1-r,n),rn.add(yn,n,n)};var gn=new rn,Tn=new rn,An=new rn;rn.slerp=function(e,t,r,n){var i=rn.dot(e,t),a=t;if(i<0&&(i=-i,a=gn=rn.negate(t,gn)),1-i<Ce.EPSILON6)return rn.lerp(e,a,r,n);i=Math.acos(i);return Tn=rn.multiplyByScalar(e,Math.sin((1-r)*i),Tn),An=rn.multiplyByScalar(a,Math.sin(r*i),An),n=rn.add(Tn,An,n),rn.multiplyByScalar(n,1/Math.sin(i),n)},rn.log=function(e,t){var r=Ce.acosClamped(e.w),n=0;return 0!==r&&(n=r/Math.sin(r)),ve.multiplyByScalar(e,n,t)},rn.exp=function(e,t){var r=ve.magnitude(e),n=0;return 0!==r&&(n=Math.sin(r)/r),t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=Math.cos(r),t};var Rn=new ve,Sn=new ve,On=new rn,xn=new rn;rn.computeInnerQuadrangle=function(e,t,r,n){var i=rn.conjugate(t,On);rn.multiply(i,r,xn);r=rn.log(xn,Rn);rn.multiply(i,e,xn);e=rn.log(xn,Sn);return ve.add(r,e,r),ve.multiplyByScalar(r,.25,r),ve.negate(r,r),rn.exp(r,On),rn.multiply(t,On,n)},rn.squad=function(e,t,r,n,i,a){t=rn.slerp(e,t,i,On),n=rn.slerp(r,n,i,xn);return rn.slerp(t,n,2*i*(1-i),a)};for(var In=new rn,X=1.9011074535173003,wn=tn.supportsTypedArrays()?new Float32Array(8):[],Mn=tn.supportsTypedArrays()?new Float32Array(8):[],Nn=tn.supportsTypedArrays()?new Float32Array(8):[],Cn=tn.supportsTypedArrays()?new Float32Array(8):[],vn=0;vn<7;++vn){var bn=vn+1,Un=2*bn+1;wn[vn]=1/(bn*Un),Mn[vn]=bn/Un}function Dn(e,t,r){this.heading=Ne(e,0),this.pitch=Ne(t,0),this.roll=Ne(r,0)}function Pn(e,t,r){for(var n,i,a=0,o=e.length-1;a<=o;)if((i=r(e[n=~~((a+o)/2)],t))<0)a=1+n;else{if(!(0<i))return n;o=n-1}return~(o+1)}function Fn(){function g(e,t,r,n,i,a,o){var s=e>>>0;return e=(r=r&&s&&{2:"0b",8:"0",16:"0x"}[t]||"")+S(s.toString(t),a||0,"0",!1),O(e,r,n,i,o)}function T(e,t,r,n,i,a){return null!=n&&(e=e.slice(0,n)),O(e,"",t,r,i,a)}var A=arguments,R=0,e=A[R++],S=function(e,t,r,n){r=r||" ";r=e.length>=t?"":Array(1+t-e.length>>>0).join(r);return n?e+r:r+e},O=function(e,t,r,n,i,a){var o=n-e.length;return e=0<o?r||!i?S(e,n,a,r):e.slice(0,t.length)+S("",o,"0",!0)+e.slice(t.length):e};return e.replace(/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,function(e,t,r,n,i,a,o){var s,u,c,l,f;if("%%"==e)return"%";for(var h=!1,m="",d=!1,p=!1,E=" ",_=r.length,y=0;r&&y<_;y++)switch(r.charAt(y)){case" ":m=" ";break;case"+":m="+";break;case"-":h=!0;break;case"'":E=r.charAt(y+1);break;case"0":d=!0;break;case"#":p=!0}switch((n=n?"*"==n?+A[R++]:"*"==n.charAt(0)?+A[n.slice(1,-1)]:+n:0)<0&&(n=-n,h=!0),a=a?"*"==a?+A[R++]:"*"==a.charAt(0)?+A[a.slice(1,-1)]:+a:-1<"fFeE".indexOf(o)?6:"d"==o?0:void 0,f=t?A[t.slice(0,-1)]:A[R++],o){case"s":return T(String(f),h,n,a,d,E);case"c":return T(String.fromCharCode(+f),h,n,a,d);case"b":return g(f,2,p,h,n,a,d);case"o":return g(f,8,p,h,n,a,d);case"x":return g(f,16,p,h,n,a,d);case"X":return g(f,16,p,h,n,a,d).toUpperCase();case"u":return g(f,10,p,h,n,a,d);case"i":case"d":return s=+f||0,f=(u=(s=Math.round(s-s%1))<0?"-":m)+S(String(Math.abs(s)),a,"0",!1),O(f,u,h,n,d);case"e":case"E":case"f":case"F":case"g":case"G":return u=(s=+f)<0?"-":m,c=["toExponential","toFixed","toPrecision"]["efg".indexOf(o.toLowerCase())],l=["toString","toUpperCase"]["eEfFgG".indexOf(o)%2],f=u+Math.abs(s)[c](a),O(f,u,h,n,d)[l]();default:return e}})}function zn(e,t,r,n,i,a,o,s){this.year=e,this.month=t,this.day=r,this.hour=n,this.minute=i,this.second=a,this.millisecond=o,this.isLeapSecond=s}function Ln(e){return e%4==0&&e%100!=0||e%400==0}function Bn(e,t){this.julianDate=e,this.offset=t}wn[7]=X/136,Mn[7]=8*X/17,rn.fastSlerp=function(e,t,r,n){var i,a=rn.dot(e,t);0<=a?i=1:(i=-1,a=-a);for(var o=a-1,a=1-r,s=r*r,u=a*a,c=7;0<=c;--c)Nn[c]=(wn[c]*s-Mn[c])*o,Cn[c]=(wn[c]*u-Mn[c])*o;r=i*r*(1+Nn[0]*(1+Nn[1]*(1+Nn[2]*(1+Nn[3]*(1+Nn[4]*(1+Nn[5]*(1+Nn[6]*(1+Nn[7])))))))),a*=1+Cn[0]*(1+Cn[1]*(1+Cn[2]*(1+Cn[3]*(1+Cn[4]*(1+Cn[5]*(1+Cn[6]*(1+Cn[7]))))))),a=rn.multiplyByScalar(e,a,In);return rn.multiplyByScalar(t,r,n),rn.add(a,n,n)},rn.fastSquad=function(e,t,r,n,i,a){t=rn.fastSlerp(e,t,i,On),n=rn.fastSlerp(r,n,i,xn);return rn.fastSlerp(t,n,2*i*(1-i),a)},rn.equals=function(e,t){return e===t||Me(e)&&Me(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},rn.equalsEpsilon=function(e,t,r){return r=Ne(r,0),e===t||Me(e)&&Me(t)&&Math.abs(e.x-t.x)<=r&&Math.abs(e.y-t.y)<=r&&Math.abs(e.z-t.z)<=r&&Math.abs(e.w-t.w)<=r},rn.ZERO=Object.freeze(new rn(0,0,0,0)),rn.IDENTITY=Object.freeze(new rn(0,0,0,1)),rn.prototype.clone=function(e){return rn.clone(this,e)},rn.prototype.equals=function(e){return rn.equals(this,e)},rn.prototype.equalsEpsilon=function(e,t){return rn.equalsEpsilon(this,e,t)},rn.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},rn.from_euler=function(e,t,r,n){var i=Math.cos(.5*t),a=Math.cos(.5*r),o=Math.cos(.5*e),s=Math.sin(.5*t),u=Math.sin(.5*r),c=Math.sin(.5*e),t=i*a*o-s*u*c,r=s*u*o+i*a*c,e=s*a*o+i*u*c,c=i*u*o-s*a*c;return Me(n)?(n.x=r,n.y=e,n.z=c,n.w=t,n):n=new rn(r,e,c,t)},rn.to_euler=function(e,t){Me(t)||(t=new ve);var r=e.w,n=e.x,i=e.y,a=e.z,o=n*n,s=i*i,u=a*a,e=n*i+a*r;return.499<e?(t.x=0,t.y=2*Math.atan2(n,r),t.z=Ce.PI_OVER_TWO):e<-.499?(t.x=0,t.y=2*-Math.atan2(n,r),t.z=-Ce.PI_OVER_TWO):(t.y=Math.atan2(2*i*r-2*n*a,1-2*s-2*u),t.z=Math.asin(2*n*i+2*a*r),t.x=Math.atan2(2*n*r-2*i*a,1-2*o-2*u)),t},Dn.fromQuaternion=function(e,t){Me(t)||(t=new Dn);var r=2*(e.w*e.y-e.z*e.x),n=1-2*(e.x*e.x+e.y*e.y),i=2*(e.w*e.x+e.y*e.z),a=1-2*(e.y*e.y+e.z*e.z),e=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(e,a),t.roll=Math.atan2(i,n),t.pitch=-Ce.asinClamped(r),t},Dn.fromDegrees=function(e,t,r,n){return(n=!Me(n)?new Dn:n).heading=e*Ce.RADIANS_PER_DEGREE,n.pitch=t*Ce.RADIANS_PER_DEGREE,n.roll=r*Ce.RADIANS_PER_DEGREE,n},Dn.clone=function(e,t){if(Me(e))return Me(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new Dn(e.heading,e.pitch,e.roll)},Dn.equals=function(e,t){return e===t||Me(e)&&Me(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll},Dn.equalsEpsilon=function(e,t,r,n){return e===t||Me(e)&&Me(t)&&Ce.equalsEpsilon(e.heading,t.heading,r,n)&&Ce.equalsEpsilon(e.pitch,t.pitch,r,n)&&Ce.equalsEpsilon(e.roll,t.roll,r,n)},Dn.prototype.clone=function(e){return Dn.clone(this,e)},Dn.prototype.equals=function(e){return Dn.equals(this,e)},Dn.prototype.equalsEpsilon=function(e,t,r){return Dn.equalsEpsilon(this,e,t,r)},Dn.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var qn=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),Gn=Object.freeze({UTC:0,TAI:1}),Vn=new zn,kn=[31,28,31,30,31,30,31,31,30,31,30,31];function jn(e,t){return ii.compare(e.julianDate,t.julianDate)}var Hn=new Bn;function Wn(e){Hn.julianDate=e;var t=ii.leapSeconds,r=Pn(t,Hn,jn),n=t[r=(r=r<0?~r:r)>=t.length?t.length-1:r].offset;0<r&&n<ii.secondsDifference(t[r].julianDate,e)&&(n=t[--r].offset),ii.addSeconds(e,n,e)}function Xn(e,t){Hn.julianDate=e;var r=ii.leapSeconds,n=Pn(r,Hn,jn);if(0===(n=n<0?~n:n))return ii.addSeconds(e,-r[0].offset,t);if(n>=r.length)return ii.addSeconds(e,-r[n-1].offset,t);var i=ii.secondsDifference(r[n].julianDate,e);return 0===i?ii.addSeconds(e,-r[n].offset,t):i<=1?void 0:ii.addSeconds(e,-r[--n].offset,t)}function Yn(e,t,r){var n=t/qn.SECONDS_PER_DAY|0;return e+=n,(t-=qn.SECONDS_PER_DAY*n)<0&&(e--,t+=qn.SECONDS_PER_DAY),r.dayNumber=e,r.secondsOfDay=t,r}function Kn(e,t,r,n,i,a,o){var s=(t-14)/12|0,e=e+4800+s,r=(1461*e/4|0)+(367*(t-2-12*s)/12|0)-(3*((e+100)/100|0)/4|0)+r-32075;(n-=12)<0&&(n+=24);o=a+(n*qn.SECONDS_PER_HOUR+i*qn.SECONDS_PER_MINUTE+o*qn.SECONDS_PER_MILLISECOND);return 43200<=o&&--r,[r,o]}var Zn=/^(\d{4})$/,Jn=/^(\d{4})-(\d{2})$/,Qn=/^(\d{4})-?(\d{3})$/,$n=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,ei=/^(\d{4})-?(\d{2})-?(\d{2})$/,X=/([Z+\-])?(\d{2})?:?(\d{2})?$/,ti=/^(\d{2})(\.\d+)?/.source+X.source,ri=/^(\d{2}):?(\d{2})(\.\d+)?/.source+X.source,ni=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+X.source;function ii(e,t,r){this.dayNumber=void 0,this.secondsOfDay=void 0,e=Ne(e,0),t=Ne(t,0),r=Ne(r,Gn.UTC);var n=0|e;Yn(n,t+=(e-n)*qn.SECONDS_PER_DAY,this),r===Gn.UTC&&Wn(this)}ii.fromGregorianDate=function(e,t){e=Kn(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return Me(t)?(Yn(e[0],e[1],t),Wn(t),t):new ii(e[0],e[1],Gn.UTC)},ii.fromDate=function(e,t){e=Kn(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return Me(t)?(Yn(e[0],e[1],t),Wn(t),t):new ii(e[0],e[1],Gn.UTC)},ii.fromIso8601=function(e,t){var r,n,i,a,o,s=(e=e.replace(",",".")).split("T"),u=1,c=1,l=0,f=0,h=0,m=0,d=s[0],e=s[1];if(null!==(s=d.match(ei))?(i=+s[1],u=+s[2],c=+s[3]):null!==(s=d.match(Jn))?(i=+s[1],u=+s[2]):null!==(s=d.match(Zn))?i=+s[1]:(null!==(s=d.match(Qn))?(i=+s[1],a=+s[2],n=Ln(i)):null!==(s=d.match($n))&&(i=+s[1],a=7*+s[2]+(+s[3]||0)-new Date(Date.UTC(i,0,4)).getUTCDay()-3),(r=new Date(Date.UTC(i,0,1))).setUTCDate(a),u=r.getUTCMonth()+1,c=r.getUTCDate()),n=Ln(i),Me(e)){null!==(s=e.match(ni))?(l=+s[1],f=+s[2],h=+s[3],m=1e3*+(s[4]||0),o=5):null!==(s=e.match(ri))?(l=+s[1],f=+s[2],h=60*+(s[3]||0),o=4):null!==(s=e.match(ti))&&(l=+s[1],f=60*+(s[2]||0),o=3);var p=s[o],E=+s[o+1],_=+(s[o+2]||0);switch(p){case"+":l-=E,f-=_;break;case"-":l+=E,f+=_;break;case"Z":break;default:f+=new Date(Date.UTC(i,u-1,c,l,f)).getTimezoneOffset()}}p=60===h;for(p&&h--;60<=f;)f-=60,l++;for(;24<=l;)l-=24,c++;for(r=n&&2===u?29:kn[u-1];r<c;)c-=r,12<++u&&(u-=12,i++),r=n&&2===u?29:kn[u-1];for(;f<0;)f+=60,l--;for(;l<0;)l+=24,c--;for(;c<1;)--u<1&&(u+=12,i--),c+=r=n&&2===u?29:kn[u-1];m=Kn(i,u,c,l,f,h,m);return Me(t)?(Yn(m[0],m[1],t),Wn(t)):t=new ii(m[0],m[1],Gn.UTC),p&&ii.addSeconds(t,1,t),t},ii.now=function(e){return ii.fromDate(new Date,e)};var ai=new ii(0,0,Gn.TAI);function oi(e,t){if(null===e||"object"!=typeof e)return e;t=Ne(t,!1);var r,n,i=new e.constructor;for(r in e)e.hasOwnProperty(r)&&(n=e[r],t&&(n=oi(n,t)),i[r]=n);return i}function si(e,t,r){r=Ne(r,!1);var n,i,a,o={},s=Me(e),u=Me(t);if(s)for(n in e)e.hasOwnProperty(n)&&(i=e[n],u&&r&&"object"==typeof i&&t.hasOwnProperty(n)?(a=t[n],o[n]="object"==typeof a?si(i,a,r):i):o[n]=i);if(u)for(n in t)t.hasOwnProperty(n)&&!o.hasOwnProperty(n)&&(a=t[n],o[n]=a);return o}function ui(e){e instanceof ui?(this.scheme=e.scheme,this.authority=e.authority,this.path=e.path,this.query=e.query,this.fragment=e.fragment):e&&(0<e.indexOf("/sde?/")&&(e=e.replace("/sde?/","/sde/")),e=ci.exec(e),this.scheme=e[1],this.authority=e[2],this.path=e[3],this.query=e[4],this.fragment=e[5],-1<this.path.indexOf("/sde/")&&(this.path=this.path.replace("/sde/","/sde?/")))}ii.toGregorianDate=function(e,t){var r=!1,n=Xn(e,ai);Me(n)||(ii.addSeconds(e,-1,ai),n=Xn(ai,ai),r=!0);var i=n.dayNumber,a=n.secondsOfDay;43200<=a&&(i+=1);var o=i+68569|0,s=4*o/146097|0,u=4e3*(1+(o=o-((146097*s+3)/4|0)|0))/1461001|0,e=80*(o=o-(1461*u/4|0)+31|0)/2447|0,n=o-(2447*e/80|0)|0,i=2+e-12*(o=e/11|0)|0,e=100*(s-49)+u+o|0,s=a/qn.SECONDS_PER_HOUR|0,u=a-s*qn.SECONDS_PER_HOUR,o=u/qn.SECONDS_PER_MINUTE|0,a=0|(u-=o*qn.SECONDS_PER_MINUTE),u=(u-a)/qn.SECONDS_PER_MILLISECOND;return 23<(s+=12)&&(s-=24),r&&(a+=1),Me(t)?(t.year=e,t.month=i,t.day=n,t.hour=s,t.minute=o,t.second=a,t.millisecond=u,t.isLeapSecond=r,t):new zn(e,i,n,s,o,a,u,r)},ii.toDate=function(e){var t=ii.toGregorianDate(e,Vn),e=t.second;return t.isLeapSecond&&--e,new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,e,t.millisecond))},ii.toIso8601=function(e,t){var r=ii.toGregorianDate(e,Vn),n=r.year,i=r.month,a=r.day,o=r.hour,s=r.minute,e=r.second,r=r.millisecond;return 1e4===n&&1===i&&1===a&&0===o&&0===s&&0===e&&0===r&&(n=9999,i=12,a=31,o=24),Me(t)||0===r?Me(t)&&0!==t?Fn("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",n,i,a,o,s,e,(.01*r).toFixed(t).replace(".","").slice(0,t)):Fn("%04d-%02d-%02dT%02d:%02d:%02dZ",n,i,a,o,s,e):Fn("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",n,i,a,o,s,e,(.01*r).toString().replace(".",""))},ii.clone=function(e,t){if(Me(e))return Me(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new ii(e.dayNumber,e.secondsOfDay,Gn.TAI)},ii.compare=function(e,t){var r=e.dayNumber-t.dayNumber;return 0!=r?r:e.secondsOfDay-t.secondsOfDay},ii.equals=function(e,t){return e===t||Me(e)&&Me(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay},ii.equalsEpsilon=function(e,t,r){return r=Ne(r,0),e===t||Me(e)&&Me(t)&&Math.abs(ii.secondsDifference(e,t))<=r},ii.totalDays=function(e){return e.dayNumber+e.secondsOfDay/qn.SECONDS_PER_DAY},ii.secondsDifference=function(e,t){return(e.dayNumber-t.dayNumber)*qn.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)},ii.daysDifference=function(e,t){return e.dayNumber-t.dayNumber+(e.secondsOfDay-t.secondsOfDay)/qn.SECONDS_PER_DAY},ii.computeTaiMinusUtc=function(e){Hn.julianDate=e;var t=ii.leapSeconds,e=Pn(t,Hn,jn);return e<0&&(e=~e,--e<0&&(e=0)),t[e].offset},ii.addSeconds=function(e,t,r){return Yn(e.dayNumber,e.secondsOfDay+t,r)},ii.addMinutes=function(e,t,r){t=e.secondsOfDay+t*qn.SECONDS_PER_MINUTE;return Yn(e.dayNumber,t,r)},ii.addHours=function(e,t,r){t=e.secondsOfDay+t*qn.SECONDS_PER_HOUR;return Yn(e.dayNumber,t,r)},ii.addDays=function(e,t,r){return Yn(e.dayNumber+t,e.secondsOfDay,r)},ii.lessThan=function(e,t){return ii.compare(e,t)<0},ii.lessThanOrEquals=function(e,t){return ii.compare(e,t)<=0},ii.greaterThan=function(e,t){return 0<ii.compare(e,t)},ii.greaterThanOrEquals=function(e,t){return 0<=ii.compare(e,t)},ii.prototype.clone=function(e){return ii.clone(this,e)},ii.prototype.equals=function(e){return ii.equals(this,e)},ii.prototype.equalsEpsilon=function(e,t){return ii.equalsEpsilon(this,e,t)},ii.prototype.toString=function(){return ii.toIso8601(this)},ii.leapSeconds=[new Bn(new ii(2441317,43210,Gn.TAI),10),new Bn(new ii(2441499,43211,Gn.TAI),11),new Bn(new ii(2441683,43212,Gn.TAI),12),new Bn(new ii(2442048,43213,Gn.TAI),13),new Bn(new ii(2442413,43214,Gn.TAI),14),new Bn(new ii(2442778,43215,Gn.TAI),15),new Bn(new ii(2443144,43216,Gn.TAI),16),new Bn(new ii(2443509,43217,Gn.TAI),17),new Bn(new ii(2443874,43218,Gn.TAI),18),new Bn(new ii(2444239,43219,Gn.TAI),19),new Bn(new ii(2444786,43220,Gn.TAI),20),new Bn(new ii(2445151,43221,Gn.TAI),21),new Bn(new ii(2445516,43222,Gn.TAI),22),new Bn(new ii(2446247,43223,Gn.TAI),23),new Bn(new ii(2447161,43224,Gn.TAI),24),new Bn(new ii(2447892,43225,Gn.TAI),25),new Bn(new ii(2448257,43226,Gn.TAI),26),new Bn(new ii(2448804,43227,Gn.TAI),27),new Bn(new ii(2449169,43228,Gn.TAI),28),new Bn(new ii(2449534,43229,Gn.TAI),29),new Bn(new ii(2450083,43230,Gn.TAI),30),new Bn(new ii(2450630,43231,Gn.TAI),31),new Bn(new ii(2451179,43232,Gn.TAI),32),new Bn(new ii(2453736,43233,Gn.TAI),33),new Bn(new ii(2454832,43234,Gn.TAI),34),new Bn(new ii(2456109,43235,Gn.TAI),35),new Bn(new ii(2457204,43236,Gn.TAI),36),new Bn(new ii(2457754,43237,Gn.TAI),37)],ui.prototype.scheme=null,ui.prototype.authority=null,ui.prototype.path="",ui.prototype.query=null,ui.prototype.fragment=null;var ci=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$");ui.prototype.getScheme=function(){return this.scheme},ui.prototype.getAuthority=function(){return this.authority},ui.prototype.getPath=function(){return this.path},ui.prototype.getQuery=function(){return this.query},ui.prototype.getFragment=function(){return this.fragment},ui.prototype.isAbsolute=function(){return!!this.scheme&&!this.fragment},ui.prototype.isSameDocumentAs=function(e){return e.scheme==this.scheme&&e.authority==this.authority&&e.path==this.path&&e.query==this.query},ui.prototype.equals=function(e){return this.isSameDocumentAs(e)&&e.fragment==this.fragment},ui.prototype.normalize=function(){this.removeDotSegments(),this.scheme&&(this.scheme=this.scheme.toLowerCase()),this.authority&&(this.authority=this.authority.replace(hi,di).replace(li,mi)),this.path&&(this.path=this.path.replace(li,mi)),this.query&&(this.query=this.query.replace(li,mi)),this.fragment&&(this.fragment=this.fragment.replace(li,mi))};var li=/%[0-9a-z]{2}/gi,fi=/[a-zA-Z0-9\-\._~]/,hi=/(.*@)?([^@:]*)(:.*)?/;function mi(e){var t=unescape(e);return fi.test(t)?t:e.toUpperCase()}function di(e,t,r,n){return(t||"")+r.toLowerCase()+(n||"")}function pi(e,t){var r;return"undefined"!=typeof document&&(r=document),pi._implementation(e,t,r)}ui.prototype.resolve=function(e){var t=new ui;return this.scheme?(t.scheme=this.scheme,t.authority=this.authority,t.path=this.path,t.query=this.query):(t.scheme=e.scheme,this.authority?(t.authority=this.authority,t.path=this.path,t.query=this.query):(t.authority=e.authority,""==this.path?(t.path=e.path,t.query=this.query||e.query):("/"==this.path.charAt(0)?t.path=this.path:e.authority&&""==e.path?t.path="/"+this.path:t.path=e.path.substring(0,e.path.lastIndexOf("/")+1)+this.path,t.removeDotSegments(),t.query=this.query))),t.fragment=this.fragment,t},ui.prototype.removeDotSegments=function(){var e,t=this.path.split("/"),r=[],n=""==t[0];for(n&&t.shift(),""==t[0]&&t.shift();t.length;)".."==(e=t.shift())?r.pop():"."!=e&&r.push(e);"."!=e&&".."!=e||r.push(""),n&&r.unshift(""),this.path=r.join("/")},ui.prototype.toString=function(){var e="";return this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+this.authority),e+=this.path,this.query&&(e+="?"+this.query),this.fragment&&(e+="#"+this.fragment),e},pi._implementation=function(e,t,r){if(!Me(t)){if(void 0===r)return e;t=Ne(r.baseURI,r.location.href)}t=new ui(t);return new ui(e).resolve(t).toString()};var Ei,_i=/^blob:/i;function yi(e){return _i.test(e)}var gi=/^data:/i;function Ti(e){return gi.test(e)}var Ai,Ri,Si={},Oi={};function xi(e,t,r){return r<0&&(r+=1),1<r&&--r,6*r<1?e+6*(t-e)*r:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function Ii(e,t,r,n){this.red=Ne(e,1),this.green=Ne(t,1),this.blue=Ne(r,1),this.alpha=Ne(n,1)}Si.add=function(e,t){t=e.toLowerCase()+":"+t;Me(Oi[t])||(Oi[t]=!0)},Si.remove=function(e,t){t=e.toLowerCase()+":"+t;Me(Oi[t])&&delete Oi[t]},Si.contains=function(e){e=function(e){var t=new ui(e);if(t.normalize(),Me(e=t.getAuthority())){if(-1===(e=-1!==e.indexOf("@")?e.split("@")[1]:e).indexOf(":")){t=t.getScheme();if("http"===(t=!Me(t)?(t=window.location.protocol).substring(0,t.length-1):t))e+=":80";else{if("https"!==t)return;e+=":443"}}return e}}(e);return!(!Me(e)||!Me(Oi[e]))},Si.clear=function(){Oi={}},Ii.fromCartesian4=function(e,t){return Me(t)?(t.red=e.x,t.green=e.y,t.blue=e.z,t.alpha=e.w,t):new Ii(e.x,e.y,e.z,e.w)},Ii.fromBytes=function(e,t,r,n,i){return e=Ii.byteToFloat(Ne(e,255)),t=Ii.byteToFloat(Ne(t,255)),r=Ii.byteToFloat(Ne(r,255)),n=Ii.byteToFloat(Ne(n,255)),Me(i)?(i.red=e,i.green=t,i.blue=r,i.alpha=n,i):new Ii(e,t,r,n)},Ii.fromAlpha=function(e,t,r){return Me(r)?(r.red=e.red,r.green=e.green,r.blue=e.blue,r.alpha=t,r):new Ii(e.red,e.green,e.blue,t)},tn.supportsTypedArrays()&&(Rs=new ArrayBuffer(4),Ai=new Uint32Array(Rs),Ri=new Uint8Array(Rs)),Ii.fromRgba=function(e,t){return Ai[0]=e,Ii.fromBytes(Ri[0],Ri[1],Ri[2],Ri[3],t)},Ii.fromArgb=function(e,t){return Ai[0]=e,Ii.fromBytes(Ri[2],Ri[1],Ri[0],Ri[3],t)},Ii.fromMapserver=function(e,t){return Ai[0]=e,Ii.fromBytes(Ri[3],Ri[2],Ri[1],Ri[0],t)},Ii.fromHsl=function(e,t,r,n,i){e=Ne(e,0)%1,t=Ne(t,0),r=Ne(r,0),n=Ne(n,1);var a=r,o=r,s=r;return 0!==t&&(a=xi(t=2*r-(r=r<.5?r*(1+t):r+t-r*t),r,e+1/3),o=xi(t,r,e),s=xi(t,r,e-1/3)),Me(i)?(i.red=a,i.green=o,i.blue=s,i.alpha=n,i):new Ii(a,o,s,n)},Ii.fromRandom=function(e,t){var r=(e=Ne(e,Ne.EMPTY_OBJECT)).red;Me(r)||(n=Ne(e.minimumRed,0),i=Ne(e.maximumRed,1),r=n+Ce.nextRandomNumber()*(i-n));var n,i=e.green;Me(i)||(a=Ne(e.minimumGreen,0),n=Ne(e.maximumGreen,1),i=a+Ce.nextRandomNumber()*(n-a));var a=e.blue;Me(a)||(o=Ne(e.minimumBlue,0),s=Ne(e.maximumBlue,1),a=o+Ce.nextRandomNumber()*(s-o));var o,s=e.alpha;return Me(s)||(o=Ne(e.minimumAlpha,0),e=Ne(e.maximumAlpha,1),s=o+Ce.nextRandomNumber()*(e-o)),Me(t)?(t.red=r,t.green=i,t.blue=a,t.alpha=s,t):new Ii(r,i,a,s)};var wi=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,Mi=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,Ni=/^rgba?\(\s*([0-9.]+%?)\s*,\s*([0-9.]+%?)\s*,\s*([0-9.]+%?)(?:\s*,\s*([0-9.]+))?\s*\)$/i,Ci=/^hsla?\(\s*([0-9.]+)\s*,\s*([0-9.]+%)\s*,\s*([0-9.]+%)(?:\s*,\s*([0-9.]+))?\s*\)$/i;Ii.fromCssColorString=function(e,t){Me(t)||(t=new Ii);var r=Ii[(e=e.replace(/\s/g,"")).toUpperCase()];if(Me(r))return Ii.clone(r,t),t;r=wi.exec(e);return null!==r?(t.red=parseInt(r[1],16)/15,t.green=parseInt(r[2],16)/15,t.blue=parseInt(r[3],16)/15,t.alpha=parseInt(Ne(r[4],"f"),16)/15,t):null!==(r=Mi.exec(e))?(t.red=parseInt(r[1],16)/255,t.green=parseInt(r[2],16)/255,t.blue=parseInt(r[3],16)/255,t.alpha=parseInt(Ne(r[4],"ff"),16)/255,t):null!==(r=Ni.exec(e))?(t.red=parseFloat(r[1])/("%"===r[1].substr(-1)?100:255),t.green=parseFloat(r[2])/("%"===r[2].substr(-1)?100:255),t.blue=parseFloat(r[3])/("%"===r[3].substr(-1)?100:255),t.alpha=parseFloat(Ne(r[4],"1.0")),t):null!==(r=Ci.exec(e))?Ii.fromHsl(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,parseFloat(Ne(r[4],"1.0")),t):t=void 0},Ii.packedLength=4,Ii.pack=function(e,t,r){return r=Ne(r,0),t[r++]=e.red,t[r++]=e.green,t[r++]=e.blue,t[r]=e.alpha,t},Ii.unpack=function(e,t,r){return t=Ne(t,0),(r=!Me(r)?new Ii:r).red=e[t++],r.green=e[t++],r.blue=e[t++],r.alpha=e[t],r},Ii.byteToFloat=function(e){return e/255},Ii.floatToByte=function(e){return 1===e?255:256*e|0},Ii.clone=function(e,t){if(Me(e))return Me(t)?(t.red=e.red,t.green=e.green,t.blue=e.blue,t.alpha=e.alpha,t):new Ii(e.red,e.green,e.blue,e.alpha)},Ii.equals=function(e,t){return e===t||Me(e)&&Me(t)&&e.red===t.red&&e.green===t.green&&e.blue===t.blue&&e.alpha===t.alpha},Ii.equalsArray=function(e,t,r){return e.red===t[r]&&e.green===t[r+1]&&e.blue===t[r+2]&&e.alpha===t[r+3]},Ii.prototype.clone=function(e){return Ii.clone(this,e)},Ii.prototype.equals=function(e){return Ii.equals(this,e)},Ii.prototype.equalsEpsilon=function(e,t){return this===e||Me(e)&&Math.abs(this.red-e.red)<=t&&Math.abs(this.green-e.green)<=t&&Math.abs(this.blue-e.blue)<=t&&Math.abs(this.alpha-e.alpha)<=t},Ii.prototype.toString=function(){return"("+this.red+", "+this.green+", "+this.blue+", "+this.alpha+")"},Ii.prototype.toUint16=function(){var e=[];return this.toBytes(e),"0x"+e[3].toString(16)+(e[0]<16?"0":"")+e[0].toString(16)+(e[1]<16?"0":"")+e[1].toString(16)+(e[2]<16?"0":"")+e[2].toString(16)},Ii.prototype.toUint16MapServerString=function(){var e=[];return this.toBytes(e),'"#'+(e[0]<16?"0":"")+e[0].toString(16)+(e[1]<16?"0":"")+e[1].toString(16)+(e[2]<16?"0":"")+e[2].toString(16)+(e[3]<16?"0":"")+e[3].toString(16)+'"'},Ii.prototype.toCssColorString=function(){var e=Ii.floatToByte(this.red),t=Ii.floatToByte(this.green),r=Ii.floatToByte(this.blue);return 1===this.alpha?"rgb("+e+","+t+","+r+")":"rgba("+e+","+t+","+r+","+this.alpha+")"},Ii.prototype.toCssHexString=function(){var e=Ii.floatToByte(this.red).toString(16);e.length<2&&(e="0"+e);var t=Ii.floatToByte(this.green).toString(16);t.length<2&&(t="0"+t);var r=Ii.floatToByte(this.blue).toString(16);if(r.length<2&&(r="0"+r),this.alpha<1){var n=Ii.floatToByte(this.alpha).toString(16);return"#"+e+t+r+(n=n.length<2?"0"+n:n)}return"#"+e+t+r},Ii.prototype.toBytes=function(e){var t=Ii.floatToByte(this.red),r=Ii.floatToByte(this.green),n=Ii.floatToByte(this.blue),i=Ii.floatToByte(this.alpha);return Me(e)?(e[0]=t,e[1]=r,e[2]=n,e[3]=i,e):[t,r,n,i]},Ii.prototype.toRgba=function(){return Ri[0]=Ii.floatToByte(this.red),Ri[1]=Ii.floatToByte(this.green),Ri[2]=Ii.floatToByte(this.blue),Ri[3]=Ii.floatToByte(this.alpha),Ai[0]},Ii.prototype.toArgb=function(){return Ri[3]=Ii.floatToByte(this.alpha),Ri[2]=Ii.floatToByte(this.red),Ri[1]=Ii.floatToByte(this.green),Ri[0]=Ii.floatToByte(this.blue),Ai[0]},Ii.prototype.brighten=function(e,t){return t.red=1-(1-this.red)*(e=1-e),t.green=1-(1-this.green)*e,t.blue=1-(1-this.blue)*e,t.alpha=this.alpha,t},Ii.prototype.darken=function(e,t){return t.red=this.red*(e=1-e),t.green=this.green*e,t.blue=this.blue*e,t.alpha=this.alpha,t},Ii.prototype.withAlpha=function(e,t){return Ii.fromAlpha(this,e,t)},Ii.add=function(e,t,r){return r.red=e.red+t.red,r.green=e.green+t.green,r.blue=e.blue+t.blue,r.alpha=e.alpha+t.alpha,r},Ii.subtract=function(e,t,r){return r.red=e.red-t.red,r.green=e.green-t.green,r.blue=e.blue-t.blue,r.alpha=e.alpha-t.alpha,r},Ii.multiply=function(e,t,r){return r.red=e.red*t.red,r.green=e.green*t.green,r.blue=e.blue*t.blue,r.alpha=e.alpha*t.alpha,r},Ii.divide=function(e,t,r){return r.red=e.red/t.red,r.green=e.green/t.green,r.blue=e.blue/t.blue,r.alpha=e.alpha/t.alpha,r},Ii.mod=function(e,t,r){return r.red=e.red%t.red,r.green=e.green%t.green,r.blue=e.blue%t.blue,r.alpha=e.alpha%t.alpha,r},Ii.lerp=function(e,t,r,n){return n.red=Ce.lerp(e.red,t.red,r),n.green=Ce.lerp(e.green,t.green,r),n.blue=Ce.lerp(e.blue,t.blue,r),n.alpha=Ce.lerp(e.alpha,t.alpha,r),n},Ii.multiplyByScalar=function(e,t,r){return r.red=e.red*t,r.green=e.green*t,r.blue=e.blue*t,r.alpha=e.alpha*t,r},Ii.divideByScalar=function(e,t,r){return r.red=e.red/t,r.green=e.green/t,r.blue=e.blue/t,r.alpha=e.alpha/t,r},Ii.ALICEBLUE=Object.freeze(Ii.fromCssColorString("#F0F8FF")),Ii.ANTIQUEWHITE=Object.freeze(Ii.fromCssColorString("#FAEBD7")),Ii.AQUA=Object.freeze(Ii.fromCssColorString("#00FFFF")),Ii.AQUAMARINE=Object.freeze(Ii.fromCssColorString("#7FFFD4")),Ii.AZURE=Object.freeze(Ii.fromCssColorString("#F0FFFF")),Ii.BEIGE=Object.freeze(Ii.fromCssColorString("#F5F5DC")),Ii.BISQUE=Object.freeze(Ii.fromCssColorString("#FFE4C4")),Ii.BLACK=Object.freeze(Ii.fromCssColorString("#000000")),Ii.BLANCHEDALMOND=Object.freeze(Ii.fromCssColorString("#FFEBCD")),Ii.BLUE=Object.freeze(Ii.fromCssColorString("#0000FF")),Ii.BLUEVIOLET=Object.freeze(Ii.fromCssColorString("#8A2BE2")),Ii.BROWN=Object.freeze(Ii.fromCssColorString("#A52A2A")),Ii.BURLYWOOD=Object.freeze(Ii.fromCssColorString("#DEB887")),Ii.CADETBLUE=Object.freeze(Ii.fromCssColorString("#5F9EA0")),Ii.CHARTREUSE=Object.freeze(Ii.fromCssColorString("#7FFF00")),Ii.CHOCOLATE=Object.freeze(Ii.fromCssColorString("#D2691E")),Ii.CORAL=Object.freeze(Ii.fromCssColorString("#FF7F50")),Ii.CORNFLOWERBLUE=Object.freeze(Ii.fromCssColorString("#6495ED")),Ii.CORNSILK=Object.freeze(Ii.fromCssColorString("#FFF8DC")),Ii.CRIMSON=Object.freeze(Ii.fromCssColorString("#DC143C")),Ii.CYAN=Object.freeze(Ii.fromCssColorString("#00FFFF")),Ii.DARKBLUE=Object.freeze(Ii.fromCssColorString("#00008B")),Ii.DARKCYAN=Object.freeze(Ii.fromCssColorString("#008B8B")),Ii.DARKGOLDENROD=Object.freeze(Ii.fromCssColorString("#B8860B")),Ii.DARKGRAY=Object.freeze(Ii.fromCssColorString("#A9A9A9")),Ii.DARKGREEN=Object.freeze(Ii.fromCssColorString("#006400")),Ii.DARKGREY=Ii.DARKGRAY,Ii.DARKKHAKI=Object.freeze(Ii.fromCssColorString("#BDB76B")),Ii.DARKMAGENTA=Object.freeze(Ii.fromCssColorString("#8B008B")),Ii.DARKOLIVEGREEN=Object.freeze(Ii.fromCssColorString("#556B2F")),Ii.DARKORANGE=Object.freeze(Ii.fromCssColorString("#FF8C00")),Ii.DARKORCHID=Object.freeze(Ii.fromCssColorString("#9932CC")),Ii.DARKRED=Object.freeze(Ii.fromCssColorString("#8B0000")),Ii.DARKSALMON=Object.freeze(Ii.fromCssColorString("#E9967A")),Ii.DARKSEAGREEN=Object.freeze(Ii.fromCssColorString("#8FBC8F")),Ii.DARKSLATEBLUE=Object.freeze(Ii.fromCssColorString("#483D8B")),Ii.DARKSLATEGRAY=Object.freeze(Ii.fromCssColorString("#2F4F4F")),Ii.DARKSLATEGREY=Ii.DARKSLATEGRAY,Ii.DARKTURQUOISE=Object.freeze(Ii.fromCssColorString("#00CED1")),Ii.DARKVIOLET=Object.freeze(Ii.fromCssColorString("#9400D3")),Ii.DEEPPINK=Object.freeze(Ii.fromCssColorString("#FF1493")),Ii.DEEPSKYBLUE=Object.freeze(Ii.fromCssColorString("#00BFFF")),Ii.DIMGRAY=Object.freeze(Ii.fromCssColorString("#696969")),Ii.DIMGREY=Ii.DIMGRAY,Ii.DODGERBLUE=Object.freeze(Ii.fromCssColorString("#1E90FF")),Ii.FIREBRICK=Object.freeze(Ii.fromCssColorString("#B22222")),Ii.FLORALWHITE=Object.freeze(Ii.fromCssColorString("#FFFAF0")),Ii.FORESTGREEN=Object.freeze(Ii.fromCssColorString("#228B22")),Ii.FUCHSIA=Object.freeze(Ii.fromCssColorString("#FF00FF")),Ii.GAINSBORO=Object.freeze(Ii.fromCssColorString("#DCDCDC")),Ii.GHOSTWHITE=Object.freeze(Ii.fromCssColorString("#F8F8FF")),Ii.GOLD=Object.freeze(Ii.fromCssColorString("#FFD700")),Ii.GOLDENROD=Object.freeze(Ii.fromCssColorString("#DAA520")),Ii.GRAY=Object.freeze(Ii.fromCssColorString("#808080")),Ii.GREEN=Object.freeze(Ii.fromCssColorString("#008000")),Ii.GREENYELLOW=Object.freeze(Ii.fromCssColorString("#ADFF2F")),Ii.GREY=Ii.GRAY,Ii.HONEYDEW=Object.freeze(Ii.fromCssColorString("#F0FFF0")),Ii.HOTPINK=Object.freeze(Ii.fromCssColorString("#FF69B4")),Ii.INDIANRED=Object.freeze(Ii.fromCssColorString("#CD5C5C")),Ii.INDIGO=Object.freeze(Ii.fromCssColorString("#4B0082")),Ii.IVORY=Object.freeze(Ii.fromCssColorString("#FFFFF0")),Ii.KHAKI=Object.freeze(Ii.fromCssColorString("#F0E68C")),Ii.LAVENDER=Object.freeze(Ii.fromCssColorString("#E6E6FA")),Ii.LAVENDAR_BLUSH=Object.freeze(Ii.fromCssColorString("#FFF0F5")),Ii.LAWNGREEN=Object.freeze(Ii.fromCssColorString("#7CFC00")),Ii.LEMONCHIFFON=Object.freeze(Ii.fromCssColorString("#FFFACD")),Ii.LIGHTBLUE=Object.freeze(Ii.fromCssColorString("#ADD8E6")),Ii.LIGHTCORAL=Object.freeze(Ii.fromCssColorString("#F08080")),Ii.LIGHTCYAN=Object.freeze(Ii.fromCssColorString("#E0FFFF")),Ii.LIGHTGOLDENRODYELLOW=Object.freeze(Ii.fromCssColorString("#FAFAD2")),Ii.LIGHTGRAY=Object.freeze(Ii.fromCssColorString("#D3D3D3")),Ii.LIGHTGREEN=Object.freeze(Ii.fromCssColorString("#90EE90")),Ii.LIGHTGREY=Ii.LIGHTGRAY,Ii.LIGHTPINK=Object.freeze(Ii.fromCssColorString("#FFB6C1")),Ii.LIGHTSEAGREEN=Object.freeze(Ii.fromCssColorString("#20B2AA")),Ii.LIGHTSKYBLUE=Object.freeze(Ii.fromCssColorString("#87CEFA")),Ii.LIGHTSLATEGRAY=Object.freeze(Ii.fromCssColorString("#778899")),Ii.LIGHTSLATEGREY=Ii.LIGHTSLATEGRAY,Ii.LIGHTSTEELBLUE=Object.freeze(Ii.fromCssColorString("#B0C4DE")),Ii.LIGHTYELLOW=Object.freeze(Ii.fromCssColorString("#FFFFE0")),Ii.LIME=Object.freeze(Ii.fromCssColorString("#00FF00")),Ii.LIMEGREEN=Object.freeze(Ii.fromCssColorString("#32CD32")),Ii.LINEN=Object.freeze(Ii.fromCssColorString("#FAF0E6")),Ii.MAGENTA=Object.freeze(Ii.fromCssColorString("#FF00FF")),Ii.MAROON=Object.freeze(Ii.fromCssColorString("#800000")),Ii.MEDIUMAQUAMARINE=Object.freeze(Ii.fromCssColorString("#66CDAA")),Ii.MEDIUMBLUE=Object.freeze(Ii.fromCssColorString("#0000CD")),Ii.MEDIUMORCHID=Object.freeze(Ii.fromCssColorString("#BA55D3")),Ii.MEDIUMPURPLE=Object.freeze(Ii.fromCssColorString("#9370DB")),Ii.MEDIUMSEAGREEN=Object.freeze(Ii.fromCssColorString("#3CB371")),Ii.MEDIUMSLATEBLUE=Object.freeze(Ii.fromCssColorString("#7B68EE")),Ii.MEDIUMSPRINGGREEN=Object.freeze(Ii.fromCssColorString("#00FA9A")),Ii.MEDIUMTURQUOISE=Object.freeze(Ii.fromCssColorString("#48D1CC")),Ii.MEDIUMVIOLETRED=Object.freeze(Ii.fromCssColorString("#C71585")),Ii.MIDNIGHTBLUE=Object.freeze(Ii.fromCssColorString("#191970")),Ii.MINTCREAM=Object.freeze(Ii.fromCssColorString("#F5FFFA")),Ii.MISTYROSE=Object.freeze(Ii.fromCssColorString("#FFE4E1")),Ii.MOCCASIN=Object.freeze(Ii.fromCssColorString("#FFE4B5")),Ii.NAVAJOWHITE=Object.freeze(Ii.fromCssColorString("#FFDEAD")),Ii.NAVY=Object.freeze(Ii.fromCssColorString("#000080")),Ii.OLDLACE=Object.freeze(Ii.fromCssColorString("#FDF5E6")),Ii.OLIVE=Object.freeze(Ii.fromCssColorString("#808000")),Ii.OLIVEDRAB=Object.freeze(Ii.fromCssColorString("#6B8E23")),Ii.ORANGE=Object.freeze(Ii.fromCssColorString("#FFA500")),Ii.ORANGERED=Object.freeze(Ii.fromCssColorString("#FF4500")),Ii.ORCHID=Object.freeze(Ii.fromCssColorString("#DA70D6")),Ii.PALEGOLDENROD=Object.freeze(Ii.fromCssColorString("#EEE8AA")),Ii.PALEGREEN=Object.freeze(Ii.fromCssColorString("#98FB98")),Ii.PALETURQUOISE=Object.freeze(Ii.fromCssColorString("#AFEEEE")),Ii.PALEVIOLETRED=Object.freeze(Ii.fromCssColorString("#DB7093")),Ii.PAPAYAWHIP=Object.freeze(Ii.fromCssColorString("#FFEFD5")),Ii.PEACHPUFF=Object.freeze(Ii.fromCssColorString("#FFDAB9")),Ii.PERU=Object.freeze(Ii.fromCssColorString("#CD853F")),Ii.PINK=Object.freeze(Ii.fromCssColorString("#FFC0CB")),Ii.PLUM=Object.freeze(Ii.fromCssColorString("#DDA0DD")),Ii.POWDERBLUE=Object.freeze(Ii.fromCssColorString("#B0E0E6")),Ii.PURPLE=Object.freeze(Ii.fromCssColorString("#800080")),Ii.RED=Object.freeze(Ii.fromCssColorString("#FF0000")),Ii.ROSYBROWN=Object.freeze(Ii.fromCssColorString("#BC8F8F")),Ii.ROYALBLUE=Object.freeze(Ii.fromCssColorString("#4169E1")),Ii.SADDLEBROWN=Object.freeze(Ii.fromCssColorString("#8B4513")),Ii.SALMON=Object.freeze(Ii.fromCssColorString("#FA8072")),Ii.SANDYBROWN=Object.freeze(Ii.fromCssColorString("#F4A460")),Ii.SEAGREEN=Object.freeze(Ii.fromCssColorString("#2E8B57")),Ii.SEASHELL=Object.freeze(Ii.fromCssColorString("#FFF5EE")),Ii.SIENNA=Object.freeze(Ii.fromCssColorString("#A0522D")),Ii.SILVER=Object.freeze(Ii.fromCssColorString("#C0C0C0")),Ii.SKYBLUE=Object.freeze(Ii.fromCssColorString("#87CEEB")),Ii.SLATEBLUE=Object.freeze(Ii.fromCssColorString("#6A5ACD")),Ii.SLATEGRAY=Object.freeze(Ii.fromCssColorString("#708090")),Ii.SLATEGREY=Ii.SLATEGRAY,Ii.SNOW=Object.freeze(Ii.fromCssColorString("#FFFAFA")),Ii.SPRINGGREEN=Object.freeze(Ii.fromCssColorString("#00FF7F")),Ii.STEELBLUE=Object.freeze(Ii.fromCssColorString("#4682B4")),Ii.TAN=Object.freeze(Ii.fromCssColorString("#D2B48C")),Ii.TEAL=Object.freeze(Ii.fromCssColorString("#008080")),Ii.THISTLE=Object.freeze(Ii.fromCssColorString("#D8BFD8")),Ii.TOMATO=Object.freeze(Ii.fromCssColorString("#FF6347")),Ii.TURQUOISE=Object.freeze(Ii.fromCssColorString("#40E0D0")),Ii.VIOLET=Object.freeze(Ii.fromCssColorString("#EE82EE")),Ii.WHEAT=Object.freeze(Ii.fromCssColorString("#F5DEB3")),Ii.WHITE=Object.freeze(Ii.fromCssColorString("#FFFFFF")),Ii.WHITESMOKE=Object.freeze(Ii.fromCssColorString("#F5F5F5")),Ii.YELLOW=Object.freeze(Ii.fromCssColorString("#FFFF00")),Ii.YELLOWGREEN=Object.freeze(Ii.fromCssColorString("#9ACD32")),Ii.TRANSPARENT=Object.freeze(new Ii(0,0,0,0));var vi={_minimumDisableDepthTestDistance:0,_farToNearRatio:1e3,_logarithmicDepthFarToNearRatio:1e9,_nearToFarDistance2D:175e4,_observerEventWaitTime:500,_terrainExaggeration:1,_max_fps:65,_min_fps:60,_max_frame_time:1e3/60,_create_terrain_num:2,_reclaim_memory_size:1024<<20,_resource_life_time:1e3,_max_range:100,_min_range:8,_drawSpread:.58,_drawDistance:8,_min_observer_height:1,_max_observer_height:12e6,_underground_mode:!1,_camera_height:0,_auxplane_elevation:0,_auxplane_elevation_relative:0,_auxplane_elevation_max:0,_draw_dem_skirt:!0,_auxplane_grid_size:.1,_first_person_height:1.6,_highlight_continue_time:10,_highlight_interval_time:.5,_highlight_color:3372209817,_skyline_valid_distance:1200,_enable_globe_cursor:!0,_default_highlight:!0,_port_list:[],_modelLodRange:{level21:120,level20:450,level19:600},_baseUrlString:"",_server_ip:"",_enable_pack_bim:!1,_waterAnimationSpeed:.004,_waterAmplitude:2};Object.defineProperties(vi,{minimumDisableDepthTestDistance:{get:function(){return vi._minimumDisableDepthTestDistance},set:function(e){vi._minimumDisableDepthTestDistance=e}},farToNearRatio:{get:function(){return vi._farToNearRatio},set:function(e){vi._farToNearRatio=e}},logarithmicDepthFarToNearRatio:{get:function(){return vi._logarithmicDepthFarToNearRatio},set:function(e){vi._logarithmicDepthFarToNearRatio=e}},nearToFarDistance2D:{get:function(){return vi._nearToFarDistance2D},set:function(e){vi._nearToFarDistance2D=e}},observerEventWaitTime:{get:function(){return vi._observerEventWaitTime},set:function(e){vi._observerEventWaitTime=e}},terrainExaggeration:{get:function(){return vi._terrainExaggeration},set:function(e){vi._terrainExaggeration=e}},max_fps:{get:function(){return vi._max_fps},set:function(e){vi._max_fps=e}},min_fps:{get:function(){return vi._min_fps},set:function(e){e!=vi._min_fps&&(vi._min_fps=e,vi._max_frame_time=1e3/e)}},create_terrain_num:{get:function(){return vi._create_terrain_num},set:function(e){vi._create_terrain_num=e}},reclaim_memory_size:{get:function(){return vi._reclaim_memory_size},set:function(e){vi._reclaim_memory_size=e}},resource_life_time:{get:function(){return vi._resource_life_time},set:function(e){vi._resource_life_time=e}},max_range:{get:function(){return vi._max_range},set:function(e){vi._max_range=e}},min_range:{get:function(){return vi._min_range},set:function(e){vi._min_range=e}},drawSpread:{get:function(){return vi._drawSpread},set:function(e){vi._drawSpread=e}},drawDistance:{get:function(){return vi._drawDistance},set:function(e){vi._drawDistance=e}},auxplaneElevationMax:{get:function(){return vi._auxplane_elevation_max},set:function(e){vi._auxplane_elevation_max=e}},minObserverHeight:{get:function(){return vi._min_observer_height},set:function(e){vi._min_observer_height=e}},maxObserverHeight:{get:function(){return vi._max_observer_height},set:function(e){vi._max_observer_height=e}},undergroundMode:{get:function(){return vi._underground_mode},set:function(e){vi._underground_mode=e}},cameraHeight:{get:function(){return vi._camera_height},set:function(e){vi._camera_height=e}},auxplaneElevation:{get:function(){return vi._auxplane_elevation},set:function(e){vi._auxplane_elevation=e}},auxplaneElevationRelative:{get:function(){return vi._auxplane_elevation_relative},set:function(e){vi._auxplane_elevation_relative=e}},drawDemSkirt:{get:function(){return vi._draw_dem_skirt},set:function(e){vi._draw_dem_skirt=e}},auxplaneGridSize:{get:function(){return vi._auxplane_grid_size},set:function(e){vi._auxplane_grid_size=e}},first_person_height:{get:function(){return vi._first_person_height},set:function(e){vi._first_person_height=e}},highlight_continue_time:{get:function(){return vi._highlight_continue_time},set:function(e){vi._highlight_continue_time=e}},highlight_interval_time:{get:function(){return vi._highlight_interval_time},set:function(e){vi._highlight_interval_time=e}},highlight_color:{get:function(){return vi._highlight_color},set:function(e){vi._highlight_color=e}},skyline_valid_distance:{get:function(){return vi._skyline_valid_distance},set:function(e){vi._skyline_valid_distance=e}},enable_globe_cursor:{get:function(){return vi._enable_globe_cursor},set:function(e){vi._enable_globe_cursor=e}},default_highlight:{get:function(){return vi._default_highlight},set:function(e){vi._default_highlight=e}},opaqueFrustumNearOffset:{get:function(){return.9999}},port_list:{get:function(){return vi._port_list}},modelLodRange:{get:function(){return vi._modelLodRange},set:function(e){null!=e&&(vi._modelLodRange.level19=e.level19,vi._modelLodRange.level20=e.level20,vi._modelLodRange.level21=e.level21)}},baseUrlString:{get:function(){return vi._baseUrlString},set:function(e){null!=e&&(vi._baseUrlString=e)}},server_ip:{get:function(){return vi._server_ip},set:function(e){null!=e&&(vi._server_ip=e)}},enable_pack_bim:{get:function(){return vi._enable_pack_bim},set:function(e){null!=e&&(vi._enable_pack_bim=e)}},waterAnimationSpeed:{get:function(){return vi._waterAnimationSpeed},set:function(e){vi._waterAnimationSpeed=e}},waterAmplitude:{get:function(){return vi._waterAmplitude},set:function(e){vi._waterAmplitude=e}}});var bi=Object.freeze({UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5}),Ui=Object.freeze({TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3});function Di(e){e=Ne(e,Ne.EMPTY_OBJECT);var t=Ne(e.throttleByServer,!1),r=Ne(e.throttle,!1);this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=Ne(e.priority,0),this.throttle=r,this.throttleByServer=t,this.type=Ne(e.type,Ui.OTHER),this.serverKey=e.serverKey,this.state=bi.UNISSUED,this.deferred=void 0,this.cancelled=!1,this.geoServer=Ne(e.geoServer,!1)}function Pi(e){this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function Fi(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function zi(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}function Li(e,t){return t-e}Di.prototype.cancel=function(){this.cancelled=!0},Di.prototype.clone=function(e){return Me(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=this.RequestState.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new Di(this)},Object.defineProperties(Pi.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){var t=this._length;if(e<t){for(var r=this._array,n=e;n<t;++n)r[n]=void 0;this._length=e,r.length=e}this._maximumLength=e}},comparator:{get:function(){return this._comparator}}}),Pi.prototype.reserve=function(e){e=Ne(e,this._length),this._array.length=e},Pi.prototype.heapify=function(e){e=Ne(e,0);for(var t=this._length,r=this._comparator,n=this._array,i=-1,a=!0;a;){var o=2*(e+1),s=o-1,i=s<t&&r(n[s],n[e])<0?s:e;(i=o<t&&r(n[o],n[i])<0?o:i)!==e?(Fi(n,i,e),e=i):a=!1}},Pi.prototype.resort=function(){for(var e=this._length,t=Math.ceil(e/2);0<=t;--t)this.heapify(t)},Pi.prototype.insert=function(e){var t,r=this._array,n=this._comparator,i=this._maximumLength,a=this._length++;for(a<r.length?r[a]=e:r.push(e);0!==a;){var o=Math.floor((a-1)/2);if(!(n(r[a],r[o])<0))break;Fi(r,a,o),a=o}return Me(i)&&this._length>i&&(t=r[i],this._length=i),t},Pi.prototype.pop=function(e){if(e=Ne(e,0),0!==this._length){var t=this._array,r=t[e];return Fi(t,e,--this._length),this.heapify(e),t[this._length]=void 0,r}},Object.defineProperties(zi.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}}),zi.prototype.addEventListener=function(e,t){this._listeners.push(e),this._scopes.push(t);var r=this;return function(){r.removeEventListener(e,t)}},zi.prototype.removeEventListener=function(e,t){for(var r=this._listeners,n=this._scopes,i=-1,a=0;a<r.length;a++)if(r[a]===e&&n[a]===t){i=a;break}return-1!==i&&(this._insideRaiseEvent?(this._toRemove.push(i),r[i]=void 0,n[i]=void 0):(r.splice(i,1),n.splice(i,1)),!0)},zi.prototype.raiseEvent=function(){this._insideRaiseEvent=!0;for(var e=this._listeners,t=this._scopes,r=e.length,n=0;n<r;n++)Me(e[n])&&e[n].apply(t[n],arguments);var i=this._toRemove;if(0<(r=i.length)){for(i.sort(Li),n=0;n<r;n++){var a=i[n];e.splice(a,1),t.splice(a,1)}i.length=0}this._insideRaiseEvent=!1};var Bi={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},qi=20,Gi=new Pi({comparator:function(e,t){return e.priority-t.priority}});Gi.maximumLength=qi,Gi.reserve(qi);var Vi=[],ki={},ji="undefined"!=typeof document?new ui(document.location.href):new ui,Hi=new zi;function Wi(){}function Xi(e){Me(e.priorityFunction)&&(e.priority=e.priorityFunction())}function Yi(e){var t=Ne(Wi.requestsByServer[e],Wi.maximumRequestsPerServer);return ki[e]<t}function Ki(e){return e.state===bi.UNISSUED&&(e.state=bi.ISSUED,e.deferred=Q.defer()),e.deferred.promise}function Zi(e){var t,r,n=Ki(e);return e.state=bi.ACTIVE,Vi.push(e),++Bi.numberOfActiveRequests,++Bi.numberOfActiveRequestsEver,++ki[e.serverKey],e.requestFunction().then((r=e,function(e){var t;r.state!==bi.CANCELLED&&(t=r.deferred,--Bi.numberOfActiveRequests,--ki[r.serverKey],Hi.raiseEvent(),r.state=bi.RECEIVED,r.deferred=void 0,t.resolve(e))})).otherwise((t=e,function(e){t.state!==bi.CANCELLED&&(++Bi.numberOfFailedRequests,--Bi.numberOfActiveRequests,--ki[t.serverKey],Hi.raiseEvent(e),t.state=bi.FAILED,t.deferred.reject(e))})),n}function Ji(e){var t,r=e.state===bi.ACTIVE;e.state=bi.CANCELLED,++Bi.numberOfCancelledRequests,Me(e.deferred)&&(t=e.deferred,e.deferred=void 0,t.reject()),r&&(--Bi.numberOfActiveRequests,--ki[e.serverKey],++Bi.numberOfCancelledActiveRequests),Me(e.cancelFunction)&&e.cancelFunction()}function Qi(e,t,r){this.statusCode=e,this.response=t,this.responseHeaders=r,"string"==typeof this.responseHeaders&&(this.responseHeaders=function(e){var t={};if(!e)return t;for(var r=e.split("\r\n"),n=0;n<r.length;++n){var i,a=r[n],o=a.indexOf(": ");0<o&&(i=a.substring(0,o),o=a.substring(o+2),t[i]=o)}return t}(this.responseHeaders))}Wi.maximumRequests=50,Wi.maximumRequestsPerServer=6,Wi.requestsByServer={"api.cesium.com:443":18,"assets.cesium.com:443":18},Wi.throttleRequests=!0,Wi.debugShowStatistics=!1,Wi.requestCompletedEvent=Hi,Object.defineProperties(Wi,{statistics:{get:function(){return Bi}},priorityHeapLength:{get:function(){return qi},set:function(e){if(e<qi)for(;Gi.length>e;)Ji(Gi.pop());qi=e,Gi.maximumLength=e,Gi.reserve(e)}}}),Wi.get_active_request_count=function(){return null==Vi?0:Vi.length},Wi.update=function(){for(var e,t=0,r=Vi.length,n=0;n<r;++n)(e=Vi[n]).cancelled&&Ji(e),e.state===bi.ACTIVE?0<t&&(Vi[n-t]=e):++t;Vi.length-=t;var i=Gi.internalArray,a=Gi.length;for(n=0;n<a;++n)Xi(i[n]);Gi.resort();for(var o=Math.max(Wi.maximumRequests-Vi.length,0),s=0;s<o&&0<Gi.length;)!(e=Gi.pop()).cancelled&&(!e.throttleByServer||Yi(e.serverKey))?(Zi(e),++s):Ji(e);Wi.debugShowStatistics&&(0===Bi.numberOfActiveRequests&&0<Bi.lastNumberOfActiveRequests&&(0<Bi.numberOfAttemptedRequests&&(console.log("Number of attempted requests: "+Bi.numberOfAttemptedRequests),Bi.numberOfAttemptedRequests=0),0<Bi.numberOfCancelledRequests&&(console.log("Number of cancelled requests: "+Bi.numberOfCancelledRequests),Bi.numberOfCancelledRequests=0),0<Bi.numberOfCancelledActiveRequests&&(console.log("Number of cancelled active requests: "+Bi.numberOfCancelledActiveRequests),Bi.numberOfCancelledActiveRequests=0),0<Bi.numberOfFailedRequests&&(console.log("Number of failed requests: "+Bi.numberOfFailedRequests),Bi.numberOfFailedRequests=0)),Bi.lastNumberOfActiveRequests=Bi.numberOfActiveRequests)},Wi.getServerKey=function(e){var t=new ui(e).resolve(ji);t.normalize();e=t.authority;return/:/.test(e)||(e=e+":"+("https"===t.scheme?"443":"80")),Me(ki[e])||(ki[e]=0),e},Wi.request=function(e){if(Ti(e.url)||yi(e.url))return Hi.raiseEvent(),e.state=bi.RECEIVED,e.requestFunction();if(++Bi.numberOfAttemptedRequests,Me(e.serverKey)||(e.serverKey=Wi.getServerKey(e.url)),!Wi.throttleRequests||!e.throttleByServer||Yi(e.serverKey)){if(!Wi.throttleRequests||!e.throttle)return Zi(e);if(!(Vi.length>=Wi.maximumRequests)){Xi(e);var t=Gi.insert(e);if(Me(t)){if(t===e)return;Ji(t)}return Ki(e)}}},Wi.clearForSpecs=function(){for(;0<Gi.length;)Ji(Gi.pop());for(var e=Vi.length,t=0;t<e;++t)Ji(Vi[t]);Vi.length=0,ki={},Bi.numberOfAttemptedRequests=0,Bi.numberOfActiveRequests=0,Bi.numberOfCancelledRequests=0,Bi.numberOfCancelledActiveRequests=0,Bi.numberOfFailedRequests=0,Bi.numberOfActiveRequestsEver=0,Bi.lastNumberOfActiveRequests=0},Wi.numberOfActiveRequestsByServer=function(e){return ki[e]},Wi.requestHeap=Gi,Qi.prototype.toString=function(){var e="Request has failed.";return Me(this.statusCode)&&(e+=" Status Code: "+this.statusCode),e};var $i=function(){try{var e=new XMLHttpRequest;return e.open("GET","#",!0),(e.responseType="blob")===e.responseType}catch(e){return!1}}();function ea(e,t,r,n){var i,a=e.query;if(!Me(a)||0===a.length)return 1;a=-1===a.indexOf("=")?((i={})[a]=void 0,i):function(e){var t={};if(""===e)return t;for(var r=e.replace(/\+/g,"%20").split(/[&;]/),n=0,i=r.length;n<i;++n){var a=r[n].split("="),o=decodeURIComponent(a[0]),s=Me(s=a[1])?decodeURIComponent(s):"",a=t[o];"string"==typeof a?t[o]=[a,s]:Array.isArray(a)?a.push(s):t[o]=s}return t}(a),t._queryParameters=r?ia(a,t._queryParameters,n):a,e.query=void 0}function ta(e,t){var r=t._queryParameters,t=Object.keys(r);1!==t.length||Me(r[t[0]])?e.query=function(e){var t,r="";for(t in e)if(e.hasOwnProperty(t)){var n=e[t],i=encodeURIComponent(t)+"=";if(Array.isArray(n))for(var a=0,o=n.length;a<o;++a)r+=i+encodeURIComponent(n[a])+"&";else r+=i+encodeURIComponent(n)+"&"}return r=r.slice(0,-1)}(r):e.query=t[0]}function ra(e,t){return Me(e)?Me(e.clone)?e.clone():oi(e):t}function na(e){e.state=bi.UNISSUED,e.deferred=void 0}function ia(e,t,r){if(!r)return si(e,t);var n,i,a,o=oi(e,!0);for(n in t)t.hasOwnProperty(n)&&(i=o[n],a=t[n],Me(i)?(Array.isArray(i)||(i=o[n]=[i]),o[n]=i.concat(a)):o[n]=Array.isArray(a)?a.slice():a);return o}var aa,oa=0;function sa(e){var t,r;"db"===(e="string"==typeof(e=Ne(e,Ne.EMPTY_OBJECT))?{url:e}:e).url.substring(0,2)&&(e.url="http"+e.url.substring(2,e.url.length)),0<e.url.indexOf("sde?")&&e.url.indexOf("_sde")<0&&e.isSde&&(e.url+="_sde"),0<vi.port_list.length&&/\/(sde|sde_pack|dcs|geoserver|filedownload)\?/.test(e.url)&&(null!=(t=/^([^:\/]+)(:\/\/)([^\/]+)(\/.+)$/i.exec(e.url))&&5==t.length&&(/:/.test(t[3])&&(r=t[3].indexOf(":"),t[3]=t[3].substring(0,r)),t[3]=t[3]+":"+vi.port_list[oa],oa=(oa+1)%vi.port_list.length,e.url=t[1]+t[2]+t[3]+t[4])),this._version=e.version,this._url=void 0,this._templateValues=ra(e.templateValues,{}),this._queryParameters=ra(e.queryParameters,{}),this.headers=ra(e.headers,{}),this.request=Ne(e.request,new Di),this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=Ne(e.retryAttempts,3),this._retryCount=0;e=new ui(e.url);ea(e,this,!0,!0),e.fragment=void 0,this._url=e.toString(),this.preDownload=void 0}function ua(r){var n=r.resource,i=r.flipY,a=r.preferImageBitmap,o=n.request;o.url=n.url,o.requestFunction=function(){Me(r.preDownload)&&n.preDownload();var e=!1;n.isDataUri||n.isBlobUri||(e=n.isCrossOriginUrl);var t=Q.defer();return sa._Implementations.createImage(o,e,t,i,a),t.promise};var e=Wi.request(o);if(Me(e))return e.otherwise(function(t){return o.state!==bi.FAILED?Q.reject(t):n.retryOnError(t).then(function(e){return e?(o.state=bi.UNISSUED,o.deferred=void 0,ua({resource:n,flipY:i,preferImageBitmap:a})):Q.reject(t)})})}sa.createIfNeeded=function(e,t,r){return e instanceof sa?e.getDerivedResource({request:e.request}):"string"!=typeof e?e:new sa({url:e,version:t,isSde:!Me(r)||r})},sa.supportsImageBitmapOptions=function(){if(Me(aa))return aa;if("function"!=typeof createImageBitmap)return aa=Q.resolve(!1);return aa=sa.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWP4////fwAJ+wP9CNHoHgAAAABJRU5ErkJggg=="}).then(function(e){return createImageBitmap(e,{imageOrientation:"flipY",premultiplyAlpha:"none"})}).then(function(e){return!0}).otherwise(function(){return!1})},Object.defineProperties(sa,{isBlobSupported:{get:function(){return $i}}}),Object.defineProperties(sa.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){var e=this.getUrlComponent(!0,!0);return null!=this._version&&(e+="&version="+this._version),e},set:function(e){e=new ui(e);ea(e,this,!1),e.fragment=void 0,this._url=e.toString()}},extension:{get:function(){return e=this._url,(t=new ui(e)).normalize(),e=t.path,e=-1===(t=(e=-1!==(t=e.lastIndexOf("/"))?e.substr(t+1):e).lastIndexOf("."))?"":e.substr(t+1);var e,t}},isDataUri:{get:function(){return Ti(this._url)}},isBlobUri:{get:function(){return yi(this._url)}},isCrossOriginUrl:{get:function(){return function(e){(Ei=!Me(Ei)?document.createElement("a"):Ei).href=window.location.href;var t=Ei.host,r=Ei.protocol;return Ei.href=e,Ei.href=Ei.href,r!==Ei.protocol||t!==Ei.host}(this._url)}},hasHeaders:{get:function(){return 0<Object.keys(this.headers).length}}}),sa.prototype.toString=function(){return this.getUrlComponent(!0,!0)},sa.prototype.getUrlComponent=function(e,t){if(this.isDataUri)return this._url;var r=new ui(this._url);e&&ta(r,this);var r=r.toString().replace(/%7B/g,"{").replace(/%7D/g,"}"),n=this._templateValues,r=r.replace(/{(.*?)}/g,function(e,t){t=n[t];return Me(t)?encodeURIComponent(t):e});return r=t&&Me(this.proxy)?this.proxy.getURL(r):r},sa.prototype.setQueryParameters=function(e,t){this._queryParameters=t?ia(this._queryParameters,e,!1):ia(e,this._queryParameters,!1)},sa.prototype.appendQueryParameters=function(e){this._queryParameters=ia(e,this._queryParameters,!0)},sa.prototype.setTemplateValues=function(e,t){this._templateValues=t?si(this._templateValues,e):si(e,this._templateValues)},sa.prototype.getDerivedResource=function(e){var t,r=this.clone();return r._retryCount=0,Me(e.url)&&(ea(t=new ui(e.url),r,!0,Ne(e.preserveQueryParameters,!1)),t.fragment=void 0,r._url=t.resolve(new ui(pi(this._url))).toString(),r._url.indexOf("base64")<0&&0<r._url.indexOf("/sde?/")&&r._url.indexOf("_sde")<0&&(r._url+="_sde")),Me(e.queryParameters)&&(r._queryParameters=si(e.queryParameters,r._queryParameters)),Me(e.templateValues)&&(r._templateValues=si(e.templateValues,r.templateValues)),Me(e.headers)&&(r.headers=si(e.headers,r.headers)),Me(e.proxy)&&(r.proxy=e.proxy),Me(e.request)&&(r.request=e.request),Me(e.retryCallback)&&(r.retryCallback=e.retryCallback),Me(e.retryAttempts)&&(r.retryAttempts=e.retryAttempts),r},sa.prototype.retryOnError=function(e){var t=this.retryCallback;if("function"!=typeof t||this._retryCount>=this.retryAttempts)return Q(!1);var r=this;return Q(t(this,e)).then(function(e){return++r._retryCount,e})},sa.prototype.clone=function(e){return(e=!Me(e)?new sa({url:this._url}):e)._url=this._url,e._queryParameters=oi(this._queryParameters),e._templateValues=oi(this._templateValues),e.headers=oi(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e},sa.prototype.getBaseUri=function(e){return t=this.getUrlComponent(e),r=e,n="",-1!==(e=t.lastIndexOf("/"))&&(n=t.substring(0,e+1)),r&&(Me((t=new ui(t)).query)&&(n+="?"+t.query),Me(t.fragment)&&(n+="#"+t.fragment)),n;var t,r,n},sa.prototype.appendForwardSlash=function(){var e;this._url=(0!==(e=this._url).length&&"/"===e[e.length-1]||(e+="/"),e)},sa.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},sa.fetchArrayBuffer=function(e){return new sa(e).fetchArrayBuffer()},sa.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},sa.fetchBlob=function(e){return new sa(e).fetchBlob()},sa.prototype.fetchImage=function(e){e=Ne(e,Ne.EMPTY_OBJECT);var t=Ne(e.preferImageBitmap,!1),r=Ne(e.preferBlob,!1),n=Ne(e.flipY,!1);if(na(this.request),!$i||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!r)return ua({resource:this,flipY:n,preferImageBitmap:t});var i,a,o,s=this.fetchBlob();return Me(s)?sa.supportsImageBitmapOptions().then(function(e){return i=e&&t,s}).then(function(e){if(Me(e)){if(o=e,i)return sa.createImageBitmapFromBlob(e,{flipY:n,premultiplyAlpha:!1});e=window.URL.createObjectURL(e);return ua({resource:a=new sa({url:e}),flipY:n,preferImageBitmap:!1})}}).then(function(e){if(Me(e))return e.blob=o,i||window.URL.revokeObjectURL(a.url),e}).otherwise(function(e){return Me(a)&&window.URL.revokeObjectURL(a.url),e.blob=o,Q.reject(e)}):void 0},sa.fetchImage=function(e){return new sa(e).fetchImage({flipY:e.flipY,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})},sa.prototype.fetchText=function(){return this.fetch({responseType:"text"})},sa.fetchText=function(e){return new sa(e).fetchText()},sa.prototype.fetchJson=function(){var e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(Me(e))return e.then(function(e){if(Me(e))return JSON.parse(e)})},sa.fetchJson=function(e){return new sa(e).fetchJson()},sa.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},sa.fetchXML=function(e){return new sa(e).fetchXML()},sa.prototype.fetchJsonp=function(e){var t;for(e=Ne(e,"callback"),na(this.request);t="loadJsonp"+Math.random().toString().substring(2,8),Me(window[t]););return function r(n,i,a){var e={};e[i]=a;n.setQueryParameters(e);var o=n.request;o.url=n.url;o.requestFunction=function(){Me(n.preDownload)&&n.preDownload();var t=Q.defer();return window[a]=function(e){t.resolve(e);try{delete window[a]}catch(e){window[a]=void 0}},sa._Implementations.loadAndExecuteScript(n.url,a,t),t.promise};e=Wi.request(o);if(!Me(e))return;return e.otherwise(function(t){return o.state!==bi.FAILED?Q.reject(t):n.retryOnError(t).then(function(e){return e?(o.state=bi.UNISSUED,o.deferred=void 0,r(n,i,a)):Q.reject(t)})})}(this,e,t)},sa.fetchJsonp=function(e){return new sa(e).fetchJsonp(e.callbackParameterName)},sa.prototype._makeRequest=function(s){var u=this;na(u.request);var c=u.request;c.url=u.url,c.requestFunction=function(){Me(u.preDownload)&&u.preDownload();var e=s.responseType,t=si(s.headers,u.headers),r=s.overrideMimeType,n=s.method,i=s.data,a=Q.defer(),o=sa._Implementations.loadWithXhr(u.url,e,n,i,t,a,r);return Me(o)&&Me(o.abort)&&(c.cancelFunction=function(){o.abort()}),a.promise};var e=Wi.request(c);if(Me(e))return e.then(function(e){return c.cancelFunction=void 0,e}).otherwise(function(t){return c.cancelFunction=void 0,c.state!==bi.FAILED?Q.reject(t):u.retryOnError(t).then(function(e){return e?(c.state=bi.UNISSUED,c.deferred=void 0,u.fetch(s)):Q.reject(t)})})};var ca=/^data:(.*?)(;base64)?,(.*)$/;function la(e,t){t=decodeURIComponent(t);return e?atob(t):t}function fa(e,t){for(var r=la(e,t),t=new ArrayBuffer(r.length),n=new Uint8Array(t),i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return t}function ha(e,t){switch(t){case"text":return e.toString("utf8");case"json":return JSON.parse(e.toString("utf8"));default:return new Uint8Array(e).buffer}}sa.prototype.fetch=function(e){return(e=ra(e,{})).method="GET",this._makeRequest(e)},sa.fetch=function(e){return new sa(e).fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},sa.prototype.delete=function(e){return(e=ra(e,{})).method="DELETE",this._makeRequest(e)},sa.delete=function(e){return new sa(e).delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})},sa.prototype.head=function(e){return(e=ra(e,{})).method="HEAD",this._makeRequest(e)},sa.head=function(e){return new sa(e).head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},sa.prototype.options=function(e){return(e=ra(e,{})).method="OPTIONS",this._makeRequest(e)},sa.options=function(e){return new sa(e).options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},sa.prototype.post=function(e,t){return(t=ra(t,{})).method="POST",t.data=e,this._makeRequest(t)},sa.post=function(e){return new sa(e).post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},sa.prototype.put=function(e,t){return(t=ra(t,{})).method="PUT",t.data=e,this._makeRequest(t)},sa.put=function(e){return new sa(e).put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},sa.prototype.patch=function(e,t){return(t=ra(t,{})).method="PATCH",t.data=e,this._makeRequest(t)},sa.patch=function(e){return new sa(e).patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},(sa._Implementations={}).createImage=function(a,o,s,u,c){var l=a.url;sa.supportsImageBitmapOptions().then(function(e){if(!e||!c)return n=l,e=o,t=s,(r=new Image).onload=function(){t.resolve(r)},r.onerror=function(e){t.reject(e)},e&&(Si.contains(n)?r.crossOrigin="use-credentials":r.crossOrigin=""),void(r.src=n);var t,r,n=Q.defer(),i=sa._Implementations.loadWithXhr(l,"blob","GET",void 0,void 0,n,void 0,void 0,void 0);return Me(i)&&Me(i.abort)&&(a.cancelFunction=function(){i.abort()}),n.promise.then(function(e){return Me(e)?sa.createImageBitmapFromBlob(e,{flipY:u,premultiplyAlpha:!1}):void s.reject(new F("Successfully retrieved "+l+" but it contained no content."))}).then(s.resolve)}).otherwise(s.reject)},sa.createImageBitmapFromBlob=function(e,t){return createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"none",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none"})};var ma="undefined"==typeof XMLHttpRequest;function da(e,t,r,n,i){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=r,this.yPoleOffset=n,this.ut1MinusUtc=i}function pa(e){var t,r;e=Ne(e,Ne.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=Ne(e.addNewLeapSeconds,!0),Me(e.data)?_a(this,e.data):Me(e.url)?(t=sa.createIfNeeded(e.url),(r=this)._downloadPromise=t.fetchJson().then(function(e){_a(r,e)}).otherwise(function(){r._dataError="An error occurred while retrieving the EOP data from the URL "+t.url+"."})):_a(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function Ea(e,t){return ii.compare(e.julianDate,t)}function _a(e,t){if(Me(t.columnNames))if(Me(t.samples)){var r=t.columnNames.indexOf("modifiedJulianDateUtc"),n=t.columnNames.indexOf("xPoleWanderRadians"),i=t.columnNames.indexOf("yPoleWanderRadians"),a=t.columnNames.indexOf("ut1MinusUtcSeconds"),o=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),s=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),u=t.columnNames.indexOf("taiMinusUtcSeconds");if(r<0||n<0||i<0||a<0||o<0||s<0||u<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var c,l=e._samples=t.samples,f=e._dates=[];e._dateColumn=r,e._xPoleWanderRadiansColumn=n,e._yPoleWanderRadiansColumn=i,e._ut1MinusUtcSecondsColumn=a,e._xCelestialPoleOffsetRadiansColumn=o,e._yCelestialPoleOffsetRadiansColumn=s,e._taiMinusUtcSecondsColumn=u,e._columnCount=t.columnNames.length,e._lastIndex=void 0;for(var h=e._addNewLeapSeconds,m=0,d=l.length;m<d;m+=e._columnCount){var p,E=l[m+r],_=l[m+u],y=new ii(E+qn.MODIFIED_JULIAN_DATE_DIFFERENCE,_,Gn.TAI);f.push(y),h&&(_===c||!Me(c)||(E=Pn(p=ii.leapSeconds,y,Ea))<0&&(y=new Bn(y,_),p.splice(~E,0,y)),c=_)}}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function ya(e,t,r,n,i){n*=r;i.xPoleWander=t[n+e._xPoleWanderRadiansColumn],i.yPoleWander=t[n+e._yPoleWanderRadiansColumn],i.xPoleOffset=t[n+e._xCelestialPoleOffsetRadiansColumn],i.yPoleOffset=t[n+e._yCelestialPoleOffsetRadiansColumn],i.ut1MinusUtc=t[n+e._ut1MinusUtcSecondsColumn]}function ga(e,t,r){return t+e*(r-t)}function Ta(e,t,r,n,i,a,o){var s=e._columnCount;if(a>t.length-1)return o.xPoleWander=0,o.yPoleWander=0,o.xPoleOffset=0,o.yPoleOffset=0,o.ut1MinusUtc=0,o;var u=t[i],c=t[a];if(u.equals(c)||n.equals(u))return ya(e,r,i,s,o),o;if(n.equals(c))return ya(e,r,a,s,o),o;var l=ii.secondsDifference(n,u)/ii.secondsDifference(c,u),f=i*s,t=a*s,u=r[f+e._ut1MinusUtcSecondsColumn],i=r[t+e._ut1MinusUtcSecondsColumn],a=i-u;return!(.5<a||a<-.5)||(s=r[f+e._taiMinusUtcSecondsColumn])!==(a=r[t+e._taiMinusUtcSecondsColumn])&&(c.equals(n)?u=i:i-=a-s),o.xPoleWander=ga(l,r[f+e._xPoleWanderRadiansColumn],r[t+e._xPoleWanderRadiansColumn]),o.yPoleWander=ga(l,r[f+e._yPoleWanderRadiansColumn],r[t+e._yPoleWanderRadiansColumn]),o.xPoleOffset=ga(l,r[f+e._xCelestialPoleOffsetRadiansColumn],r[t+e._xCelestialPoleOffsetRadiansColumn]),o.yPoleOffset=ga(l,r[f+e._yCelestialPoleOffsetRadiansColumn],r[t+e._yCelestialPoleOffsetRadiansColumn]),o.ut1MinusUtc=ga(l,u,i),o}function Aa(e,t,r){this.x=e,this.y=t,this.s=r}sa._Implementations.loadWithXhr=function(e,i,a,t,r,o,n){var s=ca.exec(e);if(null===s){if(ma)return u=e,c=i,l=a,f=r,h=o,m=require("url").parse(u),u="https:"===m.protocol?require("https"):require("http"),d=require("zlib"),f={protocol:m.protocol,hostname:m.hostname,port:m.port,path:m.path,query:m.query,method:l,headers:f},void u.request(f).on("response",function(t){var r;t.statusCode<200||300<=t.statusCode?h.reject(new Qi(t.statusCode,t,t.headers)):(r=[],t.on("data",function(e){r.push(e)}),t.on("end",function(){var e=Buffer.concat(r);"gzip"===t.headers["content-encoding"]?d.gunzip(e,function(e,t){e?h.reject(new F("Error decompressing response.")):h.resolve(ha(t,c))}):h.resolve(ha(e,c))}))}).on("error",function(e){h.reject(new Qi)}).end();var u,c,l,f,h,m,d,p=new XMLHttpRequest;if(Si.contains(e)&&(p.withCredentials=!0),p.open(a,e,!0),Me(n)&&Me(p.overrideMimeType)&&p.overrideMimeType(n),Me(r))for(var E in r)r.hasOwnProperty(E)&&p.setRequestHeader(E,r[E]);Me(i)&&(p.responseType=i);var _=!1;return"string"==typeof e&&(_=0===e.indexOf("file://")||"undefined"!=typeof window&&"file://"===window.location.origin),p.onload=function(){if(!(p.status<200||300<=p.status)||_&&0===p.status){var e=p.response,t=p.responseType;if("HEAD"===a||"OPTIONS"===a){var r=p.getAllResponseHeaders().trim().split(/[\r\n]+/),n={};return r.forEach(function(e){var t=e.split(": "),e=t.shift();n[e]=t.join(": ")}),void o.resolve(n)}if(204===p.status)o.resolve();else if(!Me(e)||Me(i)&&t!==i)if("json"===i&&"string"==typeof e)try{o.resolve(JSON.parse(e))}catch(e){o.reject(e)}else(""===t||"document"===t)&&Me(p.responseXML)&&p.responseXML.hasChildNodes()?o.resolve(p.responseXML):""!==t&&"text"!==t||!Me(p.responseText)?o.reject(new F("Invalid XMLHttpRequest response type.")):o.resolve(p.responseText);else o.resolve(e)}else o.reject(new Qi(p.status,p.response,p.getAllResponseHeaders()))},p.onerror=function(e){o.reject(new Qi)},p.send(t),p}o.resolve(function(e,t){t=Ne(t,"");var r=e[1],n=!!e[2],i=e[3];switch(t){case"":case"text":return la(n,i);case"arraybuffer":return fa(n,i);case"blob":var a=fa(n,i);return new Blob([a],{type:r});case"document":return(new DOMParser).parseFromString(la(n,i),r);case"json":return JSON.parse(la(n,i))}}(s,i))},sa._Implementations.loadAndExecuteScript=function(e,t,r){return function(e){var t=Q.defer(),r=document.createElement("script");r.async=!0,r.src=e;var n=document.getElementsByTagName("head")[0];return r.onload=function(){r.onload=void 0,n.removeChild(r),t.resolve()},r.onerror=function(e){t.reject(e)},n.appendChild(r),t.promise}(e).otherwise(r.reject)},(sa._DefaultImplementations={}).createImage=sa._Implementations.createImage,sa._DefaultImplementations.loadWithXhr=sa._Implementations.loadWithXhr,sa._DefaultImplementations.loadAndExecuteScript=sa._Implementations.loadAndExecuteScript,sa.DEFAULT=Object.freeze(new sa({url:"undefined"==typeof document?"":document.location.href.split("?")[0]})),pa.NONE=Object.freeze({getPromiseToLoad:function(){return Q.resolve()},compute:function(e,t){return Me(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new da(0,0,0,0,0),t}}),pa.prototype.getPromiseToLoad=function(){return Q(this._downloadPromise)},pa.prototype.compute=function(e,t){if(Me(this._samples)){if(Me(t)||(t=new da(0,0,0,0,0)),0===this._samples.length)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;var r=this._dates,n=this._lastIndex,i=0,a=0;if(Me(n)){var o=r[n],s=r[n+1],u=ii.lessThanOrEquals(o,e),c=!Me(s),o=c||ii.greaterThanOrEquals(s,e);if(u&&o)return i=n,!c&&s.equals(e)&&++i,Ta(this,r,this._samples,e,i,a=i+1,t),t}s=Pn(r,e,ii.compare,this._dateColumn);return 0<=s?(s<r.length-1&&r[s+1].equals(e)&&++s,a=i=s):(i=(a=~s)-1)<0&&(i=0),this._lastIndex=i,Ta(this,r,this._samples,e,i,a,t),t}};var Ra,Sa,Oa,xa=/((?:.*\/)|^)Cesium\.js(?:\?|\#|$)/;function Ia(e){return"undefined"==typeof document?e:((Ra=!Me(Ra)?document.createElement("a"):Ra).href=e,Ra.href=Ra.href,Ra.href)}function wa(){if(Me(Sa))return Sa;var e=void 0!==vi.baseUrlString?vi.baseUrlString:"object"==typeof define&&Me(define.amd)&&!define.amd.toUrlUndefined&&Me(require.toUrl)?pi("..",Ca("lib_ax/utility/lib_core/resource/buildModuleUrl.js")):function(){for(var e=document.getElementsByTagName("script"),t=0,r=e.length;t<r;++t){var n=e[t].getAttribute("src"),n=xa.exec(n);if(null!==n)return n[1]}}();return(Sa=new sa({url:Ia(e)})).appendForwardSlash(),Sa}function Ma(e){return Ia(require.toUrl("../"+e))}function Na(e){return wa().getDerivedResource({url:e}).url}function Ca(e){return(Oa=!Me(Oa)?"object"==typeof define&&Me(define.amd)&&!define.amd.toUrlUndefined&&Me(require.toUrl)?Ma:Na:Oa)(e)}function va(e){e=Ne(e,Ne.EMPTY_OBJECT),this._xysFileUrlTemplate=sa.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=Ne(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=Ne(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new ii(this._sampleZeroJulianEphemerisDate,0,Gn.TAI),this._stepSizeDays=Ne(e.stepSizeDays,1),this._samplesPerXysFile=Ne(e.samplesPerXysFile,1e3),this._totalSamples=Ne(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var t=this._interpolationOrder,r=this._denominators=new Array(t+1),n=this._xTable=new Array(t+1),i=Math.pow(this._stepSizeDays,t),a=0;a<=t;++a){r[a]=i,n[a]=a*this._stepSizeDays;for(var o=0;o<=t;++o)o!==a&&(r[a]*=a-o);r[a]=1/r[a]}this._work=new Array(t+1),this._coef=new Array(t+1)}Ca._cesiumScriptRegex=xa,Ca._buildModuleUrlFromBaseUrl=Na,Ca._clearBaseResource=function(){Sa=void 0},Ca.setBaseUrl=function(e){Sa=sa.DEFAULT.getDerivedResource({url:e})},Ca.getCesiumBaseUrl=wa;var ba=new ii(0,0,Gn.TAI);function Ua(e,t,r){var n=ba;return n.dayNumber=t,n.secondsOfDay=r,ii.daysDifference(n,e._sampleZeroDateTT)}function Da(o,s){if(o._chunkDownloadsInProgress[s])return o._chunkDownloadsInProgress[s];var u=Q.defer();o._chunkDownloadsInProgress[s]=u;var e=o._xysFileUrlTemplate;return Q((Me(e)?e.getDerivedResource({templateValues:{0:s}}):new sa({url:Ca("Assets/IAU2006_XYS/IAU2006_XYS_"+s+".json")})).fetchJson(),function(e){o._chunkDownloadsInProgress[s]=!1;for(var t=o._samples,r=e.samples,n=s*o._samplesPerXysFile*3,i=0,a=r.length;i<a;++i)t[n+i]=r[i];u.resolve()}),u.promise}va.prototype.preload=function(e,t,r,n){t=Ua(this,e,t),n=Ua(this,r,n),t=t/this._stepSizeDays-this._interpolationOrder/2|0,n=n/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;n>=this._totalSamples&&(n=this._totalSamples-1);for(var t=(t=t<0?0:t)/this._samplesPerXysFile|0,i=n/this._samplesPerXysFile|0,a=[],o=t;o<=i;++o)a.push(Da(this,o));return Q.all(a)},va.prototype.computeXysRadians=function(e,t,r){var n=Ua(this,e,t);if(!(n<0)){e=n/this._stepSizeDays|0;if(!(e>=this._totalSamples)){var i=this._interpolationOrder,a=e-(i/2|0),t=(a=a<0?0:a)+i;t>=this._totalSamples&&(a=(t=this._totalSamples-1)-i)<0&&(a=0);var e=!1,o=this._samples;if(Me(o[3*a])||(Da(this,a/this._samplesPerXysFile|0),e=!0),Me(o[3*t])||(Da(this,t/this._samplesPerXysFile|0),e=!0),!e){Me(r)?(r.x=0,r.y=0,r.s=0):r=new Aa(0,0,0);for(var s,u=n-a*this._stepSizeDays,c=this._work,l=this._denominators,f=this._coef,h=this._xTable,m=0;m<=i;++m)c[m]=u-h[m];for(m=0;m<=i;++m){for(f[m]=1,s=0;s<=i;++s)s!==m&&(f[m]*=c[s]);f[m]*=l[m];var d=3*(a+m);r.x+=f[m]*o[d++],r.y+=f[m]*o[d++],r.s+=f[m]*o[d]}return r}}}};var Pa={},Fa={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},za={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},La={},Ba={east:new ve,north:new ve,up:new ve,west:new ve,south:new ve,down:new ve},qa=new ve,Ga=new ve,Va=new ve;Pa.localFrameToFixedFrameGenerator=function(i,a){var e,o=Fa[i][a],t=i+a;return Me(La[t])?e=La[t]:(e=function(e,t,r){var n;return Me(r)||(r=new De),ve.equalsEpsilon(e,ve.ZERO,Ce.EPSILON14)?(ve.unpack(za[i],0,qa),ve.unpack(za[a],0,Ga),ve.unpack(za[o],0,Va)):Ce.equalsEpsilon(e.x,0,Ce.EPSILON14)&&Ce.equalsEpsilon(e.y,0,Ce.EPSILON14)?(n=Ce.sign(e.z),ve.unpack(za[i],0,qa),"east"!==i&&"west"!==i&&ve.multiplyByScalar(qa,n,qa),ve.unpack(za[a],0,Ga),"east"!==a&&"west"!==a&&ve.multiplyByScalar(Ga,n,Ga),ve.unpack(za[o],0,Va),"east"!==o&&"west"!==o&&ve.multiplyByScalar(Va,n,Va)):((t=Ne(t,be.WGS84)).geodeticSurfaceNormal(e,Ba.up),n=Ba.up,(t=Ba.east).x=-e.y,t.y=e.x,t.z=0,ve.normalize(t,Ba.east),ve.cross(n,t,Ba.north),ve.multiplyByScalar(Ba.up,-1,Ba.down),ve.multiplyByScalar(Ba.east,-1,Ba.west),ve.multiplyByScalar(Ba.north,-1,Ba.south),qa=Ba[i],Ga=Ba[a],Va=Ba[o]),r[0]=qa.x,r[1]=qa.y,r[2]=qa.z,r[3]=0,r[4]=Ga.x,r[5]=Ga.y,r[6]=Ga.z,r[7]=0,r[8]=Va.x,r[9]=Va.y,r[10]=Va.z,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,r},La[t]=e),e},Pa.eastNorthUpToFixedFrame=Pa.localFrameToFixedFrameGenerator("east","north"),Pa.northEastDownToFixedFrame=Pa.localFrameToFixedFrameGenerator("north","east"),Pa.northUpEastToFixedFrame=Pa.localFrameToFixedFrameGenerator("north","up"),Pa.northWestUpToFixedFrame=Pa.localFrameToFixedFrameGenerator("north","west");var ka=new rn,ja=new ve(1,1,1),Ha=new De;Pa.headingPitchRollToFixedFrame=function(e,t,r,n,i){n=Ne(n,Pa.eastNorthUpToFixedFrame);t=rn.fromHeadingPitchRoll(t,ka),t=De.fromTranslationQuaternionRotationScale(ve.ZERO,t,ja,Ha);return i=n(e,r,i),De.multiply(i,t,i)};var Wa=new De,Xa=new me;Pa.headingPitchRollQuaternion=function(e,t,r,n,i){n=Pa.headingPitchRollToFixedFrame(e,t,r,n,Wa),n=De.getMatrix3(n,Xa);return rn.fromRotationMatrix(n,i)};var Ya=new ve(1,1,1),Ka=new ve,Za=new De,Ja=new De,Qa=new me,$a=new rn;Pa.fixedFrameToHeadingPitchRoll=function(e,t,r,n){t=Ne(t,be.WGS84),r=Ne(r,Pa.eastNorthUpToFixedFrame),Me(n)||(n=new Dn);var i=De.getTranslation(e,Ka);if(ve.equals(i,ve.ZERO))return n.heading=0,n.pitch=0,n.roll=0,n;t=De.inverseTransformation(r(i,t,Za),Za),e=De.setScale(e,Ya,Ja),e=De.setTranslation(e,ve.ZERO,e),t=De.multiply(t,e,t),t=rn.fromRotationMatrix(De.getMatrix3(t,Qa),$a),t=rn.normalize(t,t);return Dn.fromQuaternion(t,n)};var eo=Ce.TWO_PI/86400,to=new ii;Pa.computeTemeToPseudoFixedMatrix=function(e,t){var r=(to=ii.addSeconds(e,-ii.computeTaiMinusUtc(e),to)).dayNumber,n=to.secondsOfDay,e=r-2451545,e=43200<=n?(.5+e)/qn.DAYS_PER_JULIAN_CENTURY:(e-.5)/qn.DAYS_PER_JULIAN_CENTURY,r=(24110.54841+e*(8640184.812866+e*(.093104+-62e-7*e)))*eo%Ce.TWO_PI+(72921158553e-15+11772758384668e-32*(r-2451545.5))*((n+.5*qn.SECONDS_PER_DAY)%qn.SECONDS_PER_DAY),n=Math.cos(r),r=Math.sin(r);return Me(t)?(t[0]=n,t[1]=-r,t[2]=0,t[3]=r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new me(n,r,0,-r,n,0,0,0,1)},Pa.iau2006XysData=new va,Pa.earthOrientationParameters=pa.NONE;var ro=32.184;Pa.preloadIcrfFixed=function(e){var t=e.start.dayNumber,r=e.start.secondsOfDay+ro,n=e.stop.dayNumber,e=e.stop.secondsOfDay+ro,n=Pa.iau2006XysData.preload(t,r,n,e),e=Pa.earthOrientationParameters.getPromiseToLoad();return Q.all([n,e])},Pa.computeIcrfToFixedMatrix=function(e,t){Me(t)||(t=new me);e=Pa.computeFixedToIcrfMatrix(e,t);if(Me(e))return me.transpose(e,t)};var no=new Aa(0,0,0),io=new da(0,0,0,0,0),ao=new me,oo=new me;Pa.computeFixedToIcrfMatrix=function(e,t){Me(t)||(t=new me);var r=Pa.earthOrientationParameters.compute(e,io);if(Me(r)){var n=e.dayNumber,i=e.secondsOfDay+ro,a=Pa.iau2006XysData.computeXysRadians(n,i,no);if(Me(a)){var o=a.x+r.xPoleOffset,s=a.y+r.yPoleOffset,u=1/(1+Math.sqrt(1-o*o-s*s)),c=ao;c[0]=1-u*o*o,c[3]=-u*o*s,c[6]=o,c[1]=-u*o*s,c[4]=1-u*s*s,c[7]=s,c[2]=-o,c[5]=-s,c[8]=1-u*(o*o+s*s);o=me.fromRotationZ(-a.s,oo),s=me.multiply(c,o,ao),a=e.dayNumber,c=(e.secondsOfDay-ii.computeTaiMinusUtc(e)+r.ut1MinusUtc)/qn.SECONDS_PER_DAY,o=(o=.779057273264+c+.00273781191135448*(a-2451545+c))%1*Ce.TWO_PI,e=me.fromRotationZ(o,oo),a=me.multiply(s,e,ao),c=Math.cos(r.xPoleWander),o=Math.cos(r.yPoleWander),s=Math.sin(r.xPoleWander),e=Math.sin(r.yPoleWander),r=n-2451545+i/qn.SECONDS_PER_DAY,n=-47e-6*(r/=36525)*Ce.RADIANS_PER_DEGREE/3600,i=Math.cos(n),r=Math.sin(n),n=oo;return n[0]=c*i,n[1]=c*r,n[2]=s,n[3]=-o*r+e*s*i,n[4]=o*i+e*s*r,n[5]=-e*c,n[6]=-e*r-o*s*i,n[7]=e*i-o*s*r,n[8]=o*c,me.multiply(a,n,t)}}};var so=new Ae;Pa.pointToWindowCoordinates=function(e,t,r,n){return(n=Pa.pointToGLWindowCoordinates(e,t,r,n)).y=2*t[5]-n.y,n},Pa.pointToGLWindowCoordinates=function(e,t,r,n){Me(n)||(n=new Ut);var i=so;return De.multiplyByVector(e,Ae.fromElements(r.x,r.y,r.z,1,i),i),Ae.multiplyByScalar(i,1/i.w,i),De.multiplyByVector(t,i,i),Ut.fromCartesian4(i,n)};var uo=new ve,co=new ve,lo=new ve;Pa.rotationMatrixFromPositionVelocity=function(e,t,r,n){r=Ne(r,be.WGS84).geodeticSurfaceNormal(e,uo),e=ve.cross(t,r,co);ve.equalsEpsilon(e,ve.ZERO,Ce.EPSILON6)&&(e=ve.clone(ve.UNIT_X,e));r=ve.cross(e,t,lo);return ve.normalize(r,r),ve.cross(t,r,e),ve.negate(e,e),ve.normalize(e,e),(n=!Me(n)?new me:n)[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=e.x,n[4]=e.y,n[5]=e.z,n[6]=r.x,n[7]=r.y,n[8]=r.z,n};var fo=new De(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),ho=new T,mo=new ve,po=new ve,Eo=new me,_o=new De,yo=new De;Pa.basisTo2D=function(e,t,r){var n=De.getTranslation(t,po),i=e.ellipsoid,a=i.cartesianToCartographic(n,ho),a=e.project(a,mo);ve.fromElements(a.z,a.x,a.y,a);i=Pa.eastNorthUpToFixedFrame(n,i,_o),i=De.inverseTransformation(i,yo),t=De.getMatrix3(t,Eo),t=De.multiplyByMatrix3(i,t,r);return De.multiply(fo,t,r),De.setTranslation(r,a,r),r},Pa.wgs84To2DModelMatrix=function(e,t,r){var n=e.ellipsoid,i=Pa.eastNorthUpToFixedFrame(t,n,_o),i=De.inverseTransformation(i,yo),t=n.cartesianToCartographic(t,ho),t=e.project(t,mo);ve.fromElements(t.z,t.x,t.y,t);t=De.fromTranslation(t,_o);return De.multiply(fo,i,r),De.multiply(t,r,r),r};var go=new Ae;function To(e,t){e=(t=Ne(t,be.WGS84)).scaleToGeodeticSurface(e);var r=Pa.eastNorthUpToFixedFrame(e,t);this._ellipsoid=t,this._origin=e,this._xAxis=ve.fromCartesian4(De.getColumn(r,0,go)),this._yAxis=ve.fromCartesian4(De.getColumn(r,1,go));r=ve.fromCartesian4(De.getColumn(r,2,go));this._plane=Bt.fromPointNormal(e,r)}Object.defineProperties(To.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},origin:{get:function(){return this._origin}},plane:{get:function(){return this._plane}},xAxis:{get:function(){return this._xAxis}},yAxis:{get:function(){return this._yAxis}},zAxis:{get:function(){return this._plane.normal}}});var Ao=new vt;To.fromPoints=function(e,t){return new To(vt.fromPoints(e,Ao).center,t)};var Ro=new Zt,So=new ve;To.prototype.projectPointOntoPlane=function(e,t){var r=Ro;r.origin=e,ve.normalize(e,r.direction);e=Jt.rayPlane(r,this._plane,So);if(Me(e)||(ve.negate(r.direction,r.direction),e=Jt.rayPlane(r,this._plane,So)),Me(e)){r=ve.subtract(e,this._origin,e),e=ve.dot(this._xAxis,r),r=ve.dot(this._yAxis,r);return Me(t)?(t.x=e,t.y=r,t):new Ut(e,r)}},To.prototype.projectPointsOntoPlane=function(e,t){Me(t)||(t=[]);for(var r=0,n=e.length,i=0;i<n;i++){var a=this.projectPointOntoPlane(e[i],t[r]);Me(a)&&(t[r]=a,r++)}return t.length=r,t},To.prototype.projectPointToNearestOnPlane=function(e,t){Me(t)||(t=new Ut);var r=Ro;r.origin=e,ve.clone(this._plane.normal,r.direction);e=Jt.rayPlane(r,this._plane,So);Me(e)||(ve.negate(r.direction,r.direction),e=Jt.rayPlane(r,this._plane,So));r=ve.subtract(e,this._origin,e),e=ve.dot(this._xAxis,r),r=ve.dot(this._yAxis,r);return t.x=e,t.y=r,t},To.prototype.projectPointsToNearestOnPlane=function(e,t){Me(t)||(t=[]);var r=e.length;t.length=r;for(var n=0;n<r;n++)t[n]=this.projectPointToNearestOnPlane(e[n],t[n]);return t};var Oo=new ve;function xo(e,t){this.center=ve.clone(Ne(e,ve.ZERO)),this.halfAxes=me.clone(Ne(t,me.ZERO))}To.prototype.projectPointOntoEllipsoid=function(e,t){Me(t)||(t=new ve);var r=this._ellipsoid,n=this._origin,i=this._xAxis,a=this._yAxis,o=Oo;return ve.multiplyByScalar(i,e.x,o),t=ve.add(n,o,t),ve.multiplyByScalar(a,e.y,o),ve.add(t,o,t),r.scaleToGeocentricSurface(t,t),t},To.prototype.projectPointsOntoEllipsoid=function(e,t){var r=e.length;Me(t)?t.length=r:t=new Array(r);for(var n=0;n<r;++n)t[n]=this.projectPointOntoEllipsoid(e[n],t[n]);return t},xo.packedLength=ve.packedLength+me.packedLength,xo.pack=function(e,t,r){return r=Ne(r,0),ve.pack(e.center,t,r),me.pack(e.halfAxes,t,r+ve.packedLength),t},xo.unpack=function(e,t,r){return t=Ne(t,0),Me(r)||(r=new xo),ve.unpack(e,t,r.center),me.unpack(e,t+ve.packedLength,r.halfAxes),r};var Io=new ve,wo=new ve,Mo=new ve,No=new ve,Co=new ve,vo=new ve,bo=new me,Uo={unitary:new me,diagonal:new me};xo.fromPoints=function(e,t){if(Me(t)||(t=new xo),!Me(e)||0===e.length)return t.halfAxes=me.ZERO,t.center=ve.ZERO,t;for(var r=e.length,n=ve.clone(e[0],Io),i=1;i<r;i++)ve.add(n,e[i],n);var a=1/r;ve.multiplyByScalar(n,a,n);var o,s=0,u=0,c=0,l=0,f=0,h=0;for(i=0;i<r;i++)s+=(o=ve.subtract(e[i],n,wo)).x*o.x,u+=o.x*o.y,c+=o.x*o.z,l+=o.y*o.y,f+=o.y*o.z,h+=o.z*o.z;u*=a,c*=a,l*=a,f*=a,h*=a;var m=bo;m[0]=s*=a,m[1]=u,m[2]=c,m[3]=u,m[4]=l,m[5]=f,m[6]=c,m[7]=f,m[8]=h;var m=me.computeEigenDecomposition(m,Uo),m=me.clone(m.unitary,t.halfAxes),d=me.getColumn(m,0,No),p=me.getColumn(m,1,Co),E=me.getColumn(m,2,vo),_=-Number.MAX_VALUE,y=-Number.MAX_VALUE,g=-Number.MAX_VALUE,T=Number.MAX_VALUE,A=Number.MAX_VALUE,R=Number.MAX_VALUE;for(i=0;i<r;i++)o=e[i],_=Math.max(ve.dot(d,o),_),y=Math.max(ve.dot(p,o),y),g=Math.max(ve.dot(E,o),g),T=Math.min(ve.dot(d,o),T),A=Math.min(ve.dot(p,o),A),R=Math.min(ve.dot(E,o),R);d=ve.multiplyByScalar(d,.5*(T+_),d),p=ve.multiplyByScalar(p,.5*(A+y),p),E=ve.multiplyByScalar(E,.5*(R+g),E),m=ve.add(d,p,t.center);ve.add(m,E,m);m=Mo;return m.x=_-T,m.y=y-A,m.z=g-R,ve.multiplyByScalar(m,.5,m),me.multiplyByScale(t.halfAxes,m,t.halfAxes),t};var Do=new ve,Po=new ve;function Fo(e,t,r,n,i,a,o,s,u,c,l){var f=(l=!Me(l)?new xo:l).halfAxes;me.setColumn(f,0,t,f),me.setColumn(f,1,r,f),me.setColumn(f,2,n,f),(r=Do).x=(i+a)/2,r.y=(o+s)/2,r.z=(u+c)/2;n=Po;n.x=(a-i)/2,n.y=(s-o)/2,n.z=(c-u)/2;u=l.center,r=me.multiplyByVector(f,r,r);return ve.add(e,r,u),me.multiplyByScale(f,n,f),l}var zo=new T,Lo=new ve,Bo=new T,qo=new T,Go=new T,Vo=new T,ko=new T,jo=new ve,Ho=new ve,Wo=new ve,Xo=new ve,Yo=new ve,Ko=new Ut,Zo=new Ut,Jo=new Ut,Qo=new Ut,$o=new Ut,es=new ve,ts=new ve,rs=new ve,ns=new ve,is=new Ut,as=new ve,os=new ve,ss=new ve,us=new Bt(ve.UNIT_X,0);xo.fromRectangle=function(e,t,r,n,i){if(t=Ne(t,0),r=Ne(r,0),n=Ne(n,be.WGS84),e.width<=Ce.PI){var a=Ue.center(e,zo),o=new To(n.cartographicToCartesian(a,Lo),n),s=o.plane,u=a.longitude,c=e.south<0&&0<e.north?0:a.latitude,l=T.fromRadians(u,e.north,r,Bo),f=T.fromRadians(e.west,e.north,r,qo),h=T.fromRadians(e.west,c,r,Go),m=T.fromRadians(e.west,e.south,r,Vo),d=T.fromRadians(u,e.south,r,ko),p=n.cartographicToCartesian(l,jo),E=n.cartographicToCartesian(f,Ho),_=n.cartographicToCartesian(h,Wo),y=n.cartographicToCartesian(m,Xo),g=n.cartographicToCartesian(d,Yo),a=o.projectPointToNearestOnPlane(p,Ko),c=o.projectPointToNearestOnPlane(E,Zo),u=o.projectPointToNearestOnPlane(_,Jo),l=o.projectPointToNearestOnPlane(y,Qo),h=o.projectPointToNearestOnPlane(g,$o),p=-(d=Math.min(c.x,u.x,l.x)),_=Math.max(c.y,a.y),g=Math.min(l.y,h.y);return f.height=m.height=t,E=n.cartographicToCartesian(f,Ho),y=n.cartographicToCartesian(m,Xo),u=Math.min(Bt.getPointDistance(s,E),Bt.getPointDistance(s,y)),c=r,Fo(o.origin,o.xAxis,o.yAxis,o.zAxis,d,p,g,_,u,c,i)}a=0<e.south,l=e.north<0,h=a?e.south:l?e.north:0,f=Ue.center(e,zo).longitude,m=ve.fromRadians(f,h,r,n,es);m.z=0;E=Math.abs(m.x)<Ce.EPSILON10&&Math.abs(m.y)<Ce.EPSILON10?ve.UNIT_X:ve.normalize(m,ts),y=ve.UNIT_Z,o=ve.cross(E,y,rs);s=Bt.fromPointNormal(m,E,us);f=ve.fromRadians(f+Ce.PI_OVER_TWO,h,r,n,ns);d=-(p=ve.dot(Bt.projectPointOntoPlane(s,f,is),o)),_=ve.fromRadians(0,e.north,l?t:r,n,as).z,g=ve.fromRadians(0,e.south,a?t:r,n,os).z;n=ve.fromRadians(e.east,h,r,n,ss);return Fo(m,o,y,E,d,p,g,_,u=Bt.getPointDistance(s,n),c=0,i)},xo.clone=function(e,t){if(Me(e))return Me(t)?(ve.clone(e.center,t.center),me.clone(e.halfAxes,t.halfAxes),t):new xo(e.center,e.halfAxes)},xo.intersectPlane=function(e,t){var r=e.center,n=t.normal,i=e.halfAxes,a=n.x,o=n.y,e=n.z,i=Math.abs(a*i[me.COLUMN0ROW0]+o*i[me.COLUMN0ROW1]+e*i[me.COLUMN0ROW2])+Math.abs(a*i[me.COLUMN1ROW0]+o*i[me.COLUMN1ROW1]+e*i[me.COLUMN1ROW2])+Math.abs(a*i[me.COLUMN2ROW0]+o*i[me.COLUMN2ROW1]+e*i[me.COLUMN2ROW2]),t=ve.dot(n,r)+t.distance;return t<=-i?fe.OUTSIDE:i<=t?fe.INSIDE:fe.INTERSECTING};var cs=new ve,ls=new ve,fs=new ve,hs=new ve;xo.distanceSquaredTo=function(e,t){var r=ve.subtract(t,e.center,Do),n=e.halfAxes,i=me.getColumn(n,0,cs),a=me.getColumn(n,1,ls),o=me.getColumn(n,2,fs),s=ve.magnitude(i),t=ve.magnitude(a),e=ve.magnitude(o);ve.normalize(i,i),ve.normalize(a,a),ve.normalize(o,o);n=hs;n.x=ve.dot(r,i),n.y=ve.dot(r,a),n.z=ve.dot(r,o);var u,o=0;return n.x<-s?o+=(u=n.x+s)*u:n.x>s&&(o+=(u=n.x-s)*u),n.y<-t?o+=(u=n.y+t)*u:n.y>t&&(o+=(u=n.y-t)*u),n.z<-e?o+=(u=n.z+e)*u:n.z>e&&(o+=(u=n.z-e)*u),o};var ms=new ve,ds=new ve;xo.computePlaneDistances=function(e,t,r,n){Me(n)||(n=new he);var i=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=e.center,s=e.halfAxes,u=me.getColumn(s,0,cs),c=me.getColumn(s,1,ls),l=me.getColumn(s,2,fs),f=ve.add(u,c,ms);ve.add(f,l,f),ve.add(f,o,f);e=ve.subtract(f,t,ds),s=ve.dot(r,e),i=Math.min(s,i),a=Math.max(s,a);return ve.add(o,u,f),ve.add(f,c,f),ve.subtract(f,l,f),ve.subtract(f,t,e),s=ve.dot(r,e),i=Math.min(s,i),a=Math.max(s,a),ve.add(o,u,f),ve.subtract(f,c,f),ve.add(f,l,f),ve.subtract(f,t,e),s=ve.dot(r,e),i=Math.min(s,i),a=Math.max(s,a),ve.add(o,u,f),ve.subtract(f,c,f),ve.subtract(f,l,f),ve.subtract(f,t,e),s=ve.dot(r,e),i=Math.min(s,i),a=Math.max(s,a),ve.subtract(o,u,f),ve.add(f,c,f),ve.add(f,l,f),ve.subtract(f,t,e),s=ve.dot(r,e),i=Math.min(s,i),a=Math.max(s,a),ve.subtract(o,u,f),ve.add(f,c,f),ve.subtract(f,l,f),ve.subtract(f,t,e),s=ve.dot(r,e),i=Math.min(s,i),a=Math.max(s,a),ve.subtract(o,u,f),ve.subtract(f,c,f),ve.add(f,l,f),ve.subtract(f,t,e),s=ve.dot(r,e),i=Math.min(s,i),a=Math.max(s,a),ve.subtract(o,u,f),ve.subtract(f,c,f),ve.subtract(f,l,f),ve.subtract(f,t,e),s=ve.dot(r,e),i=Math.min(s,i),a=Math.max(s,a),n.start=i,n.stop=a,n};var ps=new Xe;xo.isOccluded=function(e,t){e=Xe.fromOrientedBoundingBox(e,ps);return!t.isBoundingSphereVisible(e)},xo.prototype.intersectPlane=function(e){return xo.intersectPlane(this,e)},xo.prototype.distanceSquaredTo=function(e){return xo.distanceSquaredTo(this,e)},xo.prototype.computePlaneDistances=function(e,t,r){return xo.computePlaneDistances(this,e,t,r)},xo.prototype.isOccluded=function(e){return xo.isOccluded(this,e)},xo.equals=function(e,t){return e===t||Me(e)&&Me(t)&&ve.equals(e.center,t.center)&&me.equals(e.halfAxes,t.halfAxes)},xo.prototype.clone=function(e){return xo.clone(this,e)},xo.prototype.equals=function(e){return xo.equals(this,e)};var Es={octEncodeInRange:function(e,t,r){var n;return r.x=e.x/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),r.y=e.y/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),e.z<0&&(n=r.x,e=r.y,r.x=(1-Math.abs(e))*Ce.signNotZero(n),r.y=(1-Math.abs(n))*Ce.signNotZero(e)),r.x=Ce.toSNorm(r.x,t),r.y=Ce.toSNorm(r.y,t),r},octEncode:function(e,t){return Es.octEncodeInRange(e,255,t)}},_s=new Ut,ys=new Uint8Array(1);function gs(e){return ys[0]=e,ys[0]}Es.octEncodeToCartesian4=function(e,t){return Es.octEncodeInRange(e,65535,_s),t.x=gs(_s.x*(1/256)),t.y=gs(_s.x),t.z=gs(_s.y*(1/256)),t.w=gs(_s.y),t},Es.octDecodeInRange=function(e,t,r,n){return n.x=Ce.fromSNorm(e,r),n.y=Ce.fromSNorm(t,r),n.z=1-(Math.abs(n.x)+Math.abs(n.y)),n.z<0&&(r=n.x,n.x=(1-Math.abs(n.y))*Ce.signNotZero(r),n.y=(1-Math.abs(r))*Ce.signNotZero(n.y)),ve.normalize(n,n)},Es.octDecode=function(e,t,r){return Es.octDecodeInRange(e,t,255,r)},Es.octDecodeFromCartesian4=function(e,t){var r=e.x,n=e.y,i=e.z,e=e.w;return Es.octDecodeInRange(256*r+n,256*i+e,65535,t)},Es.octPackFloat=function(e){return 256*e.x+e.y};var Ts=new Ut;function As(e){return e>>1^-(1&e)}Es.octEncodeFloat=function(e){return Es.octEncode(e,Ts),Es.octPackFloat(Ts)},Es.octDecodeFloat=function(e,t){var r=e/256,e=Math.floor(r);return Es.octDecode(e,256*(r-e),t)},Es.octPack=function(e,t,r,n){e=Es.octEncodeFloat(e),t=Es.octEncodeFloat(t),r=Es.octEncode(r,Ts);return n.x=65536*r.x+e,n.y=65536*r.y+t,n},Es.octUnpack=function(e,t,r,n){var i=e.x/65536,a=Math.floor(i),o=65536*(i-a),i=e.y/65536,e=Math.floor(i),i=65536*(i-e);Es.octDecodeFloat(o,t),Es.octDecodeFloat(i,r),Es.octDecode(a,e,n)},Es.compressTextureCoordinates=function(e){return 4096*(4095*e.x|0)+(4095*e.y|0)},Es.decompressTextureCoordinates=function(e,t){var r=Math.floor(e/4096);return t.x=r/4095,t.y=(e-4096*r)/4095,t},Es.zigZagDeltaDecode=function(e,t,r){for(var n=e.length,i=0,a=0,o=0,s=0;s<n;++s)i+=As(e[s]),a+=As(t[s]),e[s]=i,t[s]=a,Me(r)&&(o+=As(r[s]),r[s]=o)};var Rs=Object.freeze({DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,HALF_FLOAT_OES:36193,DOUBLE:5130,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,COLOR:6144,DEPTH:6145,STENCIL:6146,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,MAX_3D_TEXTURE_SIZE:32883,UNSIGNED_INT_2_10_10_10_REV:33640,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,MAX_TEXTURE_LOD_BIAS:34045,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,VERTEX_ATTRIB_ARRAY_INTEGER:35069,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,UNSIGNED_INT_10F_11F_11F_REV:35899,RGB9_E5:35901,UNSIGNED_INT_5_9_9_9_REV:35902,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,RASTERIZER_DISCARD:35977,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,UNSIGNED_INT_24_8:34042,DEPTH24_STENCIL8:35056,UNSIGNED_NORMALIZED:35863,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,MAX_SAMPLES:36183,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,VERTEX_ARRAY_BINDING:34229,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,SIGNED_NORMALIZED:36764,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,INVALID_INDEX:4294967295,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,SAMPLER_BINDING:35097,RGB10_A2UI:36975,INT_2_10_10_10_REV:36255,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,TEXTURE_IMMUTABLE_FORMAT:37167,MAX_ELEMENT_INDEX:36203,TEXTURE_IMMUTABLE_LEVELS:33503,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047}),Ss={BYTE:Rs.BYTE,UNSIGNED_BYTE:Rs.UNSIGNED_BYTE,SHORT:Rs.SHORT,UNSIGNED_SHORT:Rs.UNSIGNED_SHORT,INT:Rs.INT,UNSIGNED_INT:Rs.UNSIGNED_INT,FLOAT:Rs.FLOAT,DOUBLE:Rs.DOUBLE,getSizeInBytes:function(e){switch(e){case Ss.BYTE:return Int8Array.BYTES_PER_ELEMENT;case Ss.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Ss.SHORT:return Int16Array.BYTES_PER_ELEMENT;case Ss.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Ss.INT:return Int32Array.BYTES_PER_ELEMENT;case Ss.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Ss.FLOAT:return Float32Array.BYTES_PER_ELEMENT;case Ss.DOUBLE:return Float64Array.BYTES_PER_ELEMENT}},fromTypedArray:function(e){return e instanceof Int8Array?Ss.BYTE:e instanceof Uint8Array?Ss.UNSIGNED_BYTE:e instanceof Int16Array?Ss.SHORT:e instanceof Uint16Array?Ss.UNSIGNED_SHORT:e instanceof Int32Array?Ss.INT:e instanceof Uint32Array?Ss.UNSIGNED_INT:e instanceof Float32Array?Ss.FLOAT:e instanceof Float64Array?Ss.DOUBLE:void 0},validate:function(e){return Me(e)&&(e===Ss.BYTE||e===Ss.UNSIGNED_BYTE||e===Ss.SHORT||e===Ss.UNSIGNED_SHORT||e===Ss.INT||e===Ss.UNSIGNED_INT||e===Ss.FLOAT||e===Ss.DOUBLE)},createTypedArray:function(e,t){switch(e){case Ss.BYTE:return new Int8Array(t);case Ss.UNSIGNED_BYTE:return new Uint8Array(t);case Ss.SHORT:return new Int16Array(t);case Ss.UNSIGNED_SHORT:return new Uint16Array(t);case Ss.INT:return new Int32Array(t);case Ss.UNSIGNED_INT:return new Uint32Array(t);case Ss.FLOAT:return new Float32Array(t);case Ss.DOUBLE:return new Float64Array(t)}},createArrayBufferView:function(e,t,r,n){switch(r=Ne(r,0),n=Ne(n,(t.byteLength-r)/Ss.getSizeInBytes(e)),e){case Ss.BYTE:return new Int8Array(t,r,n);case Ss.UNSIGNED_BYTE:return new Uint8Array(t,r,n);case Ss.SHORT:return new Int16Array(t,r,n);case Ss.UNSIGNED_SHORT:return new Uint16Array(t,r,n);case Ss.INT:return new Int32Array(t,r,n);case Ss.UNSIGNED_INT:return new Uint32Array(t,r,n);case Ss.FLOAT:return new Float32Array(t,r,n);case Ss.DOUBLE:return new Float64Array(t,r,n)}},fromName:function(e){switch(e){case"BYTE":return Ss.BYTE;case"UNSIGNED_BYTE":return Ss.UNSIGNED_BYTE;case"SHORT":return Ss.SHORT;case"UNSIGNED_SHORT":return Ss.UNSIGNED_SHORT;case"INT":return Ss.INT;case"UNSIGNED_INT":return Ss.UNSIGNED_INT;case"FLOAT":return Ss.FLOAT;case"DOUBLE":return Ss.DOUBLE}}},Os=Object.freeze(Ss),xs=Object.freeze({NONE:0,BITS12:1}),Is=new ve,ws=new ve,Ms=new Ut,Ns=new De,Cs=new De;function vs(e,t,r,n,i,a){var o,s,u,c,l,f=xs.NONE;Me(e)&&Me(t)&&Me(r)&&Me(n)&&(c=e.minimum,s=e.maximum,l=ve.subtract(s,c,ws),u=r-t,Math.max(ve.maximumComponent(l),u),f=xs.NONE,o=e.center,s=De.inverseTransformation(n,new De),u=ve.negate(c,Is),De.multiply(De.fromTranslation(u,Ns),s,s),(u=Is).x=1/l.x,u.y=1/l.y,u.z=1/l.z,De.multiply(De.fromScale(u,Ns),s,s),u=De.clone(n),De.setTranslation(u,ve.ZERO,u),n=De.clone(n,new De),c=De.fromTranslation(c,Ns),l=De.fromScale(l,Cs),l=De.multiply(c,l,Ns),De.multiply(n,l,n),De.multiply(u,l,u)),this.quantization=f,this.minimumHeight=t,this.maximumHeight=r,this.center=o,this.toScaledENU=s,this.fromScaledENU=n,this.matrix=u,this.hasVertexNormals=i,this.hasWebMercatorT=Ne(a,!1)}vs.prototype.encode=function(e,t,r,n,i,a,o){var s,u,c=n.x,l=n.y;return this.quantization===xs.BITS12?((r=De.multiplyByPoint(this.toScaledENU,r,Is)).x=Ce.clamp(r.x,0,1),r.y=Ce.clamp(r.y,0,1),r.z=Ce.clamp(r.z,0,1),s=this.maximumHeight-this.minimumHeight,u=Ce.clamp((i-this.minimumHeight)/s,0,1),Ut.fromElements(r.x,r.y,Ms),n=Es.compressTextureCoordinates(Ms),Ut.fromElements(r.z,u,Ms),s=Es.compressTextureCoordinates(Ms),Ut.fromElements(c,l,Ms),u=Es.compressTextureCoordinates(Ms),e[t++]=n,e[t++]=s,e[t++]=u,this.hasWebMercatorT&&(Ut.fromElements(o,0,Ms),u=Es.compressTextureCoordinates(Ms),e[t++]=u)):(ve.subtract(r,this.center,Is),e[t++]=Is.x,e[t++]=Is.y,e[t++]=Is.z,e[t++]=i,e[t++]=c,e[t++]=l,this.hasWebMercatorT&&(e[t++]=o)),this.hasVertexNormals&&(e[t++]=Es.octPackFloat(a)),t},vs.prototype.decodePosition=function(e,t,r){if(Me(r)||(r=new ve),t*=this.getStride(),this.quantization!==xs.BITS12)return r.x=e[t],r.y=e[t+1],r.z=e[t+2],ve.add(r,this.center,r);var n=Es.decompressTextureCoordinates(e[t],Ms);r.x=n.x,r.y=n.y;t=Es.decompressTextureCoordinates(e[t+1],Ms);return r.z=t.x,De.multiplyByPoint(this.fromScaledENU,r,r)},vs.prototype.decodeTextureCoordinates=function(e,t,r){return Me(r)||(r=new Ut),t*=this.getStride(),this.quantization===xs.BITS12?Es.decompressTextureCoordinates(e[t+2],r):Ut.fromElements(e[t+4],e[t+5],r)},vs.prototype.decodeHeight=function(e,t){return t*=this.getStride(),this.quantization!==xs.BITS12?e[t+3]:Es.decompressTextureCoordinates(e[t+1],Ms).y*(this.maximumHeight-this.minimumHeight)+this.minimumHeight},vs.prototype.decodeWebMercatorT=function(e,t){return t*=this.getStride(),this.quantization===xs.BITS12?Es.decompressTextureCoordinates(e[t+3],Ms).x:e[t+6]},vs.prototype.getOctEncodedNormal=function(e,t,r){e=e[t=(t+1)*this.getStride()-1]/256,t=Math.floor(e);return Ut.fromElements(t,256*(e-t),r)},vs.prototype.getStride=function(){var e=this.quantization===xs.BITS12?3:6;return this.hasWebMercatorT&&++e,this.hasVertexNormals&&++e,e};var bs={position3DAndHeight:0,textureCoordAndEncodedNormals:1},Us={compressed0:0,compressed1:1};function Ds(e){this._ellipsoid=Ne(e,be.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}vs.prototype.getAttributes=function(e){var t,r=Os.FLOAT,n=Os.getSizeInBytes(r);if(this.quantization===xs.NONE){var i=2;return this.hasWebMercatorT&&++i,this.hasVertexNormals&&++i,[{index:bs.position3DAndHeight,vertexBuffer:e,componentDatatype:r,componentsPerAttribute:4,offsetInBytes:0,strideInBytes:t=(4+i)*n},{index:bs.textureCoordAndEncodedNormals,vertexBuffer:e,componentDatatype:r,componentsPerAttribute:i,offsetInBytes:4*n,strideInBytes:t}]}var a=3,i=0;return(this.hasWebMercatorT||this.hasVertexNormals)&&++a,this.hasWebMercatorT&&this.hasVertexNormals?(++i,[{index:Us.compressed0,vertexBuffer:e,componentDatatype:r,componentsPerAttribute:a,offsetInBytes:0,strideInBytes:t=(a+1)*n},{index:Us.compressed1,vertexBuffer:e,componentDatatype:r,componentsPerAttribute:1,offsetInBytes:a*n,strideInBytes:t}]):[{index:Us.compressed0,vertexBuffer:e,componentDatatype:r,componentsPerAttribute:a}]},vs.prototype.getAttributeLocations=function(){return this.quantization===xs.NONE?bs:Us},vs.clone=function(e,t){return(t=!Me(t)?new vs:t).quantization=e.quantization,t.minimumHeight=e.minimumHeight,t.maximumHeight=e.maximumHeight,t.center=ve.clone(e.center),t.toScaledENU=De.clone(e.toScaledENU),t.fromScaledENU=De.clone(e.fromScaledENU),t.matrix=De.clone(e.matrix),t.hasVertexNormals=e.hasVertexNormals,t.hasWebMercatorT=e.hasWebMercatorT,t},Object.defineProperties(Ds.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),Ds.mercatorAngleToGeodeticLatitude=function(e){return Ce.PI_OVER_TWO-2*Math.atan(Math.exp(-e))},Ds.geodeticLatitudeToMercatorAngle=function(e){Ds.MaximumLatitude<e?e=Ds.MaximumLatitude:e<-Ds.MaximumLatitude&&(e=-Ds.MaximumLatitude);e=Math.sin(e);return.5*Math.log((1+e)/(1-e))},Ds.MaximumLatitude=Ds.mercatorAngleToGeodeticLatitude(Math.PI),Ds.prototype.project=function(e,t){var r=this._semimajorAxis,n=e.longitude*r,r=Ds.geodeticLatitudeToMercatorAngle(e.latitude)*r,e=e.height;return Me(t)?(t.x=n,t.y=r,t.z=e,t):new ve(n,r,e)},Ds.prototype.unproject=function(e,t){var r=this._oneOverSemimajorAxis,n=e.x*r,r=Ds.mercatorAngleToGeodeticLatitude(e.y*r),e=e.z;return Me(t)?(t.longitude=n,t.latitude=r,t.height=e,t):new T(n,r,e)};var Ps={};Ps.DEFAULT_STRUCTURE=Object.freeze({heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1});var Fs,zs,Ls=new ve,Bs=new De,qs=new ve,Gs=new ve;return Ps.computeVertices=function(e){var t,r,n,i=Math.cos,a=Math.sin,o=Math.sqrt,s=Math.atan,u=Math.exp,c=Ce.PI_OVER_TWO,l=Ce.toRadians,f=e.heightmap,h=e.width,m=e.height,d=e.skirtHeight,p=Ne(e.isGeographic,!0),E=Ne(e.ellipsoid,be.WGS84),_=1/E.maximumRadius,y=e.nativeRectangle,g=e.rectangle,T=Me(g)?(t=g.west,r=g.south,n=g.east,g.north):p?(t=l(y.west),r=l(y.south),n=l(y.east),l(y.north)):(t=y.west*_,r=c-2*s(u(-y.south*_)),n=y.east*_,c-2*s(u(-y.north*_))),A=Me(A=e.relativeToCenter)?A:ve.ZERO,R=Ne(e.exaggeration,1),S=Ne(e.includeWebMercatorT,!1),l=Ne(e.structure,Ps.DEFAULT_STRUCTURE),O=Ne(l.heightScale,Ps.DEFAULT_STRUCTURE.heightScale),x=Ne(l.heightOffset,Ps.DEFAULT_STRUCTURE.heightOffset),I=Ne(l.elementsPerHeight,Ps.DEFAULT_STRUCTURE.elementsPerHeight),w=Ne(l.stride,Ps.DEFAULT_STRUCTURE.stride),M=Ne(l.elementMultiplier,Ps.DEFAULT_STRUCTURE.elementMultiplier),N=Ne(l.isBigEndian,Ps.DEFAULT_STRUCTURE.isBigEndian),C=Ue.computeWidth(y),v=Ue.computeHeight(y),b=C/(h-1),U=v/(m-1);p||(C*=_,v*=_);var D,P,e=E.radiiSquared,F=e.x,z=e.y,L=e.z,B=65536,q=-65536,l=Pa.eastNorthUpToFixedFrame(A,E),G=De.inverseTransformation(l,Bs);S&&(D=Ds.geodeticLatitudeToMercatorAngle(r),P=1/(Ds.geodeticLatitudeToMercatorAngle(T)-D));var V=qs;V.x=Number.POSITIVE_INFINITY,V.y=Number.POSITIVE_INFINITY,V.z=Number.POSITIVE_INFINITY;var k=Gs;k.x=Number.NEGATIVE_INFINITY,k.y=Number.NEGATIVE_INFINITY,k.z=Number.NEGATIVE_INFINITY;var j=Number.POSITIVE_INFINITY,H=h*m,W=H+(0<d?2*h+2*m:0),X=new Array(W),Y=new Array(W),K=new Array(W),Z=S?new Array(W):[],J=0,Q=m,$=0,ee=h;0<d&&(--J,++Q,--$,++ee);for(var te=J;te<Q;++te){var re=te;m<=(re=re<0?0:re)&&(re=m-1);var ne=y.north-U*re;p||(ne=c-2*s(u(-ne*_)));var ie=1-Ce.clamp(ie=(ne-r)/(T-r),0,1),ae=te===J,oe=te===Q-1;0<d&&(ae?ne+=1e-5*v:oe&&(ne-=1e-5*v));var se,ue=i(ne),ce=a(ne),le=L*ce;S&&(se=(Ds.geodeticLatitudeToMercatorAngle(ne)-D)*P);for(var fe=$;fe<ee;++fe){var he=fe,me=re*(h*w)+(he=h<=(he=he<0?0:he)?h-1:he)*w;if(1===I)pe=f[me];else{var de,pe=0;if(N)for(de=0;de<I;++de)pe=pe*M+f[me+de];else for(de=I-1;0<=de;--de)pe=pe*M+f[me+de]}pe=(pe*O+x)*R;var q=Math.max(q,pe),B=Math.min(B,pe),Ee=y.west+b*he;p||(Ee*=_);var _e=Ce.clamp(_e=(Ee-t)/(n-t),0,1),ye=re*h+he;if(0<d){var ge=fe===$,Te=fe===ee-1,Ae=ae||oe||ge||Te;if((ae||oe)&&(ge||Te))continue;Ae&&(pe-=d,ge?(ye=m-re-1+H,Ee-=1e-5*C):oe?ye=H+m+(h-he-1):Te?(ye=H+m+h+re,Ee+=1e-5*C):ae&&(ye=H+m+h+m+he))}var Re=ue*i(Ee),Ae=ue*a(Ee),ge=F*Re,Te=z*Ae,he=1/o(ge*Re+Te*Ae+le*ce),Ee=ge*he,ge=Te*he,Te=le*he,he=new ve;he.x=Ee+Re*pe,he.y=ge+Ae*pe,he.z=Te+ce*pe,X[ye]=he,Y[ye]=pe,K[ye]=new Ut(_e,ie),S&&(Z[ye]=se),De.multiplyByPoint(G,he,Ls),ve.minimumByComponent(Ls,V,V),ve.maximumByComponent(Ls,k,k),j=Math.min(j,pe)}}var Se,e=Xe.fromPoints(X);Me(g)&&(Se=xo.fromRectangle(g,B,q,E));for(var Oe=new vs(new vt(V,k,A),j,q,l,!1,S),xe=new Float32Array(W*Oe.getStride()),Ie=0,we=0;we<W;++we)Ie=Oe.encode(xe,Ie,X[we],K[we],Y[we],void 0,Z[we]);return{vertices:xe,maximumHeight:q,minimumHeight:B,encoding:Oe,boundingSphere3D:e,orientedBoundingBox:Se}},Fs=function(e,t){if(e.encoding===D.LERC){try{n=J.decode(e.heightmap)}catch(e){throw new F(e)}if(n.statistics[0].minValue===Number.MAX_VALUE)throw new F("Invalid tile data");e.heightmap=n.pixels[0],e.width=n.width,e.height=n.height}e.ellipsoid=be.clone(e.ellipsoid),e.rectangle=Ue.clone(e.rectangle);var r=Ps.computeVertices(e),n=r.vertices;return t.push(n.buffer),{vertices:n.buffer,numberOfAttributes:r.encoding.getStride(),minimumHeight:r.minimumHeight,maximumHeight:r.maximumHeight,gridWidth:e.width,gridHeight:e.height,boundingSphere3D:r.boundingSphere3D,orientedBoundingBox:r.orientedBoundingBox,occludeePointInScaledSpace:r.occludeePointInScaledSpace,encoding:r.encoding,westIndicesSouthToNorth:r.westIndicesSouthToNorth,southIndicesEastToWest:r.southIndicesEastToWest,eastIndicesNorthToSouth:r.eastIndicesNorthToSouth,northIndicesWestToEast:r.northIndicesWestToEast}},function(e){var i=e.data,a=[],o={id:i.id,result:void 0,error:void 0};return Q(function(e,t,r){try{return e(t,r)}catch(e){return Q.reject(e)}}(Fs,i.parameters,a)).then(function(e){o.result=e}).otherwise(function(e){e instanceof Error?o.error={name:e.name,message:e.message,stack:e.stack}:o.error=e}).always(function(){Me(zs)||(zs=Ne(self.webkitPostMessage,self.postMessage)),i.canTransferArrayBuffer||(a.length=0);try{zs(o,a)}catch(e){o.result=void 0,o.error="postMessage failed with error: "+(r=(t=e).name,n=t.message,n=Me(r)&&Me(n)?r+": "+n:t.toString(),Me(t=t.stack)&&(n+="\n"+t),n)+"\n    with responseMessage: "+JSON.stringify(o),zs(o)}var t,r,n})}});
