define(function(){"use strict";function C(e){return null!=e}function o(e){var t;this.name="DeveloperError",this.message=e;try{throw new Error}catch(e){t=e.stack}this.stack=t}C(Object.create)&&((o.prototype=Object.create(Error.prototype)).constructor=o),o.prototype.toString=function(){var e=this.name+": "+this.message;return C(this.stack)&&(e+="\n"+this.stack.toString()),e},o.throwInstantiationError=function(){throw new o("This function defines an interface and should not be called directly.")};var i={};function n(e,t,n){return"Expected "+n+" to be typeof "+t+", actual typeof was "+e}function M(e,t){return null!=e?e:t}function t(e){null==e&&(e=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,this.init_genrand(e)}i.typeOf={},i.defined=function(e,t){if(!C(t))throw new o(e+" is required, actual value was undefined")},i.typeOf.func=function(e,t){if("function"!=typeof t)throw new o(n(typeof t,"function",e))},i.typeOf.string=function(e,t){if("string"!=typeof t)throw new o(n(typeof t,"string",e))},i.typeOf.number=function(e,t){if("number"!=typeof t)throw new o(n(typeof t,"number",e))},i.typeOf.number.lessThan=function(e,t,n){if(i.typeOf.number(e,t),n<=t)throw new o("Expected "+e+" to be less than "+n+", actual value was "+t)},i.typeOf.number.lessThanOrEquals=function(e,t,n){if(i.typeOf.number(e,t),n<t)throw new o("Expected "+e+" to be less than or equal to "+n+", actual value was "+t)},i.typeOf.number.greaterThan=function(e,t,n){if(i.typeOf.number(e,t),t<=n)throw new o("Expected "+e+" to be greater than "+n+", actual value was "+t)},i.typeOf.number.greaterThanOrEquals=function(e,t,n){if(i.typeOf.number(e,t),t<n)throw new o("Expected "+e+" to be greater than or equal to"+n+", actual value was "+t)},i.typeOf.object=function(e,t){if("object"!=typeof t)throw new o(n(typeof t,"object",e))},i.typeOf.bool=function(e,t){if("boolean"!=typeof t)throw new o(n(typeof t,"boolean",e))},i.typeOf.number.equals=function(e,t,n,r){if(i.typeOf.number(e,n),i.typeOf.number(t,r),n!==r)throw new o(e+" must be equal to "+t+", the actual values are "+n+" and "+r)},M.EMPTY_OBJECT=Object.freeze({}),t.prototype.init_genrand=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0}},t.prototype.genrand_int32=function(){var e,t,n=new Array(0,this.MATRIX_A);if(this.mti>=this.N){for(this.mti==this.N+1&&this.init_genrand(5489),t=0;t<this.N-this.M;t++)e=this.mt[t]&this.UPPER_MASK|this.mt[t+1]&this.LOWER_MASK,this.mt[t]=this.mt[t+this.M]^e>>>1^n[1&e];for(;t<this.N-1;t++)e=this.mt[t]&this.UPPER_MASK|this.mt[t+1]&this.LOWER_MASK,this.mt[t]=this.mt[t+(this.M-this.N)]^e>>>1^n[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^n[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0},t.prototype.random=function(){return this.genrand_int32()*(1/4294967296)};var _e={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,EPSILON21:1e-21,GRAVITATIONALPARAMETER:3986004418e5,SOLAR_RADIUS:6955e5,LUNAR_RADIUS:1737400,SIXTY_FOUR_KILOBYTES:65536,FOUR_GIGABYTES:4294967296};_e.sign=M(Math.sign,function(e){return 0===(e=+e)||e!=e?e:0<e?1:-1}),_e.signNotZero=function(e){return e<0?-1:1},_e.toSNorm=function(e,t){return t=M(t,255),Math.round((.5*_e.clamp(e,-1,1)+.5)*t)},_e.fromSNorm=function(e,t){return t=M(t,255),_e.clamp(e,0,t)/t*2-1},_e.normalize=function(e,t,n){return 0===(n=Math.max(n-t,0))?0:_e.clamp((e-t)/n,0,1)},_e.sinh=M(Math.sinh,function(e){return(Math.exp(e)-Math.exp(-e))/2}),_e.cosh=M(Math.cosh,function(e){return(Math.exp(e)+Math.exp(-e))/2}),_e.lerp=function(e,t,n){return(1-n)*e+n*t},_e.PI=Math.PI,_e.ONE_OVER_PI=1/Math.PI,_e.PI_OVER_TWO=Math.PI/2,_e.PI_OVER_THREE=Math.PI/3,_e.PI_OVER_FOUR=Math.PI/4,_e.PI_OVER_SIX=Math.PI/6,_e.THREE_PI_OVER_TWO=3*Math.PI/2,_e.TWO_PI=2*Math.PI,_e.ONE_OVER_TWO_PI=1/(2*Math.PI),_e.RADIANS_PER_DEGREE=Math.PI/180,_e.DEGREES_PER_RADIAN=180/Math.PI,_e.RADIANS_PER_ARCSECOND=_e.RADIANS_PER_DEGREE/3600,_e.toRadians=function(e){return e*_e.RADIANS_PER_DEGREE},_e.toDegrees=function(e){return e*_e.DEGREES_PER_RADIAN},_e.convertLongitudeRange=function(e){var t=_e.TWO_PI,e=e-Math.floor(e/t)*t;return e<-Math.PI?e+t:e>=Math.PI?e-t:e},_e.clampToLatitudeRange=function(e){return _e.clamp(e,-1*_e.PI_OVER_TWO,_e.PI_OVER_TWO)},_e.negativePiToPi=function(e){return _e.zeroToTwoPi(e+_e.PI)-_e.PI},_e.zeroToTwoPi=function(e){var t=_e.mod(e,_e.TWO_PI);return Math.abs(t)<_e.EPSILON14&&Math.abs(e)>_e.EPSILON14?_e.TWO_PI:t},_e.mod=function(e,t){return(e%t+t)%t},_e.equalsEpsilon=function(e,t,n,r){n=M(n,0),r=M(r,n);var i=Math.abs(e-t);return i<=r||i<=n*Math.max(Math.abs(e),Math.abs(t))},_e.lessThan=function(e,t,n){return e-t<-n},_e.lessThanOrEquals=function(e,t,n){return e-t<n},_e.greaterThan=function(e,t,n){return n<e-t},_e.greaterThanOrEquals=function(e,t,n){return-n<e-t};var a=[1];_e.factorial=function(e){var t=a.length;if(t<=e)for(var n=a[t-1],r=t;r<=e;r++){var i=n*r;a.push(i),n=i}return a[e]},_e.incrementWrap=function(e,t,n){return n=M(n,0),e=t<++e?n:e},_e.isPowerOfTwo=function(e){return 0!==e&&0==(e&e-1)},_e.nextPowerOfTwo=function(e){return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e},_e.clamp=function(e,t,n){return e<t?t:n<e?n:e};var r=new t;function v(e,t,n){this.x=M(e,0),this.y=M(t,0),this.z=M(n,0)}_e.setRandomNumberSeed=function(e){r=new t(e)},_e.nextRandomNumber=function(){return r.random()},_e.randomBetween=function(e,t){return _e.nextRandomNumber()*(t-e)+e},_e.acosClamped=function(e){return Math.acos(_e.clamp(e,-1,1))},_e.asinClamped=function(e){return Math.asin(_e.clamp(e,-1,1))},_e.chordLength=function(e,t){return 2*t*Math.sin(.5*e)},_e.logBase=function(e,t){return Math.log(e)/Math.log(t)},_e.cbrt=M(Math.cbrt,function(e){var t=Math.pow(Math.abs(e),1/3);return e<0?-t:t}),_e.log2=M(Math.log2,function(e){return Math.log(e)*Math.LOG2E}),_e.fog=function(e,t){t*=e;return 1-Math.exp(-t*t)},_e.fastApproximateAtan=function(e){return e*(-.1784*Math.abs(e)-.0663*e*e+1.0301)},_e.fastApproximateAtan2=function(e,t){var n=Math.abs(e),r=Math.abs(t),i=Math.max(n,r);r=Math.min(n,r);n=_e.fastApproximateAtan(r/i);return n=Math.abs(t)>Math.abs(e)?_e.PI_OVER_TWO-n:n,n=e<0?_e.PI-n:n,n=t<0?-n:n},v.fromSpherical=function(e,t){C(t)||(t=new v);var n=e.clock,r=e.cone,i=M(e.magnitude,1),e=i*Math.sin(r);return t.x=e*Math.cos(n),t.y=e*Math.sin(n),t.z=i*Math.cos(r),t},v.fromElements=function(e,t,n,r){return C(r)?(r.x=e,r.y=t,r.z=n,r):new v(e,t,n)},v.fromCartesian4=v.clone=function(e,t){if(C(e))return C(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t):new v(e.x,e.y,e.z)},v.packedLength=3,v.pack=function(e,t,n){return n=M(n,0),t[n++]=e.x,t[n++]=e.y,t[n]=e.z,t},v.unpack=function(e,t,n){return t=M(t,0),(n=!C(n)?new v:n).x=e[t++],n.y=e[t++],n.z=e[t],n},v.packArray=function(e,t){var n=e.length,r=3*n;if(C(t)){if(!Array.isArray(t)&&t.length!==r)throw new o("If result is a typed array, it must have exactly array.length * 3 elements");t.length!==r&&(t.length=r)}else t=new Array(r);for(var i=0;i<n;++i)v.pack(e[i],t,3*i);return t},v.unpackArray=function(e,t){var n=e.length;C(t)?t.length=n/3:t=new Array(n/3);for(var r=0;r<n;r+=3){var i=r/3;t[i]=v.unpack(e,r,t[i])}return t},v.fromArray=v.unpack,v.maximumComponent=function(e){return Math.max(e.x,e.y,e.z)},v.minimumComponent=function(e){return Math.min(e.x,e.y,e.z)},v.minimumByComponent=function(e,t,n){return n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n.z=Math.min(e.z,t.z),n},v.maximumByComponent=function(e,t,n){return n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n.z=Math.max(e.z,t.z),n},v.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z},v.magnitude=function(e){return Math.sqrt(v.magnitudeSquared(e))};var s=new v;v.distance=function(e,t){return v.subtract(e,t,s),v.magnitude(s)},v.distanceSquared=function(e,t){return v.subtract(e,t,s),v.magnitudeSquared(s)},v.normalize=function(e,t){var n=v.magnitude(e);return 0!=n?(t.x=e.x/n,t.y=e.y/n,t.z=e.z/n):v.clone(e,t),Math.abs(t.x)<_e.EPSILON8&&(t.x=0),Math.abs(t.y)<_e.EPSILON8&&(t.y=0),Math.abs(t.z)<_e.EPSILON8&&(t.z=0),t},v.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},v.multiplyComponents=function(e,t,n){return n.x=e.x*t.x,n.y=e.y*t.y,n.z=e.z*t.z,n},v.divideComponents=function(e,t,n){return n.x=e.x/t.x,n.y=e.y/t.y,n.z=e.z/t.z,n},v.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n},v.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n},v.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n},v.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n},v.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t},v.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t};var u=new v;v.lerp=function(e,t,n,r){return v.multiplyByScalar(t,n,u),r=v.multiplyByScalar(e,1-n,r),v.add(u,r,r)};var c=new v,l=new v;v.angleBetween=function(e,t){v.normalize(e,c),v.normalize(t,l);e=v.dot(c,l),t=v.magnitude(v.cross(c,l,c));return Math.atan2(t,e)};var h=new v;v.mostOrthogonalAxis=function(e,t){e=v.normalize(e,h);return v.abs(e,e),t=e.x<=e.y?e.x<=e.z?v.clone(v.UNIT_X,t):v.clone(v.UNIT_Z,t):e.y<=e.z?v.clone(v.UNIT_Y,t):v.clone(v.UNIT_Z,t)},v.projectVector=function(e,t,n){e=v.dot(e,t)/v.dot(t,t);return v.multiplyByScalar(t,e,n)},v.equals=function(e,t){return e===t||C(e)&&C(t)&&Math.abs(e.x-t.x)<1e-10&&Math.abs(e.y-t.y)<1e-10&&Math.abs(e.z-t.z)<1e-10},v.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]&&e.z===t[n+2]},v.equalsEpsilon=function(e,t,n,r){return e===t||C(e)&&C(t)&&_e.equalsEpsilon(e.x,t.x,n,r)&&_e.equalsEpsilon(e.y,t.y,n,r)&&_e.equalsEpsilon(e.z,t.z,n,r)},v.cross=function(e,t,n){var r=e.x,i=e.y,o=e.z,a=t.x,s=t.y,e=t.z,t=o*a-r*e,a=r*s-i*a;return n.x=i*e-o*s,n.y=t,n.z=a,n},v.midpoint=function(e,t,n){return n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y),n.z=.5*(e.z+t.z),n},v.fromDegrees=function(e,t,n,r,i){return e=_e.toRadians(e),t=_e.toRadians(t),v.fromRadians(e,t,n,r,i)};var f=new v,m=new v,d=new v(40680631590769,40680631590769,40408299984661.445);v.fromRadians=function(e,t,n,r,i){n=M(n,0);var o=C(r)?r.radiiSquared:d,r=Math.cos(t);f.x=r*Math.cos(e),f.y=r*Math.sin(e),f.z=Math.sin(t),f=v.normalize(f,f),v.multiplyComponents(o,f,m);o=Math.sqrt(v.dot(f,m));return m=v.divideByScalar(m,o,m),f=v.multiplyByScalar(f,n,f),C(i)||(i=new v),v.add(m,f,i)},v.fromDegreesArray=function(e,t,n){var r=e.length;C(n)?n.length=r/2:n=new Array(r/2);for(var i=0;i<r;i+=2){var o=e[i],a=e[i+1],s=i/2;n[s]=v.fromDegrees(o,a,0,t,n[s])}return n},v.fromRadiansArray=function(e,t,n){var r=e.length;C(n)?n.length=r/2:n=new Array(r/2);for(var i=0;i<r;i+=2){var o=e[i],a=e[i+1],s=i/2;n[s]=v.fromRadians(o,a,0,t,n[s])}return n},v.fromDegreesArrayHeights=function(e,t,n){var r=e.length;C(n)?n.length=r/3:n=new Array(r/3);for(var i=0;i<r;i+=3){var o=e[i],a=e[i+1],s=e[i+2],u=i/3;n[u]=v.fromDegrees(o,a,s,t,n[u])}return n},v.fromRadiansArrayHeights=function(e,t,n){var r=e.length;C(n)?n.length=r/3:n=new Array(r/3);for(var i=0;i<r;i+=3){var o=e[i],a=e[i+1],s=e[i+2],u=i/3;n[u]=v.fromRadians(o,a,s,t,n[u])}return n},v.ZERO=Object.freeze(new v(0,0,0)),v.UNIT_X=Object.freeze(new v(1,0,0)),v.UNIT_Y=Object.freeze(new v(0,1,0)),v.UNIT_Z=Object.freeze(new v(0,0,1)),v.prototype.clone=function(e){return v.clone(this,e)},v.prototype.equals=function(e){return v.equals(this,e)},v.prototype.equalsEpsilon=function(e,t,n){return v.equalsEpsilon(this,e,t,n)},v.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},v.prototype.applyMatrix4=function(e,t,n){C(n)||(n=new v);var r=e.x,i=e.y,o=e.z,e=1/(t[3]*r+t[7]*i+t[11]*o+t[15]);return n.x=(t[0]*r+t[4]*i+t[8]*o+t[12])*e,n.y=(t[1]*r+t[5]*i+t[9]*o+t[13])*e,n.z=(t[2]*r+t[6]*i+t[10]*o+t[14])*e,n},v.prototype.set=function(e,t,n){this.x=e,this.y=t,this.z=n},v.prototype.fromArray=function(e,t){return this.x=e[t=void 0===t?0:t],this.y=e[t+1],this.z=e[t+2],this},v.prototype.toArray=function(e,t){return(e=void 0===e?[]:e)[t=void 0===t?0:t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e};var I=new v,N=new v;function p(e,t,n,r,i){var o=e.x,a=e.y,s=e.z,u=t.x,c=t.y,t=t.z,l=o*o*u*u,h=a*a*c*c,f=s*s*t*t,u=l+h+f,c=Math.sqrt(1/u),t=v.multiplyByScalar(e,c,I);if(u<r)return isFinite(c)?v.clone(t,i):void 0;var m=n.x,d=n.y,p=n.z,n=N;n.x=t.x*m*2,n.y=t.y*d*2,n.z=t.z*p*2;var E=(1-c)*v.magnitude(e)/(.5*v.magnitude(n)),_=0;do{var y,g,R,T,A,S,O,_=(O=l*(T=(y=1/(1+(E-=_)*m))*y)+h*(A=(g=1/(1+E*d))*g)+f*(S=(R=1/(1+E*p))*R)-1)/(-2*(l*(T*y)*m+h*(A*g)*d+f*(S*R)*p))}while(Math.abs(O)>_e.EPSILON12);return C(i)?(i.x=o*y,i.y=a*g,i.z=s*R,i):new v(o*y,a*g,s*R)}function R(e,t,n){this.longitude=M(e,0),this.latitude=M(t,0),this.height=M(n,0)}R.fromRadians=function(e,t,n,r){return n=M(n,0),C(r)?(r.longitude=e,r.latitude=t,r.height=n,r):new R(e,t,n)},R.fromDegrees=function(e,t,n,r){return e=_e.toRadians(e),t=_e.toRadians(t),R.fromRadians(e,t,n,r)};var E=new v,_=new v,y=new v,g=new v(1/6378137,1/6378137,1/6356752.314245179),T=new v(1/40680631590769,1/40680631590769,1/40408299984661.445),A=_e.EPSILON1;function S(e,t,n,r){t=M(t,0),n=M(n,0),r=M(r,0),e._radii=new v(t,n,r),e._radiiSquared=new v(t*t,n*n,r*r),e._radiiToTheFourth=new v(t*t*t*t,n*n*n*n,r*r*r*r),e._oneOverRadii=new v(0===t?0:1/t,0===n?0:1/n,0===r?0:1/r),e._oneOverRadiiSquared=new v(0===t?0:1/(t*t),0===n?0:1/(n*n),0===r?0:1/(r*r)),e._minimumRadius=Math.min(t,n,r),e._maximumRadius=Math.max(t,n,r),e._centerToleranceSquared=_e.EPSILON1,0!==e._radiiSquared.z&&(e._squaredXOverSquaredZ=e._radiiSquared.x/e._radiiSquared.z)}function ye(e,t,n){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,S(this,e,t,n)}R.fromCartesian=function(e,t,n){var r=C(t)?t.oneOverRadii:g,i=C(t)?t.oneOverRadiiSquared:T,r=p(e,r,i,C(t)?t._centerToleranceSquared:A,_);if(C(r)){t=v.multiplyComponents(r,i,E),t=v.normalize(t,t),i=v.subtract(e,r,y),r=Math.atan2(t.y,t.x),t=Math.asin(t.z),i=_e.sign(v.dot(i,e))*v.magnitude(i);return C(n)?(n.longitude=r,n.latitude=t,n.height=i,n):new R(r,t,i)}},R.toCartesian=function(e,t,n){return v.fromRadians(e.longitude,e.latitude,e.height,t,n)},R.clone=function(e,t){if(C(e))return C(t)?(t.longitude=e.longitude,t.latitude=e.latitude,t.height=e.height,t):new R(e.longitude,e.latitude,e.height)},R.equals=function(e,t){return e===t||C(e)&&C(t)&&e.longitude===t.longitude&&e.latitude===t.latitude&&e.height===t.height},R.equalsEpsilon=function(e,t,n){return n=M(n,0),e===t||C(e)&&C(t)&&Math.abs(e.longitude-t.longitude)<=n&&Math.abs(e.latitude-t.latitude)<=n&&Math.abs(e.height-t.height)<=n},R.ZERO=Object.freeze(new R(0,0,0)),R.prototype.clone=function(e){return R.clone(this,e)},R.prototype.equals=function(e){return R.equals(this,e)},R.prototype.equalsEpsilon=function(e,t){return R.equalsEpsilon(this,e,t)},R.prototype.toString=function(){return"("+this.longitude+", "+this.latitude+", "+this.height+")"},R.geodeticParallelLength=function(e,t,n){return e*n*Math.cos(t)},R.geodeticCircleRadians=function(e,t,n,r){r=Math.cos(t)*Math.cos(r)*Math.cos(e-n)+Math.sin(t)*Math.sin(r);return Math.abs(Math.acos(r))},R.add=function(e,t,n){return n.longitude=e.longitude+t.longitude,n.latitude=e.latitude+t.latitude,n.height=e.height+t.height,n},R.subtract=function(e,t,n){return n.longitude=e.longitude-t.longitude,n.latitude=e.latitude-t.latitude,n.height=e.height-t.height,n},R.multiplyByScalar=function(e,t,n){return n.longitude=e.longitude*t,n.latitude=e.latitude*t,n.height=e.height*t,n},R.divideByScalar=function(e,t,n){return n.longitude=e.longitude/t,n.latitude=e.latitude/t,n.height=e.height/t,n},R.distance=function(e,t){e=new Cartesian2(e.longitude,e.latitude),t=new Cartesian2(t.longitude,t.latitude);return Cartesian2.distance(e,t)},Object.defineProperties(ye.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),ye.clone=function(e,t){if(C(e)){var n=e._radii;return C(t)?(v.clone(n,t._radii),v.clone(e._radiiSquared,t._radiiSquared),v.clone(e._radiiToTheFourth,t._radiiToTheFourth),v.clone(e._oneOverRadii,t._oneOverRadii),v.clone(e._oneOverRadiiSquared,t._oneOverRadiiSquared),t._minimumRadius=e._minimumRadius,t._maximumRadius=e._maximumRadius,t._centerToleranceSquared=e._centerToleranceSquared,t):new ye(n.x,n.y,n.z)}},ye.fromCartesian3=function(e,t){return C(t)||(t=new ye),C(e)&&S(t,e.x,e.y,e.z),t},ye.WGS84=Object.freeze(new ye(6378137,6378137,6356752.314245179)),ye.UNIT_SPHERE=Object.freeze(new ye(1,1,1)),ye.MOON=Object.freeze(new ye(_e.LUNAR_RADIUS,_e.LUNAR_RADIUS,_e.LUNAR_RADIUS)),ye.DATUM_PLANE=-100,ye.prototype.clone=function(e){return ye.clone(this,e)},ye.packedLength=v.packedLength,ye.pack=function(e,t,n){return n=M(n,0),v.pack(e._radii,t,n),t},ye.unpack=function(e,t,n){t=M(t,0);t=v.unpack(e,t);return ye.fromCartesian3(t,n)},ye.prototype.geocentricSurfaceNormal=v.normalize,ye.prototype.geodeticSurfaceNormalCartographic=function(e,t){var n=e.longitude,r=e.latitude,i=Math.cos(r),e=i*Math.cos(n),n=i*Math.sin(n),r=Math.sin(r);return(t=!C(t)?new v:t).x=e,t.y=n,t.z=r,v.normalize(t,t)},ye.prototype.geodeticSurfaceNormal=function(e,t){if(!v.equalsEpsilon(e,v.ZERO,_e.EPSILON14))return C(t)||(t=new v),t=v.multiplyComponents(e,this._oneOverRadiiSquared,t),v.normalize(t,t)};var O=new v,x=new v;ye.prototype.cartographicToCartesian=function(e,t){var n=O,r=x;this.geodeticSurfaceNormalCartographic(e,n),v.multiplyComponents(this._radiiSquared,n,r);var i=Math.sqrt(v.dot(n,r));return v.divideByScalar(r,i,r),v.multiplyByScalar(n,e.height,n),C(t)||(t=new v),v.add(r,n,t)},ye.prototype.cartographicArrayToCartesianArray=function(e,t){var n=e.length;C(t)?t.length=n:t=new Array(n);for(var r=0;r<n;r++)t[r]=this.cartographicToCartesian(e[r],t[r]);return t};var w=new v,b=new v,P=new v;ye.prototype.cartesianToCartographic=function(e,t){var n=this.scaleToGeodeticSurface(e,b);if(C(n)){var r=this.geodeticSurfaceNormal(n,w),i=v.subtract(e,n,P),n=Math.atan2(r.y,r.x),r=Math.asin(r.z),i=_e.sign(v.dot(i,e))*v.magnitude(i);return C(t)?(t.longitude=n,t.latitude=r,t.height=i,t):new R(n,r,i)}},ye.prototype.cartesianArrayToCartographicArray=function(e,t){var n=e.length;C(t)?t.length=n:t=new Array(n);for(var r=0;r<n;++r)t[r]=this.cartesianToCartographic(e[r],t[r]);return t},ye.prototype.scaleToGeodeticSurface=function(e,t){return p(e,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,t)},ye.prototype.scaleToGeocentricSurface=function(e,t){C(t)||(t=new v);var n=e.x,r=e.y,i=e.z,o=this._oneOverRadiiSquared,o=1/Math.sqrt(n*n*o.x+r*r*o.y+i*i*o.z);return v.multiplyByScalar(e,o,t)},ye.prototype.transformPositionToScaledSpace=function(e,t){return C(t)||(t=new v),v.multiplyComponents(e,this._oneOverRadii,t)},ye.prototype.transformPositionFromScaledSpace=function(e,t){return C(t)||(t=new v),v.multiplyComponents(e,this._radii,t)},ye.prototype.equals=function(e){return this===e||C(e)&&v.equals(this._radii,e._radii)},ye.prototype.toString=function(){return this._radii.toString()},ye.prototype.getSurfaceNormalIntersectionWithZAxis=function(e,t,n){t=M(t,0);var r=this._squaredXOverSquaredZ;if((n=!C(n)?new v:n).x=0,n.y=0,n.z=e.z*(1-r),!(Math.abs(n.z)>=this._radii.z-t))return n};var U=[.14887433898163,.43339539412925,.67940956829902,.86506336668898,.97390652851717,0],D=[.29552422471475,.26926671930999,.21908636251598,.14945134915058,.066671344308684,0];function F(e,t,n){for(var r=.5*(t+e),i=.5*(t-e),o=0,a=0;a<5;a++){var s=i*U[a];o+=D[a]*(n(r+s)+n(r-s))}return o*=i}function z(e,t,n,r,i,o){this.west=M(e,Math.PI),this.south=M(t,Math.PI/2),this.east=M(n,-Math.PI),this.north=M(r,-Math.PI/2),this.minHeight=M(i,0),this.maxHeight=M(o,0)}ye.prototype.surfaceArea=function(e){for(var t=e.west,i=e.east,n=e.south,r=e.north;i<t;)i+=_e.TWO_PI;var e=this._radiiSquared,o=e.x,a=e.y,s=e.z,u=o*a;return F(n,r,function(e){var n=Math.cos(e),r=Math.sin(e);return Math.cos(e)*F(t,i,function(e){var t=Math.cos(e),e=Math.sin(e);return Math.sqrt(u*r*r+s*(a*t*t+o*e*e)*n*n)})})},Object.defineProperties(z.prototype,{width:{get:function(){return z.computeWidth(this)}},height:{get:function(){return z.computeHeight(this)}}}),z.packedLength=4,z.pack=function(e,t,n){return n=M(n,0),t[n++]=e.west,t[n++]=e.south,t[n++]=e.east,t[n]=e.north,t},z.unpack=function(e,t,n){return t=M(t,0),(n=!C(n)?new z:n).west=e[t++],n.south=e[t++],n.east=e[t++],n.north=e[t],n},z.computeWidth=function(e){var t=e.east,e=e.west;return t<e&&(t+=_e.TWO_PI),t-e},z.computeHeight=function(e){return e.north-e.south},z.fromDegrees=function(e,t,n,r,i){return e=_e.toRadians(M(e,0)),t=_e.toRadians(M(t,0)),n=_e.toRadians(M(n,0)),r=_e.toRadians(M(r,0)),C(i)?(i.west=e,i.south=t,i.east=n,i.north=r,i):new z(e,t,n,r)},z.fromRadians=function(e,t,n,r,i){return C(i)?(i.west=M(e,0),i.south=M(t,0),i.east=M(n,0),i.north=M(r,0),i):new z(e,t,n,r)},z.fromCartographicArray=function(e,t){for(var n=Number.MAX_VALUE,r=-Number.MAX_VALUE,i=Number.MAX_VALUE,o=-Number.MAX_VALUE,a=Number.MAX_VALUE,s=-Number.MAX_VALUE,u=0,c=e.length;u<c;u++)var l=e[u],n=Math.min(n,l.longitude),r=Math.max(r,l.longitude),a=Math.min(a,l.latitude),s=Math.max(s,l.latitude),l=0<=l.longitude?l.longitude:l.longitude+_e.TWO_PI,i=Math.min(i,l),o=Math.max(o,l);return o-i<r-n&&(n=i,(r=o)>_e.PI&&(r-=_e.TWO_PI),n>_e.PI&&(n-=_e.TWO_PI)),C(t)?(t.west=n,t.south=a,t.east=r,t.north=s,t):new z(n,a,r,s)},z.fromCartesianArray=function(e,t,n){t=M(t,ye.WGS84);for(var r=Number.MAX_VALUE,i=-Number.MAX_VALUE,o=Number.MAX_VALUE,a=-Number.MAX_VALUE,s=Number.MAX_VALUE,u=-Number.MAX_VALUE,c=Number.MAX_VALUE,l=-Number.MAX_VALUE,h=0,f=e.length;h<f;h++)var m=t.cartesianToCartographic(e[h]),r=Math.min(r,m.longitude),i=Math.max(i,m.longitude),s=Math.min(s,m.latitude),u=Math.max(u,m.latitude),c=Math.min(c,m.height),l=Math.max(l,m.height),m=0<=m.longitude?m.longitude:m.longitude+_e.TWO_PI,o=Math.min(o,m),a=Math.max(a,m);return a-o<i-r&&(r=o,(i=a)>_e.PI&&(i-=_e.TWO_PI),r>_e.PI&&(r-=_e.TWO_PI)),C(n)?(n.west=r,n.south=s,n.east=i,n.north=u,n.minHeight=c,n.maxHeight=l,n):new z(r,s,i,u,c,l)},z.clone=function(e,t){if(C(e))return C(t)?(t.west=e.west,t.south=e.south,t.east=e.east,t.north=e.north,t.minHeight=e.minHeight,t.maxHeight=e.maxHeight,t):new z(e.west,e.south,e.east,e.north,e.minHeight,e.maxHeight)},z.equalsEpsilon=function(e,t,n){return n=M(n,0),e===t||C(e)&&C(t)&&Math.abs(e.west-t.west)<=n&&Math.abs(e.south-t.south)<=n&&Math.abs(e.east-t.east)<=n&&Math.abs(e.north-t.north)<=n&&Math.abs(e.minHeight-t.minHeight)<=n&&Math.abs(e.maxHeight-t.maxHeight)<=n},z.prototype.clone=function(e){return z.clone(this,e)},z.prototype.equals=function(e){return z.equals(this,e)},z.prototype.intersect=function(e){return z.intersect(this,e)},z.equals=function(e,t){return e===t||C(e)&&C(t)&&e.west===t.west&&e.south===t.south&&e.east===t.east&&e.north===t.north},z.prototype.equalsEpsilon=function(e,t){return z.equalsEpsilon(this,e,t)},z.validate=function(e){},z.southwest=function(e,t){return C(t)?(t.longitude=e.west,t.latitude=e.south,t.height=0,t):new R(e.west,e.south)},z.northwest=function(e,t){return C(t)?(t.longitude=e.west,t.latitude=e.north,t.height=0,t):new R(e.west,e.north)},z.northeast=function(e,t){return C(t)?(t.longitude=e.east,t.latitude=e.north,t.height=0,t):new R(e.east,e.north)},z.southeast=function(e,t){return C(t)?(t.longitude=e.east,t.latitude=e.south,t.height=0,t):new R(e.east,e.south)},z.center=function(e,t){var n=e.east,r=e.west;n<r&&(n+=_e.TWO_PI);n=_e.negativePiToPi(.5*(r+n)),e=.5*(e.south+e.north);return C(t)?(t.longitude=n,t.latitude=e,t.height=0,t):new R(n,e)},z.intersection=function(e,t,n){var r=e.east,i=e.west,o=t.east,a=t.west;r<i&&0<o?r+=_e.TWO_PI:o<a&&0<r&&(o+=_e.TWO_PI),r<i&&a<0?a+=_e.TWO_PI:o<a&&i<0&&(i+=_e.TWO_PI);a=_e.negativePiToPi(Math.max(i,a)),r=_e.negativePiToPi(Math.min(r,o));if(!((e.west<e.east||t.west<t.east)&&r<=a)){o=Math.max(e.south,t.south),t=Math.min(e.north,t.north);if(!(t<=o))return C(n)?(n.west=a,n.south=o,n.east=r,n.north=t,n):new z(a,o,r,t)}},z.simpleIntersection=function(e,t,n){var r=Math.max(e.west,t.west),i=Math.max(e.south,t.south),o=Math.min(e.east,t.east),t=Math.min(e.north,t.north);if(!(t<=i||o<=r))return C(n)?(n.west=r,n.south=i,n.east=o,n.north=t,n):new z(r,i,o,t)},z.union=function(e,t,n){C(n)||(n=new z);var r=e.east,i=e.west,o=t.east,a=t.west;r<i&&0<o?r+=_e.TWO_PI:o<a&&0<r&&(o+=_e.TWO_PI),r<i&&a<0?a+=_e.TWO_PI:o<a&&i<0&&(i+=_e.TWO_PI);a=_e.convertLongitudeRange(Math.min(i,a)),o=_e.convertLongitudeRange(Math.max(r,o));return n.west=a,n.south=Math.min(e.south,t.south),n.east=o,n.north=Math.max(e.north,t.north),n},z.expand=function(e,t,n){return(n=!C(n)?new z:n).west=Math.min(e.west,t.longitude),n.south=Math.min(e.south,t.latitude),n.east=Math.max(e.east,t.longitude),n.north=Math.max(e.north,t.latitude),n},z.contains=function(e,t){var n=t.longitude,r=t.latitude,i=e.west,t=e.east;return t<i&&(t+=_e.TWO_PI,n<0&&(n+=_e.TWO_PI)),(i<n||_e.equalsEpsilon(n,i,_e.EPSILON14))&&(n<t||_e.equalsEpsilon(n,t,_e.EPSILON14))&&r>=e.south&&r<=e.north};var L=new R;z.subsample=function(e,t,n,r){t=M(t,ye.WGS84),n=M(n,0),C(r)||(r=[]);var i=0,o=e.north,a=e.south,s=e.east,u=e.west,c=L;c.height=n,c.longitude=u,c.latitude=o,r[i]=t.cartographicToCartesian(c,r[i]),i++,c.longitude=s,r[i]=t.cartographicToCartesian(c,r[i]),i++,c.latitude=a,r[i]=t.cartographicToCartesian(c,r[i]),i++,c.longitude=u,r[i]=t.cartographicToCartesian(c,r[i]),i++,c.latitude=o<0?o:0<a?a:0;for(var l=1;l<8;++l)c.longitude=-Math.PI+l*_e.PI_OVER_TWO,z.contains(e,c)&&(r[i]=t.cartographicToCartesian(c,r[i]),i++);return 0===c.latitude&&(c.longitude=u,r[i]=t.cartographicToCartesian(c,r[i]),i++,c.longitude=s,r[i]=t.cartographicToCartesian(c,r[i]),i++),r.length=i,r},z.intersect=function(e,t){return e.north>=t.south&&e.south<=t.north&&e.east>=t.west&&e.west<=t.east},z.intersect_lon_lat_region=function(e,t){for(var n=t.get_count(),r=0;r<n;r++)if(z.check_rect_line(e,t.getItem(r),t.getItem((r+1)%n)))return!0;return!!t.containRect(e)},z.check_rect_line_vertical=function(e,t,n,r,i){if(n<e.longitude&&n<t.longitude)return!1;if(n>e.longitude&&n>t.longitude)return!1;if(e.longitude==t.longitude)return n==e.longitude&&(!(e.latitude<r&&t.latitude<r)&&!(e.latitude>i&&t.latitude>i));e=(t.latitude-e.latitude)*(n-e.longitude)/(t.longitude-e.longitude)+e.latitude;return r<=e&&e<=i},z.check_rect_line_horizontal=function(e,t,n,r,i){if(n<e.latitude&&n<t.latitude)return!1;if(n>e.latitude&&n>t.latitude)return!1;if(e.latitude==t.latitude)return n==e.latitude&&(!(e.longitude<r&&t.longitude<r)&&!(e.longitude>i&&t.longitude>i));e=(t.longitude-e.longitude)*(n-e.latitude)/(t.latitude-e.latitude)+e.longitude;return r<=e&&e<=i},z.check_rect_line=function(e,t,n){var r=!1;return z.containPoint(e,t)||z.containPoint(e,n)?r=!0:(r|=z.check_rect_line_horizontal(t,n,e.north,e.west,e.east),r|=z.check_rect_line_horizontal(t,n,e.south,e.west,e.east),r|=z.check_rect_line_vertical(t,n,e.west,e.south,e.north),r|=z.check_rect_line_vertical(t,n,e.east,e.south,e.north)),r},z.intersectAabb=function(e,t){for(var n=new z,r=t.get_corners(),i=new R,o=0;o<8;o++){var a=R.fromCartesian(r[o],void 0,i);z.combine(n,a)}return z.intersect(e,n)},z.fromGeoAabb=function(e){for(var t=new z,n=e.get_corners(),r=new R,i=0;i<8;i++){var o=R.fromCartesian(n[i],void 0,r);z.combine(t,o)}return t},z.containsRect=function(e,t){var n=_e.EPSILON6;return t.east<=e.east+n&&t.west>=e.west-n&&t.north<=e.north+n&&t.south>=e.south-n},z.combine=function(e,t){e.west>t.longitude&&(e.west=t.longitude),e.east<t.longitude&&(e.east=t.longitude),e.north<t.latitude&&(e.north=t.latitude),e.south>t.latitude&&(e.south=t.latitude),e.maxHeight<t.height&&(e.maxHeight=t.height),e.minHeight>t.height&&(e.minHeight=t.height)},z.fromAabb=function(e,t){var n=t.minimum,r=t.maximum,i=r.z/ye.WGS84.maximumRadius*1e3,t=n.z/ye.WGS84.maximumRadius*1e3,r=r.x/ye.WGS84.maximumRadius*1e3,n=n.x/ye.WGS84.maximumRadius*1e3;return new z(e.longitude+n,e.latitude+t,e.longitude+r,e.latitude+i)},z.containPoint=function(e,t){return t.longitude<=e.east&&t.longitude>=e.west&&t.latitude<=e.north&&t.latitude>=e.south},z.MAX_VALUE=Object.freeze(new z(-Math.PI,-_e.PI_OVER_TWO,Math.PI,_e.PI_OVER_TWO));var B=0,q=1,G=2,j=3,ge={};function H(e,t){this.x=M(e,0),this.y=M(t,0)}ge.worldRect=new z(-_e.PI,-_e.PI_OVER_TWO,_e.PI,_e.PI_OVER_TWO),ge.assemble_int=function(e,t,n){return{level:e,lonIndex:t,latIndex:n}},ge.assemble=function(e,t,n){var r=1/ge.get_bound_size(e),t=Math.floor((t-ge.worldRect.west)*r),r=Math.floor((n-ge.worldRect.south)*r);return ge.assemble_int(e,t,r)},ge.get_bound_size=function(e){return(ge.worldRect.east-ge.worldRect.west)/(1<<e+1)},ge.toString=function(e){var t=e.level.toString(16),n=e.lonIndex.toString(16),r=e.latIndex.toString(16),r=0===e.level?0===e.lonIndex?r:n+"000000".substring(0,6-r.length)+r:t+"000000".substring(0,6-n.length)+n+"000000".substring(0,6-r.length)+r;return r},ge.to_string=function(e){var t=e.level,n=e.lonIndex,r=e.latIndex,i=(16711680&n)>>16,o=(65280&n)>>8,n=(16711680&r)>>16,r=(65280&r)>>8,e=ge.toString(e);return t.toString(16)+"/"+i.toString(16)+n.toString(16)+"/"+o.toString(16)+r.toString(16)+"/"+e},ge.to_int=function(e){var t=e.level,n=e.lonIndex,e=e.latIndex;return t<<48||n<<24||e},ge.to_path=function(e,t,n){var r=ge.assemble(e,t,n),e=r.level,t=r.lonIndex,n=r.latIndex,e=(65280&t)>>8,r=(16711680&n)>>16,n=(65280&n)>>8;return{x:((16711680&t)>>16).toString(16)+r.toString(16),y:e.toString(16)+n.toString(16)}},ge.get_level=function(e){return e.level},ge.get_lat_index=function(e){return e.latIndex},ge.get_lon_index=function(e){return e.lonIndex},ge.get_bound=function(e,t){var n=e.level,r=e.lonIndex,i=e.latIndex,o=r+1,e=i+1,n=ge.get_bound_size(n),r=r*n+ge.worldRect.west,i=i*n+ge.worldRect.south,o=o*n+ge.worldRect.west,n=e*n+ge.worldRect.south;return C(t)?(t.west=r,t.south=i,t.east=o,t.north=n,t):new z(r,i,o,n,0,0)},ge.get_parent_index=function(e,t){C(t)||(t=1);var n=e.level,r=e.lonIndex,e=e.latIndex;return ge.assemble_int(n-t,r>>t,e>>t)},ge.get_children=function(e,t){var n=e.level+1,r=2*e.lonIndex,i=2*e.latIndex,o=ge.assemble_int(n,r,i),a=ge.assemble_int(n,r,1+i),e=ge.assemble_int(n,1+r,i),i=ge.assemble_int(n,1+r,1+i);if(!C(t))return[o,a,e,i];t[0]=o,t[1]=a,t[2]=e,t[3]=i},ge.get_child=function(e,t){var n=e.level+1,r=e.lonIndex<<1,i=e.latIndex<<1,o=0;switch(t){case B:o=ge.assemble_int(n,r,i);break;case q:o=ge.assemble_int(n,r,1+i);break;case G:o=ge.assemble_int(n,1+r,i);break;case j:o=ge.assemble_int(n,1+r,1+i)}return o},H.fromElements=function(e,t,n){return C(n)?(n.x=e,n.y=t,n):new H(e,t)},H.fromCartesian3=H.clone=function(e,t){if(C(e))return C(t)?(t.x=e.x,t.y=e.y,t):new H(e.x,e.y)},H.fromCartesian4=H.clone,H.packedLength=2,H.pack=function(e,t,n){return n=M(n,0),t[n++]=e.x,t[n]=e.y,t},H.unpack=function(e,t,n){return t=M(t,0),(n=!C(n)?new H:n).x=e[t++],n.y=e[t],n},H.packArray=function(e,t){var n=e.length,r=2*n;if(C(t)){if(!Array.isArray(t)&&t.length!==r)throw new o("If result is a typed array, it must have exactly array.length * 2 elements");t.length!==r&&(t.length=r)}else t=new Array(r);for(var i=0;i<n;++i)H.pack(e[i],t,2*i);return t},H.unpackArray=function(e,t){var n=e.length;C(t)?t.length=n/2:t=new Array(n/2);for(var r=0;r<n;r+=2){var i=r/2;t[i]=H.unpack(e,r,t[i])}return t},H.fromArray=H.unpack,H.maximumComponent=function(e){return Math.max(e.x,e.y)},H.minimumComponent=function(e){return Math.min(e.x,e.y)},H.minimumByComponent=function(e,t,n){return n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n},H.maximumByComponent=function(e,t,n){return n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n},H.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},H.magnitude=function(e){return Math.sqrt(H.magnitudeSquared(e))};var W=new H;H.distance=function(e,t){return H.subtract(e,t,W),H.magnitude(W)},H.distanceSquared=function(e,t){return H.subtract(e,t,W),H.magnitudeSquared(W)},H.normalize=function(e,t){var n=H.magnitude(e);return 0!=n?(t.x=e.x/n,t.y=e.y/n):H.clone(e,t),Math.abs(t.x)<_e.EPSILON8&&(t.x=0),Math.abs(t.y)<_e.EPSILON8&&(t.y=0),t},H.dot=function(e,t){return e.x*t.x+e.y*t.y},H.multiplyComponents=function(e,t,n){return n.x=e.x*t.x,n.y=e.y*t.y,n},H.divideComponents=function(e,t,n){return n.x=e.x/t.x,n.y=e.y/t.y,n},H.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n},H.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n},H.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n},H.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n},H.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t},H.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t};var V=new H;H.lerp=function(e,t,n,r){return H.multiplyByScalar(t,n,V),r=H.multiplyByScalar(e,1-n,r),H.add(V,r,r)};var X=new H,Y=new H;H.angleBetween=function(e,t){return H.normalize(e,X),H.normalize(t,Y),_e.acosClamped(H.dot(X,Y))};var k=new H;H.mostOrthogonalAxis=function(e,t){e=H.normalize(e,k);return H.abs(e,e),t=e.x<=e.y?H.clone(H.UNIT_X,t):H.clone(H.UNIT_Y,t)},H.equals=function(e,t){return e===t||C(e)&&C(t)&&e.x===t.x&&e.y===t.y},H.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]},H.equalsEpsilon=function(e,t,n,r){return e===t||C(e)&&C(t)&&_e.equalsEpsilon(e.x,t.x,n,r)&&_e.equalsEpsilon(e.y,t.y,n,r)},H.ZERO=Object.freeze(new H(0,0)),H.UNIT_X=Object.freeze(new H(1,0)),H.UNIT_Y=Object.freeze(new H(0,1)),H.prototype.clone=function(e){return H.clone(this,e)},H.prototype.equals=function(e){return H.equals(this,e)},H.prototype.equalsEpsilon=function(e,t,n){return H.equalsEpsilon(this,e,t,n)},H.prototype.toString=function(){return"("+this.x+", "+this.y+")"},H.prototype.set=function(e,t){this.x=e,this.y=t},H.prototype.fromArray=function(e,t){return this.x=e[t=void 0===t?0:t],this.y=e[t+1],this},H.prototype.toArray=function(e,t){return(e=void 0===e?[]:e)[t=void 0===t?0:t]=this.x,e[t+1]=this.y,e};var K={octEncodeInRange:function(e,t,n){var r;return n.x=e.x/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),n.y=e.y/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),e.z<0&&(r=n.x,e=n.y,n.x=(1-Math.abs(e))*_e.signNotZero(r),n.y=(1-Math.abs(r))*_e.signNotZero(e)),n.x=_e.toSNorm(n.x,t),n.y=_e.toSNorm(n.y,t),n},octEncode:function(e,t){return K.octEncodeInRange(e,255,t)}},Z=new H,J=new Uint8Array(1);function Q(e){return J[0]=e,J[0]}K.octEncodeToCartesian4=function(e,t){return K.octEncodeInRange(e,65535,Z),t.x=Q(Z.x*(1/256)),t.y=Q(Z.x),t.z=Q(Z.y*(1/256)),t.w=Q(Z.y),t},K.octDecodeInRange=function(e,t,n,r){return r.x=_e.fromSNorm(e,n),r.y=_e.fromSNorm(t,n),r.z=1-(Math.abs(r.x)+Math.abs(r.y)),r.z<0&&(n=r.x,r.x=(1-Math.abs(r.y))*_e.signNotZero(n),r.y=(1-Math.abs(n))*_e.signNotZero(r.y)),v.normalize(r,r)},K.octDecode=function(e,t,n){return K.octDecodeInRange(e,t,255,n)},K.octDecodeFromCartesian4=function(e,t){var n=e.x,r=e.y,i=e.z,e=e.w;return K.octDecodeInRange(256*n+r,256*i+e,65535,t)},K.octPackFloat=function(e){return 256*e.x+e.y};var $=new H;function ee(e){return e>>1^-(1&e)}function e(e){this._ellipsoid=M(e,ye.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}K.octEncodeFloat=function(e){return K.octEncode(e,$),K.octPackFloat($)},K.octDecodeFloat=function(e,t){var n=e/256,e=Math.floor(n);return K.octDecode(e,256*(n-e),t)},K.octPack=function(e,t,n,r){e=K.octEncodeFloat(e),t=K.octEncodeFloat(t),n=K.octEncode(n,$);return r.x=65536*n.x+e,r.y=65536*n.y+t,r},K.octUnpack=function(e,t,n,r){var i=e.x/65536,o=Math.floor(i),a=65536*(i-o),i=e.y/65536,e=Math.floor(i),i=65536*(i-e);K.octDecodeFloat(a,t),K.octDecodeFloat(i,n),K.octDecode(o,e,r)},K.compressTextureCoordinates=function(e){return 4096*(4095*e.x|0)+(4095*e.y|0)},K.decompressTextureCoordinates=function(e,t){var n=Math.floor(e/4096);return t.x=n/4095,t.y=(e-4096*n)/4095,t},K.zigZagDeltaDecode=function(e,t,n){for(var r=e.length,i=0,o=0,a=0,s=0;s<r;++s)i+=ee(e[s]),o+=ee(t[s]),e[s]=i,t[s]=o,C(n)&&(a+=ee(n[s]),n[s]=a)},Object.defineProperties(e.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),e.prototype.project=function(e,t){this._semimajorAxis;var n=e.longitude,r=e.latitude,e=e.height;return C(t)?(t.x=n,t.y=r,t.z=e,t):new v(n,r,e)},e.prototype.unproject=function(e,t){this._oneOverSemimajorAxis;var n=e.x,r=e.y,e=e.z;return C(t)?(t.longitude=n,t.latitude=r,t.height=e,t):new R(n,r,e)};var te=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});function ne(e,t){this.start=M(e,0),this.stop=M(t,0)}function re(e,t,n,r,i,o,a,s,u){this[0]=M(e,0),this[1]=M(r,0),this[2]=M(a,0),this[3]=M(t,0),this[4]=M(i,0),this[5]=M(s,0),this[6]=M(n,0),this[7]=M(o,0),this[8]=M(u,0)}re.packedLength=9,re.pack=function(e,t,n){return n=M(n,0),t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t[n++]=e[4],t[n++]=e[5],t[n++]=e[6],t[n++]=e[7],t[n++]=e[8],t},re.unpack=function(e,t,n){return t=M(t,0),(n=!C(n)?new re:n)[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n[4]=e[t++],n[5]=e[t++],n[6]=e[t++],n[7]=e[t++],n[8]=e[t++],n},re.clone=function(e,t){if(C(e))return C(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):new re(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])},re.fromArray=function(e,t,n){return t=M(t,0),(n=!C(n)?new re:n)[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],n[4]=e[t+4],n[5]=e[t+5],n[6]=e[t+6],n[7]=e[t+7],n[8]=e[t+8],n},re.fromColumnMajorArray=function(e,t){return re.clone(e,t)},re.fromRowMajorArray=function(e,t){return C(t)?(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t):new re(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},re.fromQuaternion=function(e,t){var n=e.x*e.x,r=e.x*e.y,i=e.x*e.z,o=e.x*e.w,a=e.y*e.y,s=e.y*e.z,u=e.y*e.w,c=e.z*e.z,l=e.z*e.w,h=e.w*e.w,f=n-a-c+h,m=2*(r-l),d=2*(i+u),e=2*(r+l),r=a-n-c+h,l=2*(s-o),u=2*(i-u),o=2*(s+o),h=-n-a+c+h;return C(t)?(t[0]=f,t[1]=e,t[2]=u,t[3]=m,t[4]=r,t[5]=o,t[6]=d,t[7]=l,t[8]=h,t):new re(f,m,d,e,r,l,u,o,h)},re.fromHeadingPitchRoll=function(e,t){var n=Math.cos(-e.pitch),r=Math.cos(-e.heading),i=Math.cos(e.roll),o=Math.sin(-e.pitch),a=Math.sin(-e.heading),s=Math.sin(e.roll),u=n*r,c=-i*a+s*o*r,l=s*a+i*o*r,h=n*a,e=i*r+s*o*a,a=-s*r+i*o*a,o=-o,s=s*n,n=i*n;return C(t)?(t[0]=u,t[1]=h,t[2]=o,t[3]=c,t[4]=e,t[5]=s,t[6]=l,t[7]=a,t[8]=n,t):new re(u,c,l,h,e,a,o,s,n)},re.fromScale=function(e,t){return C(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=e.y,t[5]=0,t[6]=0,t[7]=0,t[8]=e.z,t):new re(e.x,0,0,0,e.y,0,0,0,e.z)},re.fromUniformScale=function(e,t){return C(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=e,t):new re(e,0,0,0,e,0,0,0,e)},re.fromCrossProduct=function(e,t){return C(t)?(t[0]=0,t[1]=e.z,t[2]=-e.y,t[3]=-e.z,t[4]=0,t[5]=e.x,t[6]=e.y,t[7]=-e.x,t[8]=0,t):new re(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0)},re.fromRotationX=function(e,t){var n=Math.cos(e),e=Math.sin(e);return C(t)?(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=n,t[5]=e,t[6]=0,t[7]=-e,t[8]=n,t):new re(1,0,0,0,n,-e,0,e,n)},re.fromRotationY=function(e,t){var n=Math.cos(e),e=Math.sin(e);return C(t)?(t[0]=n,t[1]=0,t[2]=-e,t[3]=0,t[4]=1,t[5]=0,t[6]=e,t[7]=0,t[8]=n,t):new re(n,0,e,0,1,0,-e,0,n)},re.fromRotationZ=function(e,t){var n=Math.cos(e),e=Math.sin(e);return C(t)?(t[0]=n,t[1]=e,t[2]=0,t[3]=-e,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new re(n,-e,0,e,n,0,0,0,1)},re.toArray=function(e,t){return C(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},re.getElementIndex=function(e,t){return 3*e+t},re.getColumn=function(e,t,n){var r=3*t,i=e[r],t=e[1+r],r=e[2+r];return n.x=i,n.y=t,n.z=r,n},re.setColumn=function(e,t,n,r){t*=3;return(r=re.clone(e,r))[t]=n.x,r[1+t]=n.y,r[2+t]=n.z,r},re.getRow=function(e,t,n){var r=e[t],i=e[t+3],t=e[t+6];return n.x=r,n.y=i,n.z=t,n},re.setRow=function(e,t,n,r){return(r=re.clone(e,r))[t]=n.x,r[t+3]=n.y,r[t+6]=n.z,r};var ie=new v;re.getScale=function(e,t){return t.x=v.magnitude(v.fromElements(e[0],e[1],e[2],ie)),t.y=v.magnitude(v.fromElements(e[3],e[4],e[5],ie)),t.z=v.magnitude(v.fromElements(e[6],e[7],e[8],ie)),t};var oe=new v;re.getMaximumScale=function(e){return re.getScale(e,oe),v.maximumComponent(oe)},re.multiply=function(e,t,n){var r=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],i=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],o=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],a=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],s=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],u=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],c=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],l=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],t=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return n[0]=r,n[1]=i,n[2]=o,n[3]=a,n[4]=s,n[5]=u,n[6]=c,n[7]=l,n[8]=t,n},re.add=function(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n},re.subtract=function(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n},re.multiplyByVector=function(e,t,n){var r=t.x,i=t.y,o=t.z,a=e[0]*r+e[3]*i+e[6]*o,t=e[1]*r+e[4]*i+e[7]*o,o=e[2]*r+e[5]*i+e[8]*o;return n.x=a,n.y=t,n.z=o,n},re.multiplyByScalar=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n},re.multiplyByScale=function(e,t,n){return n[0]=e[0]*t.x,n[1]=e[1]*t.x,n[2]=e[2]*t.x,n[3]=e[3]*t.y,n[4]=e[4]*t.y,n[5]=e[5]*t.y,n[6]=e[6]*t.z,n[7]=e[7]*t.z,n[8]=e[8]*t.z,n},re.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t},re.transpose=function(e,t){var n=e[0],r=e[3],i=e[6],o=e[1],a=e[4],s=e[7],u=e[2],c=e[5],e=e[8];return t[0]=n,t[1]=r,t[2]=i,t[3]=o,t[4]=a,t[5]=s,t[6]=u,t[7]=c,t[8]=e,t};var ae=new v(1,1,1);re.getRotation=function(e,t){var n=v.divideComponents(ae,re.getScale(e,oe),oe);return t=re.multiplyByScale(e,n,t)};var se=[1,0,0],ue=[2,2,1];var ce=new re,le=new re;function he(e){var t;this.name="RuntimeError",this.message=e;try{throw new Error}catch(e){t=e.stack}this.stack=t}function fe(e,t,n,r){this.x=M(e,0),this.y=M(t,0),this.z=M(n,0),this.w=M(r,0)}re.computeEigenDecomposition=function(e,t){for(var n=_e.EPSILON20,r=0,i=0,o=(t=!C(t)?{}:t).unitary=re.clone(re.IDENTITY,t.unitary),a=t.diagonal=re.clone(e,t.diagonal),s=n*function(e){for(var t=0,n=0;n<9;++n){var r=e[n];t+=r*r}return Math.sqrt(t)}(a);i<10&&function(e){for(var t=0,n=0;n<3;++n){var r=e[re.getElementIndex(ue[n],se[n])];t+=2*r*r}return Math.sqrt(t)}(a)>s;)!function(e,t){for(var n=_e.EPSILON15,r=0,i=1,o=0;o<3;++o){var a=Math.abs(e[re.getElementIndex(ue[o],se[o])]);r<a&&(i=o,r=a)}var s=1,u=0,c=se[i],l=ue[i];Math.abs(e[re.getElementIndex(l,c)])>n&&(u=(n=(n=(e[re.getElementIndex(l,l)]-e[re.getElementIndex(c,c)])/2/e[re.getElementIndex(l,c)])<0?-1/(-n+Math.sqrt(1+n*n)):1/(n+Math.sqrt(1+n*n)))*(s=1/Math.sqrt(1+n*n))),(t=re.clone(re.IDENTITY,t))[re.getElementIndex(c,c)]=t[re.getElementIndex(l,l)]=s,t[re.getElementIndex(l,c)]=u,t[re.getElementIndex(c,l)]=-u}(a,ce),re.transpose(ce,le),re.multiply(a,ce,a),re.multiply(le,a,a),re.multiply(o,ce,o),2<++r&&(++i,r=0);return t},re.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t},re.determinant=function(e){var t=e[0],n=e[3],r=e[6],i=e[1],o=e[4],a=e[7],s=e[2],u=e[5],e=e[8];return t*(o*e-u*a)+i*(u*r-n*e)+s*(n*a-o*r)},re.inverse=function(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],e=re.determinant(e);return t[0]=a*l-c*s,t[1]=c*i-r*l,t[2]=r*s-a*i,t[3]=u*s-o*l,t[4]=n*l-u*i,t[5]=o*i-n*s,t[6]=o*c-u*a,t[7]=u*r-n*c,t[8]=n*a-o*r,re.multiplyByScalar(t,1/e,t)},re.equals=function(e,t){return e===t||C(e)&&C(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},re.equalsEpsilon=function(e,t,n){return n=M(n,0),e===t||C(e)&&C(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n&&Math.abs(e[4]-t[4])<=n&&Math.abs(e[5]-t[5])<=n&&Math.abs(e[6]-t[6])<=n&&Math.abs(e[7]-t[7])<=n&&Math.abs(e[8]-t[8])<=n},re.IDENTITY=Object.freeze(new re(1,0,0,0,1,0,0,0,1)),re.ZERO=Object.freeze(new re(0,0,0,0,0,0,0,0,0)),re.COLUMN0ROW0=0,re.COLUMN0ROW1=1,re.COLUMN0ROW2=2,re.COLUMN1ROW0=3,re.COLUMN1ROW1=4,re.COLUMN1ROW2=5,re.COLUMN2ROW0=6,re.COLUMN2ROW1=7,re.COLUMN2ROW2=8,Object.defineProperties(re.prototype,{length:{get:function(){return re.packedLength}}}),re.prototype.clone=function(e){return re.clone(this,e)},re.prototype.equals=function(e){return re.equals(this,e)},re.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]&&e[4]===t[n+4]&&e[5]===t[n+5]&&e[6]===t[n+6]&&e[7]===t[n+7]&&e[8]===t[n+8]},re.prototype.equalsEpsilon=function(e,t){return re.equalsEpsilon(this,e,t)},re.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+")\n("+this[1]+", "+this[4]+", "+this[7]+")\n("+this[2]+", "+this[5]+", "+this[8]+")"},C(Object.create)&&((he.prototype=Object.create(Error.prototype)).constructor=he),he.prototype.toString=function(){var e=this.name+": "+this.message;return C(this.stack)&&(e+="\n"+this.stack.toString()),e},fe.fromElements=function(e,t,n,r,i){return C(i)?(i.x=e,i.y=t,i.z=n,i.w=r,i):new fe(e,t,n,r)},fe.fromColor=function(e,t){return C(t)?(t.x=e.red,t.y=e.green,t.z=e.blue,t.w=e.alpha,t):new fe(e.red,e.green,e.blue,e.alpha)},fe.clone=function(e,t){if(C(e))return C(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new fe(e.x,e.y,e.z,e.w)},fe.packedLength=4,fe.pack=function(e,t,n){return n=M(n,0),t[n++]=e.x,t[n++]=e.y,t[n++]=e.z,t[n]=e.w,t},fe.unpack=function(e,t,n){return t=M(t,0),(n=!C(n)?new fe:n).x=e[t++],n.y=e[t++],n.z=e[t++],n.w=e[t],n},fe.packArray=function(e,t){var n=e.length,r=4*n;if(C(t)){if(!Array.isArray(t)&&t.length!==r)throw new o("If result is a typed array, it must have exactly array.length * 4 elements");t.length!==r&&(t.length=r)}else t=new Array(r);for(var i=0;i<n;++i)fe.pack(e[i],t,4*i);return t},fe.unpackArray=function(e,t){var n=e.length;C(t)?t.length=n/4:t=new Array(n/4);for(var r=0;r<n;r+=4){var i=r/4;t[i]=fe.unpack(e,r,t[i])}return t},fe.fromArray=fe.unpack,fe.maximumComponent=function(e){return Math.max(e.x,e.y,e.z,e.w)},fe.minimumComponent=function(e){return Math.min(e.x,e.y,e.z,e.w)},fe.minimumByComponent=function(e,t,n){return n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n.z=Math.min(e.z,t.z),n.w=Math.min(e.w,t.w),n},fe.maximumByComponent=function(e,t,n){return n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n.z=Math.max(e.z,t.z),n.w=Math.max(e.w,t.w),n},fe.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},fe.magnitude=function(e){return Math.sqrt(fe.magnitudeSquared(e))};var me=new fe;fe.distance=function(e,t){return fe.subtract(e,t,me),fe.magnitude(me)},fe.distanceSquared=function(e,t){return fe.subtract(e,t,me),fe.magnitudeSquared(me)},fe.normalize=function(e,t){var n=fe.magnitude(e);return 0!=n?(t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,t.w=e.w/n):fe.clone(e,t),Math.abs(t.x)<_e.EPSILON8&&(t.x=0),Math.abs(t.y)<_e.EPSILON8&&(t.y=0),Math.abs(t.z)<_e.EPSILON8&&(t.z=0),Math.abs(t.w)<_e.EPSILON8&&(t.w=0),t},fe.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},fe.multiplyComponents=function(e,t,n){return n.x=e.x*t.x,n.y=e.y*t.y,n.z=e.z*t.z,n.w=e.w*t.w,n},fe.divideComponents=function(e,t,n){return n.x=e.x/t.x,n.y=e.y/t.y,n.z=e.z/t.z,n.w=e.w/t.w,n},fe.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n},fe.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n},fe.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n},fe.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n},fe.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},fe.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t.w=Math.abs(e.w),t};var de=new fe;fe.lerp=function(e,t,n,r){return fe.multiplyByScalar(t,n,de),r=fe.multiplyByScalar(e,1-n,r),fe.add(de,r,r)};var pe=new fe;fe.mostOrthogonalAxis=function(e,t){e=fe.normalize(e,pe);return fe.abs(e,e),t=e.x<=e.y?e.x<=e.z?e.x<=e.w?fe.clone(fe.UNIT_X,t):fe.clone(fe.UNIT_W,t):e.z<=e.w?fe.clone(fe.UNIT_Z,t):fe.clone(fe.UNIT_W,t):e.y<=e.z?e.y<=e.w?fe.clone(fe.UNIT_Y,t):fe.clone(fe.UNIT_W,t):e.z<=e.w?fe.clone(fe.UNIT_Z,t):fe.clone(fe.UNIT_W,t)},fe.equals=function(e,t){return e===t||C(e)&&C(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},fe.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]&&e.z===t[n+2]&&e.w===t[n+3]},fe.equalsEpsilon=function(e,t,n,r){return e===t||C(e)&&C(t)&&_e.equalsEpsilon(e.x,t.x,n,r)&&_e.equalsEpsilon(e.y,t.y,n,r)&&_e.equalsEpsilon(e.z,t.z,n,r)&&_e.equalsEpsilon(e.w,t.w,n,r)},fe.ZERO=Object.freeze(new fe(0,0,0,0)),fe.UNIT_X=Object.freeze(new fe(1,0,0,0)),fe.UNIT_Y=Object.freeze(new fe(0,1,0,0)),fe.UNIT_Z=Object.freeze(new fe(0,0,1,0)),fe.UNIT_W=Object.freeze(new fe(0,0,0,1)),fe.WHITE=Object.freeze(new fe(1,1,1,1)),fe.prototype.clone=function(e){return fe.clone(this,e)},fe.prototype.equals=function(e){return fe.equals(this,e)},fe.prototype.equalsEpsilon=function(e,t,n){return fe.equalsEpsilon(this,e,t,n)},fe.prototype.toString=function(e){if(C(e)&&16==e){var t=parseInt(255*this.x).toString(16),n=parseInt(255*this.y).toString(16),e=parseInt(255*this.z).toString(16);return"00".substring(0,2-t.length)+t+"00".substring(0,2-n.length)+n+"00".substring(0,2-e.length)+e}return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var Ee=new Float32Array(1);function Re(e,t,n,r,i,o,a,s,u,c,l,h,f,m,d,p){this[0]=M(e,0),this[1]=M(i,0),this[2]=M(u,0),this[3]=M(f,0),this[4]=M(t,0),this[5]=M(o,0),this[6]=M(c,0),this[7]=M(m,0),this[8]=M(n,0),this[9]=M(a,0),this[10]=M(l,0),this[11]=M(d,0),this[12]=M(r,0),this[13]=M(s,0),this[14]=M(h,0),this[15]=M(p,0)}fe.packFloat=function(e,t){if(C(t)||(t=new fe),Ee[0]=e,0===(e=Ee[0]))return fe.clone(fe.ZERO,t);var n,r=e<0?1:0;isFinite(e)?(e=Math.abs(e),n=Math.floor(_e.logBase(e,10))+1,e/=Math.pow(10,n)):(e=.1,n=38);e*=256;return t.x=Math.floor(e),e=256*(e-t.x),t.y=Math.floor(e),e=256*(e-t.y),t.z=Math.floor(e),t.w=2*(n+38)+r,t},fe.unpackFloat=function(e){var t=e.w/2,n=Math.floor(t),r=-(r=2*(r=2*(t-n))-1);if(38<=(n-=38))return r<0?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY;t=r*e.x*(1/256);return t+=r*e.y*(1/65536),(t+=r*e.z*(1/16777216))*Math.pow(10,n)},Re.packedLength=16,Re.pack=function(e,t,n){return n=M(n,0),t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t[n++]=e[4],t[n++]=e[5],t[n++]=e[6],t[n++]=e[7],t[n++]=e[8],t[n++]=e[9],t[n++]=e[10],t[n++]=e[11],t[n++]=e[12],t[n++]=e[13],t[n++]=e[14],t[n]=e[15],t},Re.unpack=function(e,t,n){return t=M(t,0),(n=!C(n)?new Re:n)[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n[4]=e[t++],n[5]=e[t++],n[6]=e[t++],n[7]=e[t++],n[8]=e[t++],n[9]=e[t++],n[10]=e[t++],n[11]=e[t++],n[12]=e[t++],n[13]=e[t++],n[14]=e[t++],n[15]=e[t],n},Re.clone=function(e,t){if(C(e))return C(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):new Re(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},Re.fromArray=Re.unpack,Re.fromColumnMajorArray=function(e,t){return Re.clone(e,t)},Re.fromRowMajorArray=function(e,t){return C(t)?(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t):new Re(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},Re.fromRotationTranslation=function(e,t,n){return t=M(t,v.ZERO),C(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=0,n[4]=e[3],n[5]=e[4],n[6]=e[5],n[7]=0,n[8]=e[6],n[9]=e[7],n[10]=e[8],n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,n):new Re(e[0],e[3],e[6],t.x,e[1],e[4],e[7],t.y,e[2],e[5],e[8],t.z,0,0,0,1)},Re.fromTranslationQuaternionRotationScale=function(e,t,n,r){C(r)||(r=new Re);var i=n.x,o=n.y,a=n.z,s=t.x*t.x,u=t.x*t.y,c=t.x*t.z,l=t.x*t.w,h=t.y*t.y,f=t.y*t.z,m=t.y*t.w,d=t.z*t.z,p=t.z*t.w,E=t.w*t.w,_=2*(u-p),n=2*(c+m),t=2*(u+p),u=h-s-d+E,p=2*(f-l),m=2*(c-m),f=2*(f+l),l=-s-h+d+E;return r[0]=(s-h-d+E)*i,r[1]=t*i,r[2]=m*i,r[3]=0,r[4]=_*o,r[5]=u*o,r[6]=f*o,r[7]=0,r[8]=n*a,r[9]=p*a,r[10]=l*a,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,r},Re.fromTranslationRotationScale=function(e,t){return Re.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t)},Re.fromTranslation=function(e,t){return Re.fromRotationTranslation(re.IDENTITY,e,t)},Re.fromScale=function(e,t){return C(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e.y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e.z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new Re(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},Re.fromUniformScale=function(e,t){return C(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new Re(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)};var Te=new v,Ae=new v,Se=new v;Re.fromObserver=function(e,t){var n=e.position,r=e.direction,i=e.up;v.normalize(r,Te),v.normalize(v.cross(Te,i,Ae),Ae),v.normalize(v.cross(Ae,Te,Se),Se);var o=Ae.x,a=Ae.y,s=Ae.z,u=Te.x,c=Te.y,l=Te.z,h=Se.x,f=Se.y,m=Se.z,d=n.x,e=n.y,r=n.z,i=o*-d+a*-e+s*-r,n=h*-d+f*-e+m*-r,r=u*d+c*e+l*r;return C(t)?(t[0]=o,t[1]=h,t[2]=-u,t[3]=0,t[4]=a,t[5]=f,t[6]=-c,t[7]=0,t[8]=s,t[9]=m,t[10]=-l,t[11]=0,t[12]=i,t[13]=n,t[14]=r,t[15]=1,t):new Re(o,a,s,i,h,f,m,n,-u,-c,-l,r,0,0,0,1)},Re.computePerspectiveFieldOfView=function(e,t,n,r,i){var o=1/Math.tan(.5*e),e=(r+n)/(n-r),r=2*r*n/(n-r);return i[0]=o/t,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=e,i[11]=-1,i[12]=0,i[13]=0,i[14]=r,i[15]=0,i},Re.computeOrthographicOffCenter=function(e,t,n,r,i,o,a){var s=1/(t-e),u=1/(r-n),c=1/(o-i),e=-(t+e)*s,n=-(r+n)*u,i=-(o+i)*c;return u*=2,c*=-2,a[0]=s*=2,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=u,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=c,a[11]=0,a[12]=e,a[13]=n,a[14]=i,a[15]=1,a},Re.computePerspectiveOffCenter=function(e,t,n,r,i,o,a){var s=2*i/(r-n),u=(t+e)/(t-e),r=(r+n)/(r-n),n=-(o+i)/(o-i),o=-2*o*i/(o-i);return a[0]=2*i/(t-e),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=s,a[6]=0,a[7]=0,a[8]=u,a[9]=r,a[10]=n,a[11]=-1,a[12]=0,a[13]=0,a[14]=o,a[15]=0,a},Re.computeInfinitePerspectiveOffCenter=function(e,t,n,r,i,o){var a=2*i/(r-n),s=(t+e)/(t-e),r=(r+n)/(r-n),n=-2*i;return o[0]=2*i/(t-e),o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a,o[6]=0,o[7]=0,o[8]=s,o[9]=r,o[10]=-1,o[11]=-1,o[12]=0,o[13]=0,o[14]=n,o[15]=0,o},Re.computeViewportTransformation=function(e,t,n,r){C(r)||(r=new Re),e=M(e,M.EMPTY_OBJECT);var i=M(e.x,0),o=M(e.y,0),a=M(e.width,0),s=M(e.height,0);t=M(t,0);var u=.5*a,e=.5*s,a=.5*((n=M(n,1))-t),s=e,n=a,i=i+u,e=o+e,a=t+a;return r[0]=u,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=n,r[11]=0,r[12]=i,r[13]=e,r[14]=a,r[15]=1,r},Re.computeView=function(e,t,n,r,i){return i[0]=r.x,i[1]=n.x,i[2]=-t.x,i[3]=0,i[4]=r.y,i[5]=n.y,i[6]=-t.y,i[7]=0,i[8]=r.z,i[9]=n.z,i[10]=-t.z,i[11]=0,i[12]=-v.dot(r,e),i[13]=-v.dot(n,e),i[14]=v.dot(t,e),i[15]=1,i};var Oe=new v,Ie=new v,Ne=new v;Re.computeViewByLookAt=function(e,t,n,r){var i=Oe,o=Ie,a=Ne;return v.subtract(e,t,i),v.normalize(i,i),v.cross(n,i,a),v.normalize(a,a),v.cross(i,a,o),v.normalize(o,o),Re.computeView(e,i,o,a,r)},Re.computeViewByLookAtEx=function(e,t,n,r){var i=Oe,o=Ie,a=Ne;return v.subtract(t,e,i),v.normalize(i,i),v.cross(n,i,a),v.normalize(a,a),v.cross(i,a,o),v.normalize(o,o),Re.computeView(e,i,o,a,r)},Re.toArray=function(e,t){return C(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},Re.getElementIndex=function(e,t){return 4*e+t},Re.getColumn=function(e,t,n){var r=4*t,i=e[r],o=e[1+r],t=e[2+r],r=e[3+r];return n.x=i,n.y=o,n.z=t,n.w=r,n},Re.setColumn=function(e,t,n,r){t*=4;return(r=Re.clone(e,r))[t]=n.x,r[1+t]=n.y,r[2+t]=n.z,r[3+t]=n.w,r},Re.setTranslation=function(e,t,n){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=e[15],n};var xe=new v;Re.setScale=function(e,t,n){var r=Re.getScale(e,xe),r=v.divideComponents(t,r,xe);return Re.multiplyByScale(e,r,n)},Re.getRow=function(e,t,n){var r=e[t],i=e[t+4],o=e[t+8],t=e[t+12];return n.x=r,n.y=i,n.z=o,n.w=t,n},Re.setRow=function(e,t,n,r){return(r=Re.clone(e,r))[t]=n.x,r[t+4]=n.y,r[t+8]=n.z,r[t+12]=n.w,r};var we=new v;Re.getScale=function(e,t){return t.x=v.magnitude(v.fromElements(e[0],e[1],e[2],we)),t.y=v.magnitude(v.fromElements(e[4],e[5],e[6],we)),t.z=v.magnitude(v.fromElements(e[8],e[9],e[10],we)),t};var Ce=new v;Re.getMaximumScale=function(e){return Re.getScale(e,Ce),v.maximumComponent(Ce)},Re.multiply=function(e,t,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],m=e[10],d=e[11],p=e[12],E=e[13],_=e[14],y=e[15],g=t[0],R=t[1],T=t[2],A=t[3],S=t[4],O=t[5],I=t[6],N=t[7],x=t[8],w=t[9],C=t[10],M=t[11],v=t[12],b=t[13],P=t[14],U=t[15],D=i*g+u*R+f*T+E*A,F=o*g+c*R+m*T+_*A,z=a*g+l*R+d*T+y*A,L=r*S+s*O+h*I+p*N,e=i*S+u*O+f*I+E*N,t=o*S+c*O+m*I+_*N,S=a*S+l*O+d*I+y*N,O=r*x+s*w+h*C+p*M,I=i*x+u*w+f*C+E*M,N=o*x+c*w+m*C+_*M,C=a*x+l*w+d*C+y*M,M=r*v+s*b+h*P+p*U,E=i*v+u*b+f*P+E*U,_=o*v+c*b+m*P+_*U,U=a*v+l*b+d*P+y*U;return n[0]=r*g+s*R+h*T+p*A,n[1]=D,n[2]=F,n[3]=z,n[4]=L,n[5]=e,n[6]=t,n[7]=S,n[8]=O,n[9]=I,n[10]=N,n[11]=C,n[12]=M,n[13]=E,n[14]=_,n[15]=U,n},Re.add=function(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n[9]=e[9]+t[9],n[10]=e[10]+t[10],n[11]=e[11]+t[11],n[12]=e[12]+t[12],n[13]=e[13]+t[13],n[14]=e[14]+t[14],n[15]=e[15]+t[15],n},Re.subtract=function(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n[9]=e[9]-t[9],n[10]=e[10]-t[10],n[11]=e[11]-t[11],n[12]=e[12]-t[12],n[13]=e[13]-t[13],n[14]=e[14]-t[14],n[15]=e[15]-t[15],n},Re.multiplyTransformation=function(e,t,n){var r=e[0],i=e[1],o=e[2],a=e[4],s=e[5],u=e[6],c=e[8],l=e[9],h=e[10],f=e[12],m=e[13],d=e[14],p=t[0],E=t[1],_=t[2],y=t[4],g=t[5],R=t[6],T=t[8],A=t[9],S=t[10],O=t[12],I=t[13],N=t[14],x=i*p+s*E+l*_,w=o*p+u*E+h*_,e=r*y+a*g+c*R,t=i*y+s*g+l*R,y=o*y+u*g+h*R,g=r*T+a*A+c*S,R=i*T+s*A+l*S,S=o*T+u*A+h*S,f=r*O+a*I+c*N+f,m=i*O+s*I+l*N+m,d=o*O+u*I+h*N+d;return n[0]=r*p+a*E+c*_,n[1]=x,n[2]=w,n[3]=0,n[4]=e,n[5]=t,n[6]=y,n[7]=0,n[8]=g,n[9]=R,n[10]=S,n[11]=0,n[12]=f,n[13]=m,n[14]=d,n[15]=1,n},Re.multiplyByMatrix3=function(e,t,n){var r=e[0],i=e[1],o=e[2],a=e[4],s=e[5],u=e[6],c=e[8],l=e[9],h=e[10],f=t[0],m=t[1],d=t[2],p=t[3],E=t[4],_=t[5],y=t[6],g=t[7],R=t[8],T=i*f+s*m+l*d,A=o*f+u*m+h*d,S=r*p+a*E+c*_,t=i*p+s*E+l*_,E=o*p+u*E+h*_,_=r*y+a*g+c*R,l=i*y+s*g+l*R,R=o*y+u*g+h*R;return n[0]=r*f+a*m+c*d,n[1]=T,n[2]=A,n[3]=0,n[4]=S,n[5]=t,n[6]=E,n[7]=0,n[8]=_,n[9]=l,n[10]=R,n[11]=0,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n},Re.multiplyByTranslation=function(e,t,n){var r=t.x,i=t.y,o=t.z,a=r*e[0]+i*e[4]+o*e[8]+e[12],t=r*e[1]+i*e[5]+o*e[9]+e[13],o=r*e[2]+i*e[6]+o*e[10]+e[14];return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=a,n[13]=t,n[14]=o,n[15]=e[15],n};var Me=new v;Re.multiplyByUniformScale=function(e,t,n){return Me.x=t,Me.y=t,Me.z=t,Re.multiplyByScale(e,Me,n)},Re.multiplyByScale=function(e,t,n){var r=t.x,i=t.y,t=t.z;return 1===r&&1===i&&1===t?Re.clone(e,n):(n[0]=r*e[0],n[1]=r*e[1],n[2]=r*e[2],n[3]=0,n[4]=i*e[4],n[5]=i*e[5],n[6]=i*e[6],n[7]=0,n[8]=t*e[8],n[9]=t*e[9],n[10]=t*e[10],n[11]=0,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=1,n)},Re.multiplyByVector=function(e,t,n){var r=t.x,i=t.y,o=t.z,a=C(t.w)?t.w:1,s=e[0]*r+e[4]*i+e[8]*o+e[12]*a,u=e[1]*r+e[5]*i+e[9]*o+e[13]*a,t=e[2]*r+e[6]*i+e[10]*o+e[14]*a,a=e[3]*r+e[7]*i+e[11]*o+e[15]*a;return n.x=s,n.y=u,n.z=t,C(n.w)&&(n.w=a),n},Re.multiplyByPointAsVector=function(e,t,n){var r=t.x,i=t.y,o=t.z,a=e[0]*r+e[4]*i+e[8]*o,t=e[1]*r+e[5]*i+e[9]*o,o=e[2]*r+e[6]*i+e[10]*o;return n.x=a,n.y=t,n.z=o,n},Re.multiplyByPoint=function(e,t,n){var r=t.x,i=t.y,o=t.z,a=e[0]*r+e[4]*i+e[8]*o+e[12],t=e[1]*r+e[5]*i+e[9]*o+e[13],e=e[2]*r+e[6]*i+e[10]*o+e[14];return n.x=a,n.y=t,n.z=e,n},Re.multiplyByScalar=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11]*t,n[12]=e[12]*t,n[13]=e[13]*t,n[14]=e[14]*t,n[15]=e[15]*t,n},Re.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},Re.transpose=function(e,t){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[10]=e[10],t[11]=e[14],t[12]=i,t[13]=a,t[14]=s,t[15]=e[15],t},Re.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t[9]=Math.abs(e[9]),t[10]=Math.abs(e[10]),t[11]=Math.abs(e[11]),t[12]=Math.abs(e[12]),t[13]=Math.abs(e[13]),t[14]=Math.abs(e[14]),t[15]=Math.abs(e[15]),t},Re.equals=function(e,t){return e===t||C(e)&&C(t)&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[3]===t[3]&&e[7]===t[7]&&e[11]===t[11]&&e[15]===t[15]},Re.equalsEpsilon=function(e,t,n){return n=M(n,0),e===t||C(e)&&C(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n&&Math.abs(e[4]-t[4])<=n&&Math.abs(e[5]-t[5])<=n&&Math.abs(e[6]-t[6])<=n&&Math.abs(e[7]-t[7])<=n&&Math.abs(e[8]-t[8])<=n&&Math.abs(e[9]-t[9])<=n&&Math.abs(e[10]-t[10])<=n&&Math.abs(e[11]-t[11])<=n&&Math.abs(e[12]-t[12])<=n&&Math.abs(e[13]-t[13])<=n&&Math.abs(e[14]-t[14])<=n&&Math.abs(e[15]-t[15])<=n},Re.getTranslation=function(e,t){return t.x=e[12],t.y=e[13],t.z=e[14],t},Re.getMatrix3=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t};var ve=new re,be=new re,Pe=new fe,Ue=new fe(0,0,0,1);function De(e,t){this.center=v.clone(M(e,v.ZERO)),this.radius=M(t,0)}Re.inverse=function(e,t){var n=e[0],r=e[4],i=e[8],o=e[12],a=e[1],s=e[5],u=e[9],c=e[13],l=e[2],h=e[6],f=e[10],m=e[14],d=e[3],p=e[7],E=e[11],_=e[15],y=f*_,g=m*E,R=h*_,T=m*p,A=h*E,S=f*p,O=l*_,I=m*d,N=l*E,x=f*d,w=l*p,C=h*d,M=y*s+T*u+A*c-(g*s+R*u+S*c),v=g*a+O*u+x*c-(y*a+I*u+N*c),b=R*a+I*s+w*c-(T*a+O*s+C*c),P=S*a+N*s+C*u-(A*a+x*s+w*u),U=g*r+R*i+S*o-(y*r+T*i+A*o),D=y*n+I*i+N*o-(g*n+O*i+x*o),F=T*n+O*r+C*o-(R*n+I*r+w*o),z=A*n+x*r+w*i-(S*n+N*r+C*i),L=(y=i*c)*p+(T=o*s)*E+(A=r*u)*_-((g=o*u)*p+(R=r*c)*E+(S=i*s)*_),u=g*d+(O=n*c)*E+(x=i*a)*_-(y*d+(I=o*a)*E+(N=n*u)*_),_=R*d+I*p+(w=n*s)*_-(T*d+O*p+(C=r*a)*_),p=S*d+N*p+C*E-(A*d+x*p+w*E),E=R*f+S*m+g*h-(A*m+y*h+T*f),g=N*m+y*l+I*f-(O*f+x*m+g*l),I=O*h+C*m+T*l-(w*m+R*l+I*h),l=w*f+A*l+x*h-(N*h+C*f+S*l),o=n*M+r*v+i*b+o*P;return Math.abs(o)<_e.EPSILON21&&re.equalsEpsilon(Re.getMatrix3(e,ve),be,_e.EPSILON7)&&fe.equals(Re.getRow(e,3,Pe),Ue)?(t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=1):(t[0]=M*(o=1/o),t[1]=v*o,t[2]=b*o,t[3]=P*o,t[4]=U*o,t[5]=D*o,t[6]=F*o,t[7]=z*o,t[8]=L*o,t[9]=u*o,t[10]=_*o,t[11]=p*o,t[12]=E*o,t[13]=g*o,t[14]=I*o,t[15]=l*o),t},Re.inverseTransformation=function(e,t){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],c=e[9],l=e[10],h=e[12],f=e[13],m=e[14],d=-n*h-r*f-i*m,e=-o*h-a*f-s*m,m=-u*h-c*f-l*m;return t[0]=n,t[1]=o,t[2]=u,t[3]=0,t[4]=r,t[5]=a,t[6]=c,t[7]=0,t[8]=i,t[9]=s,t[10]=l,t[11]=0,t[12]=d,t[13]=e,t[14]=m,t[15]=1,t},Re.IDENTITY=Object.freeze(new Re(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),Re.ZERO=Object.freeze(new Re(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),Re.TRANSYZ=Object.freeze(new Re(1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1)),Re.COLUMN0ROW0=0,Re.COLUMN0ROW1=1,Re.COLUMN0ROW2=2,Re.COLUMN0ROW3=3,Re.COLUMN1ROW0=4,Re.COLUMN1ROW1=5,Re.COLUMN1ROW2=6,Re.COLUMN1ROW3=7,Re.COLUMN2ROW0=8,Re.COLUMN2ROW1=9,Re.COLUMN2ROW2=10,Re.COLUMN2ROW3=11,Re.COLUMN3ROW0=12,Re.COLUMN3ROW1=13,Re.COLUMN3ROW2=14,Re.COLUMN3ROW3=15,Object.defineProperties(Re.prototype,{length:{get:function(){return Re.packedLength}}}),Re.prototype.clone=function(e){return Re.clone(this,e)},Re.prototype.equals=function(e){return Re.equals(this,e)},Re.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]&&e[4]===t[n+4]&&e[5]===t[n+5]&&e[6]===t[n+6]&&e[7]===t[n+7]&&e[8]===t[n+8]&&e[9]===t[n+9]&&e[10]===t[n+10]&&e[11]===t[n+11]&&e[12]===t[n+12]&&e[13]===t[n+13]&&e[14]===t[n+14]&&e[15]===t[n+15]},Re.prototype.equalsEpsilon=function(e,t){return Re.equalsEpsilon(this,e,t)},Re.prototype.toString=function(){return"("+this[0]+", "+this[4]+", "+this[8]+", "+this[12]+")\n("+this[1]+", "+this[5]+", "+this[9]+", "+this[13]+")\n("+this[2]+", "+this[6]+", "+this[10]+", "+this[14]+")\n("+this[3]+", "+this[7]+", "+this[11]+", "+this[15]+")"},Re.from_tnbp=function(e,t,n,r,i){return C(i)?(i[0]=e.x,i[4]=t.x,i[8]=n.x,i[12]=r.x,i[1]=e.y,i[5]=t.y,i[9]=n.y,i[13]=r.y,i[2]=e.z,i[6]=t.z,i[10]=n.z,i[14]=r.z,i[3]=0,i[7]=0,i[11]=0,i[15]=1):i=new Re(e.x,t.x,n.x,r.x,e.y,t.y,n.y,r.y,e.z,t.z,n.z,r.z,0,0,0,1),i},Re.rotate_axis_rh=function(e,t,n){var r=Re.clone(Re.IDENTITY),i=v.distance(t,e),o=Math.cos(n),a=1-o,s=Math.sin(n),u=(t.x-e.x)/i,n=(t.y-e.y)/i,i=(t.z-e.z)/i;r[0]=u*u*a+o,r[1]=u*n*a-i*s,r[2]=u*i*a+n*s,r[4]=n*u*a+i*s,r[5]=n*n*a+o,r[6]=n*i*a-u*s,r[8]=i*u*a-n*s,r[9]=i*n*a+u*s,r[10]=i*i*a+o;o=Re.translation(-e.x,-e.y,-e.z),e=Re.translation(e.x,e.y,e.z);return Re.multiply(e,Re.multiply(r,o,new Re),new Re)},Re.rotate_axis_lh=function(e,t,n){var r=Re.clone(Re.IDENTITY),i=v.distance(t,e),o=Math.cos(n),a=1-o,s=Math.sin(n),u=(t.x-e.x)/i,n=(t.y-e.y)/i,i=(t.z-e.z)/i;r[0]=u*u*a+o,r[1]=u*n*a+i*s,r[2]=u*i*a-n*s,r[4]=n*u*a-i*s,r[5]=n*n*a+o,r[6]=n*i*a+u*s,r[8]=i*u*a+n*s,r[9]=i*n*a-u*s,r[10]=i*i*a+o;o=Re.translation(-e.x,-e.y,-e.z),e=Re.translation(e.x,e.y,e.z);return Re.multiply(o,Re.multiply(r,e,new Re),new Re)},Re.translation=function(e,t,n,r){r=Re.clone(Re.IDENTITY,r);return r[12]=e,r[13]=t,r[14]=n,r},Re.scaling=function(e,t,n,r){r=Re.clone(Re.IDENTITY,r);return r[0]=e,r[5]=t,r[10]=n,r},Re.rotate_y=function(e){var t=Re.clone(Re.IDENTITY);return t[0]=t[10]=Math.cos(e),t[2]=t[8]=Math.sin(e),t[2]=-t[2],t},Re.perspective=function(e,t,n,r,i){var o=1/Math.tan(.5*e),e=r/(r-n),r=r*n/(n-r);return i[0]=o/t,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=e,i[11]=-1,i[12]=0,i[13]=0,i[14]=r,i[15]=0,i},Re.prototype.makeRotationAxis=function(e,t,n){C(n)||(n=new Re);var r=Math.cos(t),i=Math.sin(t),o=1-r,a=e.x,s=e.y,u=e.z,t=o*a,e=o*s;return n[0]=t*a+r,n[1]=t*s+i*u,n[2]=t*u-i*s,n[3]=0,n[4]=t*s-i*u,n[5]=e*s+r,n[6]=e*u+i*a,n[7]=0,n[8]=t*u+i*s,n[9]=e*u-i*a,n[10]=o*u*u+r,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},Re.transformNormal=function(e,t,n){C(n)||(n=new v);var r=new v;r.x=t[0]*e.x+t[4]*e.y+t[8]*e.z+t[12],r.y=t[1]*e.x+t[5]*e.y+t[9]*e.z+t[13],r.z=t[2]*e.x+t[6]*e.y+t[10]*e.z+t[14];t=t[3]*e.x+t[7]*e.y+t[11]*e.z+t[15];return r.x*=t=1/t,r.y*=t,r.z*=t,v.clone(r,n),n},Re.rotate_normal=function(e,t,n){C(n)||(n=new v);var r=new v;return r.x=t[0]*e.x+t[4]*e.y+t[8]*e.z,r.y=t[1]*e.x+t[5]*e.y+t[9]*e.z,r.z=t[2]*e.x+t[6]*e.y+t[10]*e.z,v.clone(r,n),r},Re.fromQuaternion=function(e,t){void 0===t&&(t=new Re),t=Re.clone(Re.IDENTITY,t);var n=e.x*e.x,r=e.x*e.y,i=e.x*e.z,o=e.x*e.w,a=e.y*e.y,s=e.y*e.z,u=e.y*e.w,c=e.z*e.z,e=e.z*e.w;return t[0]=1-2*(a+c),t[1]=2*(r+e),t[2]=2*(i-u),t[4]=2*(r-e),t[5]=1-2*(n+c),t[6]=2*(s+o),t[8]=2*(i+u),t[9]=2*(s-o),t[10]=1-2*(n+a),t[3]=t[7]=t[11]=t[12]=t[13]=t[14]=0,t[15]=1,t};var Fe=new v,ze=new v,Le=new v,Be=new v,qe=new v,Ge=new v,je=new v,He=new v,We=new v,Ve=new v,Xe=new v,Ye=new v,ke=4/3*_e.PI;De.fromPoints=function(e,t){if(C(t)||(t=new De),!C(e)||0===e.length)return t.center=v.clone(v.ZERO,t.center),t.radius=0,t;for(var n=v.clone(e[0],je),r=v.clone(n,Fe),i=v.clone(n,ze),o=v.clone(n,Le),a=v.clone(n,Be),s=v.clone(n,qe),u=v.clone(n,Ge),c=e.length,l=1;l<c;l++){v.clone(e[l],n);var h=n.x,f=n.y,m=n.z;h<r.x&&v.clone(n,r),h>a.x&&v.clone(n,a),f<i.y&&v.clone(n,i),f>s.y&&v.clone(n,s),m<o.z&&v.clone(n,o),m>u.z&&v.clone(n,u)}var d=v.magnitudeSquared(v.subtract(a,r,He)),p=v.magnitudeSquared(v.subtract(s,i,He)),E=v.magnitudeSquared(v.subtract(u,o,He)),_=r,y=a,g=d;d<p&&(g=p,_=i,y=s),g<E&&(g=E,_=o,y=u);var R=We;R.x=.5*(_.x+y.x),R.y=.5*(_.y+y.y),R.z=.5*(_.z+y.z);var T=v.magnitudeSquared(v.subtract(y,R,He)),A=Math.sqrt(T),_=Ve;_.x=r.x,_.y=i.y,_.z=o.z;y=Xe;y.x=a.x,y.y=s.y,y.z=u.z;var S=v.midpoint(_,y,Ye),O=0;for(l=0;l<c;l++){v.clone(e[l],n);var I=v.magnitude(v.subtract(n,S,He));O<I&&(O=I);var N=v.magnitudeSquared(v.subtract(n,R,He));T<N&&(T=(A=.5*(A+(I=Math.sqrt(N))))*A,R.x=(A*R.x+(N=I-A)*n.x)/I,R.y=(A*R.y+N*n.y)/I,R.z=(A*R.z+N*n.z)/I)}return A<O?(v.clone(R,t.center),t.radius=A):(v.clone(S,t.center),t.radius=O),t};var Ke=new e,Ze=new v,Je=new v,Qe=new R,$e=new R;De.fromRectangle2D=function(e,t,n){return De.fromRectangleWithHeights2D(e,t,0,0,n)},De.fromRectangleWithHeights2D=function(e,t,n,r,i){if(C(i)||(i=new De),!C(e))return i.center=v.clone(v.ZERO,i.center),i.radius=0,i;t=M(t,Ke),z.southwest(e,Qe),Qe.height=n,z.northeast(e,$e),$e.height=r;var o=t.project(Qe,Ze),n=t.project($e,Je),e=n.x-o.x,r=n.y-o.y,t=n.z-o.z;i.radius=.5*Math.sqrt(e*e+r*r+t*t);n=i.center;return n.x=o.x+.5*e,n.y=o.y+.5*r,n.z=o.z+.5*t,i};var et=[];De.fromRectangle3D=function(e,t,n,r){if(t=M(t,ye.WGS84),n=M(n,0),C(r)||(r=new De),!C(e))return r.center=v.clone(v.ZERO,r.center),r.radius=0,r;n=z.subsample(e,t,n,et);return De.fromPoints(n,r)},De.fromVertices=function(e,t,n,r){if(C(r)||(r=new De),!C(e)||0===e.length)return r.center=v.clone(v.ZERO,r.center),r.radius=0,r;t=M(t,v.ZERO),n=M(n,3);var i=je;i.x=e[0]+t.x,i.y=e[1]+t.y,i.z=e[2]+t.z;for(var o=v.clone(i,Fe),a=v.clone(i,ze),s=v.clone(i,Le),u=v.clone(i,Be),c=v.clone(i,qe),l=v.clone(i,Ge),h=e.length,f=0;f<h;f+=n){var m=e[f]+t.x,d=e[f+1]+t.y,p=e[f+2]+t.z;i.x=m,i.y=d,i.z=p,m<o.x&&v.clone(i,o),m>u.x&&v.clone(i,u),d<a.y&&v.clone(i,a),d>c.y&&v.clone(i,c),p<s.z&&v.clone(i,s),p>l.z&&v.clone(i,l)}var E=v.magnitudeSquared(v.subtract(u,o,He)),_=v.magnitudeSquared(v.subtract(c,a,He)),y=v.magnitudeSquared(v.subtract(l,s,He)),g=o,R=u,T=E;E<_&&(T=_,g=a,R=c),T<y&&(T=y,g=s,R=l);var A=We;A.x=.5*(g.x+R.x),A.y=.5*(g.y+R.y),A.z=.5*(g.z+R.z);var S=v.magnitudeSquared(v.subtract(R,A,He)),O=Math.sqrt(S),g=Ve;g.x=o.x,g.y=a.y,g.z=s.z;R=Xe;R.x=u.x,R.y=c.y,R.z=l.z;var I=v.midpoint(g,R,Ye),N=0;for(f=0;f<h;f+=n){i.x=e[f]+t.x,i.y=e[f+1]+t.y,i.z=e[f+2]+t.z;var x=v.magnitude(v.subtract(i,I,He));N<x&&(N=x);var w=v.magnitudeSquared(v.subtract(i,A,He));S<w&&(S=(O=.5*(O+(x=Math.sqrt(w))))*O,A.x=(O*A.x+(w=x-O)*i.x)/x,A.y=(O*A.y+w*i.y)/x,A.z=(O*A.z+w*i.z)/x)}return O<N?(v.clone(A,r.center),r.radius=O):(v.clone(I,r.center),r.radius=N),r},De.fromEncodedCartesianVertices=function(e,t,n){if(C(n)||(n=new De),!C(e)||!C(t)||e.length!==t.length||0===e.length)return n.center=v.clone(v.ZERO,n.center),n.radius=0,n;var r=je;r.x=e[0]+t[0],r.y=e[1]+t[1],r.z=e[2]+t[2];for(var i=v.clone(r,Fe),o=v.clone(r,ze),a=v.clone(r,Le),s=v.clone(r,Be),u=v.clone(r,qe),c=v.clone(r,Ge),l=e.length,h=0;h<l;h+=3){var f=e[h]+t[h],m=e[h+1]+t[h+1],d=e[h+2]+t[h+2];r.x=f,r.y=m,r.z=d,f<i.x&&v.clone(r,i),f>s.x&&v.clone(r,s),m<o.y&&v.clone(r,o),m>u.y&&v.clone(r,u),d<a.z&&v.clone(r,a),d>c.z&&v.clone(r,c)}var p=v.magnitudeSquared(v.subtract(s,i,He)),E=v.magnitudeSquared(v.subtract(u,o,He)),_=v.magnitudeSquared(v.subtract(c,a,He)),y=i,g=s,R=p;p<E&&(R=E,y=o,g=u),R<_&&(R=_,y=a,g=c);var T=We;T.x=.5*(y.x+g.x),T.y=.5*(y.y+g.y),T.z=.5*(y.z+g.z);var A=v.magnitudeSquared(v.subtract(g,T,He)),S=Math.sqrt(A),y=Ve;y.x=i.x,y.y=o.y,y.z=a.z;g=Xe;g.x=s.x,g.y=u.y,g.z=c.z;var O=v.midpoint(y,g,Ye),I=0;for(h=0;h<l;h+=3){r.x=e[h]+t[h],r.y=e[h+1]+t[h+1],r.z=e[h+2]+t[h+2];var N=v.magnitude(v.subtract(r,O,He));I<N&&(I=N);var x=v.magnitudeSquared(v.subtract(r,T,He));A<x&&(A=(S=.5*(S+(N=Math.sqrt(x))))*S,T.x=(S*T.x+(x=N-S)*r.x)/N,T.y=(S*T.y+x*r.y)/N,T.z=(S*T.z+x*r.z)/N)}return S<I?(v.clone(T,n.center),n.radius=S):(v.clone(O,n.center),n.radius=I),n},De.fromCornerPoints=function(e,t,n){C(n)||(n=new De);e=v.midpoint(e,t,n.center);return n.radius=v.distance(e,t),n},De.fromEllipsoid=function(e,t){return C(t)||(t=new De),v.clone(v.ZERO,t.center),t.radius=e.maximumRadius,t};var tt=new v;De.fromBoundingSpheres=function(e,t){if(C(t)||(t=new De),!C(e)||0===e.length)return t.center=v.clone(v.ZERO,t.center),t.radius=0,t;var n=e.length;if(1===n)return De.clone(e[0],t);if(2===n)return De.union(e[0],e[1],t);for(var r=[],i=0;i<n;i++)r.push(e[i].center);var o=(t=De.fromPoints(r,t)).center,a=t.radius;for(i=0;i<n;i++)var s=e[i],a=Math.max(a,v.distance(o,s.center,tt)+s.radius);return t.radius=a,t};var nt=new v,rt=new v,it=new v;De.fromOrientedBoundingBox=function(e,t){C(t)||(t=new De);var n=e.halfAxes,r=re.getColumn(n,0,nt),i=re.getColumn(n,1,rt),n=re.getColumn(n,2,it);return v.add(r,i,r),v.add(r,n,r),t.center=v.clone(e.center,t.center),t.radius=v.magnitude(r),t},De.clone=function(e,t){if(C(e))return C(t)?(t.center=v.clone(e.center,t.center),t.radius=e.radius,t):new De(e.center,e.radius)},De.packedLength=4,De.pack=function(e,t,n){n=M(n,0);var r=e.center;return t[n++]=r.x,t[n++]=r.y,t[n++]=r.z,t[n]=e.radius,t},De.unpack=function(e,t,n){t=M(t,0);var r=(n=!C(n)?new De:n).center;return r.x=e[t++],r.y=e[t++],r.z=e[t++],n.radius=e[t],n};var ot=new v,at=new v;De.union=function(e,t,n){C(n)||(n=new De);var r=e.center,i=e.radius,o=t.center,a=t.radius,s=v.subtract(o,r,ot),o=v.magnitude(s);if(o+a<=i)return e.clone(n),n;if(o+i<=a)return t.clone(n),n;a=.5*(i+o+a),o=v.multiplyByScalar(s,(a-i)/o,at);return v.add(o,r,o),v.clone(o,n.center),n.radius=a,n};var st=new v;De.expand=function(e,t,n){n=De.clone(e,n);t=v.magnitude(v.subtract(t,n.center,st));return t>n.radius&&(n.radius=t),n},De.intersectPlane=function(e,t){var n=e.center,r=e.radius,e=t.normal,t=v.dot(e,n)+t.distance;return t<-r?te.OUTSIDE:t<r?te.INTERSECTING:te.INSIDE},De.intersectRay=function(e,t,n){var r=v.subtract(t.origin,e.center,new v),i=v.dot(r,r),o=i-e.radius*e.radius;if(o<=0){var a=v.dot(r,t.direction),i=Math.sqrt(e.radius*e.radius-(i-a*a));return n=v.multiplyByScalar(t.direction,i-a,n),n=v.subtract(t.origin,n,n),te.INTERSECTING}r=v.dot(t.direction,r);if(0<=r)return te.OUTSIDE;o=r*r-o;if(o<0)return te.OUTSIDE;if(o>=_e.EPSILON10){a=-r-Math.sqrt(o);return n=v.multiplyByScalar(t.direction,a,n),n=v.add(t.origin,n,n),te.INTERSECTING}return n=v.multiplyByScalar(t.direction,r,n),n=v.subtract(t.origin,n,n),te.INTERSECTING},De.transform=function(e,t,n){return(n=!C(n)?new De:n).center=Re.multiplyByPoint(t,e.center,n.center),n.radius=Re.getMaximumScale(t)*e.radius,n};var ut=new v;De.distanceSquaredTo=function(e,t){t=v.subtract(e.center,t,ut);return v.magnitudeSquared(t)-e.radius*e.radius},De.transformWithoutScale=function(e,t,n){return(n=!C(n)?new De:n).center=Re.multiplyByPoint(t,e.center,n.center),n.radius=e.radius,n};var ct=new v;De.computePlaneDistances=function(e,t,n,r){C(r)||(r=new ne);t=v.subtract(e.center,t,ct),t=v.dot(n,t);return r.start=t-e.radius,r.stop=t+e.radius,r};for(var lt=new v,ht=new v,ft=new v,mt=new v,dt=new v,pt=new R,Et=new Array(8),_t=0;_t<8;++_t)Et[_t]=new v;var yt=new e;De.projectTo2D=function(e,t,n){var r=(t=M(t,yt)).ellipsoid,i=e.center,o=e.radius,a=v.equals(i,v.ZERO)?v.clone(v.UNIT_X,lt):r.geodeticSurfaceNormal(i,lt),s=v.cross(v.UNIT_Z,a,ht);v.normalize(s,s);var u=v.cross(a,s,ft);v.normalize(u,u),v.multiplyByScalar(a,o,a),v.multiplyByScalar(u,o,u),v.multiplyByScalar(s,o,s);var c=v.negate(u,dt),e=v.negate(s,mt),l=Et,o=l[0];v.add(a,u,o),v.add(o,s,o),o=l[1],v.add(a,u,o),v.add(o,e,o),o=l[2],v.add(a,c,o),v.add(o,e,o),o=l[3],v.add(a,c,o),v.add(o,s,o),v.negate(a,a),o=l[4],v.add(a,u,o),v.add(o,s,o),o=l[5],v.add(a,u,o),v.add(o,e,o),o=l[6],v.add(a,c,o),v.add(o,e,o),o=l[7],v.add(a,c,o),v.add(o,s,o);for(var h=l.length,f=0;f<h;++f){var m=l[f];v.add(i,m,m);var d=r.cartesianToCartographic(m,pt);t.project(d,m)}c=(i=(n=De.fromPoints(l,n)).center).x,s=i.y,o=i.z;return i.x=o,i.y=c,i.z=s,n},De.isOccluded=function(e,t){return!t.isBoundingSphereVisible(e)},De.equals=function(e,t){return e===t||C(e)&&C(t)&&v.equals(e.center,t.center)&&e.radius===t.radius},De.prototype.intersectPlane=function(e){return De.intersectPlane(this,e)},De.prototype.intersectRay=function(e,t){return De.intersectRay(this,e,t)},De.prototype.distanceSquaredTo=function(e){return De.distanceSquaredTo(this,e)},De.prototype.computePlaneDistances=function(e,t,n){return De.computePlaneDistances(this,e,t,n)},De.prototype.isOccluded=function(e){return De.isOccluded(this,e)},De.prototype.equals=function(e){return De.equals(this,e)},De.prototype.clone=function(e){return De.clone(this,e)},De.prototype.volume=function(){var e=this.radius;return ke*e*e*e},De.prototype.project_area=function(e){return this.radius*this.radius*_e.PI},De.prototype.height=function(e){return 2*this.radius};var gt={clipTriangleAtAxisAlignedThreshold:function(e,t,n,r,i,o){var a,s;C(o)?o.length=0:o=[];var u,c,l,h,f,m,d=t?(a=n<e,s=r<e,i<e):(a=e<n,s=e<r,e<i),t=a+s+d;return 1===t?a?(u=(e-n)/(r-n),c=(e-n)/(i-n),o.push(1),o.push(2),1!==c&&(o.push(-1),o.push(0),o.push(2),o.push(c)),1!==u&&(o.push(-1),o.push(0),o.push(1),o.push(u))):s?(l=(e-r)/(i-r),h=(e-r)/(n-r),o.push(2),o.push(0),1!==h&&(o.push(-1),o.push(1),o.push(0),o.push(h)),1!==l&&(o.push(-1),o.push(1),o.push(2),o.push(l))):d&&(f=(e-i)/(n-i),m=(e-i)/(r-i),o.push(0),o.push(1),1!==m&&(o.push(-1),o.push(2),o.push(1),o.push(m)),1!==f&&(o.push(-1),o.push(2),o.push(0),o.push(f))):2===t?a||n===e?s||r===e?d||i===e||(c=(e-n)/(i-n),l=(e-r)/(i-r),o.push(2),o.push(-1),o.push(0),o.push(2),o.push(c),o.push(-1),o.push(1),o.push(2),o.push(l)):(m=(e-i)/(r-i),u=(e-n)/(r-n),o.push(1),o.push(-1),o.push(2),o.push(1),o.push(m),o.push(-1),o.push(0),o.push(1),o.push(u)):(h=(e-r)/(n-r),f=(e-i)/(n-i),o.push(0),o.push(-1),o.push(1),o.push(0),o.push(h),o.push(-1),o.push(2),o.push(0),o.push(f)):3!==t&&(o.push(0),o.push(1),o.push(2)),o},computeBarycentricCoordinates:function(e,t,n,r,i,o,a,s,u){var c=n-a,n=a-i,i=o-s,o=r-s,r=1/(i*c+n*o),s=t-s,a=e-a,n=(i*a+n*s)*r,s=(-o*a+c*s)*r,r=1-n-s;return C(u)?(u.x=n,u.y=s,u.z=r,u):new v(n,s,r)},computeLineSegmentLineSegmentIntersection:function(e,t,n,r,i,o,a,s,u){var c=(a-i)*(t-o)-(s-o)*(e-i),l=(n-e)*(t-o)-(r-t)*(e-i),i=(s-o)*(n-e)-(a-i)*(r-t);if(0!=i){c=c/i,i=l/i;return 0<=c&&c<=1&&0<=i&&i<=1?((u=!C(u)?new H:u).x=e+c*(n-e),u.y=t+c*(r-t),u):void 0}}},Rt=Object.freeze({DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,HALF_FLOAT_OES:36193,DOUBLE:5130,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,COLOR:6144,DEPTH:6145,STENCIL:6146,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,MAX_3D_TEXTURE_SIZE:32883,UNSIGNED_INT_2_10_10_10_REV:33640,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,MAX_TEXTURE_LOD_BIAS:34045,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,VERTEX_ATTRIB_ARRAY_INTEGER:35069,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,UNSIGNED_INT_10F_11F_11F_REV:35899,RGB9_E5:35901,UNSIGNED_INT_5_9_9_9_REV:35902,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,RASTERIZER_DISCARD:35977,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,UNSIGNED_INT_24_8:34042,DEPTH24_STENCIL8:35056,UNSIGNED_NORMALIZED:35863,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,MAX_SAMPLES:36183,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,VERTEX_ARRAY_BINDING:34229,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,SIGNED_NORMALIZED:36764,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,INVALID_INDEX:4294967295,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,SAMPLER_BINDING:35097,RGB10_A2UI:36975,INT_2_10_10_10_REV:36255,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,TEXTURE_IMMUTABLE_FORMAT:37167,MAX_ELEMENT_INDEX:36203,TEXTURE_IMMUTABLE_LEVELS:33503,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047}),Tt={UNSIGNED_BYTE:Rt.UNSIGNED_BYTE,UNSIGNED_SHORT:Rt.UNSIGNED_SHORT,UNSIGNED_INT:Rt.UNSIGNED_INT,getSizeInBytes:function(e){switch(e){case Tt.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Tt.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Tt.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT}},fromSizeInBytes:function(e){switch(e){case 2:return Tt.UNSIGNED_SHORT;case 4:return Tt.UNSIGNED_INT;case 1:return Tt.UNSIGNED_BYTE}},validate:function(e){return C(e)&&(e===Tt.UNSIGNED_BYTE||e===Tt.UNSIGNED_SHORT||e===Tt.UNSIGNED_INT)},createTypedArray:function(e,t){return new(e>=_e.SIXTY_FOUR_KILOBYTES?Uint32Array:Uint16Array)(t)},createTypedArrayFromArrayBuffer:function(e,t,n,r){return new(e>=_e.SIXTY_FOUR_KILOBYTES?Uint32Array:Uint16Array)(t,n,r)}},At=Object.freeze(Tt);function St(e,t){this.normal=v.clone(e),this.distance=t}St.fromPointNormal=function(e,t,n){e=-v.dot(t,e);return C(n)?(v.clone(t,n.normal),n.distance=e,n):new St(t,e)};var Ot=new v;St.fromCartesian4=function(e,t){var n=v.fromCartesian4(e,Ot),e=e.w;return C(t)?(v.clone(n,t.normal),t.distance=e,t):new St(n,e)},St.fromPoints=function(e,t,n,r){var i=v.subtract(t,e,new v),t=v.subtract(n,t,new v);v.normalize(i,i),v.normalize(t,t);t=v.cross(i,t,new v);v.normalize(t,t);e=-v.dot(t,e);return C(r)?(v.clone(t,r.normal),r.distance=e,r):new St(t,e)},St.getPointDistance=function(e,t){return v.dot(e.normal,t)+e.distance};var It=new v;St.projectPointOntoPlane=function(e,t,n){C(n)||(n=new v);var r=St.getPointDistance(e,t),r=v.multiplyByScalar(e.normal,r,It);return v.subtract(t,r,n)},St.projection=function(e,t,n){var r=v.dot(t,e.normal),r=v.multiplyByScalar(e.normal,r,It);return C(n)||(n=new v),v.subtract(t,r,n)};var Nt=new v;function xt(e,t,n){this.minimum=v.clone(M(e,v.ZERO)),this.maximum=v.clone(M(t,v.ZERO)),n=C(n)?v.clone(n):v.midpoint(this.minimum,this.maximum,new v),this.center=n}St.transform=function(e,t,n){return Re.multiplyByPointAsVector(t,e.normal,Ot),v.normalize(Ot,Ot),v.multiplyByScalar(e.normal,-e.distance,Nt),Re.multiplyByPoint(t,Nt,Nt),St.fromPointNormal(Nt,Ot,n)},St.clone=function(e,t){return C(t)?(v.clone(e.normal,t.normal),t.distance=e.distance,t):new St(e.normal,e.distance)},St.equals=function(e,t){return e.distance===t.distance&&v.equals(e.normal,t.normal)},St.prototype.intersect=function(e,t){C(t)||(t=new v);var n,r=e.origin,i=e.direction,e=v.dot(i,this.normal);return Math.abs(e)<_e.EPSILON15?(n=r.x*this.normal.x*r.y*this.normal.y+r.z*this.normal.z+this.distance)<_e.EPSILON15?(v.clone(r,t),t):void 0:(n=-(this.normal.x*r.x+this.normal.y*r.y+this.normal.z*r.z+this.distance),t=v.multiplyByScalar(i,n/=e,t),t=v.add(r,t,t))},St.ORIGIN_XY_PLANE=Object.freeze(new St(v.UNIT_Z,0)),St.ORIGIN_YZ_PLANE=Object.freeze(new St(v.UNIT_X,0)),St.ORIGIN_ZX_PLANE=Object.freeze(new St(v.UNIT_Y,0)),xt.fromPoints=function(e,t){if(C(t)||(t=new xt),!C(e)||0===e.length)return t.minimum=v.clone(v.ZERO,t.minimum),t.maximum=v.clone(v.ZERO,t.maximum),t.center=v.clone(v.ZERO,t.center),t;for(var n=e[0].x,r=e[0].y,i=e[0].z,o=e[0].x,a=e[0].y,s=e[0].z,u=e.length,c=1;c<u;c++)var l=e[c],h=l.x,f=l.y,l=l.z,n=Math.min(h,n),o=Math.max(h,o),r=Math.min(f,r),a=Math.max(f,a),i=Math.min(l,i),s=Math.max(l,s);var m=t.minimum;m.x=n,m.y=r,m.z=i;var d=t.maximum;return d.x=o,d.y=a,d.z=s,t.center=v.midpoint(m,d,t.center),t},xt.clone=function(e,t){if(C(e))return C(t)?(t.minimum=v.clone(e.minimum,t.minimum),t.maximum=v.clone(e.maximum,t.maximum),t.center=v.clone(e.center,t.center),t):new xt(e.minimum,e.maximum,e.center)},xt.equals=function(e,t){return e===t||C(e)&&C(t)&&v.equals(e.center,t.center)&&v.equals(e.minimum,t.minimum)&&v.equals(e.maximum,t.maximum)};var wt=new v;xt.intersectPlane=function(e,t){wt=v.subtract(e.maximum,e.minimum,wt);var n=v.multiplyByScalar(wt,.5,wt),r=t.normal,n=n.x*Math.abs(r.x)+n.y*Math.abs(r.y)+n.z*Math.abs(r.z),t=v.dot(e.center,r)+t.distance;return 0<t-n?te.INSIDE:t+n<0?te.OUTSIDE:te.INTERSECTING},xt.prototype.clone=function(e){return xt.clone(this,e)},xt.prototype.intersectPlane=function(e){return xt.intersectPlane(this,e)},xt.prototype.equals=function(e){return xt.equals(this,e)},xt.prototype.width=function(){return this.maximum.x-this.minimum.x},xt.prototype.height=function(){return this.maximum.y-this.minimum.y},xt.prototype.length=function(){return this.maximum.z-this.minimum.z},xt.prototype.get_max_radius=function(){return v.distance(this.maximum,this.minimum)},xt.prototype.combine_box=function(e){this.combine_vertex(e.minimum),this.combine_vertex(e.maximum)},xt.prototype.combine_vertex=function(e){e.x<this.minimum.x&&(this.minimum.x=e.x),e.x>this.maximum.x&&(this.maximum.x=e.x),e.y<this.minimum.y&&(this.minimum.y=e.y),e.y>this.maximum.y&&(this.maximum.y=e.y),e.z<this.minimum.z&&(this.minimum.z=e.z),e.z>this.maximum.z&&(this.maximum.z=e.z),this.center=v.midpoint(this.minimum,this.maximum,new v)},xt.prototype.nearest_distance_to_point=function(e){var t=v.clone(e);return v.maximumByComponent(this.minimum,t,t),v.minimumByComponent(this.maximum,t,t),v.distance(t,e)},xt.prototype.nearest_point_to_point=function(e){e=v.clone(e);return v.maximumByComponent(this.minimum,e,e),v.minimumByComponent(this.maximum,e,e),e},xt.prototype.project_area=function(e){var t=this.maximum.x-this.minimum.x,n=this.maximum.y-this.minimum.y,r=this.maximum.z-this.minimum.z;return Math.abs(n*r*e.x)+Math.abs(t*r*e.y)+Math.abs(t*n*e.z)},xt.prototype.get_corners=function(){for(var e=[],t=0;t<8;++t)e.push(new v);return e[0]=v.clone(this.minimum),e[1].x=this.minimum.x,e[1].y=this.maximum.y,e[1].z=this.minimum.z,e[2].x=this.maximum.x,e[2].y=this.maximum.y,e[2].z=this.minimum.z,e[3].x=this.maximum.x,e[3].y=this.minimum.y,e[3].z=this.minimum.z,e[4]=v.clone(this.maximum),e[5].x=this.minimum.x,e[5].y=this.maximum.y,e[5].z=this.maximum.z,e[6].x=this.minimum.x,e[6].y=this.minimum.y,e[6].z=this.maximum.z,e[7].x=this.maximum.x,e[7].y=this.minimum.y,e[7].z=this.maximum.z,e},xt.prototype.transform=function(e,t){for(var n=this.get_corners(),r=new v(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),i=new v(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),o=0;o<8;o++)n[o]=Re.multiplyByPoint(e,n[o],n[o]),v.minimumByComponent(n[o],r,r),v.maximumByComponent(n[o],i,i);return C(t)?(t.minimum=r,t.maximum=i,t):t=new xt(r,i)},xt.prototype.is_valid=function(){return!(this.minimum.x>this.maximum.x||this.minimum.y>this.maximum.y||this.minimum.z>this.maximum.z)},xt.intersectRay=function(e,t){var n=new Array(3);v.pack(e.minimum,n);var r=new Array(3);v.pack(e.maximum,r);var i=new Array(3);v.pack(t.origin,i);e=new Array(3);return v.pack(t.direction,e),function(e,t,n,r,i){for(var o,a=!0,s=new Array(3),u=new Array(3),c=new Array(3),l=0;l<3;l++)n[l]<e[l]?(s[l]=1,c[l]=e[l],a=!1):n[l]>t[l]?(s[l]=0,c[l]=t[l],a=!1):s[l]=2;if(a)return i=n,!0;for(l=0;l<3;l++)2!=s[l]&&Math.abs(r[l])>_e.EPSILON10?u[l]=(c[l]-n[l])/r[l]:u[l]=-1;for(o=0,l=1;l<3;l++)u[o]<u[l]&&(o=l);if(u[o]<0)return!1;for(l=0;l<3;l++)if(o!=l){if(i[l]=n[l]+u[o]*r[l],i[l]<e[l]||i[l]>t[l])return!1}else i[l]=c[l];return!0}(n,r,i,e,new Array(3))},xt.prototype.intersectRay=function(e){return xt.intersectRay(this,e)},xt.prototype.make_invalid=function(){this.minimum.x=this.minimum.y=this.minimum.z=Number.MAX_VALUE,this.maximum.x=this.maximum.y=this.maximum.z=-Number.MAX_VALUE},xt.prototype.toBoundingSphere=function(e){return new De(void 0===e?this.center:Re.multiplyByPoint(e,this.center,new v),this.get_max_radius()/2)},xt.intersect=function(e,t){return!(t.minimum.x>e.maximum.x||t.maximum.x<e.minimum.x||t.minimum.y>e.maximum.y||t.maximum.y<e.minimum.y||t.minimum.z>e.maximum.z||t.maximum.z<e.minimum.z)&&!(t.minimum.x>e.minimum.x&&t.maximum.x<e.maximum.x&&t.minimum.y>e.minimum.y&&t.maximum.y<e.maximum.y&&t.minimum.z>e.minimum.z&&t.maximum.z<e.maximum.z&&e.minimum.x>t.minimum.x&&e.maximum.x<t.maximum.x&&e.minimum.y>t.minimum.y&&e.maximum.y<t.maximum.y&&e.minimum.z>t.minimum.z&&e.maximum.z<t.maximum.z)};var Ct={};function Mt(e,t,n){var r=e+t;return _e.sign(e)!==_e.sign(t)&&Math.abs(r/Math.max(Math.abs(e),Math.abs(t)))<n?0:r}Ct.computeDiscriminant=function(e,t,n){return t*t-4*e*n},Ct.computeRealRoots=function(e,t,n){if(0===e)return 0===t?[]:[-n/t];if(0===t){if(0===n)return[0,0];var r=Math.abs(n),i=Math.abs(e);if(r<i&&r/i<_e.EPSILON14)return[0,0];if(i<r&&i/r<_e.EPSILON14)return[];if((i=-n/e)<0)return[];r=Math.sqrt(i);return[-r,r]}if(0===n)return(i=-t/e)<0?[i,0]:[0,i];i=Mt(t*t,-(4*e*n),_e.EPSILON14);if(i<0)return[];i=-.5*Mt(t,_e.sign(t)*Math.sqrt(i),_e.EPSILON14);return 0<t?[i/e,n/i]:[n/i,i/e]};var vt={};function bt(e,t,n,r){var i=e,o=t/3,a=n/3,s=r,u=i*a,c=o*s,l=o*o,h=a*a,f=i*a-l,e=i*s-o*a,t=o*s-h,n=4*f*t-e*e;if(n<0){var r=u*h<=l*c?-2*o*(p=f)+(d=i)*e:-(d=s)*e+2*a*(p=t),m=-(r<0?-1:1)*Math.abs(d)*Math.sqrt(-n),d=(E=m-r)/2,d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),m=E===m?-d:-p/d,m=p<=0?d+m:-r/(d*d+m*m+p);return u*h<=l*c?[(m-o)/i]:[-s/(m+a)]}var p=f,u=-2*o*f+i*e,h=t,l=-s*e+2*a*t,c=Math.sqrt(n),f=Math.sqrt(3)/2,e=Math.abs(Math.atan2(i*c,-u)/3);m=2*Math.sqrt(-p);t=Math.cos(e);E=m*t;var n=m*(-t/2-f*Math.sin(e)),u=2*o<E+n?E-o:n-o,p=i,i=u/p,e=Math.abs(Math.atan2(s*c,-l)/3),s=-s,e=(E=(m=2*Math.sqrt(-h))*(t=Math.cos(e)))+(n=m*(-t/2-f*Math.sin(e)))<2*a?E+a:n+a,E=s/e,n=-u*e-p*s,e=(a*n-o*(u*s))/(-o*n+a*(p*e));return i<=e?i<=E?e<=E?[i,e,E]:[i,E,e]:[E,i,e]:i<=E?[e,i,E]:e<=E?[e,E,i]:[E,e,i]}vt.computeDiscriminant=function(e,t,n,r){var i=t*t,o=n*n;return 18*e*t*n*r+i*o-27*(e*e)*(r*r)-4*(e*o*n+i*t*r)},vt.computeRealRoots=function(e,t,n,r){var i;if(0===e)return Ct.computeRealRoots(t,n,r);if(0!==t)return 0===n?0===r?(o=-t/e)<0?[o,0,0]:[0,0,o]:bt(e,t,0,r):0===r?0===(i=Ct.computeRealRoots(e,t,n)).length?[0]:i[1]<=0?[i[0],i[1],0]:0<=i[0]?[0,i[0],i[1]]:[i[0],0,i[1]]:bt(e,t,n,r);if(0!==n)return 0===r?0===(i=Ct.computeRealRoots(e,0,n)).Length?[0]:[i[0],0,i[1]]:bt(e,0,n,r);if(0===r)return[0,0,0];var o=(o=-r/e)<0?-Math.pow(-o,1/3):Math.pow(o,1/3);return[o,o,o]};var Pt={};function Ut(e,t,n,r){var i=e*e,o=t-3*i/8,a=n-t*e/2+i*e/8,r=r-n*e/4+t*i/16-3*i*i/256,n=vt.computeRealRoots(1,2*o,o*o-4*r,-a*a);if(0<n.length){t=-e/4,i=n[n.length-1];if(Math.abs(i)<_e.EPSILON14){e=Ct.computeRealRoots(1,o,r);if(2===e.length){var n=e[0],s=e[1];if(0<=n&&0<=s){r=Math.sqrt(n),e=Math.sqrt(s);return[t-e,t-r,t+r,t+e]}if(0<=n&&s<0)return[t-(u=Math.sqrt(n)),t+u];if(n<0&&0<=s)return[t-(u=Math.sqrt(s)),t+u]}return[]}if(0<i){var s=Math.sqrt(i),u=(o+i+a/s)/2,a=Ct.computeRealRoots(1,s,(o+i-a/s)/2),u=Ct.computeRealRoots(1,-s,u);return 0!==a.length?(a[0]+=t,a[1]+=t,0!==u.length?(u[0]+=t,u[1]+=t,a[1]<=u[0]?[a[0],a[1],u[0],u[1]]:u[1]<=a[0]?[u[0],u[1],a[0],a[1]]:a[0]>=u[0]&&a[1]<=u[1]?[u[0],a[0],a[1],u[1]]:u[0]>=a[0]&&u[1]<=a[1]?[a[0],u[0],u[1],a[1]]:a[0]>u[0]&&a[0]<u[1]?[u[0],a[0],u[1],a[1]]:[a[0],u[0],a[1],u[1]]):a):0!==u.length?(u[0]+=t,u[1]+=t,u):[]}}return[]}function Dt(e,t,n,r){var i=e*e,o=vt.computeRealRoots(1,-2*t,n*e+t*t-4*r,i*r-n*t*e+n*n);if(0<o.length){var a,s,u,c,l=o[0],h=t-l,f=h*h,m=e/2,o=h/2,t=f-4*r,h=f+4*Math.abs(r),f=i-4*l,i=i+4*Math.abs(l);s=l<0||t*i<f*h?(a=(f=Math.sqrt(f))/2,0===f?0:(e*o-n)/f):(a=0===(s=Math.sqrt(t))?0:(e*o-n)/s,s/2),0==m&&0===a?c=u=0:_e.sign(m)===_e.sign(a)?c=l/(u=m+a):u=l/(c=m-a),0==o&&0===s?p=d=0:_e.sign(o)===_e.sign(s)?p=r/(d=o+s):d=r/(p=o-s);var d=Ct.computeRealRoots(1,u,d),p=Ct.computeRealRoots(1,c,p);if(0!==d.length)return 0!==p.length?d[1]<=p[0]?[d[0],d[1],p[0],p[1]]:p[1]<=d[0]?[p[0],p[1],d[0],d[1]]:d[0]>=p[0]&&d[1]<=p[1]?[p[0],d[0],d[1],p[1]]:p[0]>=d[0]&&p[1]<=d[1]?[d[0],p[0],p[1],d[1]]:d[0]>p[0]&&d[0]<p[1]?[p[0],d[0],p[1],d[1]]:[d[0],p[0],d[1],p[1]]:d;if(0!==p.length)return p}return[]}function Ft(e,t){t=v.clone(M(t,v.ZERO)),v.equals(t,v.ZERO)||v.normalize(t,t),this.origin=v.clone(M(e,v.ZERO)),this.direction=t}Pt.computeDiscriminant=function(e,t,n,r,i){var o=e*e,a=t*t,s=a*t,u=n*n,c=u*n,l=r*r,h=l*r,f=i*i;return a*u*l-4*s*h-4*e*c*l+18*e*t*n*h-27*o*l*l+256*(o*e)*(f*i)+i*(18*s*n*r-4*a*c+16*e*u*u-80*e*t*u*r-6*e*a*l+144*o*n*l)+f*(144*e*a*n-27*a*a-128*o*u-192*o*t*r)},Pt.computeRealRoots=function(e,t,n,r,i){if(Math.abs(e)<_e.EPSILON15)return vt.computeRealRoots(t,n,r,i);var o=t/e,a=n/e,s=r/e,u=i/e,e=o<0?1:0;switch(e+=a<0?e+1:e,e+=s<0?e+1:e,e+=u<0?e+1:e){case 0:return Ut(o,a,s,u);case 1:case 2:return Dt(o,a,s,u);case 3:case 4:return Ut(o,a,s,u);case 5:return Dt(o,a,s,u);case 6:case 7:return Ut(o,a,s,u);case 8:return Dt(o,a,s,u);case 9:case 10:return Ut(o,a,s,u);case 11:return Dt(o,a,s,u);case 12:case 13:case 14:case 15:return Ut(o,a,s,u);default:return}},Ft.clone=function(e,t){if(C(e))return C(t)?(t.origin=v.clone(e.origin),t.direction=v.clone(e.direction),t):new Ft(e.origin,e.direction)},Ft.getPoint=function(e,t,n){return C(n)||(n=new v),n=v.multiplyByScalar(e.direction,t,n),v.add(e.origin,n,n)};var zt={rayPlane:function(e,t,n){C(n)||(n=new v);var r=e.origin,i=e.direction,o=t.normal,e=v.dot(o,i);if(!(Math.abs(e)<_e.EPSILON15)){e=(-t.distance-v.dot(o,r))/e;if(!(e<0))return n=v.multiplyByScalar(i,e,n),v.add(r,n,n)}}},Lt=new v,Bt=new v,qt=new v,Gt=new v,jt=new v;zt.rayTriangleParametric=function(e,t,n,r,i){i=M(i,!1);var o,a,s,u=e.origin,c=e.direction,l=v.subtract(n,t,Lt),e=v.subtract(r,t,Bt),n=v.cross(c,e,qt),r=v.dot(l,n);if(i){if(r<_e.EPSILON6)return;if(f=v.subtract(u,t,Gt),(h=v.dot(f,n))<0||r<h)return;if(o=v.cross(f,l,jt),(a=v.dot(c,o))<0||r<h+a)return;s=v.dot(e,o)/r}else{if(Math.abs(r)<_e.EPSILON6)return;var h,r=1/r,f=v.subtract(u,t,Gt);if((h=v.dot(f,n)*r)<0||1<h)return;if(o=v.cross(f,l,jt),(a=v.dot(c,o)*r)<0||1<h+a)return;s=v.dot(e,o)*r}return s},zt.rayTriangle=function(e,t,n,r,i,o){i=zt.rayTriangleParametric(e,t,n,r,i);if(C(i)&&!(i<0))return C(o)||(o=new v),v.multiplyByScalar(e.direction,i,o),v.add(e.origin,o,o)};var Ht=new Ft;zt.lineSegmentTriangle=function(e,t,n,r,i,o,a){var s=Ht;v.clone(e,s.origin),v.subtract(t,e,s.direction),v.normalize(s.direction,s.direction);o=zt.rayTriangleParametric(s,n,r,i,o);if(!(!C(o)||o<0||o>v.distance(e,t)))return C(a)||(a=new v),v.multiplyByScalar(s.direction,o,a),v.add(s.origin,a,a)};var Wt={root0:0,root1:0};function Vt(e,t,n){C(n)||(n=new ne);var r=e.origin,i=e.direction,e=t.center,t=t.radius*t.radius,e=v.subtract(r,e,qt),t=function(e,t,n,r){if(!((o=t*t-4*e*n)<0)){if(0<o){var i=1/(2*e),n=Math.sqrt(o),o=(-t+n)*i,i=(-t-n)*i;return o<i?(r.root0=o,r.root1=i):(r.root0=i,r.root1=o),r}e=-t/(2*e);if(0!=e)return r.root0=r.root1=e,r}}(v.dot(i,i),2*v.dot(i,e),v.magnitudeSquared(e)-t,Wt);if(C(t))return n.start=t.root0,n.stop=t.root1,n}zt.raySphere=function(e,t,n){if(C(n=Vt(e,t,n))&&!(n.stop<0))return n.start=Math.max(n.start,0),n};var Xt=new Ft;zt.lineSegmentSphere=function(e,t,n,r){var i=Xt;v.clone(e,i.origin);t=v.subtract(t,e,i.direction),e=v.magnitude(t);if(v.normalize(t,t),!(!C(r=Vt(i,n,r))||r.stop<0||r.start>e))return r.start=Math.max(r.start,0),r.stop=Math.min(r.stop,e),r};var Yt=new v,kt=new v;function Kt(e,t,n){var r=e+t;return _e.sign(e)!==_e.sign(t)&&Math.abs(r/Math.max(Math.abs(e),Math.abs(t)))<n?0:r}zt.rayEllipsoid=function(e,t){var n=t.oneOverRadii,r=v.multiplyComponents(n,e.origin,Yt),t=v.multiplyComponents(n,e.direction,kt),n=v.magnitudeSquared(r),e=v.dot(r,t);if(1<n){if(0<=e)return;var i,o,r=e*e,a=n-1;if(r<(o=(i=v.magnitudeSquared(t))*a))return;if(o<r){var s,u=e*e-o,c=(s=-e+Math.sqrt(u))/i,r=a/s;return c<r?new ne(c,r):{start:r,stop:c}}c=Math.sqrt(a/i);return new ne(c,c)}return n<1?(a=n-1,u=e*e-(o=(i=v.magnitudeSquared(t))*a),new ne(0,(s=-e+Math.sqrt(u))/i)):e<0?new ne(0,-e/(i=v.magnitudeSquared(t))):void 0};var Zt=new v,Jt=new v,Qt=new v,$t=new v,en=new v,tn=new re,nn=new re,rn=new re,on=new re,an=new re,sn=new re,un=new re,cn=new v,ln=new v,hn=new R;zt.grazingAltitudeLocation=function(e,t){var n=e.origin,r=e.direction;if(!v.equals(n,v.ZERO)){var i=t.geodeticSurfaceNormal(n,Zt);if(0<=v.dot(r,i))return n}var o=C(this.rayEllipsoid(e,t)),a=t.transformPositionToScaledSpace(r,Zt),i=v.normalize(a,a),e=v.mostOrthogonalAxis(a,$t),a=v.normalize(v.cross(e,i,Jt),Jt),e=v.normalize(v.cross(i,a,Qt),Qt),s=tn;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=a.x,s[4]=a.y,s[5]=a.z,s[6]=e.x,s[7]=e.y,s[8]=e.z;var i=re.transpose(s,nn),u=re.fromScale(t.radii,rn),a=re.fromScale(t.oneOverRadii,on),e=an;e[0]=0,e[1]=-r.z,e[2]=r.y,e[3]=r.z,e[4]=0,e[5]=-r.x,e[6]=-r.y,e[7]=r.x,e[8]=0;var a=re.multiply(re.multiply(i,a,sn),e,sn),e=re.multiply(re.multiply(a,u,un),s,un),a=re.multiplyByVector(a,n,en),c=function(e,t,n,r,i){var o=r*r,a=i*i,s=(e[re.COLUMN1ROW1]-e[re.COLUMN2ROW2])*a,u=i*(r*Kt(e[re.COLUMN1ROW0],e[re.COLUMN0ROW1],_e.EPSILON15)+t.y),c=e[re.COLUMN0ROW0]*o+e[re.COLUMN2ROW2]*a+r*t.x+n,l=a*Kt(e[re.COLUMN2ROW1],e[re.COLUMN1ROW2],_e.EPSILON15),h=i*(r*Kt(e[re.COLUMN2ROW0],e[re.COLUMN0ROW2])+t.z),f=[];if(0==h&&0==l){if(0===(_=Ct.computeRealRoots(s,u,c)).length)return f;var m=_[0],d=Math.sqrt(Math.max(1-m*m,0));return f.push(new v(r,i*m,i*-d)),f.push(new v(r,i*m,i*d)),2===_.length&&(p=_[1],E=Math.sqrt(Math.max(1-p*p,0)),f.push(new v(r,i*p,i*-E)),f.push(new v(r,i*p,i*E))),f}var p=s*s+(m=l*l),E=2*(u*s+(d=h*l)),m=2*c*s+u*u-m+(t=h*h),d=2*(c*u-d);if(0==p&&0==E&&0==m&&0==d)return f;var _,y=(_=Pt.computeRealRoots(p,E,m,d,c*c-t)).length;if(0===y)return f;for(var g=0;g<y;++g){var R=_[g],T=R*R,A=Math.max(1-T,0),A=Math.sqrt(A),T=_e.sign(s)===_e.sign(c)?Kt(s*T+c,u*R,_e.EPSILON12):_e.sign(c)===_e.sign(u*R)?Kt(s*T,u*R+c,_e.EPSILON12):Kt(s*T+u*R,c,_e.EPSILON12),T=T*Kt(l*R,h,_e.EPSILON15);T<0?f.push(new v(r,i*R,i*A)):0<T?f.push(new v(r,i*R,i*-A)):0!==A?(f.push(new v(r,i*R,i*-A)),f.push(new v(r,i*R,i*A)),++g):f.push(new v(r,i*R,i*A))}return f}(e,v.negate(a,Zt),0,0,1),l=c.length;if(0<l){for(var h=v.clone(v.ZERO,ln),f=Number.NEGATIVE_INFINITY,m=0;m<l;++m){var d=re.multiplyByVector(u,re.multiplyByVector(s,c[m],cn),cn),p=v.normalize(v.subtract(d,n,$t),$t),p=v.dot(p,r);f<p&&(f=p,h=v.clone(d,h))}e=t.cartesianToCartographic(h,hn),f=_e.clamp(f,0,1),a=v.magnitude(v.subtract(h,n,$t))*Math.sqrt(1-f*f);return e.height=a=o?-a:a,t.cartographicToCartesian(e,new v)}};var fn,mn,dn=new v;function pn(e,t,n,r){return En(e).then(t,n,r)}function En(e){var t,n,e=e instanceof _n?e:Rn(e)?(t=gn(),e.then(function(e){t.resolve(e)},function(e){t.reject(e)},function(e){t.progress(e)}),t.promise):(n=e,new _n(function(e){try{return En(e?e(n):n)}catch(e){return yn(e)}}));return e}function _n(e){this.then=e}function yn(n){return new _n(function(e,t){try{return t?En(t(n)):yn(n)}catch(e){return yn(e)}})}function gn(){var e=new _n(i),a=[],s=[],r=function(t,n,r){var i=gn(),o="function"==typeof r?function(e){try{i.progress(r(e))}catch(e){i.progress(e)}}:function(e){i.progress(e)};return a.push(function(e){e.then(t,n).then(i.resolve,i.reject,o)}),s.push(o),i.promise},t=function(e){return On(s,e),e},n=function(e){return e=En(e),r=e.then,n=En,t=In,On(a,e),s=a=fn,e};return{then:i,resolve:o,reject:u,progress:c,promise:e,resolver:{resolve:o,reject:u,progress:c}};function i(e,t,n){return r(e,t,n)}function o(e){return n(e)}function u(e){return n(yn(e))}function c(e){return t(e)}}function Rn(e){return e&&"function"==typeof e.then}function Tn(e,m,d,p,E){return pn(e,function(e){var t,n,r,i,o=e.length>>>0,a=Math.max(0,Math.min(m,o)),s=[],u=o-a+1,c=[],l=gn();if(a)for(r=l.progress,n=function(e){c.push(e),--u||(t=n=In,l.reject(c))},t=function(e){s.push(e),--a||(t=n=In,l.resolve(s))},i=0;i<o;++i)i in e&&pn(e[i],f,h,r);else l.resolve(s);return l.then(d,p,E);function h(e){n(e)}function f(e){t(e)}})}function An(e,t,n,r){return Sn(e,Nn).then(t,n,r)}function Sn(e,s){return pn(e,function(e){var t,n,r,i=t=e.length>>>0,o=[],a=gn();if(i)for(n=function(e,t){pn(e,s).then(function(e){o[t]=e,--i||a.resolve(o)},a.reject)},r=0;r<t;r++)r in e?n(e[r],r):--i;else a.resolve(o);return a.promise})}function On(e,t){for(var n,r=0;n=e[r++];)n(t)}function In(){}function Nn(e){return e}zt.lineSegmentPlane=function(e,t,n,r){C(r)||(r=new v);var i=v.subtract(t,e,dn),o=n.normal,t=v.dot(o,i);if(!(Math.abs(t)<_e.EPSILON6)){o=v.dot(o,e),t=-(n.distance+o)/t;if(!(t<0||1<t))return v.multiplyByScalar(i,t,r),v.add(e,r,r),r}},zt.trianglePlaneIntersection=function(e,t,n,r){var i,o,a=r.normal,s=r.distance,u=v.dot(a,e)+s<0,c=v.dot(a,t)+s<0,a=v.dot(a,n)+s<0,s=0;if(s+=u?1:0,s+=c?1:0,1!=(s+=a?1:0)&&2!=s||(i=new v,o=new v),1==s){if(u)return zt.lineSegmentPlane(e,t,r,i),zt.lineSegmentPlane(e,n,r,o),{positions:[e,t,n,i,o],indices:[0,3,4,1,2,4,1,4,3]};if(c)return zt.lineSegmentPlane(t,n,r,i),zt.lineSegmentPlane(t,e,r,o),{positions:[e,t,n,i,o],indices:[1,3,4,2,0,4,2,4,3]};if(a)return zt.lineSegmentPlane(n,e,r,i),zt.lineSegmentPlane(n,t,r,o),{positions:[e,t,n,i,o],indices:[2,3,4,0,1,4,0,4,3]}}else if(2==s){if(!u)return zt.lineSegmentPlane(t,e,r,i),zt.lineSegmentPlane(n,e,r,o),{positions:[e,t,n,i,o],indices:[1,2,4,1,4,3,0,3,4]};if(!c)return zt.lineSegmentPlane(n,t,r,i),zt.lineSegmentPlane(e,t,r,o),{positions:[e,t,n,i,o],indices:[2,0,4,2,4,3,1,3,4]};if(!a)return zt.lineSegmentPlane(e,n,r,i),zt.lineSegmentPlane(t,n,r,o),{positions:[e,t,n,i,o],indices:[0,1,4,0,4,3,2,3,4]}}},pn.defer=gn,pn.resolve=En,pn.reject=function(e){return pn(e,yn)},pn.join=function(){return Sn(arguments,Nn)},pn.all=An,pn.map=Sn,pn.reduce=function(e,o){var t=Wn.call(arguments,1);return pn(e,function(e){var i=e.length;return t[0]=function(e,n,r){return pn(e,function(t){return pn(n,function(e){return o(t,e,r,i)})})},Vn.apply(e,t)})},pn.any=function(e,t,n,r){return Tn(e,1,function(e){return t?t(e[0]):e[0]},n,r)},pn.some=Tn,pn.chain=function(e,t,n){var r=2<arguments.length;return pn(e,function(e){return t.resolve(e=r?n:e),e},function(e){return t.reject(e),yn(e)},t.progress)},pn.isPromise=Rn,_n.prototype={always:function(e,t){return this.then(e,e,t)},otherwise:function(e){return this.then(fn,e)},yield:function(e){return this.then(function(){return e})},spread:function(t){return this.then(function(e){return An(e,function(e){return t.apply(fn,e)})})}};var xn,wn,Cn,Mn,vn,bn,Pn,Un,Dn,Fn,zn,Ln,Bn,qn,Gn,jn,Hn,Wn=[].slice,Vn=[].reduce||function(e){var t,n=0,r=Object(this),i=r.length>>>0,o=arguments;if(o.length<=1)for(;;){if(n in r){t=r[n++];break}if(++n>=i)throw new TypeError}else t=o[1];for(;n<i;++n)n in r&&(t=e(t,r[n],n,r));return t},Xn={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},Yn={};function kn(e){for(var t=e.split("."),n=0,r=t.length;n<r;++n)t[n]=parseInt(t[n],10);return t}function Kn(){var e;return C(wn)||(wn=!1,$n()||null!==(e=/ Chrome\/([\.0-9]+)/.exec(xn.userAgent))&&(wn=!0,Cn=kn(e[1]))),wn}function Zn(){var e;return C(Mn)||(Mn=!1,Kn()||$n()||!/ Safari\/[\.0-9]+/.test(xn.userAgent)||null!==(e=/ Version\/([\.0-9]+)/.exec(xn.userAgent))&&(Mn=!0,vn=kn(e[1]))),Mn}function Jn(){var e;return C(bn)||(bn=!1,null!==(e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(xn.userAgent))&&(bn=!0,(Pn=kn(e[1])).isNightly=!!e[2])),bn}function Qn(){var e;return C(Un)||(Un=!1,"Microsoft Internet Explorer"===xn.appName?null!==(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(xn.userAgent))&&(Un=!0,Dn=kn(e[1])):"Netscape"===xn.appName&&null!==(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(xn.userAgent))&&(Un=!0,Dn=kn(e[1]))),Un}function $n(){var e;return C(Fn)||(Fn=!1,null!==(e=/ Edge\/([\.0-9]+)/.exec(xn.userAgent))&&(Fn=!0,zn=kn(e[1]))),Fn}function er(){var e;return C(Ln)||(Ln=!1,null!==(e=/Firefox\/([\.0-9]+)/.exec(xn.userAgent))&&(Ln=!0,Bn=kn(e[1]))),Ln}function tr(){var e;return C(Hn)||((e=document.createElement("canvas")).setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;"),e=e.style.imageRendering,(Hn=C(e)&&""!==e)&&(jn=e)),Hn}function nr(){return nr._result}Object.defineProperties(Yn,{element:{get:function(){if(Yn.supportsFullscreen())return document[Xn.fullscreenElement]}},changeEventName:{get:function(){if(Yn.supportsFullscreen())return Xn.fullscreenchange}},errorEventName:{get:function(){if(Yn.supportsFullscreen())return Xn.fullscreenerror}},enabled:{get:function(){if(Yn.supportsFullscreen())return document[Xn.fullscreenEnabled]}},fullscreen:{get:function(){if(Yn.supportsFullscreen())return null!==Yn.element}}}),Yn.supportsFullscreen=function(){if(C(mn))return mn;mn=!1;var e=document.body;if("function"==typeof e.requestFullscreen)return Xn.requestFullscreen="requestFullscreen",Xn.exitFullscreen="exitFullscreen",Xn.fullscreenEnabled="fullscreenEnabled",Xn.fullscreenElement="fullscreenElement",Xn.fullscreenchange="fullscreenchange",Xn.fullscreenerror="fullscreenerror",mn=!0;for(var t=["webkit","moz","o","ms","khtml"],n=0,r=t.length;n<r;++n){var i,o=t[n];"function"!=typeof e[i=o+"RequestFullscreen"]&&"function"!=typeof e[i=o+"RequestFullScreen"]||(Xn.requestFullscreen=i,mn=!0),i=o+"ExitFullscreen","function"==typeof document[i]?Xn.exitFullscreen=i:(i=o+"CancelFullScreen","function"==typeof document[i]&&(Xn.exitFullscreen=i)),i=o+"FullscreenEnabled",void 0!==document[i]?Xn.fullscreenEnabled=i:(i=o+"FullScreenEnabled",void 0!==document[i]&&(Xn.fullscreenEnabled=i)),i=o+"FullscreenElement",void 0!==document[i]?Xn.fullscreenElement=i:(i=o+"FullScreenElement",void 0!==document[i]&&(Xn.fullscreenElement=i)),i=o+"fullscreenchange",void 0!==document["on"+i]&&(Xn.fullscreenchange=i="ms"===o?"MSFullscreenChange":i),i=o+"fullscreenerror",void 0!==document["on"+i]&&(Xn.fullscreenerror=i="ms"===o?"MSFullscreenError":i)}return mn},Yn.requestFullscreen=function(e,t){Yn.supportsFullscreen()&&e[Xn.requestFullscreen]({vrDisplay:t})},Yn.exitFullscreen=function(){Yn.supportsFullscreen()&&document[Xn.exitFullscreen]()},Yn._names=Xn,xn="undefined"!=typeof navigator?navigator:{},nr._promise=void 0,nr._result=void 0,nr.initialize=function(){if(C(nr._promise))return nr._promise;var e=pn.defer();if(nr._promise=e.promise,$n())return nr._result=!1,e.resolve(nr._result),e.promise;var t=new Image;return t.onload=function(){nr._result=0<t.width&&0<t.height,e.resolve(nr._result)},t.onerror=function(){nr._result=!1,e.resolve(nr._result)},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.promise},Object.defineProperties(nr,{initialized:{get:function(){return C(nr._result)}}});var rr=[];"undefined"!=typeof ArrayBuffer&&(rr.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&rr.push(Uint8ClampedArray),"undefined"!=typeof Uint8ClampedArray&&rr.push(Uint8ClampedArray));var ir={isChrome:Kn,chromeVersion:function(){return Kn()&&Cn},isSafari:Zn,safariVersion:function(){return Zn()&&vn},isWebkit:Jn,webkitVersion:function(){return Jn()&&Pn},isInternetExplorer:Qn,internetExplorerVersion:function(){return Qn()&&Dn},isEdge:$n,edgeVersion:function(){return $n()&&zn},isFirefox:er,firefoxVersion:function(){return er()&&Bn},isWindows:function(){return qn=!C(qn)?/Windows/i.test(xn.appVersion):qn},hardwareConcurrency:M(xn.hardwareConcurrency,3),supportsPointerEvents:function(){return Gn=!C(Gn)?!er()&&"undefined"!=typeof PointerEvent&&(!C(xn.pointerEnabled)||xn.pointerEnabled):Gn},supportsImageRenderingPixelated:tr,supportsWebP:nr,imageRenderingValue:function(){return tr()?jn:void 0},typedArrayTypes:rr};function or(e,t,n,r){this.x=M(e,0),this.y=M(t,0),this.z=M(n,0),this.w=M(r,0)}ir.supportsFullscreen=function(){return Yn.supportsFullscreen()},ir.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer},ir.supportsWebWorkers=function(){return"undefined"!=typeof Worker},ir.supportsWebAssembly=function(){return"undefined"!=typeof WebAssembly&&!ir.isEdge()};var ar=new v;or.fromAxisAngle=function(e,t,n){var r=t/2,i=Math.sin(r),t=(ar=v.normalize(e,ar)).x*i,e=ar.y*i,i=ar.z*i,r=Math.cos(r);return C(n)?(n.x=t,n.y=e,n.z=i,n.w=r,n):new or(t,e,i,r)};var sr=[1,2,0],ur=new Array(3);or.fromRotationMatrix=function(e,t){var n,r,i,o,a=e[re.COLUMN0ROW0],s=e[re.COLUMN1ROW1],u=e[re.COLUMN2ROW2],c=a+s+u,l=0<c?(i=.5*(o=Math.sqrt(c+1)),n=(e[re.COLUMN1ROW2]-e[re.COLUMN2ROW1])*(o=.5/o),r=(e[re.COLUMN2ROW0]-e[re.COLUMN0ROW2])*o,(e[re.COLUMN0ROW1]-e[re.COLUMN1ROW0])*o):(s=sr[a=sr[u=a<u&&s<u?2:a<s?1:0]],o=Math.sqrt(e[re.getElementIndex(u,u)]-e[re.getElementIndex(a,a)]-e[re.getElementIndex(s,s)]+1),(l=ur)[u]=.5*o,o=.5/o,i=(e[re.getElementIndex(s,a)]-e[re.getElementIndex(a,s)])*o,l[a]=(e[re.getElementIndex(a,u)]+e[re.getElementIndex(u,a)])*o,l[s]=(e[re.getElementIndex(s,u)]+e[re.getElementIndex(u,s)])*o,n=-l[0],r=-l[1],-l[2]);return C(t)?(t.x=n,t.y=r,t.z=l,t.w=i,t):new or(n,r,l,i)};var cr,lr,hr,fr=new or;new or,new or,new or;or.fromHeadingPitchRoll=function(e,t){return hr=or.fromAxisAngle(v.UNIT_X,e.roll,fr),lr=or.fromAxisAngle(v.UNIT_Y,-e.pitch,t),t=or.multiply(lr,hr,lr),cr=or.fromAxisAngle(v.UNIT_Z,-e.heading,fr),or.multiply(cr,t,t)};var mr=new v,dr=new v;or.fromNormal=function(e,t,n){var r=v.add(e,t,mr);v.normalize(r,r);var i,o,a,s,u=v.dot(e,r),t=u;return s=0!=u?(o=(i=v.cross(e,r,dr)).x,a=i.y,i.z):Math.abs(e.x)>=Math.abs(e.y)?(s=1/Math.sqrt(e.x*e.x+e.z*e.z),o=-e.z*s,a=0,e.x*s):(s=1/Math.sqrt(e.x*e.x+e.z*e.z),o=0,a=e.z*s,-e.y*s),C(n)?(n.x=o,n.y=a,n.z=s,n.w=t,n):new or(o,a,s,t)};var pr=new v,Er=new v,_r=new or,yr=new or,gr=new or;or.packedLength=4,or.pack=function(e,t,n){return n=M(n,0),t[n++]=e.x,t[n++]=e.y,t[n++]=e.z,t[n]=e.w,t},or.unpack=function(e,t,n){return t=M(t,0),(n=!C(n)?new or:n).x=e[t],n.y=e[t+1],n.z=e[t+2],n.w=e[t+3],n},or.packedInterpolationLength=3,or.convertPackedArrayForInterpolation=function(e,t,n,r){or.unpack(e,4*n,gr),or.conjugate(gr,gr);for(var i=0,o=n-t+1;i<o;i++){var a=3*i;or.unpack(e,4*(t+i),_r),or.multiply(_r,gr,_r),_r.w<0&&or.negate(_r,_r),or.computeAxis(_r,pr);var s=or.computeAngle(_r);(r=!C(r)?[]:r)[a]=pr.x*s,r[1+a]=pr.y*s,r[2+a]=pr.z*s}},or.unpackInterpolationResult=function(e,t,n,r,i){C(i)||(i=new or),v.fromArray(e,0,Er);e=v.magnitude(Er);return or.unpack(t,4*r,yr),0===e?or.clone(or.IDENTITY,_r):or.fromAxisAngle(Er,e,_r),or.multiply(_r,yr,i)},or.clone=function(e,t){if(C(e))return C(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new or(e.x,e.y,e.z,e.w)},or.conjugate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},or.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},or.magnitude=function(e){return Math.sqrt(or.magnitudeSquared(e))},or.normalize=function(e,t){var n=1/or.magnitude(e),r=e.x*n,i=e.y*n,o=e.z*n,n=e.w*n;return t.x=r,t.y=i,t.z=o,t.w=n,t},or.inverse=function(e,t){var n=or.magnitudeSquared(e);return t=or.conjugate(e,t),or.multiplyByScalar(t,1/n,t)},or.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n},or.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n},or.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},or.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},or.multiply=function(e,t,n){var r=e.x,i=e.y,o=e.z,a=e.w,s=t.x,u=t.y,c=t.z,l=t.w,h=a*u-r*c+i*l+o*s,e=a*c+r*u-i*s+o*l,t=a*l-r*s-i*u-o*c;return n.x=a*s+r*l+i*c-o*u,n.y=h,n.z=e,n.w=t,n},or.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n},or.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n},or.computeAxis=function(e,t){var n=e.w;if(Math.abs(n-1)<_e.EPSILON6)return t.x=t.y=t.z=0,t;n=1/Math.sqrt(1-n*n);return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t},or.computeAngle=function(e){return Math.abs(e.w-1)<_e.EPSILON6?0:2*Math.acos(e.w)};var Rr=new or;or.lerp=function(e,t,n,r){return Rr=or.multiplyByScalar(t,n,Rr),r=or.multiplyByScalar(e,1-n,r),or.add(Rr,r,r)};var Tr=new or,Ar=new or,Sr=new or;or.slerp=function(e,t,n,r){var i=or.dot(e,t),o=t;if(i<0&&(i=-i,o=Tr=or.negate(t,Tr)),1-i<_e.EPSILON6)return or.lerp(e,o,n,r);i=Math.acos(i);return Ar=or.multiplyByScalar(e,Math.sin((1-n)*i),Ar),Sr=or.multiplyByScalar(o,Math.sin(n*i),Sr),r=or.add(Ar,Sr,r),or.multiplyByScalar(r,1/Math.sin(i),r)},or.log=function(e,t){var n=_e.acosClamped(e.w),r=0;return 0!==n&&(r=n/Math.sin(n)),v.multiplyByScalar(e,r,t)},or.exp=function(e,t){var n=v.magnitude(e),r=0;return 0!==n&&(r=Math.sin(n)/n),t.x=e.x*r,t.y=e.y*r,t.z=e.z*r,t.w=Math.cos(n),t};var Or=new v,Ir=new v,Nr=new or,xr=new or;or.computeInnerQuadrangle=function(e,t,n,r){var i=or.conjugate(t,Nr);or.multiply(i,n,xr);n=or.log(xr,Or);or.multiply(i,e,xr);e=or.log(xr,Ir);return v.add(n,e,n),v.multiplyByScalar(n,.25,n),v.negate(n,n),or.exp(n,Nr),or.multiply(t,Nr,r)},or.squad=function(e,t,n,r,i,o){t=or.slerp(e,t,i,Nr),r=or.slerp(n,r,i,xr);return or.slerp(t,r,2*i*(1-i),o)};for(var wr=new or,rr=1.9011074535173003,Cr=ir.supportsTypedArrays()?new Float32Array(8):[],Mr=ir.supportsTypedArrays()?new Float32Array(8):[],vr=ir.supportsTypedArrays()?new Float32Array(8):[],br=ir.supportsTypedArrays()?new Float32Array(8):[],Pr=0;Pr<7;++Pr){var Ur=Pr+1,Dr=2*Ur+1;Cr[Pr]=1/(Ur*Dr),Mr[Pr]=Ur/Dr}function Fr(e,t,n){this.heading=M(e,0),this.pitch=M(t,0),this.roll=M(n,0)}function zr(e,t,n){for(var r,i,o=0,a=e.length-1;o<=a;)if((i=n(e[r=~~((o+a)/2)],t))<0)o=1+r;else{if(!(0<i))return r;a=r-1}return~(a+1)}function Lr(){function g(e,t,n,r,i,o,a){var s=e>>>0;return e=(n=n&&s&&{2:"0b",8:"0",16:"0x"}[t]||"")+S(s.toString(t),o||0,"0",!1),O(e,n,r,i,a)}function R(e,t,n,r,i,o){return null!=r&&(e=e.slice(0,r)),O(e,"",t,n,i,o)}var T=arguments,A=0,e=T[A++],S=function(e,t,n,r){n=n||" ";n=e.length>=t?"":Array(1+t-e.length>>>0).join(n);return r?e+n:n+e},O=function(e,t,n,r,i,o){var a=r-e.length;return e=0<a?n||!i?S(e,r,o,n):e.slice(0,t.length)+S("",a,"0",!0)+e.slice(t.length):e};return e.replace(/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,function(e,t,n,r,i,o,a){var s,u,c,l,h;if("%%"==e)return"%";for(var f=!1,m="",d=!1,p=!1,E=" ",_=n.length,y=0;n&&y<_;y++)switch(n.charAt(y)){case" ":m=" ";break;case"+":m="+";break;case"-":f=!0;break;case"'":E=n.charAt(y+1);break;case"0":d=!0;break;case"#":p=!0}switch((r=r?"*"==r?+T[A++]:"*"==r.charAt(0)?+T[r.slice(1,-1)]:+r:0)<0&&(r=-r,f=!0),o=o?"*"==o?+T[A++]:"*"==o.charAt(0)?+T[o.slice(1,-1)]:+o:-1<"fFeE".indexOf(a)?6:"d"==a?0:void 0,h=t?T[t.slice(0,-1)]:T[A++],a){case"s":return R(String(h),f,r,o,d,E);case"c":return R(String.fromCharCode(+h),f,r,o,d);case"b":return g(h,2,p,f,r,o,d);case"o":return g(h,8,p,f,r,o,d);case"x":return g(h,16,p,f,r,o,d);case"X":return g(h,16,p,f,r,o,d).toUpperCase();case"u":return g(h,10,p,f,r,o,d);case"i":case"d":return s=+h||0,h=(u=(s=Math.round(s-s%1))<0?"-":m)+S(String(Math.abs(s)),o,"0",!1),O(h,u,f,r,d);case"e":case"E":case"f":case"F":case"g":case"G":return u=(s=+h)<0?"-":m,c=["toExponential","toFixed","toPrecision"]["efg".indexOf(a.toLowerCase())],l=["toString","toUpperCase"]["eEfFgG".indexOf(a)%2],h=u+Math.abs(s)[c](o),O(h,u,f,r,d)[l]();default:return e}})}function Br(e,t,n,r,i,o,a,s){this.year=e,this.month=t,this.day=n,this.hour=r,this.minute=i,this.second=o,this.millisecond=a,this.isLeapSecond=s}function qr(e){return e%4==0&&e%100!=0||e%400==0}function Gr(e,t){this.julianDate=e,this.offset=t}Cr[7]=rr/136,Mr[7]=8*rr/17,or.fastSlerp=function(e,t,n,r){var i,o=or.dot(e,t);0<=o?i=1:(i=-1,o=-o);for(var a=o-1,o=1-n,s=n*n,u=o*o,c=7;0<=c;--c)vr[c]=(Cr[c]*s-Mr[c])*a,br[c]=(Cr[c]*u-Mr[c])*a;n=i*n*(1+vr[0]*(1+vr[1]*(1+vr[2]*(1+vr[3]*(1+vr[4]*(1+vr[5]*(1+vr[6]*(1+vr[7])))))))),o*=1+br[0]*(1+br[1]*(1+br[2]*(1+br[3]*(1+br[4]*(1+br[5]*(1+br[6]*(1+br[7]))))))),o=or.multiplyByScalar(e,o,wr);return or.multiplyByScalar(t,n,r),or.add(o,r,r)},or.fastSquad=function(e,t,n,r,i,o){t=or.fastSlerp(e,t,i,Nr),r=or.fastSlerp(n,r,i,xr);return or.fastSlerp(t,r,2*i*(1-i),o)},or.equals=function(e,t){return e===t||C(e)&&C(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},or.equalsEpsilon=function(e,t,n){return n=M(n,0),e===t||C(e)&&C(t)&&Math.abs(e.x-t.x)<=n&&Math.abs(e.y-t.y)<=n&&Math.abs(e.z-t.z)<=n&&Math.abs(e.w-t.w)<=n},or.ZERO=Object.freeze(new or(0,0,0,0)),or.IDENTITY=Object.freeze(new or(0,0,0,1)),or.prototype.clone=function(e){return or.clone(this,e)},or.prototype.equals=function(e){return or.equals(this,e)},or.prototype.equalsEpsilon=function(e,t){return or.equalsEpsilon(this,e,t)},or.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},or.from_euler=function(e,t,n,r){var i=Math.cos(.5*t),o=Math.cos(.5*n),a=Math.cos(.5*e),s=Math.sin(.5*t),u=Math.sin(.5*n),c=Math.sin(.5*e),t=i*o*a-s*u*c,n=s*u*a+i*o*c,e=s*o*a+i*u*c,c=i*u*a-s*o*c;return C(r)?(r.x=n,r.y=e,r.z=c,r.w=t,r):r=new or(n,e,c,t)},or.to_euler=function(e,t){C(t)||(t=new v);var n=e.w,r=e.x,i=e.y,o=e.z,a=r*r,s=i*i,u=o*o,e=r*i+o*n;return.499<e?(t.x=0,t.y=2*Math.atan2(r,n),t.z=_e.PI_OVER_TWO):e<-.499?(t.x=0,t.y=2*-Math.atan2(r,n),t.z=-_e.PI_OVER_TWO):(t.y=Math.atan2(2*i*n-2*r*o,1-2*s-2*u),t.z=Math.asin(2*r*i+2*o*n),t.x=Math.atan2(2*r*n-2*i*o,1-2*a-2*u)),t},Fr.fromQuaternion=function(e,t){C(t)||(t=new Fr);var n=2*(e.w*e.y-e.z*e.x),r=1-2*(e.x*e.x+e.y*e.y),i=2*(e.w*e.x+e.y*e.z),o=1-2*(e.y*e.y+e.z*e.z),e=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(e,o),t.roll=Math.atan2(i,r),t.pitch=-_e.asinClamped(n),t},Fr.fromDegrees=function(e,t,n,r){return(r=!C(r)?new Fr:r).heading=e*_e.RADIANS_PER_DEGREE,r.pitch=t*_e.RADIANS_PER_DEGREE,r.roll=n*_e.RADIANS_PER_DEGREE,r},Fr.clone=function(e,t){if(C(e))return C(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new Fr(e.heading,e.pitch,e.roll)},Fr.equals=function(e,t){return e===t||C(e)&&C(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll},Fr.equalsEpsilon=function(e,t,n,r){return e===t||C(e)&&C(t)&&_e.equalsEpsilon(e.heading,t.heading,n,r)&&_e.equalsEpsilon(e.pitch,t.pitch,n,r)&&_e.equalsEpsilon(e.roll,t.roll,n,r)},Fr.prototype.clone=function(e){return Fr.clone(this,e)},Fr.prototype.equals=function(e){return Fr.equals(this,e)},Fr.prototype.equalsEpsilon=function(e,t,n){return Fr.equalsEpsilon(this,e,t,n)},Fr.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var jr=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),Hr=Object.freeze({UTC:0,TAI:1}),Wr=new Br,Vr=[31,28,31,30,31,30,31,31,30,31,30,31];function Xr(e,t){return ai.compare(e.julianDate,t.julianDate)}var Yr=new Gr;function kr(e){Yr.julianDate=e;var t=ai.leapSeconds,n=zr(t,Yr,Xr),r=t[n=(n=n<0?~n:n)>=t.length?t.length-1:n].offset;0<n&&r<ai.secondsDifference(t[n].julianDate,e)&&(r=t[--n].offset),ai.addSeconds(e,r,e)}function Kr(e,t){Yr.julianDate=e;var n=ai.leapSeconds,r=zr(n,Yr,Xr);if(0===(r=r<0?~r:r))return ai.addSeconds(e,-n[0].offset,t);if(r>=n.length)return ai.addSeconds(e,-n[r-1].offset,t);var i=ai.secondsDifference(n[r].julianDate,e);return 0===i?ai.addSeconds(e,-n[r].offset,t):i<=1?void 0:ai.addSeconds(e,-n[--r].offset,t)}function Zr(e,t,n){var r=t/jr.SECONDS_PER_DAY|0;return e+=r,(t-=jr.SECONDS_PER_DAY*r)<0&&(e--,t+=jr.SECONDS_PER_DAY),n.dayNumber=e,n.secondsOfDay=t,n}function Jr(e,t,n,r,i,o,a){var s=(t-14)/12|0,e=e+4800+s,n=(1461*e/4|0)+(367*(t-2-12*s)/12|0)-(3*((e+100)/100|0)/4|0)+n-32075;(r-=12)<0&&(r+=24);a=o+(r*jr.SECONDS_PER_HOUR+i*jr.SECONDS_PER_MINUTE+a*jr.SECONDS_PER_MILLISECOND);return 43200<=a&&--n,[n,a]}var Qr=/^(\d{4})$/,$r=/^(\d{4})-(\d{2})$/,ei=/^(\d{4})-?(\d{3})$/,ti=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,ni=/^(\d{4})-?(\d{2})-?(\d{2})$/,rr=/([Z+\-])?(\d{2})?:?(\d{2})?$/,ri=/^(\d{2})(\.\d+)?/.source+rr.source,ii=/^(\d{2}):?(\d{2})(\.\d+)?/.source+rr.source,oi=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+rr.source;function ai(e,t,n){this.dayNumber=void 0,this.secondsOfDay=void 0,e=M(e,0),t=M(t,0),n=M(n,Hr.UTC);var r=0|e;Zr(r,t+=(e-r)*jr.SECONDS_PER_DAY,this),n===Hr.UTC&&kr(this)}ai.fromGregorianDate=function(e,t){e=Jr(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return C(t)?(Zr(e[0],e[1],t),kr(t),t):new ai(e[0],e[1],Hr.UTC)},ai.fromDate=function(e,t){e=Jr(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return C(t)?(Zr(e[0],e[1],t),kr(t),t):new ai(e[0],e[1],Hr.UTC)},ai.fromIso8601=function(e,t){var n,r,i,o,a,s=(e=e.replace(",",".")).split("T"),u=1,c=1,l=0,h=0,f=0,m=0,d=s[0],e=s[1];if(null!==(s=d.match(ni))?(i=+s[1],u=+s[2],c=+s[3]):null!==(s=d.match($r))?(i=+s[1],u=+s[2]):null!==(s=d.match(Qr))?i=+s[1]:(null!==(s=d.match(ei))?(i=+s[1],o=+s[2],r=qr(i)):null!==(s=d.match(ti))&&(i=+s[1],o=7*+s[2]+(+s[3]||0)-new Date(Date.UTC(i,0,4)).getUTCDay()-3),(n=new Date(Date.UTC(i,0,1))).setUTCDate(o),u=n.getUTCMonth()+1,c=n.getUTCDate()),r=qr(i),C(e)){null!==(s=e.match(oi))?(l=+s[1],h=+s[2],f=+s[3],m=1e3*+(s[4]||0),a=5):null!==(s=e.match(ii))?(l=+s[1],h=+s[2],f=60*+(s[3]||0),a=4):null!==(s=e.match(ri))&&(l=+s[1],h=60*+(s[2]||0),a=3);var p=s[a],E=+s[a+1],_=+(s[a+2]||0);switch(p){case"+":l-=E,h-=_;break;case"-":l+=E,h+=_;break;case"Z":break;default:h+=new Date(Date.UTC(i,u-1,c,l,h)).getTimezoneOffset()}}p=60===f;for(p&&f--;60<=h;)h-=60,l++;for(;24<=l;)l-=24,c++;for(n=r&&2===u?29:Vr[u-1];n<c;)c-=n,12<++u&&(u-=12,i++),n=r&&2===u?29:Vr[u-1];for(;h<0;)h+=60,l--;for(;l<0;)l+=24,c--;for(;c<1;)--u<1&&(u+=12,i--),c+=n=r&&2===u?29:Vr[u-1];m=Jr(i,u,c,l,h,f,m);return C(t)?(Zr(m[0],m[1],t),kr(t)):t=new ai(m[0],m[1],Hr.UTC),p&&ai.addSeconds(t,1,t),t},ai.now=function(e){return ai.fromDate(new Date,e)};var si=new ai(0,0,Hr.TAI);function ui(e,t){if(null===e||"object"!=typeof e)return e;t=M(t,!1);var n,r,i=new e.constructor;for(n in e)e.hasOwnProperty(n)&&(r=e[n],t&&(r=ui(r,t)),i[n]=r);return i}function ci(e,t,n){n=M(n,!1);var r,i,o,a={},s=C(e),u=C(t);if(s)for(r in e)e.hasOwnProperty(r)&&(i=e[r],u&&n&&"object"==typeof i&&t.hasOwnProperty(r)?(o=t[r],a[r]="object"==typeof o?ci(i,o,n):i):a[r]=i);if(u)for(r in t)t.hasOwnProperty(r)&&!a.hasOwnProperty(r)&&(o=t[r],a[r]=o);return a}function li(e){e instanceof li?(this.scheme=e.scheme,this.authority=e.authority,this.path=e.path,this.query=e.query,this.fragment=e.fragment):e&&(0<e.indexOf("/sde?/")&&(e=e.replace("/sde?/","/sde/")),e=hi.exec(e),this.scheme=e[1],this.authority=e[2],this.path=e[3],this.query=e[4],this.fragment=e[5],-1<this.path.indexOf("/sde/")&&(this.path=this.path.replace("/sde/","/sde?/")))}ai.toGregorianDate=function(e,t){var n=!1,r=Kr(e,si);C(r)||(ai.addSeconds(e,-1,si),r=Kr(si,si),n=!0);var i=r.dayNumber,o=r.secondsOfDay;43200<=o&&(i+=1);var a=i+68569|0,s=4*a/146097|0,u=4e3*(1+(a=a-((146097*s+3)/4|0)|0))/1461001|0,e=80*(a=a-(1461*u/4|0)+31|0)/2447|0,r=a-(2447*e/80|0)|0,i=2+e-12*(a=e/11|0)|0,e=100*(s-49)+u+a|0,s=o/jr.SECONDS_PER_HOUR|0,u=o-s*jr.SECONDS_PER_HOUR,a=u/jr.SECONDS_PER_MINUTE|0,o=0|(u-=a*jr.SECONDS_PER_MINUTE),u=(u-o)/jr.SECONDS_PER_MILLISECOND;return 23<(s+=12)&&(s-=24),n&&(o+=1),C(t)?(t.year=e,t.month=i,t.day=r,t.hour=s,t.minute=a,t.second=o,t.millisecond=u,t.isLeapSecond=n,t):new Br(e,i,r,s,a,o,u,n)},ai.toDate=function(e){var t=ai.toGregorianDate(e,Wr),e=t.second;return t.isLeapSecond&&--e,new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,e,t.millisecond))},ai.toIso8601=function(e,t){var n=ai.toGregorianDate(e,Wr),r=n.year,i=n.month,o=n.day,a=n.hour,s=n.minute,e=n.second,n=n.millisecond;return 1e4===r&&1===i&&1===o&&0===a&&0===s&&0===e&&0===n&&(r=9999,i=12,o=31,a=24),C(t)||0===n?C(t)&&0!==t?Lr("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",r,i,o,a,s,e,(.01*n).toFixed(t).replace(".","").slice(0,t)):Lr("%04d-%02d-%02dT%02d:%02d:%02dZ",r,i,o,a,s,e):Lr("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",r,i,o,a,s,e,(.01*n).toString().replace(".",""))},ai.clone=function(e,t){if(C(e))return C(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new ai(e.dayNumber,e.secondsOfDay,Hr.TAI)},ai.compare=function(e,t){var n=e.dayNumber-t.dayNumber;return 0!=n?n:e.secondsOfDay-t.secondsOfDay},ai.equals=function(e,t){return e===t||C(e)&&C(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay},ai.equalsEpsilon=function(e,t,n){return n=M(n,0),e===t||C(e)&&C(t)&&Math.abs(ai.secondsDifference(e,t))<=n},ai.totalDays=function(e){return e.dayNumber+e.secondsOfDay/jr.SECONDS_PER_DAY},ai.secondsDifference=function(e,t){return(e.dayNumber-t.dayNumber)*jr.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)},ai.daysDifference=function(e,t){return e.dayNumber-t.dayNumber+(e.secondsOfDay-t.secondsOfDay)/jr.SECONDS_PER_DAY},ai.computeTaiMinusUtc=function(e){Yr.julianDate=e;var t=ai.leapSeconds,e=zr(t,Yr,Xr);return e<0&&(e=~e,--e<0&&(e=0)),t[e].offset},ai.addSeconds=function(e,t,n){return Zr(e.dayNumber,e.secondsOfDay+t,n)},ai.addMinutes=function(e,t,n){t=e.secondsOfDay+t*jr.SECONDS_PER_MINUTE;return Zr(e.dayNumber,t,n)},ai.addHours=function(e,t,n){t=e.secondsOfDay+t*jr.SECONDS_PER_HOUR;return Zr(e.dayNumber,t,n)},ai.addDays=function(e,t,n){return Zr(e.dayNumber+t,e.secondsOfDay,n)},ai.lessThan=function(e,t){return ai.compare(e,t)<0},ai.lessThanOrEquals=function(e,t){return ai.compare(e,t)<=0},ai.greaterThan=function(e,t){return 0<ai.compare(e,t)},ai.greaterThanOrEquals=function(e,t){return 0<=ai.compare(e,t)},ai.prototype.clone=function(e){return ai.clone(this,e)},ai.prototype.equals=function(e){return ai.equals(this,e)},ai.prototype.equalsEpsilon=function(e,t){return ai.equalsEpsilon(this,e,t)},ai.prototype.toString=function(){return ai.toIso8601(this)},ai.leapSeconds=[new Gr(new ai(2441317,43210,Hr.TAI),10),new Gr(new ai(2441499,43211,Hr.TAI),11),new Gr(new ai(2441683,43212,Hr.TAI),12),new Gr(new ai(2442048,43213,Hr.TAI),13),new Gr(new ai(2442413,43214,Hr.TAI),14),new Gr(new ai(2442778,43215,Hr.TAI),15),new Gr(new ai(2443144,43216,Hr.TAI),16),new Gr(new ai(2443509,43217,Hr.TAI),17),new Gr(new ai(2443874,43218,Hr.TAI),18),new Gr(new ai(2444239,43219,Hr.TAI),19),new Gr(new ai(2444786,43220,Hr.TAI),20),new Gr(new ai(2445151,43221,Hr.TAI),21),new Gr(new ai(2445516,43222,Hr.TAI),22),new Gr(new ai(2446247,43223,Hr.TAI),23),new Gr(new ai(2447161,43224,Hr.TAI),24),new Gr(new ai(2447892,43225,Hr.TAI),25),new Gr(new ai(2448257,43226,Hr.TAI),26),new Gr(new ai(2448804,43227,Hr.TAI),27),new Gr(new ai(2449169,43228,Hr.TAI),28),new Gr(new ai(2449534,43229,Hr.TAI),29),new Gr(new ai(2450083,43230,Hr.TAI),30),new Gr(new ai(2450630,43231,Hr.TAI),31),new Gr(new ai(2451179,43232,Hr.TAI),32),new Gr(new ai(2453736,43233,Hr.TAI),33),new Gr(new ai(2454832,43234,Hr.TAI),34),new Gr(new ai(2456109,43235,Hr.TAI),35),new Gr(new ai(2457204,43236,Hr.TAI),36),new Gr(new ai(2457754,43237,Hr.TAI),37)],li.prototype.scheme=null,li.prototype.authority=null,li.prototype.path="",li.prototype.query=null,li.prototype.fragment=null;var hi=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$");li.prototype.getScheme=function(){return this.scheme},li.prototype.getAuthority=function(){return this.authority},li.prototype.getPath=function(){return this.path},li.prototype.getQuery=function(){return this.query},li.prototype.getFragment=function(){return this.fragment},li.prototype.isAbsolute=function(){return!!this.scheme&&!this.fragment},li.prototype.isSameDocumentAs=function(e){return e.scheme==this.scheme&&e.authority==this.authority&&e.path==this.path&&e.query==this.query},li.prototype.equals=function(e){return this.isSameDocumentAs(e)&&e.fragment==this.fragment},li.prototype.normalize=function(){this.removeDotSegments(),this.scheme&&(this.scheme=this.scheme.toLowerCase()),this.authority&&(this.authority=this.authority.replace(di,Ei).replace(fi,pi)),this.path&&(this.path=this.path.replace(fi,pi)),this.query&&(this.query=this.query.replace(fi,pi)),this.fragment&&(this.fragment=this.fragment.replace(fi,pi))};var fi=/%[0-9a-z]{2}/gi,mi=/[a-zA-Z0-9\-\._~]/,di=/(.*@)?([^@:]*)(:.*)?/;function pi(e){var t=unescape(e);return mi.test(t)?t:e.toUpperCase()}function Ei(e,t,n,r){return(t||"")+n.toLowerCase()+(r||"")}function _i(e,t){var n;return"undefined"!=typeof document&&(n=document),_i._implementation(e,t,n)}li.prototype.resolve=function(e){var t=new li;return this.scheme?(t.scheme=this.scheme,t.authority=this.authority,t.path=this.path,t.query=this.query):(t.scheme=e.scheme,this.authority?(t.authority=this.authority,t.path=this.path,t.query=this.query):(t.authority=e.authority,""==this.path?(t.path=e.path,t.query=this.query||e.query):("/"==this.path.charAt(0)?t.path=this.path:e.authority&&""==e.path?t.path="/"+this.path:t.path=e.path.substring(0,e.path.lastIndexOf("/")+1)+this.path,t.removeDotSegments(),t.query=this.query))),t.fragment=this.fragment,t},li.prototype.removeDotSegments=function(){var e,t=this.path.split("/"),n=[],r=""==t[0];for(r&&t.shift(),""==t[0]&&t.shift();t.length;)".."==(e=t.shift())?n.pop():"."!=e&&n.push(e);"."!=e&&".."!=e||n.push(""),r&&n.unshift(""),this.path=n.join("/")},li.prototype.toString=function(){var e="";return this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+this.authority),e+=this.path,this.query&&(e+="?"+this.query),this.fragment&&(e+="#"+this.fragment),e},_i._implementation=function(e,t,n){if(!C(t)){if(void 0===n)return e;t=M(n.baseURI,n.location.href)}t=new li(t);return new li(e).resolve(t).toString()};var yi,gi=/^blob:/i;function Ri(e){return gi.test(e)}var Ti=/^data:/i;function Ai(e){return Ti.test(e)}var Si,Oi,Ii={},Ni={};function xi(e,t,n){return n<0&&(n+=1),1<n&&--n,6*n<1?e+6*(t-e)*n:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function wi(e,t,n,r){this.red=M(e,1),this.green=M(t,1),this.blue=M(n,1),this.alpha=M(r,1)}Ii.add=function(e,t){t=e.toLowerCase()+":"+t;C(Ni[t])||(Ni[t]=!0)},Ii.remove=function(e,t){t=e.toLowerCase()+":"+t;C(Ni[t])&&delete Ni[t]},Ii.contains=function(e){e=function(e){var t=new li(e);if(t.normalize(),C(e=t.getAuthority())){if(-1===(e=-1!==e.indexOf("@")?e.split("@")[1]:e).indexOf(":")){t=t.getScheme();if("http"===(t=!C(t)?(t=window.location.protocol).substring(0,t.length-1):t))e+=":80";else{if("https"!==t)return;e+=":443"}}return e}}(e);return!(!C(e)||!C(Ni[e]))},Ii.clear=function(){Ni={}},wi.fromCartesian4=function(e,t){return C(t)?(t.red=e.x,t.green=e.y,t.blue=e.z,t.alpha=e.w,t):new wi(e.x,e.y,e.z,e.w)},wi.fromBytes=function(e,t,n,r,i){return e=wi.byteToFloat(M(e,255)),t=wi.byteToFloat(M(t,255)),n=wi.byteToFloat(M(n,255)),r=wi.byteToFloat(M(r,255)),C(i)?(i.red=e,i.green=t,i.blue=n,i.alpha=r,i):new wi(e,t,n,r)},wi.fromAlpha=function(e,t,n){return C(n)?(n.red=e.red,n.green=e.green,n.blue=e.blue,n.alpha=t,n):new wi(e.red,e.green,e.blue,t)},ir.supportsTypedArrays()&&(rr=new ArrayBuffer(4),Si=new Uint32Array(rr),Oi=new Uint8Array(rr)),wi.fromRgba=function(e,t){return Si[0]=e,wi.fromBytes(Oi[0],Oi[1],Oi[2],Oi[3],t)},wi.fromArgb=function(e,t){return Si[0]=e,wi.fromBytes(Oi[2],Oi[1],Oi[0],Oi[3],t)},wi.fromMapserver=function(e,t){return Si[0]=e,wi.fromBytes(Oi[3],Oi[2],Oi[1],Oi[0],t)},wi.fromHsl=function(e,t,n,r,i){e=M(e,0)%1,t=M(t,0),n=M(n,0),r=M(r,1);var o=n,a=n,s=n;return 0!==t&&(o=xi(t=2*n-(n=n<.5?n*(1+t):n+t-n*t),n,e+1/3),a=xi(t,n,e),s=xi(t,n,e-1/3)),C(i)?(i.red=o,i.green=a,i.blue=s,i.alpha=r,i):new wi(o,a,s,r)},wi.fromRandom=function(e,t){var n=(e=M(e,M.EMPTY_OBJECT)).red;C(n)||(r=M(e.minimumRed,0),i=M(e.maximumRed,1),n=r+_e.nextRandomNumber()*(i-r));var r,i=e.green;C(i)||(o=M(e.minimumGreen,0),r=M(e.maximumGreen,1),i=o+_e.nextRandomNumber()*(r-o));var o=e.blue;C(o)||(a=M(e.minimumBlue,0),s=M(e.maximumBlue,1),o=a+_e.nextRandomNumber()*(s-a));var a,s=e.alpha;return C(s)||(a=M(e.minimumAlpha,0),e=M(e.maximumAlpha,1),s=a+_e.nextRandomNumber()*(e-a)),C(t)?(t.red=n,t.green=i,t.blue=o,t.alpha=s,t):new wi(n,i,o,s)};var Ci=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,Mi=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,vi=/^rgba?\(\s*([0-9.]+%?)\s*,\s*([0-9.]+%?)\s*,\s*([0-9.]+%?)(?:\s*,\s*([0-9.]+))?\s*\)$/i,bi=/^hsla?\(\s*([0-9.]+)\s*,\s*([0-9.]+%)\s*,\s*([0-9.]+%)(?:\s*,\s*([0-9.]+))?\s*\)$/i;wi.fromCssColorString=function(e,t){C(t)||(t=new wi);var n=wi[(e=e.replace(/\s/g,"")).toUpperCase()];if(C(n))return wi.clone(n,t),t;n=Ci.exec(e);return null!==n?(t.red=parseInt(n[1],16)/15,t.green=parseInt(n[2],16)/15,t.blue=parseInt(n[3],16)/15,t.alpha=parseInt(M(n[4],"f"),16)/15,t):null!==(n=Mi.exec(e))?(t.red=parseInt(n[1],16)/255,t.green=parseInt(n[2],16)/255,t.blue=parseInt(n[3],16)/255,t.alpha=parseInt(M(n[4],"ff"),16)/255,t):null!==(n=vi.exec(e))?(t.red=parseFloat(n[1])/("%"===n[1].substr(-1)?100:255),t.green=parseFloat(n[2])/("%"===n[2].substr(-1)?100:255),t.blue=parseFloat(n[3])/("%"===n[3].substr(-1)?100:255),t.alpha=parseFloat(M(n[4],"1.0")),t):null!==(n=bi.exec(e))?wi.fromHsl(parseFloat(n[1])/360,parseFloat(n[2])/100,parseFloat(n[3])/100,parseFloat(M(n[4],"1.0")),t):t=void 0},wi.packedLength=4,wi.pack=function(e,t,n){return n=M(n,0),t[n++]=e.red,t[n++]=e.green,t[n++]=e.blue,t[n]=e.alpha,t},wi.unpack=function(e,t,n){return t=M(t,0),(n=!C(n)?new wi:n).red=e[t++],n.green=e[t++],n.blue=e[t++],n.alpha=e[t],n},wi.byteToFloat=function(e){return e/255},wi.floatToByte=function(e){return 1===e?255:256*e|0},wi.clone=function(e,t){if(C(e))return C(t)?(t.red=e.red,t.green=e.green,t.blue=e.blue,t.alpha=e.alpha,t):new wi(e.red,e.green,e.blue,e.alpha)},wi.equals=function(e,t){return e===t||C(e)&&C(t)&&e.red===t.red&&e.green===t.green&&e.blue===t.blue&&e.alpha===t.alpha},wi.equalsArray=function(e,t,n){return e.red===t[n]&&e.green===t[n+1]&&e.blue===t[n+2]&&e.alpha===t[n+3]},wi.prototype.clone=function(e){return wi.clone(this,e)},wi.prototype.equals=function(e){return wi.equals(this,e)},wi.prototype.equalsEpsilon=function(e,t){return this===e||C(e)&&Math.abs(this.red-e.red)<=t&&Math.abs(this.green-e.green)<=t&&Math.abs(this.blue-e.blue)<=t&&Math.abs(this.alpha-e.alpha)<=t},wi.prototype.toString=function(){return"("+this.red+", "+this.green+", "+this.blue+", "+this.alpha+")"},wi.prototype.toUint16=function(){var e=[];return this.toBytes(e),"0x"+e[3].toString(16)+(e[0]<16?"0":"")+e[0].toString(16)+(e[1]<16?"0":"")+e[1].toString(16)+(e[2]<16?"0":"")+e[2].toString(16)},wi.prototype.toUint16MapServerString=function(){var e=[];return this.toBytes(e),'"#'+(e[0]<16?"0":"")+e[0].toString(16)+(e[1]<16?"0":"")+e[1].toString(16)+(e[2]<16?"0":"")+e[2].toString(16)+(e[3]<16?"0":"")+e[3].toString(16)+'"'},wi.prototype.toCssColorString=function(){var e=wi.floatToByte(this.red),t=wi.floatToByte(this.green),n=wi.floatToByte(this.blue);return 1===this.alpha?"rgb("+e+","+t+","+n+")":"rgba("+e+","+t+","+n+","+this.alpha+")"},wi.prototype.toCssHexString=function(){var e=wi.floatToByte(this.red).toString(16);e.length<2&&(e="0"+e);var t=wi.floatToByte(this.green).toString(16);t.length<2&&(t="0"+t);var n=wi.floatToByte(this.blue).toString(16);if(n.length<2&&(n="0"+n),this.alpha<1){var r=wi.floatToByte(this.alpha).toString(16);return"#"+e+t+n+(r=r.length<2?"0"+r:r)}return"#"+e+t+n},wi.prototype.toBytes=function(e){var t=wi.floatToByte(this.red),n=wi.floatToByte(this.green),r=wi.floatToByte(this.blue),i=wi.floatToByte(this.alpha);return C(e)?(e[0]=t,e[1]=n,e[2]=r,e[3]=i,e):[t,n,r,i]},wi.prototype.toRgba=function(){return Oi[0]=wi.floatToByte(this.red),Oi[1]=wi.floatToByte(this.green),Oi[2]=wi.floatToByte(this.blue),Oi[3]=wi.floatToByte(this.alpha),Si[0]},wi.prototype.toArgb=function(){return Oi[3]=wi.floatToByte(this.alpha),Oi[2]=wi.floatToByte(this.red),Oi[1]=wi.floatToByte(this.green),Oi[0]=wi.floatToByte(this.blue),Si[0]},wi.prototype.brighten=function(e,t){return t.red=1-(1-this.red)*(e=1-e),t.green=1-(1-this.green)*e,t.blue=1-(1-this.blue)*e,t.alpha=this.alpha,t},wi.prototype.darken=function(e,t){return t.red=this.red*(e=1-e),t.green=this.green*e,t.blue=this.blue*e,t.alpha=this.alpha,t},wi.prototype.withAlpha=function(e,t){return wi.fromAlpha(this,e,t)},wi.add=function(e,t,n){return n.red=e.red+t.red,n.green=e.green+t.green,n.blue=e.blue+t.blue,n.alpha=e.alpha+t.alpha,n},wi.subtract=function(e,t,n){return n.red=e.red-t.red,n.green=e.green-t.green,n.blue=e.blue-t.blue,n.alpha=e.alpha-t.alpha,n},wi.multiply=function(e,t,n){return n.red=e.red*t.red,n.green=e.green*t.green,n.blue=e.blue*t.blue,n.alpha=e.alpha*t.alpha,n},wi.divide=function(e,t,n){return n.red=e.red/t.red,n.green=e.green/t.green,n.blue=e.blue/t.blue,n.alpha=e.alpha/t.alpha,n},wi.mod=function(e,t,n){return n.red=e.red%t.red,n.green=e.green%t.green,n.blue=e.blue%t.blue,n.alpha=e.alpha%t.alpha,n},wi.lerp=function(e,t,n,r){return r.red=_e.lerp(e.red,t.red,n),r.green=_e.lerp(e.green,t.green,n),r.blue=_e.lerp(e.blue,t.blue,n),r.alpha=_e.lerp(e.alpha,t.alpha,n),r},wi.multiplyByScalar=function(e,t,n){return n.red=e.red*t,n.green=e.green*t,n.blue=e.blue*t,n.alpha=e.alpha*t,n},wi.divideByScalar=function(e,t,n){return n.red=e.red/t,n.green=e.green/t,n.blue=e.blue/t,n.alpha=e.alpha/t,n},wi.ALICEBLUE=Object.freeze(wi.fromCssColorString("#F0F8FF")),wi.ANTIQUEWHITE=Object.freeze(wi.fromCssColorString("#FAEBD7")),wi.AQUA=Object.freeze(wi.fromCssColorString("#00FFFF")),wi.AQUAMARINE=Object.freeze(wi.fromCssColorString("#7FFFD4")),wi.AZURE=Object.freeze(wi.fromCssColorString("#F0FFFF")),wi.BEIGE=Object.freeze(wi.fromCssColorString("#F5F5DC")),wi.BISQUE=Object.freeze(wi.fromCssColorString("#FFE4C4")),wi.BLACK=Object.freeze(wi.fromCssColorString("#000000")),wi.BLANCHEDALMOND=Object.freeze(wi.fromCssColorString("#FFEBCD")),wi.BLUE=Object.freeze(wi.fromCssColorString("#0000FF")),wi.BLUEVIOLET=Object.freeze(wi.fromCssColorString("#8A2BE2")),wi.BROWN=Object.freeze(wi.fromCssColorString("#A52A2A")),wi.BURLYWOOD=Object.freeze(wi.fromCssColorString("#DEB887")),wi.CADETBLUE=Object.freeze(wi.fromCssColorString("#5F9EA0")),wi.CHARTREUSE=Object.freeze(wi.fromCssColorString("#7FFF00")),wi.CHOCOLATE=Object.freeze(wi.fromCssColorString("#D2691E")),wi.CORAL=Object.freeze(wi.fromCssColorString("#FF7F50")),wi.CORNFLOWERBLUE=Object.freeze(wi.fromCssColorString("#6495ED")),wi.CORNSILK=Object.freeze(wi.fromCssColorString("#FFF8DC")),wi.CRIMSON=Object.freeze(wi.fromCssColorString("#DC143C")),wi.CYAN=Object.freeze(wi.fromCssColorString("#00FFFF")),wi.DARKBLUE=Object.freeze(wi.fromCssColorString("#00008B")),wi.DARKCYAN=Object.freeze(wi.fromCssColorString("#008B8B")),wi.DARKGOLDENROD=Object.freeze(wi.fromCssColorString("#B8860B")),wi.DARKGRAY=Object.freeze(wi.fromCssColorString("#A9A9A9")),wi.DARKGREEN=Object.freeze(wi.fromCssColorString("#006400")),wi.DARKGREY=wi.DARKGRAY,wi.DARKKHAKI=Object.freeze(wi.fromCssColorString("#BDB76B")),wi.DARKMAGENTA=Object.freeze(wi.fromCssColorString("#8B008B")),wi.DARKOLIVEGREEN=Object.freeze(wi.fromCssColorString("#556B2F")),wi.DARKORANGE=Object.freeze(wi.fromCssColorString("#FF8C00")),wi.DARKORCHID=Object.freeze(wi.fromCssColorString("#9932CC")),wi.DARKRED=Object.freeze(wi.fromCssColorString("#8B0000")),wi.DARKSALMON=Object.freeze(wi.fromCssColorString("#E9967A")),wi.DARKSEAGREEN=Object.freeze(wi.fromCssColorString("#8FBC8F")),wi.DARKSLATEBLUE=Object.freeze(wi.fromCssColorString("#483D8B")),wi.DARKSLATEGRAY=Object.freeze(wi.fromCssColorString("#2F4F4F")),wi.DARKSLATEGREY=wi.DARKSLATEGRAY,wi.DARKTURQUOISE=Object.freeze(wi.fromCssColorString("#00CED1")),wi.DARKVIOLET=Object.freeze(wi.fromCssColorString("#9400D3")),wi.DEEPPINK=Object.freeze(wi.fromCssColorString("#FF1493")),wi.DEEPSKYBLUE=Object.freeze(wi.fromCssColorString("#00BFFF")),wi.DIMGRAY=Object.freeze(wi.fromCssColorString("#696969")),wi.DIMGREY=wi.DIMGRAY,wi.DODGERBLUE=Object.freeze(wi.fromCssColorString("#1E90FF")),wi.FIREBRICK=Object.freeze(wi.fromCssColorString("#B22222")),wi.FLORALWHITE=Object.freeze(wi.fromCssColorString("#FFFAF0")),wi.FORESTGREEN=Object.freeze(wi.fromCssColorString("#228B22")),wi.FUCHSIA=Object.freeze(wi.fromCssColorString("#FF00FF")),wi.GAINSBORO=Object.freeze(wi.fromCssColorString("#DCDCDC")),wi.GHOSTWHITE=Object.freeze(wi.fromCssColorString("#F8F8FF")),wi.GOLD=Object.freeze(wi.fromCssColorString("#FFD700")),wi.GOLDENROD=Object.freeze(wi.fromCssColorString("#DAA520")),wi.GRAY=Object.freeze(wi.fromCssColorString("#808080")),wi.GREEN=Object.freeze(wi.fromCssColorString("#008000")),wi.GREENYELLOW=Object.freeze(wi.fromCssColorString("#ADFF2F")),wi.GREY=wi.GRAY,wi.HONEYDEW=Object.freeze(wi.fromCssColorString("#F0FFF0")),wi.HOTPINK=Object.freeze(wi.fromCssColorString("#FF69B4")),wi.INDIANRED=Object.freeze(wi.fromCssColorString("#CD5C5C")),wi.INDIGO=Object.freeze(wi.fromCssColorString("#4B0082")),wi.IVORY=Object.freeze(wi.fromCssColorString("#FFFFF0")),wi.KHAKI=Object.freeze(wi.fromCssColorString("#F0E68C")),wi.LAVENDER=Object.freeze(wi.fromCssColorString("#E6E6FA")),wi.LAVENDAR_BLUSH=Object.freeze(wi.fromCssColorString("#FFF0F5")),wi.LAWNGREEN=Object.freeze(wi.fromCssColorString("#7CFC00")),wi.LEMONCHIFFON=Object.freeze(wi.fromCssColorString("#FFFACD")),wi.LIGHTBLUE=Object.freeze(wi.fromCssColorString("#ADD8E6")),wi.LIGHTCORAL=Object.freeze(wi.fromCssColorString("#F08080")),wi.LIGHTCYAN=Object.freeze(wi.fromCssColorString("#E0FFFF")),wi.LIGHTGOLDENRODYELLOW=Object.freeze(wi.fromCssColorString("#FAFAD2")),wi.LIGHTGRAY=Object.freeze(wi.fromCssColorString("#D3D3D3")),wi.LIGHTGREEN=Object.freeze(wi.fromCssColorString("#90EE90")),wi.LIGHTGREY=wi.LIGHTGRAY,wi.LIGHTPINK=Object.freeze(wi.fromCssColorString("#FFB6C1")),wi.LIGHTSEAGREEN=Object.freeze(wi.fromCssColorString("#20B2AA")),wi.LIGHTSKYBLUE=Object.freeze(wi.fromCssColorString("#87CEFA")),wi.LIGHTSLATEGRAY=Object.freeze(wi.fromCssColorString("#778899")),wi.LIGHTSLATEGREY=wi.LIGHTSLATEGRAY,wi.LIGHTSTEELBLUE=Object.freeze(wi.fromCssColorString("#B0C4DE")),wi.LIGHTYELLOW=Object.freeze(wi.fromCssColorString("#FFFFE0")),wi.LIME=Object.freeze(wi.fromCssColorString("#00FF00")),wi.LIMEGREEN=Object.freeze(wi.fromCssColorString("#32CD32")),wi.LINEN=Object.freeze(wi.fromCssColorString("#FAF0E6")),wi.MAGENTA=Object.freeze(wi.fromCssColorString("#FF00FF")),wi.MAROON=Object.freeze(wi.fromCssColorString("#800000")),wi.MEDIUMAQUAMARINE=Object.freeze(wi.fromCssColorString("#66CDAA")),wi.MEDIUMBLUE=Object.freeze(wi.fromCssColorString("#0000CD")),wi.MEDIUMORCHID=Object.freeze(wi.fromCssColorString("#BA55D3")),wi.MEDIUMPURPLE=Object.freeze(wi.fromCssColorString("#9370DB")),wi.MEDIUMSEAGREEN=Object.freeze(wi.fromCssColorString("#3CB371")),wi.MEDIUMSLATEBLUE=Object.freeze(wi.fromCssColorString("#7B68EE")),wi.MEDIUMSPRINGGREEN=Object.freeze(wi.fromCssColorString("#00FA9A")),wi.MEDIUMTURQUOISE=Object.freeze(wi.fromCssColorString("#48D1CC")),wi.MEDIUMVIOLETRED=Object.freeze(wi.fromCssColorString("#C71585")),wi.MIDNIGHTBLUE=Object.freeze(wi.fromCssColorString("#191970")),wi.MINTCREAM=Object.freeze(wi.fromCssColorString("#F5FFFA")),wi.MISTYROSE=Object.freeze(wi.fromCssColorString("#FFE4E1")),wi.MOCCASIN=Object.freeze(wi.fromCssColorString("#FFE4B5")),wi.NAVAJOWHITE=Object.freeze(wi.fromCssColorString("#FFDEAD")),wi.NAVY=Object.freeze(wi.fromCssColorString("#000080")),wi.OLDLACE=Object.freeze(wi.fromCssColorString("#FDF5E6")),wi.OLIVE=Object.freeze(wi.fromCssColorString("#808000")),wi.OLIVEDRAB=Object.freeze(wi.fromCssColorString("#6B8E23")),wi.ORANGE=Object.freeze(wi.fromCssColorString("#FFA500")),wi.ORANGERED=Object.freeze(wi.fromCssColorString("#FF4500")),wi.ORCHID=Object.freeze(wi.fromCssColorString("#DA70D6")),wi.PALEGOLDENROD=Object.freeze(wi.fromCssColorString("#EEE8AA")),wi.PALEGREEN=Object.freeze(wi.fromCssColorString("#98FB98")),wi.PALETURQUOISE=Object.freeze(wi.fromCssColorString("#AFEEEE")),wi.PALEVIOLETRED=Object.freeze(wi.fromCssColorString("#DB7093")),wi.PAPAYAWHIP=Object.freeze(wi.fromCssColorString("#FFEFD5")),wi.PEACHPUFF=Object.freeze(wi.fromCssColorString("#FFDAB9")),wi.PERU=Object.freeze(wi.fromCssColorString("#CD853F")),wi.PINK=Object.freeze(wi.fromCssColorString("#FFC0CB")),wi.PLUM=Object.freeze(wi.fromCssColorString("#DDA0DD")),wi.POWDERBLUE=Object.freeze(wi.fromCssColorString("#B0E0E6")),wi.PURPLE=Object.freeze(wi.fromCssColorString("#800080")),wi.RED=Object.freeze(wi.fromCssColorString("#FF0000")),wi.ROSYBROWN=Object.freeze(wi.fromCssColorString("#BC8F8F")),wi.ROYALBLUE=Object.freeze(wi.fromCssColorString("#4169E1")),wi.SADDLEBROWN=Object.freeze(wi.fromCssColorString("#8B4513")),wi.SALMON=Object.freeze(wi.fromCssColorString("#FA8072")),wi.SANDYBROWN=Object.freeze(wi.fromCssColorString("#F4A460")),wi.SEAGREEN=Object.freeze(wi.fromCssColorString("#2E8B57")),wi.SEASHELL=Object.freeze(wi.fromCssColorString("#FFF5EE")),wi.SIENNA=Object.freeze(wi.fromCssColorString("#A0522D")),wi.SILVER=Object.freeze(wi.fromCssColorString("#C0C0C0")),wi.SKYBLUE=Object.freeze(wi.fromCssColorString("#87CEEB")),wi.SLATEBLUE=Object.freeze(wi.fromCssColorString("#6A5ACD")),wi.SLATEGRAY=Object.freeze(wi.fromCssColorString("#708090")),wi.SLATEGREY=wi.SLATEGRAY,wi.SNOW=Object.freeze(wi.fromCssColorString("#FFFAFA")),wi.SPRINGGREEN=Object.freeze(wi.fromCssColorString("#00FF7F")),wi.STEELBLUE=Object.freeze(wi.fromCssColorString("#4682B4")),wi.TAN=Object.freeze(wi.fromCssColorString("#D2B48C")),wi.TEAL=Object.freeze(wi.fromCssColorString("#008080")),wi.THISTLE=Object.freeze(wi.fromCssColorString("#D8BFD8")),wi.TOMATO=Object.freeze(wi.fromCssColorString("#FF6347")),wi.TURQUOISE=Object.freeze(wi.fromCssColorString("#40E0D0")),wi.VIOLET=Object.freeze(wi.fromCssColorString("#EE82EE")),wi.WHEAT=Object.freeze(wi.fromCssColorString("#F5DEB3")),wi.WHITE=Object.freeze(wi.fromCssColorString("#FFFFFF")),wi.WHITESMOKE=Object.freeze(wi.fromCssColorString("#F5F5F5")),wi.YELLOW=Object.freeze(wi.fromCssColorString("#FFFF00")),wi.YELLOWGREEN=Object.freeze(wi.fromCssColorString("#9ACD32")),wi.TRANSPARENT=Object.freeze(new wi(0,0,0,0));var Pi={_minimumDisableDepthTestDistance:0,_farToNearRatio:1e3,_logarithmicDepthFarToNearRatio:1e9,_nearToFarDistance2D:175e4,_observerEventWaitTime:500,_terrainExaggeration:1,_max_fps:65,_min_fps:60,_max_frame_time:1e3/60,_create_terrain_num:2,_reclaim_memory_size:1024<<20,_resource_life_time:1e3,_max_range:100,_min_range:8,_drawSpread:.58,_drawDistance:8,_min_observer_height:1,_max_observer_height:12e6,_underground_mode:!1,_camera_height:0,_auxplane_elevation:0,_auxplane_elevation_relative:0,_auxplane_elevation_max:0,_draw_dem_skirt:!0,_auxplane_grid_size:.1,_first_person_height:1.6,_highlight_continue_time:10,_highlight_interval_time:.5,_highlight_color:3372209817,_skyline_valid_distance:1200,_enable_globe_cursor:!0,_default_highlight:!0,_port_list:[],_modelLodRange:{level21:120,level20:450,level19:600},_baseUrlString:"",_server_ip:"",_enable_pack_bim:!1,_waterAnimationSpeed:.004,_waterAmplitude:2};Object.defineProperties(Pi,{minimumDisableDepthTestDistance:{get:function(){return Pi._minimumDisableDepthTestDistance},set:function(e){Pi._minimumDisableDepthTestDistance=e}},farToNearRatio:{get:function(){return Pi._farToNearRatio},set:function(e){Pi._farToNearRatio=e}},logarithmicDepthFarToNearRatio:{get:function(){return Pi._logarithmicDepthFarToNearRatio},set:function(e){Pi._logarithmicDepthFarToNearRatio=e}},nearToFarDistance2D:{get:function(){return Pi._nearToFarDistance2D},set:function(e){Pi._nearToFarDistance2D=e}},observerEventWaitTime:{get:function(){return Pi._observerEventWaitTime},set:function(e){Pi._observerEventWaitTime=e}},terrainExaggeration:{get:function(){return Pi._terrainExaggeration},set:function(e){Pi._terrainExaggeration=e}},max_fps:{get:function(){return Pi._max_fps},set:function(e){Pi._max_fps=e}},min_fps:{get:function(){return Pi._min_fps},set:function(e){e!=Pi._min_fps&&(Pi._min_fps=e,Pi._max_frame_time=1e3/e)}},create_terrain_num:{get:function(){return Pi._create_terrain_num},set:function(e){Pi._create_terrain_num=e}},reclaim_memory_size:{get:function(){return Pi._reclaim_memory_size},set:function(e){Pi._reclaim_memory_size=e}},resource_life_time:{get:function(){return Pi._resource_life_time},set:function(e){Pi._resource_life_time=e}},max_range:{get:function(){return Pi._max_range},set:function(e){Pi._max_range=e}},min_range:{get:function(){return Pi._min_range},set:function(e){Pi._min_range=e}},drawSpread:{get:function(){return Pi._drawSpread},set:function(e){Pi._drawSpread=e}},drawDistance:{get:function(){return Pi._drawDistance},set:function(e){Pi._drawDistance=e}},auxplaneElevationMax:{get:function(){return Pi._auxplane_elevation_max},set:function(e){Pi._auxplane_elevation_max=e}},minObserverHeight:{get:function(){return Pi._min_observer_height},set:function(e){Pi._min_observer_height=e}},maxObserverHeight:{get:function(){return Pi._max_observer_height},set:function(e){Pi._max_observer_height=e}},undergroundMode:{get:function(){return Pi._underground_mode},set:function(e){Pi._underground_mode=e}},cameraHeight:{get:function(){return Pi._camera_height},set:function(e){Pi._camera_height=e}},auxplaneElevation:{get:function(){return Pi._auxplane_elevation},set:function(e){Pi._auxplane_elevation=e}},auxplaneElevationRelative:{get:function(){return Pi._auxplane_elevation_relative},set:function(e){Pi._auxplane_elevation_relative=e}},drawDemSkirt:{get:function(){return Pi._draw_dem_skirt},set:function(e){Pi._draw_dem_skirt=e}},auxplaneGridSize:{get:function(){return Pi._auxplane_grid_size},set:function(e){Pi._auxplane_grid_size=e}},first_person_height:{get:function(){return Pi._first_person_height},set:function(e){Pi._first_person_height=e}},highlight_continue_time:{get:function(){return Pi._highlight_continue_time},set:function(e){Pi._highlight_continue_time=e}},highlight_interval_time:{get:function(){return Pi._highlight_interval_time},set:function(e){Pi._highlight_interval_time=e}},highlight_color:{get:function(){return Pi._highlight_color},set:function(e){Pi._highlight_color=e}},skyline_valid_distance:{get:function(){return Pi._skyline_valid_distance},set:function(e){Pi._skyline_valid_distance=e}},enable_globe_cursor:{get:function(){return Pi._enable_globe_cursor},set:function(e){Pi._enable_globe_cursor=e}},default_highlight:{get:function(){return Pi._default_highlight},set:function(e){Pi._default_highlight=e}},opaqueFrustumNearOffset:{get:function(){return.9999}},port_list:{get:function(){return Pi._port_list}},modelLodRange:{get:function(){return Pi._modelLodRange},set:function(e){null!=e&&(Pi._modelLodRange.level19=e.level19,Pi._modelLodRange.level20=e.level20,Pi._modelLodRange.level21=e.level21)}},baseUrlString:{get:function(){return Pi._baseUrlString},set:function(e){null!=e&&(Pi._baseUrlString=e)}},server_ip:{get:function(){return Pi._server_ip},set:function(e){null!=e&&(Pi._server_ip=e)}},enable_pack_bim:{get:function(){return Pi._enable_pack_bim},set:function(e){null!=e&&(Pi._enable_pack_bim=e)}},waterAnimationSpeed:{get:function(){return Pi._waterAnimationSpeed},set:function(e){Pi._waterAnimationSpeed=e}},waterAmplitude:{get:function(){return Pi._waterAmplitude},set:function(e){Pi._waterAmplitude=e}}});var Ui=Object.freeze({UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5}),Di=Object.freeze({TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3});function Fi(e){e=M(e,M.EMPTY_OBJECT);var t=M(e.throttleByServer,!1),n=M(e.throttle,!1);this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=M(e.priority,0),this.throttle=n,this.throttleByServer=t,this.type=M(e.type,Di.OTHER),this.serverKey=e.serverKey,this.state=Ui.UNISSUED,this.deferred=void 0,this.cancelled=!1,this.geoServer=M(e.geoServer,!1)}function zi(e){this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function Li(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Bi(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}function qi(e,t){return t-e}Fi.prototype.cancel=function(){this.cancelled=!0},Fi.prototype.clone=function(e){return C(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=this.RequestState.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new Fi(this)},Object.defineProperties(zi.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){var t=this._length;if(e<t){for(var n=this._array,r=e;r<t;++r)n[r]=void 0;this._length=e,n.length=e}this._maximumLength=e}},comparator:{get:function(){return this._comparator}}}),zi.prototype.reserve=function(e){e=M(e,this._length),this._array.length=e},zi.prototype.heapify=function(e){e=M(e,0);for(var t=this._length,n=this._comparator,r=this._array,i=-1,o=!0;o;){var a=2*(e+1),s=a-1,i=s<t&&n(r[s],r[e])<0?s:e;(i=a<t&&n(r[a],r[i])<0?a:i)!==e?(Li(r,i,e),e=i):o=!1}},zi.prototype.resort=function(){for(var e=this._length,t=Math.ceil(e/2);0<=t;--t)this.heapify(t)},zi.prototype.insert=function(e){var t,n=this._array,r=this._comparator,i=this._maximumLength,o=this._length++;for(o<n.length?n[o]=e:n.push(e);0!==o;){var a=Math.floor((o-1)/2);if(!(r(n[o],n[a])<0))break;Li(n,o,a),o=a}return C(i)&&this._length>i&&(t=n[i],this._length=i),t},zi.prototype.pop=function(e){if(e=M(e,0),0!==this._length){var t=this._array,n=t[e];return Li(t,e,--this._length),this.heapify(e),t[this._length]=void 0,n}},Object.defineProperties(Bi.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}}),Bi.prototype.addEventListener=function(e,t){this._listeners.push(e),this._scopes.push(t);var n=this;return function(){n.removeEventListener(e,t)}},Bi.prototype.removeEventListener=function(e,t){for(var n=this._listeners,r=this._scopes,i=-1,o=0;o<n.length;o++)if(n[o]===e&&r[o]===t){i=o;break}return-1!==i&&(this._insideRaiseEvent?(this._toRemove.push(i),n[i]=void 0,r[i]=void 0):(n.splice(i,1),r.splice(i,1)),!0)},Bi.prototype.raiseEvent=function(){this._insideRaiseEvent=!0;for(var e=this._listeners,t=this._scopes,n=e.length,r=0;r<n;r++)C(e[r])&&e[r].apply(t[r],arguments);var i=this._toRemove;if(0<(n=i.length)){for(i.sort(qi),r=0;r<n;r++){var o=i[r];e.splice(o,1),t.splice(o,1)}i.length=0}this._insideRaiseEvent=!1};var Gi={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},ji=20,Hi=new zi({comparator:function(e,t){return e.priority-t.priority}});Hi.maximumLength=ji,Hi.reserve(ji);var Wi=[],Vi={},Xi="undefined"!=typeof document?new li(document.location.href):new li,Yi=new Bi;function ki(){}function Ki(e){C(e.priorityFunction)&&(e.priority=e.priorityFunction())}function Zi(e){var t=M(ki.requestsByServer[e],ki.maximumRequestsPerServer);return Vi[e]<t}function Ji(e){return e.state===Ui.UNISSUED&&(e.state=Ui.ISSUED,e.deferred=pn.defer()),e.deferred.promise}function Qi(e){var t,n,r=Ji(e);return e.state=Ui.ACTIVE,Wi.push(e),++Gi.numberOfActiveRequests,++Gi.numberOfActiveRequestsEver,++Vi[e.serverKey],e.requestFunction().then((n=e,function(e){var t;n.state!==Ui.CANCELLED&&(t=n.deferred,--Gi.numberOfActiveRequests,--Vi[n.serverKey],Yi.raiseEvent(),n.state=Ui.RECEIVED,n.deferred=void 0,t.resolve(e))})).otherwise((t=e,function(e){t.state!==Ui.CANCELLED&&(++Gi.numberOfFailedRequests,--Gi.numberOfActiveRequests,--Vi[t.serverKey],Yi.raiseEvent(e),t.state=Ui.FAILED,t.deferred.reject(e))})),r}function $i(e){var t,n=e.state===Ui.ACTIVE;e.state=Ui.CANCELLED,++Gi.numberOfCancelledRequests,C(e.deferred)&&(t=e.deferred,e.deferred=void 0,t.reject()),n&&(--Gi.numberOfActiveRequests,--Vi[e.serverKey],++Gi.numberOfCancelledActiveRequests),C(e.cancelFunction)&&e.cancelFunction()}function eo(e,t,n){this.statusCode=e,this.response=t,this.responseHeaders=n,"string"==typeof this.responseHeaders&&(this.responseHeaders=function(e){var t={};if(!e)return t;for(var n=e.split("\r\n"),r=0;r<n.length;++r){var i,o=n[r],a=o.indexOf(": ");0<a&&(i=o.substring(0,a),a=o.substring(a+2),t[i]=a)}return t}(this.responseHeaders))}ki.maximumRequests=50,ki.maximumRequestsPerServer=6,ki.requestsByServer={"api.cesium.com:443":18,"assets.cesium.com:443":18},ki.throttleRequests=!0,ki.debugShowStatistics=!1,ki.requestCompletedEvent=Yi,Object.defineProperties(ki,{statistics:{get:function(){return Gi}},priorityHeapLength:{get:function(){return ji},set:function(e){if(e<ji)for(;Hi.length>e;)$i(Hi.pop());ji=e,Hi.maximumLength=e,Hi.reserve(e)}}}),ki.get_active_request_count=function(){return null==Wi?0:Wi.length},ki.update=function(){for(var e,t=0,n=Wi.length,r=0;r<n;++r)(e=Wi[r]).cancelled&&$i(e),e.state===Ui.ACTIVE?0<t&&(Wi[r-t]=e):++t;Wi.length-=t;var i=Hi.internalArray,o=Hi.length;for(r=0;r<o;++r)Ki(i[r]);Hi.resort();for(var a=Math.max(ki.maximumRequests-Wi.length,0),s=0;s<a&&0<Hi.length;)!(e=Hi.pop()).cancelled&&(!e.throttleByServer||Zi(e.serverKey))?(Qi(e),++s):$i(e);ki.debugShowStatistics&&(0===Gi.numberOfActiveRequests&&0<Gi.lastNumberOfActiveRequests&&(0<Gi.numberOfAttemptedRequests&&(console.log("Number of attempted requests: "+Gi.numberOfAttemptedRequests),Gi.numberOfAttemptedRequests=0),0<Gi.numberOfCancelledRequests&&(console.log("Number of cancelled requests: "+Gi.numberOfCancelledRequests),Gi.numberOfCancelledRequests=0),0<Gi.numberOfCancelledActiveRequests&&(console.log("Number of cancelled active requests: "+Gi.numberOfCancelledActiveRequests),Gi.numberOfCancelledActiveRequests=0),0<Gi.numberOfFailedRequests&&(console.log("Number of failed requests: "+Gi.numberOfFailedRequests),Gi.numberOfFailedRequests=0)),Gi.lastNumberOfActiveRequests=Gi.numberOfActiveRequests)},ki.getServerKey=function(e){var t=new li(e).resolve(Xi);t.normalize();e=t.authority;return/:/.test(e)||(e=e+":"+("https"===t.scheme?"443":"80")),C(Vi[e])||(Vi[e]=0),e},ki.request=function(e){if(Ai(e.url)||Ri(e.url))return Yi.raiseEvent(),e.state=Ui.RECEIVED,e.requestFunction();if(++Gi.numberOfAttemptedRequests,C(e.serverKey)||(e.serverKey=ki.getServerKey(e.url)),!ki.throttleRequests||!e.throttleByServer||Zi(e.serverKey)){if(!ki.throttleRequests||!e.throttle)return Qi(e);if(!(Wi.length>=ki.maximumRequests)){Ki(e);var t=Hi.insert(e);if(C(t)){if(t===e)return;$i(t)}return Ji(e)}}},ki.clearForSpecs=function(){for(;0<Hi.length;)$i(Hi.pop());for(var e=Wi.length,t=0;t<e;++t)$i(Wi[t]);Wi.length=0,Vi={},Gi.numberOfAttemptedRequests=0,Gi.numberOfActiveRequests=0,Gi.numberOfCancelledRequests=0,Gi.numberOfCancelledActiveRequests=0,Gi.numberOfFailedRequests=0,Gi.numberOfActiveRequestsEver=0,Gi.lastNumberOfActiveRequests=0},ki.numberOfActiveRequestsByServer=function(e){return Vi[e]},ki.requestHeap=Hi,eo.prototype.toString=function(){var e="Request has failed.";return C(this.statusCode)&&(e+=" Status Code: "+this.statusCode),e};var to=function(){try{var e=new XMLHttpRequest;return e.open("GET","#",!0),(e.responseType="blob")===e.responseType}catch(e){return!1}}();function no(e,t,n,r){var i,o=e.query;if(!C(o)||0===o.length)return 1;o=-1===o.indexOf("=")?((i={})[o]=void 0,i):function(e){var t={};if(""===e)return t;for(var n=e.replace(/\+/g,"%20").split(/[&;]/),r=0,i=n.length;r<i;++r){var o=n[r].split("="),a=decodeURIComponent(o[0]),s=C(s=o[1])?decodeURIComponent(s):"",o=t[a];"string"==typeof o?t[a]=[o,s]:Array.isArray(o)?o.push(s):t[a]=s}return t}(o),t._queryParameters=n?ao(o,t._queryParameters,r):o,e.query=void 0}function ro(e,t){var n=t._queryParameters,t=Object.keys(n);1!==t.length||C(n[t[0]])?e.query=function(e){var t,n="";for(t in e)if(e.hasOwnProperty(t)){var r=e[t],i=encodeURIComponent(t)+"=";if(Array.isArray(r))for(var o=0,a=r.length;o<a;++o)n+=i+encodeURIComponent(r[o])+"&";else n+=i+encodeURIComponent(r)+"&"}return n=n.slice(0,-1)}(n):e.query=t[0]}function io(e,t){return C(e)?C(e.clone)?e.clone():ui(e):t}function oo(e){e.state=Ui.UNISSUED,e.deferred=void 0}function ao(e,t,n){if(!n)return ci(e,t);var r,i,o,a=ui(e,!0);for(r in t)t.hasOwnProperty(r)&&(i=a[r],o=t[r],C(i)?(Array.isArray(i)||(i=a[r]=[i]),a[r]=i.concat(o)):a[r]=Array.isArray(o)?o.slice():o);return a}var so,uo=0;function co(e){var t,n;"db"===(e="string"==typeof(e=M(e,M.EMPTY_OBJECT))?{url:e}:e).url.substring(0,2)&&(e.url="http"+e.url.substring(2,e.url.length)),0<e.url.indexOf("sde?")&&e.url.indexOf("_sde")<0&&e.isSde&&(e.url+="_sde"),0<Pi.port_list.length&&/\/(sde|sde_pack|dcs|geoserver|filedownload)\?/.test(e.url)&&(null!=(t=/^([^:\/]+)(:\/\/)([^\/]+)(\/.+)$/i.exec(e.url))&&5==t.length&&(/:/.test(t[3])&&(n=t[3].indexOf(":"),t[3]=t[3].substring(0,n)),t[3]=t[3]+":"+Pi.port_list[uo],uo=(uo+1)%Pi.port_list.length,e.url=t[1]+t[2]+t[3]+t[4])),this._version=e.version,this._url=void 0,this._templateValues=io(e.templateValues,{}),this._queryParameters=io(e.queryParameters,{}),this.headers=io(e.headers,{}),this.request=M(e.request,new Fi),this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=M(e.retryAttempts,3),this._retryCount=0;e=new li(e.url);no(e,this,!0,!0),e.fragment=void 0,this._url=e.toString(),this.preDownload=void 0}function lo(n){var r=n.resource,i=n.flipY,o=n.preferImageBitmap,a=r.request;a.url=r.url,a.requestFunction=function(){C(n.preDownload)&&r.preDownload();var e=!1;r.isDataUri||r.isBlobUri||(e=r.isCrossOriginUrl);var t=pn.defer();return co._Implementations.createImage(a,e,t,i,o),t.promise};var e=ki.request(a);if(C(e))return e.otherwise(function(t){return a.state!==Ui.FAILED?pn.reject(t):r.retryOnError(t).then(function(e){return e?(a.state=Ui.UNISSUED,a.deferred=void 0,lo({resource:r,flipY:i,preferImageBitmap:o})):pn.reject(t)})})}co.createIfNeeded=function(e,t,n){return e instanceof co?e.getDerivedResource({request:e.request}):"string"!=typeof e?e:new co({url:e,version:t,isSde:!C(n)||n})},co.supportsImageBitmapOptions=function(){if(C(so))return so;if("function"!=typeof createImageBitmap)return so=pn.resolve(!1);return so=co.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWP4////fwAJ+wP9CNHoHgAAAABJRU5ErkJggg=="}).then(function(e){return createImageBitmap(e,{imageOrientation:"flipY",premultiplyAlpha:"none"})}).then(function(e){return!0}).otherwise(function(){return!1})},Object.defineProperties(co,{isBlobSupported:{get:function(){return to}}}),Object.defineProperties(co.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){var e=this.getUrlComponent(!0,!0);return null!=this._version&&(e+="&version="+this._version),e},set:function(e){e=new li(e);no(e,this,!1),e.fragment=void 0,this._url=e.toString()}},extension:{get:function(){return e=this._url,(t=new li(e)).normalize(),e=t.path,e=-1===(t=(e=-1!==(t=e.lastIndexOf("/"))?e.substr(t+1):e).lastIndexOf("."))?"":e.substr(t+1);var e,t}},isDataUri:{get:function(){return Ai(this._url)}},isBlobUri:{get:function(){return Ri(this._url)}},isCrossOriginUrl:{get:function(){return function(e){(yi=!C(yi)?document.createElement("a"):yi).href=window.location.href;var t=yi.host,n=yi.protocol;return yi.href=e,yi.href=yi.href,n!==yi.protocol||t!==yi.host}(this._url)}},hasHeaders:{get:function(){return 0<Object.keys(this.headers).length}}}),co.prototype.toString=function(){return this.getUrlComponent(!0,!0)},co.prototype.getUrlComponent=function(e,t){if(this.isDataUri)return this._url;var n=new li(this._url);e&&ro(n,this);var n=n.toString().replace(/%7B/g,"{").replace(/%7D/g,"}"),r=this._templateValues,n=n.replace(/{(.*?)}/g,function(e,t){t=r[t];return C(t)?encodeURIComponent(t):e});return n=t&&C(this.proxy)?this.proxy.getURL(n):n},co.prototype.setQueryParameters=function(e,t){this._queryParameters=t?ao(this._queryParameters,e,!1):ao(e,this._queryParameters,!1)},co.prototype.appendQueryParameters=function(e){this._queryParameters=ao(e,this._queryParameters,!0)},co.prototype.setTemplateValues=function(e,t){this._templateValues=t?ci(this._templateValues,e):ci(e,this._templateValues)},co.prototype.getDerivedResource=function(e){var t,n=this.clone();return n._retryCount=0,C(e.url)&&(no(t=new li(e.url),n,!0,M(e.preserveQueryParameters,!1)),t.fragment=void 0,n._url=t.resolve(new li(_i(this._url))).toString(),n._url.indexOf("base64")<0&&0<n._url.indexOf("/sde?/")&&n._url.indexOf("_sde")<0&&(n._url+="_sde")),C(e.queryParameters)&&(n._queryParameters=ci(e.queryParameters,n._queryParameters)),C(e.templateValues)&&(n._templateValues=ci(e.templateValues,n.templateValues)),C(e.headers)&&(n.headers=ci(e.headers,n.headers)),C(e.proxy)&&(n.proxy=e.proxy),C(e.request)&&(n.request=e.request),C(e.retryCallback)&&(n.retryCallback=e.retryCallback),C(e.retryAttempts)&&(n.retryAttempts=e.retryAttempts),n},co.prototype.retryOnError=function(e){var t=this.retryCallback;if("function"!=typeof t||this._retryCount>=this.retryAttempts)return pn(!1);var n=this;return pn(t(this,e)).then(function(e){return++n._retryCount,e})},co.prototype.clone=function(e){return(e=!C(e)?new co({url:this._url}):e)._url=this._url,e._queryParameters=ui(this._queryParameters),e._templateValues=ui(this._templateValues),e.headers=ui(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e},co.prototype.getBaseUri=function(e){return t=this.getUrlComponent(e),n=e,r="",-1!==(e=t.lastIndexOf("/"))&&(r=t.substring(0,e+1)),n&&(C((t=new li(t)).query)&&(r+="?"+t.query),C(t.fragment)&&(r+="#"+t.fragment)),r;var t,n,r},co.prototype.appendForwardSlash=function(){var e;this._url=(0!==(e=this._url).length&&"/"===e[e.length-1]||(e+="/"),e)},co.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},co.fetchArrayBuffer=function(e){return new co(e).fetchArrayBuffer()},co.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},co.fetchBlob=function(e){return new co(e).fetchBlob()},co.prototype.fetchImage=function(e){e=M(e,M.EMPTY_OBJECT);var t=M(e.preferImageBitmap,!1),n=M(e.preferBlob,!1),r=M(e.flipY,!1);if(oo(this.request),!to||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!n)return lo({resource:this,flipY:r,preferImageBitmap:t});var i,o,a,s=this.fetchBlob();return C(s)?co.supportsImageBitmapOptions().then(function(e){return i=e&&t,s}).then(function(e){if(C(e)){if(a=e,i)return co.createImageBitmapFromBlob(e,{flipY:r,premultiplyAlpha:!1});e=window.URL.createObjectURL(e);return lo({resource:o=new co({url:e}),flipY:r,preferImageBitmap:!1})}}).then(function(e){if(C(e))return e.blob=a,i||window.URL.revokeObjectURL(o.url),e}).otherwise(function(e){return C(o)&&window.URL.revokeObjectURL(o.url),e.blob=a,pn.reject(e)}):void 0},co.fetchImage=function(e){return new co(e).fetchImage({flipY:e.flipY,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})},co.prototype.fetchText=function(){return this.fetch({responseType:"text"})},co.fetchText=function(e){return new co(e).fetchText()},co.prototype.fetchJson=function(){var e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(C(e))return e.then(function(e){if(C(e))return JSON.parse(e)})},co.fetchJson=function(e){return new co(e).fetchJson()},co.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},co.fetchXML=function(e){return new co(e).fetchXML()},co.prototype.fetchJsonp=function(e){var t;for(e=M(e,"callback"),oo(this.request);t="loadJsonp"+Math.random().toString().substring(2,8),C(window[t]););return function n(r,i,o){var e={};e[i]=o;r.setQueryParameters(e);var a=r.request;a.url=r.url;a.requestFunction=function(){C(r.preDownload)&&r.preDownload();var t=pn.defer();return window[o]=function(e){t.resolve(e);try{delete window[o]}catch(e){window[o]=void 0}},co._Implementations.loadAndExecuteScript(r.url,o,t),t.promise};e=ki.request(a);if(!C(e))return;return e.otherwise(function(t){return a.state!==Ui.FAILED?pn.reject(t):r.retryOnError(t).then(function(e){return e?(a.state=Ui.UNISSUED,a.deferred=void 0,n(r,i,o)):pn.reject(t)})})}(this,e,t)},co.fetchJsonp=function(e){return new co(e).fetchJsonp(e.callbackParameterName)},co.prototype._makeRequest=function(s){var u=this;oo(u.request);var c=u.request;c.url=u.url,c.requestFunction=function(){C(u.preDownload)&&u.preDownload();var e=s.responseType,t=ci(s.headers,u.headers),n=s.overrideMimeType,r=s.method,i=s.data,o=pn.defer(),a=co._Implementations.loadWithXhr(u.url,e,r,i,t,o,n);return C(a)&&C(a.abort)&&(c.cancelFunction=function(){a.abort()}),o.promise};var e=ki.request(c);if(C(e))return e.then(function(e){return c.cancelFunction=void 0,e}).otherwise(function(t){return c.cancelFunction=void 0,c.state!==Ui.FAILED?pn.reject(t):u.retryOnError(t).then(function(e){return e?(c.state=Ui.UNISSUED,c.deferred=void 0,u.fetch(s)):pn.reject(t)})})};var ho=/^data:(.*?)(;base64)?,(.*)$/;function fo(e,t){t=decodeURIComponent(t);return e?atob(t):t}function mo(e,t){for(var n=fo(e,t),t=new ArrayBuffer(n.length),r=new Uint8Array(t),i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return t}function po(e,t){switch(t){case"text":return e.toString("utf8");case"json":return JSON.parse(e.toString("utf8"));default:return new Uint8Array(e).buffer}}co.prototype.fetch=function(e){return(e=io(e,{})).method="GET",this._makeRequest(e)},co.fetch=function(e){return new co(e).fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},co.prototype.delete=function(e){return(e=io(e,{})).method="DELETE",this._makeRequest(e)},co.delete=function(e){return new co(e).delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})},co.prototype.head=function(e){return(e=io(e,{})).method="HEAD",this._makeRequest(e)},co.head=function(e){return new co(e).head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},co.prototype.options=function(e){return(e=io(e,{})).method="OPTIONS",this._makeRequest(e)},co.options=function(e){return new co(e).options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},co.prototype.post=function(e,t){return(t=io(t,{})).method="POST",t.data=e,this._makeRequest(t)},co.post=function(e){return new co(e).post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},co.prototype.put=function(e,t){return(t=io(t,{})).method="PUT",t.data=e,this._makeRequest(t)},co.put=function(e){return new co(e).put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},co.prototype.patch=function(e,t){return(t=io(t,{})).method="PATCH",t.data=e,this._makeRequest(t)},co.patch=function(e){return new co(e).patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},(co._Implementations={}).createImage=function(o,a,s,u,c){var l=o.url;co.supportsImageBitmapOptions().then(function(e){if(!e||!c)return r=l,e=a,t=s,(n=new Image).onload=function(){t.resolve(n)},n.onerror=function(e){t.reject(e)},e&&(Ii.contains(r)?n.crossOrigin="use-credentials":n.crossOrigin=""),void(n.src=r);var t,n,r=pn.defer(),i=co._Implementations.loadWithXhr(l,"blob","GET",void 0,void 0,r,void 0,void 0,void 0);return C(i)&&C(i.abort)&&(o.cancelFunction=function(){i.abort()}),r.promise.then(function(e){return C(e)?co.createImageBitmapFromBlob(e,{flipY:u,premultiplyAlpha:!1}):void s.reject(new he("Successfully retrieved "+l+" but it contained no content."))}).then(s.resolve)}).otherwise(s.reject)},co.createImageBitmapFromBlob=function(e,t){return createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"none",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none"})};var Eo="undefined"==typeof XMLHttpRequest;function _o(e,t,n,r,i){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=n,this.yPoleOffset=r,this.ut1MinusUtc=i}function yo(e){var t,n;e=M(e,M.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=M(e.addNewLeapSeconds,!0),C(e.data)?Ro(this,e.data):C(e.url)?(t=co.createIfNeeded(e.url),(n=this)._downloadPromise=t.fetchJson().then(function(e){Ro(n,e)}).otherwise(function(){n._dataError="An error occurred while retrieving the EOP data from the URL "+t.url+"."})):Ro(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function go(e,t){return ai.compare(e.julianDate,t)}function Ro(e,t){if(C(t.columnNames))if(C(t.samples)){var n=t.columnNames.indexOf("modifiedJulianDateUtc"),r=t.columnNames.indexOf("xPoleWanderRadians"),i=t.columnNames.indexOf("yPoleWanderRadians"),o=t.columnNames.indexOf("ut1MinusUtcSeconds"),a=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),s=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),u=t.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||r<0||i<0||o<0||a<0||s<0||u<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var c,l=e._samples=t.samples,h=e._dates=[];e._dateColumn=n,e._xPoleWanderRadiansColumn=r,e._yPoleWanderRadiansColumn=i,e._ut1MinusUtcSecondsColumn=o,e._xCelestialPoleOffsetRadiansColumn=a,e._yCelestialPoleOffsetRadiansColumn=s,e._taiMinusUtcSecondsColumn=u,e._columnCount=t.columnNames.length,e._lastIndex=void 0;for(var f=e._addNewLeapSeconds,m=0,d=l.length;m<d;m+=e._columnCount){var p,E=l[m+n],_=l[m+u],y=new ai(E+jr.MODIFIED_JULIAN_DATE_DIFFERENCE,_,Hr.TAI);h.push(y),f&&(_===c||!C(c)||(E=zr(p=ai.leapSeconds,y,go))<0&&(y=new Gr(y,_),p.splice(~E,0,y)),c=_)}}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function To(e,t,n,r,i){r*=n;i.xPoleWander=t[r+e._xPoleWanderRadiansColumn],i.yPoleWander=t[r+e._yPoleWanderRadiansColumn],i.xPoleOffset=t[r+e._xCelestialPoleOffsetRadiansColumn],i.yPoleOffset=t[r+e._yCelestialPoleOffsetRadiansColumn],i.ut1MinusUtc=t[r+e._ut1MinusUtcSecondsColumn]}function Ao(e,t,n){return t+e*(n-t)}function So(e,t,n,r,i,o,a){var s=e._columnCount;if(o>t.length-1)return a.xPoleWander=0,a.yPoleWander=0,a.xPoleOffset=0,a.yPoleOffset=0,a.ut1MinusUtc=0,a;var u=t[i],c=t[o];if(u.equals(c)||r.equals(u))return To(e,n,i,s,a),a;if(r.equals(c))return To(e,n,o,s,a),a;var l=ai.secondsDifference(r,u)/ai.secondsDifference(c,u),h=i*s,t=o*s,u=n[h+e._ut1MinusUtcSecondsColumn],i=n[t+e._ut1MinusUtcSecondsColumn],o=i-u;return!(.5<o||o<-.5)||(s=n[h+e._taiMinusUtcSecondsColumn])!==(o=n[t+e._taiMinusUtcSecondsColumn])&&(c.equals(r)?u=i:i-=o-s),a.xPoleWander=Ao(l,n[h+e._xPoleWanderRadiansColumn],n[t+e._xPoleWanderRadiansColumn]),a.yPoleWander=Ao(l,n[h+e._yPoleWanderRadiansColumn],n[t+e._yPoleWanderRadiansColumn]),a.xPoleOffset=Ao(l,n[h+e._xCelestialPoleOffsetRadiansColumn],n[t+e._xCelestialPoleOffsetRadiansColumn]),a.yPoleOffset=Ao(l,n[h+e._yCelestialPoleOffsetRadiansColumn],n[t+e._yCelestialPoleOffsetRadiansColumn]),a.ut1MinusUtc=Ao(l,u,i),a}function Oo(e,t,n){this.x=e,this.y=t,this.s=n}co._Implementations.loadWithXhr=function(e,i,o,t,n,a,r){var s=ho.exec(e);if(null===s){if(Eo)return u=e,c=i,l=o,h=n,f=a,m=require("url").parse(u),u="https:"===m.protocol?require("https"):require("http"),d=require("zlib"),h={protocol:m.protocol,hostname:m.hostname,port:m.port,path:m.path,query:m.query,method:l,headers:h},void u.request(h).on("response",function(t){var n;t.statusCode<200||300<=t.statusCode?f.reject(new eo(t.statusCode,t,t.headers)):(n=[],t.on("data",function(e){n.push(e)}),t.on("end",function(){var e=Buffer.concat(n);"gzip"===t.headers["content-encoding"]?d.gunzip(e,function(e,t){e?f.reject(new he("Error decompressing response.")):f.resolve(po(t,c))}):f.resolve(po(e,c))}))}).on("error",function(e){f.reject(new eo)}).end();var u,c,l,h,f,m,d,p=new XMLHttpRequest;if(Ii.contains(e)&&(p.withCredentials=!0),p.open(o,e,!0),C(r)&&C(p.overrideMimeType)&&p.overrideMimeType(r),C(n))for(var E in n)n.hasOwnProperty(E)&&p.setRequestHeader(E,n[E]);C(i)&&(p.responseType=i);var _=!1;return"string"==typeof e&&(_=0===e.indexOf("file://")||"undefined"!=typeof window&&"file://"===window.location.origin),p.onload=function(){if(!(p.status<200||300<=p.status)||_&&0===p.status){var e=p.response,t=p.responseType;if("HEAD"===o||"OPTIONS"===o){var n=p.getAllResponseHeaders().trim().split(/[\r\n]+/),r={};return n.forEach(function(e){var t=e.split(": "),e=t.shift();r[e]=t.join(": ")}),void a.resolve(r)}if(204===p.status)a.resolve();else if(!C(e)||C(i)&&t!==i)if("json"===i&&"string"==typeof e)try{a.resolve(JSON.parse(e))}catch(e){a.reject(e)}else(""===t||"document"===t)&&C(p.responseXML)&&p.responseXML.hasChildNodes()?a.resolve(p.responseXML):""!==t&&"text"!==t||!C(p.responseText)?a.reject(new he("Invalid XMLHttpRequest response type.")):a.resolve(p.responseText);else a.resolve(e)}else a.reject(new eo(p.status,p.response,p.getAllResponseHeaders()))},p.onerror=function(e){a.reject(new eo)},p.send(t),p}a.resolve(function(e,t){t=M(t,"");var n=e[1],r=!!e[2],i=e[3];switch(t){case"":case"text":return fo(r,i);case"arraybuffer":return mo(r,i);case"blob":var o=mo(r,i);return new Blob([o],{type:n});case"document":return(new DOMParser).parseFromString(fo(r,i),n);case"json":return JSON.parse(fo(r,i))}}(s,i))},co._Implementations.loadAndExecuteScript=function(e,t,n){return function(e){var t=pn.defer(),n=document.createElement("script");n.async=!0,n.src=e;var r=document.getElementsByTagName("head")[0];return n.onload=function(){n.onload=void 0,r.removeChild(n),t.resolve()},n.onerror=function(e){t.reject(e)},r.appendChild(n),t.promise}(e).otherwise(n.reject)},(co._DefaultImplementations={}).createImage=co._Implementations.createImage,co._DefaultImplementations.loadWithXhr=co._Implementations.loadWithXhr,co._DefaultImplementations.loadAndExecuteScript=co._Implementations.loadAndExecuteScript,co.DEFAULT=Object.freeze(new co({url:"undefined"==typeof document?"":document.location.href.split("?")[0]})),yo.NONE=Object.freeze({getPromiseToLoad:function(){return pn.resolve()},compute:function(e,t){return C(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new _o(0,0,0,0,0),t}}),yo.prototype.getPromiseToLoad=function(){return pn(this._downloadPromise)},yo.prototype.compute=function(e,t){if(C(this._samples)){if(C(t)||(t=new _o(0,0,0,0,0)),0===this._samples.length)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;var n=this._dates,r=this._lastIndex,i=0,o=0;if(C(r)){var a=n[r],s=n[r+1],u=ai.lessThanOrEquals(a,e),c=!C(s),a=c||ai.greaterThanOrEquals(s,e);if(u&&a)return i=r,!c&&s.equals(e)&&++i,So(this,n,this._samples,e,i,o=i+1,t),t}s=zr(n,e,ai.compare,this._dateColumn);return 0<=s?(s<n.length-1&&n[s+1].equals(e)&&++s,o=i=s):(i=(o=~s)-1)<0&&(i=0),this._lastIndex=i,So(this,n,this._samples,e,i,o,t),t}};var Io,No,xo,wo=/((?:.*\/)|^)Cesium\.js(?:\?|\#|$)/;function Co(e){return"undefined"==typeof document?e:((Io=!C(Io)?document.createElement("a"):Io).href=e,Io.href=Io.href,Io.href)}function Mo(){if(C(No))return No;var e=void 0!==Pi.baseUrlString?Pi.baseUrlString:"object"==typeof define&&C(define.amd)&&!define.amd.toUrlUndefined&&C(require.toUrl)?_i("..",Po("lib_ax/utility/lib_core/resource/buildModuleUrl.js")):function(){for(var e=document.getElementsByTagName("script"),t=0,n=e.length;t<n;++t){var r=e[t].getAttribute("src"),r=wo.exec(r);if(null!==r)return r[1]}}();return(No=new co({url:Co(e)})).appendForwardSlash(),No}function vo(e){return Co(require.toUrl("../"+e))}function bo(e){return Mo().getDerivedResource({url:e}).url}function Po(e){return(xo=!C(xo)?"object"==typeof define&&C(define.amd)&&!define.amd.toUrlUndefined&&C(require.toUrl)?vo:bo:xo)(e)}function Uo(e){e=M(e,M.EMPTY_OBJECT),this._xysFileUrlTemplate=co.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=M(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=M(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new ai(this._sampleZeroJulianEphemerisDate,0,Hr.TAI),this._stepSizeDays=M(e.stepSizeDays,1),this._samplesPerXysFile=M(e.samplesPerXysFile,1e3),this._totalSamples=M(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var t=this._interpolationOrder,n=this._denominators=new Array(t+1),r=this._xTable=new Array(t+1),i=Math.pow(this._stepSizeDays,t),o=0;o<=t;++o){n[o]=i,r[o]=o*this._stepSizeDays;for(var a=0;a<=t;++a)a!==o&&(n[o]*=o-a);n[o]=1/n[o]}this._work=new Array(t+1),this._coef=new Array(t+1)}Po._cesiumScriptRegex=wo,Po._buildModuleUrlFromBaseUrl=bo,Po._clearBaseResource=function(){No=void 0},Po.setBaseUrl=function(e){No=co.DEFAULT.getDerivedResource({url:e})},Po.getCesiumBaseUrl=Mo;var Do=new ai(0,0,Hr.TAI);function Fo(e,t,n){var r=Do;return r.dayNumber=t,r.secondsOfDay=n,ai.daysDifference(r,e._sampleZeroDateTT)}function zo(a,s){if(a._chunkDownloadsInProgress[s])return a._chunkDownloadsInProgress[s];var u=pn.defer();a._chunkDownloadsInProgress[s]=u;var e=a._xysFileUrlTemplate;return pn((C(e)?e.getDerivedResource({templateValues:{0:s}}):new co({url:Po("Assets/IAU2006_XYS/IAU2006_XYS_"+s+".json")})).fetchJson(),function(e){a._chunkDownloadsInProgress[s]=!1;for(var t=a._samples,n=e.samples,r=s*a._samplesPerXysFile*3,i=0,o=n.length;i<o;++i)t[r+i]=n[i];u.resolve()}),u.promise}Uo.prototype.preload=function(e,t,n,r){t=Fo(this,e,t),r=Fo(this,n,r),t=t/this._stepSizeDays-this._interpolationOrder/2|0,r=r/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;r>=this._totalSamples&&(r=this._totalSamples-1);for(var t=(t=t<0?0:t)/this._samplesPerXysFile|0,i=r/this._samplesPerXysFile|0,o=[],a=t;a<=i;++a)o.push(zo(this,a));return pn.all(o)},Uo.prototype.computeXysRadians=function(e,t,n){var r=Fo(this,e,t);if(!(r<0)){e=r/this._stepSizeDays|0;if(!(e>=this._totalSamples)){var i=this._interpolationOrder,o=e-(i/2|0),t=(o=o<0?0:o)+i;t>=this._totalSamples&&(o=(t=this._totalSamples-1)-i)<0&&(o=0);var e=!1,a=this._samples;if(C(a[3*o])||(zo(this,o/this._samplesPerXysFile|0),e=!0),C(a[3*t])||(zo(this,t/this._samplesPerXysFile|0),e=!0),!e){C(n)?(n.x=0,n.y=0,n.s=0):n=new Oo(0,0,0);for(var s,u=r-o*this._stepSizeDays,c=this._work,l=this._denominators,h=this._coef,f=this._xTable,m=0;m<=i;++m)c[m]=u-f[m];for(m=0;m<=i;++m){for(h[m]=1,s=0;s<=i;++s)s!==m&&(h[m]*=c[s]);h[m]*=l[m];var d=3*(o+m);n.x+=h[m]*a[d++],n.y+=h[m]*a[d++],n.s+=h[m]*a[d]}return n}}}};var Lo={},Bo={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},qo={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Go={},jo={east:new v,north:new v,up:new v,west:new v,south:new v,down:new v},Ho=new v,Wo=new v,Vo=new v;Lo.localFrameToFixedFrameGenerator=function(i,o){var e,a=Bo[i][o],t=i+o;return C(Go[t])?e=Go[t]:(e=function(e,t,n){var r;return C(n)||(n=new Re),v.equalsEpsilon(e,v.ZERO,_e.EPSILON14)?(v.unpack(qo[i],0,Ho),v.unpack(qo[o],0,Wo),v.unpack(qo[a],0,Vo)):_e.equalsEpsilon(e.x,0,_e.EPSILON14)&&_e.equalsEpsilon(e.y,0,_e.EPSILON14)?(r=_e.sign(e.z),v.unpack(qo[i],0,Ho),"east"!==i&&"west"!==i&&v.multiplyByScalar(Ho,r,Ho),v.unpack(qo[o],0,Wo),"east"!==o&&"west"!==o&&v.multiplyByScalar(Wo,r,Wo),v.unpack(qo[a],0,Vo),"east"!==a&&"west"!==a&&v.multiplyByScalar(Vo,r,Vo)):((t=M(t,ye.WGS84)).geodeticSurfaceNormal(e,jo.up),r=jo.up,(t=jo.east).x=-e.y,t.y=e.x,t.z=0,v.normalize(t,jo.east),v.cross(r,t,jo.north),v.multiplyByScalar(jo.up,-1,jo.down),v.multiplyByScalar(jo.east,-1,jo.west),v.multiplyByScalar(jo.north,-1,jo.south),Ho=jo[i],Wo=jo[o],Vo=jo[a]),n[0]=Ho.x,n[1]=Ho.y,n[2]=Ho.z,n[3]=0,n[4]=Wo.x,n[5]=Wo.y,n[6]=Wo.z,n[7]=0,n[8]=Vo.x,n[9]=Vo.y,n[10]=Vo.z,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,n},Go[t]=e),e},Lo.eastNorthUpToFixedFrame=Lo.localFrameToFixedFrameGenerator("east","north"),Lo.northEastDownToFixedFrame=Lo.localFrameToFixedFrameGenerator("north","east"),Lo.northUpEastToFixedFrame=Lo.localFrameToFixedFrameGenerator("north","up"),Lo.northWestUpToFixedFrame=Lo.localFrameToFixedFrameGenerator("north","west");var Xo=new or,Yo=new v(1,1,1),ko=new Re;Lo.headingPitchRollToFixedFrame=function(e,t,n,r,i){r=M(r,Lo.eastNorthUpToFixedFrame);t=or.fromHeadingPitchRoll(t,Xo),t=Re.fromTranslationQuaternionRotationScale(v.ZERO,t,Yo,ko);return i=r(e,n,i),Re.multiply(i,t,i)};var Ko=new Re,Zo=new re;Lo.headingPitchRollQuaternion=function(e,t,n,r,i){r=Lo.headingPitchRollToFixedFrame(e,t,n,r,Ko),r=Re.getMatrix3(r,Zo);return or.fromRotationMatrix(r,i)};var Jo=new v(1,1,1),Qo=new v,$o=new Re,ea=new Re,ta=new re,na=new or;Lo.fixedFrameToHeadingPitchRoll=function(e,t,n,r){t=M(t,ye.WGS84),n=M(n,Lo.eastNorthUpToFixedFrame),C(r)||(r=new Fr);var i=Re.getTranslation(e,Qo);if(v.equals(i,v.ZERO))return r.heading=0,r.pitch=0,r.roll=0,r;t=Re.inverseTransformation(n(i,t,$o),$o),e=Re.setScale(e,Jo,ea),e=Re.setTranslation(e,v.ZERO,e),t=Re.multiply(t,e,t),t=or.fromRotationMatrix(Re.getMatrix3(t,ta),na),t=or.normalize(t,t);return Fr.fromQuaternion(t,r)};var ra=_e.TWO_PI/86400,ia=new ai;Lo.computeTemeToPseudoFixedMatrix=function(e,t){var n=(ia=ai.addSeconds(e,-ai.computeTaiMinusUtc(e),ia)).dayNumber,r=ia.secondsOfDay,e=n-2451545,e=43200<=r?(.5+e)/jr.DAYS_PER_JULIAN_CENTURY:(e-.5)/jr.DAYS_PER_JULIAN_CENTURY,n=(24110.54841+e*(8640184.812866+e*(.093104+-62e-7*e)))*ra%_e.TWO_PI+(72921158553e-15+11772758384668e-32*(n-2451545.5))*((r+.5*jr.SECONDS_PER_DAY)%jr.SECONDS_PER_DAY),r=Math.cos(n),n=Math.sin(n);return C(t)?(t[0]=r,t[1]=-n,t[2]=0,t[3]=n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new re(r,n,0,-n,r,0,0,0,1)},Lo.iau2006XysData=new Uo,Lo.earthOrientationParameters=yo.NONE;var oa=32.184;Lo.preloadIcrfFixed=function(e){var t=e.start.dayNumber,n=e.start.secondsOfDay+oa,r=e.stop.dayNumber,e=e.stop.secondsOfDay+oa,r=Lo.iau2006XysData.preload(t,n,r,e),e=Lo.earthOrientationParameters.getPromiseToLoad();return pn.all([r,e])},Lo.computeIcrfToFixedMatrix=function(e,t){C(t)||(t=new re);e=Lo.computeFixedToIcrfMatrix(e,t);if(C(e))return re.transpose(e,t)};var aa=new Oo(0,0,0),sa=new _o(0,0,0,0,0),ua=new re,ca=new re;Lo.computeFixedToIcrfMatrix=function(e,t){C(t)||(t=new re);var n=Lo.earthOrientationParameters.compute(e,sa);if(C(n)){var r=e.dayNumber,i=e.secondsOfDay+oa,o=Lo.iau2006XysData.computeXysRadians(r,i,aa);if(C(o)){var a=o.x+n.xPoleOffset,s=o.y+n.yPoleOffset,u=1/(1+Math.sqrt(1-a*a-s*s)),c=ua;c[0]=1-u*a*a,c[3]=-u*a*s,c[6]=a,c[1]=-u*a*s,c[4]=1-u*s*s,c[7]=s,c[2]=-a,c[5]=-s,c[8]=1-u*(a*a+s*s);a=re.fromRotationZ(-o.s,ca),s=re.multiply(c,a,ua),o=e.dayNumber,c=(e.secondsOfDay-ai.computeTaiMinusUtc(e)+n.ut1MinusUtc)/jr.SECONDS_PER_DAY,a=(a=.779057273264+c+.00273781191135448*(o-2451545+c))%1*_e.TWO_PI,e=re.fromRotationZ(a,ca),o=re.multiply(s,e,ua),c=Math.cos(n.xPoleWander),a=Math.cos(n.yPoleWander),s=Math.sin(n.xPoleWander),e=Math.sin(n.yPoleWander),n=r-2451545+i/jr.SECONDS_PER_DAY,r=-47e-6*(n/=36525)*_e.RADIANS_PER_DEGREE/3600,i=Math.cos(r),n=Math.sin(r),r=ca;return r[0]=c*i,r[1]=c*n,r[2]=s,r[3]=-a*n+e*s*i,r[4]=a*i+e*s*n,r[5]=-e*c,r[6]=-e*n-a*s*i,r[7]=e*i-a*s*n,r[8]=a*c,re.multiply(o,r,t)}}};var la=new fe;Lo.pointToWindowCoordinates=function(e,t,n,r){return(r=Lo.pointToGLWindowCoordinates(e,t,n,r)).y=2*t[5]-r.y,r},Lo.pointToGLWindowCoordinates=function(e,t,n,r){C(r)||(r=new H);var i=la;return Re.multiplyByVector(e,fe.fromElements(n.x,n.y,n.z,1,i),i),fe.multiplyByScalar(i,1/i.w,i),Re.multiplyByVector(t,i,i),H.fromCartesian4(i,r)};var ha=new v,fa=new v,ma=new v;Lo.rotationMatrixFromPositionVelocity=function(e,t,n,r){n=M(n,ye.WGS84).geodeticSurfaceNormal(e,ha),e=v.cross(t,n,fa);v.equalsEpsilon(e,v.ZERO,_e.EPSILON6)&&(e=v.clone(v.UNIT_X,e));n=v.cross(e,t,ma);return v.normalize(n,n),v.cross(t,n,e),v.negate(e,e),v.normalize(e,e),(r=!C(r)?new re:r)[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=e.y,r[5]=e.z,r[6]=n.x,r[7]=n.y,r[8]=n.z,r};var da=new Re(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),pa=new R,Ea=new v,_a=new v,ya=new re,ga=new Re,Ra=new Re;Lo.basisTo2D=function(e,t,n){var r=Re.getTranslation(t,_a),i=e.ellipsoid,o=i.cartesianToCartographic(r,pa),o=e.project(o,Ea);v.fromElements(o.z,o.x,o.y,o);i=Lo.eastNorthUpToFixedFrame(r,i,ga),i=Re.inverseTransformation(i,Ra),t=Re.getMatrix3(t,ya),t=Re.multiplyByMatrix3(i,t,n);return Re.multiply(da,t,n),Re.setTranslation(n,o,n),n},Lo.wgs84To2DModelMatrix=function(e,t,n){var r=e.ellipsoid,i=Lo.eastNorthUpToFixedFrame(t,r,ga),i=Re.inverseTransformation(i,Ra),t=r.cartesianToCartographic(t,pa),t=e.project(t,Ea);v.fromElements(t.z,t.x,t.y,t);t=Re.fromTranslation(t,ga);return Re.multiply(da,i,n),Re.multiply(t,n,n),n};var Ta=new fe;function Aa(e,t){e=(t=M(t,ye.WGS84)).scaleToGeodeticSurface(e);var n=Lo.eastNorthUpToFixedFrame(e,t);this._ellipsoid=t,this._origin=e,this._xAxis=v.fromCartesian4(Re.getColumn(n,0,Ta)),this._yAxis=v.fromCartesian4(Re.getColumn(n,1,Ta));n=v.fromCartesian4(Re.getColumn(n,2,Ta));this._plane=St.fromPointNormal(e,n)}Object.defineProperties(Aa.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},origin:{get:function(){return this._origin}},plane:{get:function(){return this._plane}},xAxis:{get:function(){return this._xAxis}},yAxis:{get:function(){return this._yAxis}},zAxis:{get:function(){return this._plane.normal}}});var Sa=new xt;Aa.fromPoints=function(e,t){return new Aa(xt.fromPoints(e,Sa).center,t)};var Oa=new Ft,Ia=new v;Aa.prototype.projectPointOntoPlane=function(e,t){var n=Oa;n.origin=e,v.normalize(e,n.direction);e=zt.rayPlane(n,this._plane,Ia);if(C(e)||(v.negate(n.direction,n.direction),e=zt.rayPlane(n,this._plane,Ia)),C(e)){n=v.subtract(e,this._origin,e),e=v.dot(this._xAxis,n),n=v.dot(this._yAxis,n);return C(t)?(t.x=e,t.y=n,t):new H(e,n)}},Aa.prototype.projectPointsOntoPlane=function(e,t){C(t)||(t=[]);for(var n=0,r=e.length,i=0;i<r;i++){var o=this.projectPointOntoPlane(e[i],t[n]);C(o)&&(t[n]=o,n++)}return t.length=n,t},Aa.prototype.projectPointToNearestOnPlane=function(e,t){C(t)||(t=new H);var n=Oa;n.origin=e,v.clone(this._plane.normal,n.direction);e=zt.rayPlane(n,this._plane,Ia);C(e)||(v.negate(n.direction,n.direction),e=zt.rayPlane(n,this._plane,Ia));n=v.subtract(e,this._origin,e),e=v.dot(this._xAxis,n),n=v.dot(this._yAxis,n);return t.x=e,t.y=n,t},Aa.prototype.projectPointsToNearestOnPlane=function(e,t){C(t)||(t=[]);var n=e.length;t.length=n;for(var r=0;r<n;r++)t[r]=this.projectPointToNearestOnPlane(e[r],t[r]);return t};var Na=new v;function xa(e,t){this.center=v.clone(M(e,v.ZERO)),this.halfAxes=re.clone(M(t,re.ZERO))}Aa.prototype.projectPointOntoEllipsoid=function(e,t){C(t)||(t=new v);var n=this._ellipsoid,r=this._origin,i=this._xAxis,o=this._yAxis,a=Na;return v.multiplyByScalar(i,e.x,a),t=v.add(r,a,t),v.multiplyByScalar(o,e.y,a),v.add(t,a,t),n.scaleToGeocentricSurface(t,t),t},Aa.prototype.projectPointsOntoEllipsoid=function(e,t){var n=e.length;C(t)?t.length=n:t=new Array(n);for(var r=0;r<n;++r)t[r]=this.projectPointOntoEllipsoid(e[r],t[r]);return t},xa.packedLength=v.packedLength+re.packedLength,xa.pack=function(e,t,n){return n=M(n,0),v.pack(e.center,t,n),re.pack(e.halfAxes,t,n+v.packedLength),t},xa.unpack=function(e,t,n){return t=M(t,0),C(n)||(n=new xa),v.unpack(e,t,n.center),re.unpack(e,t+v.packedLength,n.halfAxes),n};var wa=new v,Ca=new v,Ma=new v,va=new v,ba=new v,Pa=new v,Ua=new re,Da={unitary:new re,diagonal:new re};xa.fromPoints=function(e,t){if(C(t)||(t=new xa),!C(e)||0===e.length)return t.halfAxes=re.ZERO,t.center=v.ZERO,t;for(var n=e.length,r=v.clone(e[0],wa),i=1;i<n;i++)v.add(r,e[i],r);var o=1/n;v.multiplyByScalar(r,o,r);var a,s=0,u=0,c=0,l=0,h=0,f=0;for(i=0;i<n;i++)s+=(a=v.subtract(e[i],r,Ca)).x*a.x,u+=a.x*a.y,c+=a.x*a.z,l+=a.y*a.y,h+=a.y*a.z,f+=a.z*a.z;u*=o,c*=o,l*=o,h*=o,f*=o;var m=Ua;m[0]=s*=o,m[1]=u,m[2]=c,m[3]=u,m[4]=l,m[5]=h,m[6]=c,m[7]=h,m[8]=f;var m=re.computeEigenDecomposition(m,Da),m=re.clone(m.unitary,t.halfAxes),d=re.getColumn(m,0,va),p=re.getColumn(m,1,ba),E=re.getColumn(m,2,Pa),_=-Number.MAX_VALUE,y=-Number.MAX_VALUE,g=-Number.MAX_VALUE,R=Number.MAX_VALUE,T=Number.MAX_VALUE,A=Number.MAX_VALUE;for(i=0;i<n;i++)a=e[i],_=Math.max(v.dot(d,a),_),y=Math.max(v.dot(p,a),y),g=Math.max(v.dot(E,a),g),R=Math.min(v.dot(d,a),R),T=Math.min(v.dot(p,a),T),A=Math.min(v.dot(E,a),A);d=v.multiplyByScalar(d,.5*(R+_),d),p=v.multiplyByScalar(p,.5*(T+y),p),E=v.multiplyByScalar(E,.5*(A+g),E),m=v.add(d,p,t.center);v.add(m,E,m);m=Ma;return m.x=_-R,m.y=y-T,m.z=g-A,v.multiplyByScalar(m,.5,m),re.multiplyByScale(t.halfAxes,m,t.halfAxes),t};var Fa=new v,za=new v;function La(e,t,n,r,i,o,a,s,u,c,l){var h=(l=!C(l)?new xa:l).halfAxes;re.setColumn(h,0,t,h),re.setColumn(h,1,n,h),re.setColumn(h,2,r,h),(n=Fa).x=(i+o)/2,n.y=(a+s)/2,n.z=(u+c)/2;r=za;r.x=(o-i)/2,r.y=(s-a)/2,r.z=(c-u)/2;u=l.center,n=re.multiplyByVector(h,n,n);return v.add(e,n,u),re.multiplyByScale(h,r,h),l}var Ba=new R,qa=new v,Ga=new R,ja=new R,Ha=new R,Wa=new R,Va=new R,Xa=new v,Ya=new v,ka=new v,Ka=new v,Za=new v,Ja=new H,Qa=new H,$a=new H,es=new H,ts=new H,ns=new v,rs=new v,is=new v,os=new v,as=new H,ss=new v,us=new v,cs=new v,ls=new St(v.UNIT_X,0);xa.fromRectangle=function(e,t,n,r,i){if(t=M(t,0),n=M(n,0),r=M(r,ye.WGS84),e.width<=_e.PI){var o=z.center(e,Ba),a=new Aa(r.cartographicToCartesian(o,qa),r),s=a.plane,u=o.longitude,c=e.south<0&&0<e.north?0:o.latitude,l=R.fromRadians(u,e.north,n,Ga),h=R.fromRadians(e.west,e.north,n,ja),f=R.fromRadians(e.west,c,n,Ha),m=R.fromRadians(e.west,e.south,n,Wa),d=R.fromRadians(u,e.south,n,Va),p=r.cartographicToCartesian(l,Xa),E=r.cartographicToCartesian(h,Ya),_=r.cartographicToCartesian(f,ka),y=r.cartographicToCartesian(m,Ka),g=r.cartographicToCartesian(d,Za),o=a.projectPointToNearestOnPlane(p,Ja),c=a.projectPointToNearestOnPlane(E,Qa),u=a.projectPointToNearestOnPlane(_,$a),l=a.projectPointToNearestOnPlane(y,es),f=a.projectPointToNearestOnPlane(g,ts),p=-(d=Math.min(c.x,u.x,l.x)),_=Math.max(c.y,o.y),g=Math.min(l.y,f.y);return h.height=m.height=t,E=r.cartographicToCartesian(h,Ya),y=r.cartographicToCartesian(m,Ka),u=Math.min(St.getPointDistance(s,E),St.getPointDistance(s,y)),c=n,La(a.origin,a.xAxis,a.yAxis,a.zAxis,d,p,g,_,u,c,i)}o=0<e.south,l=e.north<0,f=o?e.south:l?e.north:0,h=z.center(e,Ba).longitude,m=v.fromRadians(h,f,n,r,ns);m.z=0;E=Math.abs(m.x)<_e.EPSILON10&&Math.abs(m.y)<_e.EPSILON10?v.UNIT_X:v.normalize(m,rs),y=v.UNIT_Z,a=v.cross(E,y,is);s=St.fromPointNormal(m,E,ls);h=v.fromRadians(h+_e.PI_OVER_TWO,f,n,r,os);d=-(p=v.dot(St.projectPointOntoPlane(s,h,as),a)),_=v.fromRadians(0,e.north,l?t:n,r,ss).z,g=v.fromRadians(0,e.south,o?t:n,r,us).z;r=v.fromRadians(e.east,f,n,r,cs);return La(m,a,y,E,d,p,g,_,u=St.getPointDistance(s,r),c=0,i)},xa.clone=function(e,t){if(C(e))return C(t)?(v.clone(e.center,t.center),re.clone(e.halfAxes,t.halfAxes),t):new xa(e.center,e.halfAxes)},xa.intersectPlane=function(e,t){var n=e.center,r=t.normal,i=e.halfAxes,o=r.x,a=r.y,e=r.z,i=Math.abs(o*i[re.COLUMN0ROW0]+a*i[re.COLUMN0ROW1]+e*i[re.COLUMN0ROW2])+Math.abs(o*i[re.COLUMN1ROW0]+a*i[re.COLUMN1ROW1]+e*i[re.COLUMN1ROW2])+Math.abs(o*i[re.COLUMN2ROW0]+a*i[re.COLUMN2ROW1]+e*i[re.COLUMN2ROW2]),t=v.dot(r,n)+t.distance;return t<=-i?te.OUTSIDE:i<=t?te.INSIDE:te.INTERSECTING};var hs=new v,fs=new v,ms=new v,ds=new v;xa.distanceSquaredTo=function(e,t){var n=v.subtract(t,e.center,Fa),r=e.halfAxes,i=re.getColumn(r,0,hs),o=re.getColumn(r,1,fs),a=re.getColumn(r,2,ms),s=v.magnitude(i),t=v.magnitude(o),e=v.magnitude(a);v.normalize(i,i),v.normalize(o,o),v.normalize(a,a);r=ds;r.x=v.dot(n,i),r.y=v.dot(n,o),r.z=v.dot(n,a);var u,a=0;return r.x<-s?a+=(u=r.x+s)*u:r.x>s&&(a+=(u=r.x-s)*u),r.y<-t?a+=(u=r.y+t)*u:r.y>t&&(a+=(u=r.y-t)*u),r.z<-e?a+=(u=r.z+e)*u:r.z>e&&(a+=(u=r.z-e)*u),a};var ps=new v,Es=new v;xa.computePlaneDistances=function(e,t,n,r){C(r)||(r=new ne);var i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=e.center,s=e.halfAxes,u=re.getColumn(s,0,hs),c=re.getColumn(s,1,fs),l=re.getColumn(s,2,ms),h=v.add(u,c,ps);v.add(h,l,h),v.add(h,a,h);e=v.subtract(h,t,Es),s=v.dot(n,e),i=Math.min(s,i),o=Math.max(s,o);return v.add(a,u,h),v.add(h,c,h),v.subtract(h,l,h),v.subtract(h,t,e),s=v.dot(n,e),i=Math.min(s,i),o=Math.max(s,o),v.add(a,u,h),v.subtract(h,c,h),v.add(h,l,h),v.subtract(h,t,e),s=v.dot(n,e),i=Math.min(s,i),o=Math.max(s,o),v.add(a,u,h),v.subtract(h,c,h),v.subtract(h,l,h),v.subtract(h,t,e),s=v.dot(n,e),i=Math.min(s,i),o=Math.max(s,o),v.subtract(a,u,h),v.add(h,c,h),v.add(h,l,h),v.subtract(h,t,e),s=v.dot(n,e),i=Math.min(s,i),o=Math.max(s,o),v.subtract(a,u,h),v.add(h,c,h),v.subtract(h,l,h),v.subtract(h,t,e),s=v.dot(n,e),i=Math.min(s,i),o=Math.max(s,o),v.subtract(a,u,h),v.subtract(h,c,h),v.add(h,l,h),v.subtract(h,t,e),s=v.dot(n,e),i=Math.min(s,i),o=Math.max(s,o),v.subtract(a,u,h),v.subtract(h,c,h),v.subtract(h,l,h),v.subtract(h,t,e),s=v.dot(n,e),i=Math.min(s,i),o=Math.max(s,o),r.start=i,r.stop=o,r};var _s=new De;function ys(e,t){this._ellipsoid=e,this._observerPosition=new v,this._observerPositionInScaledSpace=new v,this._distanceToLimbInScaledSpaceSquared=0,C(t)&&(this.observerPosition=t)}xa.isOccluded=function(e,t){e=De.fromOrientedBoundingBox(e,_s);return!t.isBoundingSphereVisible(e)},xa.prototype.intersectPlane=function(e){return xa.intersectPlane(this,e)},xa.prototype.distanceSquaredTo=function(e){return xa.distanceSquaredTo(this,e)},xa.prototype.computePlaneDistances=function(e,t,n){return xa.computePlaneDistances(this,e,t,n)},xa.prototype.isOccluded=function(e){return xa.isOccluded(this,e)},xa.equals=function(e,t){return e===t||C(e)&&C(t)&&v.equals(e.center,t.center)&&re.equals(e.halfAxes,t.halfAxes)},xa.prototype.clone=function(e){return xa.clone(this,e)},xa.prototype.equals=function(e){return xa.equals(this,e)},Object.defineProperties(ys.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},observerPosition:{get:function(){return this._observerPosition},set:function(e){var t=this._ellipsoid.transformPositionToScaledSpace(e,this._observerPositionInScaledSpace),n=v.magnitudeSquared(t)-1;v.clone(e,this._observerPosition),this._observerPositionInScaledSpace=t,this._distanceToLimbInScaledSpaceSquared=n}}});var gs=new v;ys.prototype.isPointVisible=function(e){return ws(this._ellipsoid.transformPositionToScaledSpace(e,gs),this._observerPositionInScaledSpace,this._distanceToLimbInScaledSpaceSquared)},ys.prototype.isScaledSpacePointVisible=function(e){return ws(e,this._observerPositionInScaledSpace,this._distanceToLimbInScaledSpaceSquared)};var Rs=new v;ys.prototype.isScaledSpacePointVisiblePossiblyUnderEllipsoid=function(e,t){var n,r=this._ellipsoid,t=C(t)&&t<0&&r.minimumRadius>-t?((n=Rs).x=this._observerPosition.x/(r.radii.x+t),n.y=this._observerPosition.y/(r.radii.y+t),n.z=this._observerPosition.z/(r.radii.z+t),n.x*n.x+n.y*n.y+n.z*n.z-1):(n=this._observerPositionInScaledSpace,this._distanceToLimbInScaledSpaceSquared);return ws(e,n,t)},ys.prototype.computeHorizonCullingPoint=function(e,t,n){return Is(this._ellipsoid,e,t,n)};var Ts=ye.clone(ye.UNIT_SPHERE);ys.prototype.computeHorizonCullingPointPossiblyUnderEllipsoid=function(e,t,n,r){return Is(Os(this._ellipsoid,n,Ts),e,t,r)},ys.prototype.computeHorizonCullingPointFromVertices=function(e,t,n,r,i){return xs(this._ellipsoid,e,t,n,r,i)},ys.prototype.computeHorizonCullingPointFromVerticesPossiblyUnderEllipsoid=function(e,t,n,r,i,o){return xs(Os(this._ellipsoid,i,Ts),e,t,n,r,o)};var As=[];ys.prototype.computeHorizonCullingPointFromRectangle=function(e,t,n){var r=z.subsample(e,t,0,As),e=De.fromPoints(r);if(!(v.magnitude(e.center)<.1*t.minimumRadius))return this.computeHorizonCullingPoint(e.center,r,n)};var Ss=new v;function Os(e,t,n){return C(t)&&t<0&&e.minimumRadius>-t&&(t=v.fromElements(e.radii.x+t,e.radii.y+t,e.radii.z+t,Ss),e=ye.fromCartesian3(t,n)),e}function Is(e,t,n,r){C(r)||(r=new v);for(var i=Us(e,t),o=0,a=0,s=n.length;a<s;++a){var u=vs(e,n[a],i);if(u<0)return;o=Math.max(o,u)}return bs(i,o,r)}var Ns=new v;function xs(e,t,n,r,i,o){C(o)||(o=new v),r=M(r,3),i=M(i,v.ZERO);for(var a=Us(e,t),s=0,u=0,c=n.length;u<c;u+=r){Ns.x=n[u]+i.x,Ns.y=n[u+1]+i.y,Ns.z=n[u+2]+i.z;var l=vs(e,Ns,a);if(l<0)return;s=Math.max(s,l)}return bs(a,s,o)}function ws(e,t,n){e=v.subtract(e,t,gs),t=-v.dot(e,t);return!(n<0?0<t:n<t&&t*t/v.magnitudeSquared(e)>n)}var Cs=new v,Ms=new v;function vs(e,t,n){var r=e.transformPositionToScaledSpace(t,Cs),e=v.magnitudeSquared(r),t=Math.sqrt(e),r=v.divideByScalar(r,t,Ms),e=Math.max(1,e),t=1/(t=Math.max(1,t));return 1/(v.dot(r,n)*t-v.magnitude(v.cross(r,n,r))*(Math.sqrt(e-1)*t))}function bs(e,t,n){if(!(t<=0||t===1/0||t!=t))return v.multiplyByScalar(e,t,n)}var Ps=new v;function Us(e,t){return v.equals(t,v.ZERO)?t:(e.transformPositionToScaledSpace(t,Ps),v.normalize(Ps,Ps))}var Ds={BYTE:Rt.BYTE,UNSIGNED_BYTE:Rt.UNSIGNED_BYTE,SHORT:Rt.SHORT,UNSIGNED_SHORT:Rt.UNSIGNED_SHORT,INT:Rt.INT,UNSIGNED_INT:Rt.UNSIGNED_INT,FLOAT:Rt.FLOAT,DOUBLE:Rt.DOUBLE,getSizeInBytes:function(e){switch(e){case Ds.BYTE:return Int8Array.BYTES_PER_ELEMENT;case Ds.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Ds.SHORT:return Int16Array.BYTES_PER_ELEMENT;case Ds.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Ds.INT:return Int32Array.BYTES_PER_ELEMENT;case Ds.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Ds.FLOAT:return Float32Array.BYTES_PER_ELEMENT;case Ds.DOUBLE:return Float64Array.BYTES_PER_ELEMENT}},fromTypedArray:function(e){return e instanceof Int8Array?Ds.BYTE:e instanceof Uint8Array?Ds.UNSIGNED_BYTE:e instanceof Int16Array?Ds.SHORT:e instanceof Uint16Array?Ds.UNSIGNED_SHORT:e instanceof Int32Array?Ds.INT:e instanceof Uint32Array?Ds.UNSIGNED_INT:e instanceof Float32Array?Ds.FLOAT:e instanceof Float64Array?Ds.DOUBLE:void 0},validate:function(e){return C(e)&&(e===Ds.BYTE||e===Ds.UNSIGNED_BYTE||e===Ds.SHORT||e===Ds.UNSIGNED_SHORT||e===Ds.INT||e===Ds.UNSIGNED_INT||e===Ds.FLOAT||e===Ds.DOUBLE)},createTypedArray:function(e,t){switch(e){case Ds.BYTE:return new Int8Array(t);case Ds.UNSIGNED_BYTE:return new Uint8Array(t);case Ds.SHORT:return new Int16Array(t);case Ds.UNSIGNED_SHORT:return new Uint16Array(t);case Ds.INT:return new Int32Array(t);case Ds.UNSIGNED_INT:return new Uint32Array(t);case Ds.FLOAT:return new Float32Array(t);case Ds.DOUBLE:return new Float64Array(t)}},createArrayBufferView:function(e,t,n,r){switch(n=M(n,0),r=M(r,(t.byteLength-n)/Ds.getSizeInBytes(e)),e){case Ds.BYTE:return new Int8Array(t,n,r);case Ds.UNSIGNED_BYTE:return new Uint8Array(t,n,r);case Ds.SHORT:return new Int16Array(t,n,r);case Ds.UNSIGNED_SHORT:return new Uint16Array(t,n,r);case Ds.INT:return new Int32Array(t,n,r);case Ds.UNSIGNED_INT:return new Uint32Array(t,n,r);case Ds.FLOAT:return new Float32Array(t,n,r);case Ds.DOUBLE:return new Float64Array(t,n,r)}},fromName:function(e){switch(e){case"BYTE":return Ds.BYTE;case"UNSIGNED_BYTE":return Ds.UNSIGNED_BYTE;case"SHORT":return Ds.SHORT;case"UNSIGNED_SHORT":return Ds.UNSIGNED_SHORT;case"INT":return Ds.INT;case"UNSIGNED_INT":return Ds.UNSIGNED_INT;case"FLOAT":return Ds.FLOAT;case"DOUBLE":return Ds.DOUBLE}}},Fs=Object.freeze(Ds),zs=Object.freeze({NONE:0,BITS12:1}),Ls=new v,Bs=new v,qs=new H,Gs=new Re,js=new Re;function Hs(e,t,n,r,i,o){var a,s,u,c,l,h=zs.NONE;C(e)&&C(t)&&C(n)&&C(r)&&(c=e.minimum,s=e.maximum,l=v.subtract(s,c,Bs),u=n-t,Math.max(v.maximumComponent(l),u),h=zs.NONE,a=e.center,s=Re.inverseTransformation(r,new Re),u=v.negate(c,Ls),Re.multiply(Re.fromTranslation(u,Gs),s,s),(u=Ls).x=1/l.x,u.y=1/l.y,u.z=1/l.z,Re.multiply(Re.fromScale(u,Gs),s,s),u=Re.clone(r),Re.setTranslation(u,v.ZERO,u),r=Re.clone(r,new Re),c=Re.fromTranslation(c,Gs),l=Re.fromScale(l,js),l=Re.multiply(c,l,Gs),Re.multiply(r,l,r),Re.multiply(u,l,u)),this.quantization=h,this.minimumHeight=t,this.maximumHeight=n,this.center=a,this.toScaledENU=s,this.fromScaledENU=r,this.matrix=u,this.hasVertexNormals=i,this.hasWebMercatorT=M(o,!1)}Hs.prototype.encode=function(e,t,n,r,i,o,a){var s,u,c=r.x,l=r.y;return this.quantization===zs.BITS12?((n=Re.multiplyByPoint(this.toScaledENU,n,Ls)).x=_e.clamp(n.x,0,1),n.y=_e.clamp(n.y,0,1),n.z=_e.clamp(n.z,0,1),s=this.maximumHeight-this.minimumHeight,u=_e.clamp((i-this.minimumHeight)/s,0,1),H.fromElements(n.x,n.y,qs),r=K.compressTextureCoordinates(qs),H.fromElements(n.z,u,qs),s=K.compressTextureCoordinates(qs),H.fromElements(c,l,qs),u=K.compressTextureCoordinates(qs),e[t++]=r,e[t++]=s,e[t++]=u,this.hasWebMercatorT&&(H.fromElements(a,0,qs),u=K.compressTextureCoordinates(qs),e[t++]=u)):(v.subtract(n,this.center,Ls),e[t++]=Ls.x,e[t++]=Ls.y,e[t++]=Ls.z,e[t++]=i,e[t++]=c,e[t++]=l,this.hasWebMercatorT&&(e[t++]=a)),this.hasVertexNormals&&(e[t++]=K.octPackFloat(o)),t},Hs.prototype.decodePosition=function(e,t,n){if(C(n)||(n=new v),t*=this.getStride(),this.quantization!==zs.BITS12)return n.x=e[t],n.y=e[t+1],n.z=e[t+2],v.add(n,this.center,n);var r=K.decompressTextureCoordinates(e[t],qs);n.x=r.x,n.y=r.y;t=K.decompressTextureCoordinates(e[t+1],qs);return n.z=t.x,Re.multiplyByPoint(this.fromScaledENU,n,n)},Hs.prototype.decodeTextureCoordinates=function(e,t,n){return C(n)||(n=new H),t*=this.getStride(),this.quantization===zs.BITS12?K.decompressTextureCoordinates(e[t+2],n):H.fromElements(e[t+4],e[t+5],n)},Hs.prototype.decodeHeight=function(e,t){return t*=this.getStride(),this.quantization!==zs.BITS12?e[t+3]:K.decompressTextureCoordinates(e[t+1],qs).y*(this.maximumHeight-this.minimumHeight)+this.minimumHeight},Hs.prototype.decodeWebMercatorT=function(e,t){return t*=this.getStride(),this.quantization===zs.BITS12?K.decompressTextureCoordinates(e[t+3],qs).x:e[t+6]},Hs.prototype.getOctEncodedNormal=function(e,t,n){e=e[t=(t+1)*this.getStride()-1]/256,t=Math.floor(e);return H.fromElements(t,256*(e-t),n)},Hs.prototype.getStride=function(){var e=this.quantization===zs.BITS12?3:6;return this.hasWebMercatorT&&++e,this.hasVertexNormals&&++e,e};var Ws={position3DAndHeight:0,textureCoordAndEncodedNormals:1},Vs={compressed0:0,compressed1:1};Hs.prototype.getAttributes=function(e){var t,n=Fs.FLOAT,r=Fs.getSizeInBytes(n);if(this.quantization===zs.NONE){var i=2;return this.hasWebMercatorT&&++i,this.hasVertexNormals&&++i,[{index:Ws.position3DAndHeight,vertexBuffer:e,componentDatatype:n,componentsPerAttribute:4,offsetInBytes:0,strideInBytes:t=(4+i)*r},{index:Ws.textureCoordAndEncodedNormals,vertexBuffer:e,componentDatatype:n,componentsPerAttribute:i,offsetInBytes:4*r,strideInBytes:t}]}var o=3,i=0;return(this.hasWebMercatorT||this.hasVertexNormals)&&++o,this.hasWebMercatorT&&this.hasVertexNormals?(++i,[{index:Vs.compressed0,vertexBuffer:e,componentDatatype:n,componentsPerAttribute:o,offsetInBytes:0,strideInBytes:t=(o+1)*r},{index:Vs.compressed1,vertexBuffer:e,componentDatatype:n,componentsPerAttribute:1,offsetInBytes:o*r,strideInBytes:t}]):[{index:Vs.compressed0,vertexBuffer:e,componentDatatype:n,componentsPerAttribute:o}]},Hs.prototype.getAttributeLocations=function(){return this.quantization===zs.NONE?Ws:Vs},Hs.clone=function(e,t){return(t=!C(t)?new Hs:t).quantization=e.quantization,t.minimumHeight=e.minimumHeight,t.maximumHeight=e.maximumHeight,t.center=v.clone(e.center),t.toScaledENU=Re.clone(e.toScaledENU),t.fromScaledENU=Re.clone(e.fromScaledENU),t.matrix=Re.clone(e.matrix),t.hasVertexNormals=e.hasVertexNormals,t.hasWebMercatorT=e.hasWebMercatorT,t};var Xs=32767,Ys=16383,ks=[],Ks=[],Zs=[],Js=new R,Qs=new v,$s=[],eu=[],tu=[],nu=[],ru=[];new De,new xa;var iu=new H,ou=new v;function au(){this.vertexBuffer=void 0,this.index=void 0,this.first=void 0,this.second=void 0,this.ratio=void 0}au.prototype.clone=function(e){return(e=!C(e)?new au:e).uBuffer=this.uBuffer,e.vBuffer=this.vBuffer,e.heightBuffer=this.heightBuffer,e.normalBuffer=this.normalBuffer,e.index=this.index,e.first=this.first,e.second=this.second,e.ratio=this.ratio,e},au.prototype.initializeIndexed=function(e,t,n,r,i){this.uBuffer=e,this.vBuffer=t,this.heightBuffer=n,this.normalBuffer=r,this.index=i,this.first=void 0,this.second=void 0,this.ratio=void 0},au.prototype.initializeFromClipResult=function(e,t,n){var r=t+1;return-1!==e[t]?n[e[t]].clone(this):(this.vertexBuffer=void 0,this.index=void 0,this.first=n[e[r]],this.second=n[e[++r]],this.ratio=e[++r],++r),r},au.prototype.getKey=function(){return this.isIndexed()?this.index:JSON.stringify({first:this.first.getKey(),second:this.second.getKey(),ratio:this.ratio})},au.prototype.isIndexed=function(){return C(this.index)},au.prototype.getH=function(){return C(this.index)?this.heightBuffer[this.index]:_e.lerp(this.first.getH(),this.second.getH(),this.ratio)},au.prototype.getU=function(){return C(this.index)?this.uBuffer[this.index]:_e.lerp(this.first.getU(),this.second.getU(),this.ratio)},au.prototype.getV=function(){return C(this.index)?this.vBuffer[this.index]:_e.lerp(this.first.getV(),this.second.getV(),this.ratio)};var su=new H,uu=-1,cu=[new v,new v],lu=[new v,new v];function hu(e,t){var n=cu[++uu],r=lu[uu],n=K.octDecode(e.first.getNormalX(),e.first.getNormalY(),n),r=K.octDecode(e.second.getNormalX(),e.second.getNormalY(),r);return Qs=v.lerp(n,r,e.ratio,Qs),v.normalize(Qs,Qs),K.octEncode(Qs,t),--uu,t}au.prototype.getNormalX=function(){return C(this.index)?this.normalBuffer[2*this.index]:(su=hu(this,su)).x},au.prototype.getNormalY=function(){return C(this.index)?this.normalBuffer[2*this.index+1]:(su=hu(this,su)).y};var fu,mu,du=[];function pu(e,t,n,r,i,o,a,s,u){if(0!==a.length){for(var c=0,l=0;l<a.length;)l=du[c++].initializeFromClipResult(a,l,s);for(var h=0;h<c;++h){var f,m,d=du[h];d.isIndexed()?(d.newIndex=o[d.index],d.uBuffer=e,d.vBuffer=t,d.heightBuffer=n,u&&(d.normalBuffer=r)):C(o[f=d.getKey()])?d.newIndex=o[f]:(m=e.length,e.push(d.getU()),t.push(d.getV()),n.push(d.getH()),u&&(r.push(d.getNormalX()),r.push(d.getNormalY())),d.newIndex=m,o[f]=m)}3===c?(i.push(du[0].newIndex),i.push(du[1].newIndex),i.push(du[2].newIndex)):4===c&&(i.push(du[0].newIndex),i.push(du[1].newIndex),i.push(du[2].newIndex),i.push(du[0].newIndex),i.push(du[2].newIndex),i.push(du[3].newIndex))}}return du.push(new au),du.push(new au),du.push(new au),du.push(new au),fu=function(e,t){var n,r=[],i=[],o=[],a=[],s=[],u=[],c=[],l=[],h=[],f=e.vertices,m=e.indices,d=Hs.clone(e.encoding),p=d.hasVertexNormals,E=e.exaggeration,_=e.vertexCountWithoutSkirts,y=e.indexCountWithoutSkirts,g=e.encoding.minimumHeight,R=e.encoding.maximumHeight,T=new Array(_),A=new Array(_),S=new Array(_),O=p?new Array(2*_):void 0;for(H=j=0;j<_;++j,H+=2){var I=d.decodeTextureCoordinates(f,j,iu);I.y=1-I.y,n=d.decodeHeight(f,j)/E,T[j]=I.x*Xs,A[j]=I.y*Xs,S[j]=_e.clamp((n-g)/(R-g)*Xs|0,0,Xs),Math.abs(T[j])<20&&(T[j]=0),Math.abs(A[j])<20&&(A[j]=0),Math.abs(Xs-T[j])<20&&(T[j]=Xs),Math.abs(Xs-A[j])<20&&(A[j]=Xs),p&&(I=d.getOctEncodedNormal(f,j,ou),O[H]=I.x,O[H+1]=I.y)}for(var N=0;N<4;++N){ge.get_child(e.index,N);var x=2===N||3===N,w=1===N||3===N,C=x?Ys:0,M=x?Xs:Ys,v=w?Ys:0,b=w?Xs:Ys,P=$s,U=eu,D=tu,F=ru;P.length=0,U.length=0,D.length=0,F.length=0;for(var z,L,B=nu,q={},G=B.length=0,j=0,H=0;j<_;++j,H+=2)z=T[j],L=A[j],(x&&Ys<=z&&z<=Xs||!x&&z<=Ys&&0<=z)&&(w&&Ys<=L&&L<=Xs||!w&&L<=Ys&&0<=L)&&(q[j]=G,P.push(z),U.push(L),D.push(S[j]),p&&(F.push(O[H]),F.push(O[H+1])),++G);var W=[];W.push(new au),W.push(new au),W.push(new au);var V=[];for(V.push(new au),V.push(new au),V.push(new au),j=0;j<y;j+=3){var X=m[j],Y=m[j+1],k=m[j+2],K=T[X],Z=T[Y],J=T[k];W[0].initializeIndexed(T,A,S,O,X),W[1].initializeIndexed(T,A,S,O,Y),W[2].initializeIndexed(T,A,S,O,k);Z=gt.clipTriangleAtAxisAlignedThreshold(Ys,x,K,Z,J,ks);Z.length<=0||(J=V[0].initializeFromClipResult(Z,0,W))>=Z.length||(J=V[1].initializeFromClipResult(Z,J,W))>=Z.length||(J=V[2].initializeFromClipResult(Z,J,W),pu(P,U,D,F,B,q,gt.clipTriangleAtAxisAlignedThreshold(Ys,w,V[0].getV(),V[1].getV(),V[2].getV(),Ks),V,p),J<Z.length&&(V[2].clone(V[1]),V[2].initializeFromClipResult(Z,J,W),pu(P,U,D,F,B,q,gt.clipTriangleAtAxisAlignedThreshold(Ys,w,V[0].getV(),V[1].getV(),V[2].getV(),Ks),V,p)))}var Q=x?-Xs:0,$=w?-Xs:0,ee=[],te=[],ne=[],re=[],ie=Number.MAX_VALUE,oe=-ie,ae=Zs;ae.length=0;var se=ye.clone(e.ellipsoid),ue=e.childRectangle,ce=ue.north,le=ue.south,he=ue.east,fe=ue.west;for(0==N?(ce=(ce+le)/2,he=(fe+he)/2):1==N?(le=(ce+le)/2,he=(fe+he)/2):2==N?(ce=(ce+le)/2,fe=(fe+he)/2):3==N&&(le=(ce+le)/2,fe=(fe+he)/2),he<fe&&(he+=_e.TWO_PI),j=0;j<P.length;++j)-1!==B.indexOf(j)&&(z=(z=Math.round(P[j]))<=C?(ee.push(j),0):M<=z?(ne.push(j),Xs):2*z+Q,P[j]=z,L=(L=Math.round(U[j]))<=v?(te.push(j),0):b<=L?(re.push(j),Xs):2*L+$,U[j]=L,(n=_e.lerp(g,R,D[j]/Xs))<ie&&(ie=n),oe<n&&(oe=n),D[j]=n,Js.longitude=_e.lerp(fe,he,z/Xs),Js.latitude=_e.lerp(le,ce,L/Xs),Js.height=n,se.cartographicToCartesian(Js,Qs),ae.push(Qs.x),ae.push(Qs.y),ae.push(Qs.z));var me=oe-ie,de=new Uint16Array(P.length+U.length+D.length);for(j=0;j<P.length;++j)de[j]=P[j];var pe=P.length;for(j=0;j<U.length;++j)de[pe+j]=U[j];for(pe+=U.length,j=0;j<D.length;++j)de[pe+j]=Xs*(D[j]-ie)/me;var Ee=At.createTypedArray(P.length,B);p&&(ue=new Uint8Array(F).buffer,i.push(ue)),r.push(de.buffer),o.push(Ee.buffer),a.push(ie),s.push(oe),u.push(ee),c.push(te),l.push(ne),h.push(re)}return{vertices:r,encodedNormals:i,indices:o,minimumHeight:a,maximumHeight:s,westIndices:u,southIndices:c,eastIndices:l,northIndices:h}},function(e){var i=e.data,o=[],a={id:i.id,result:void 0,error:void 0};return pn(function(e,t,n){try{return e(t,n)}catch(e){return pn.reject(e)}}(fu,i.parameters,o)).then(function(e){a.result=e}).otherwise(function(e){e instanceof Error?a.error={name:e.name,message:e.message,stack:e.stack}:a.error=e}).always(function(){C(mu)||(mu=M(self.webkitPostMessage,self.postMessage)),i.canTransferArrayBuffer||(o.length=0);try{mu(a,o)}catch(e){a.result=void 0,a.error="postMessage failed with error: "+(n=(t=e).name,r=t.message,r=C(n)&&C(r)?n+": "+r:t.toString(),C(t=t.stack)&&(r+="\n"+t),r)+"\n    with responseMessage: "+JSON.stringify(a),mu(a)}var t,n,r})}});
