define(function(){"use strict";function F(e){return null!=e}function C(e,t){return null!=e?e:t}function i(e){var t;this.name="DeveloperError",this.message=e;try{throw new Error}catch(e){t=e.stack}this.stack=t}C.EMPTY_OBJECT=Object.freeze({}),F(Object.create)&&((i.prototype=Object.create(Error.prototype)).constructor=i),i.prototype.toString=function(){var e=this.name+": "+this.message;return F(this.stack)&&(e+="\n"+this.stack.toString()),e},i.throwInstantiationError=function(){throw new i("This function defines an interface and should not be called directly.")};var o={};function r(e,t,r){return"Expected "+r+" to be typeof "+t+", actual typeof was "+e}function t(e){null==e&&(e=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,this.init_genrand(e)}o.typeOf={},o.defined=function(e,t){if(!F(t))throw new i(e+" is required, actual value was undefined")},o.typeOf.func=function(e,t){if("function"!=typeof t)throw new i(r(typeof t,"function",e))},o.typeOf.string=function(e,t){if("string"!=typeof t)throw new i(r(typeof t,"string",e))},o.typeOf.number=function(e,t){if("number"!=typeof t)throw new i(r(typeof t,"number",e))},o.typeOf.number.lessThan=function(e,t,r){if(o.typeOf.number(e,t),r<=t)throw new i("Expected "+e+" to be less than "+r+", actual value was "+t)},o.typeOf.number.lessThanOrEquals=function(e,t,r){if(o.typeOf.number(e,t),r<t)throw new i("Expected "+e+" to be less than or equal to "+r+", actual value was "+t)},o.typeOf.number.greaterThan=function(e,t,r){if(o.typeOf.number(e,t),t<=r)throw new i("Expected "+e+" to be greater than "+r+", actual value was "+t)},o.typeOf.number.greaterThanOrEquals=function(e,t,r){if(o.typeOf.number(e,t),t<r)throw new i("Expected "+e+" to be greater than or equal to"+r+", actual value was "+t)},o.typeOf.object=function(e,t){if("object"!=typeof t)throw new i(r(typeof t,"object",e))},o.typeOf.bool=function(e,t){if("boolean"!=typeof t)throw new i(r(typeof t,"boolean",e))},o.typeOf.number.equals=function(e,t,r,n){if(o.typeOf.number(e,r),o.typeOf.number(t,n),r!==n)throw new i(e+" must be equal to "+t+", the actual values are "+r+" and "+n)},t.prototype.init_genrand=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0}},t.prototype.genrand_int32=function(){var e,t,r=new Array(0,this.MATRIX_A);if(this.mti>=this.N){for(this.mti==this.N+1&&this.init_genrand(5489),t=0;t<this.N-this.M;t++)e=this.mt[t]&this.UPPER_MASK|this.mt[t+1]&this.LOWER_MASK,this.mt[t]=this.mt[t+this.M]^e>>>1^r[1&e];for(;t<this.N-1;t++)e=this.mt[t]&this.UPPER_MASK|this.mt[t+1]&this.LOWER_MASK,this.mt[t]=this.mt[t+(this.M-this.N)]^e>>>1^r[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^r[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0},t.prototype.random=function(){return this.genrand_int32()*(1/4294967296)};var B={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,EPSILON21:1e-21,GRAVITATIONALPARAMETER:3986004418e5,SOLAR_RADIUS:6955e5,LUNAR_RADIUS:1737400,SIXTY_FOUR_KILOBYTES:65536,FOUR_GIGABYTES:4294967296};B.sign=C(Math.sign,function(e){return 0===(e=+e)||e!=e?e:0<e?1:-1}),B.signNotZero=function(e){return e<0?-1:1},B.toSNorm=function(e,t){return t=C(t,255),Math.round((.5*B.clamp(e,-1,1)+.5)*t)},B.fromSNorm=function(e,t){return t=C(t,255),B.clamp(e,0,t)/t*2-1},B.normalize=function(e,t,r){return 0===(r=Math.max(r-t,0))?0:B.clamp((e-t)/r,0,1)},B.sinh=C(Math.sinh,function(e){return(Math.exp(e)-Math.exp(-e))/2}),B.cosh=C(Math.cosh,function(e){return(Math.exp(e)+Math.exp(-e))/2}),B.lerp=function(e,t,r){return(1-r)*e+r*t},B.PI=Math.PI,B.ONE_OVER_PI=1/Math.PI,B.PI_OVER_TWO=Math.PI/2,B.PI_OVER_THREE=Math.PI/3,B.PI_OVER_FOUR=Math.PI/4,B.PI_OVER_SIX=Math.PI/6,B.THREE_PI_OVER_TWO=3*Math.PI/2,B.TWO_PI=2*Math.PI,B.ONE_OVER_TWO_PI=1/(2*Math.PI),B.RADIANS_PER_DEGREE=Math.PI/180,B.DEGREES_PER_RADIAN=180/Math.PI,B.RADIANS_PER_ARCSECOND=B.RADIANS_PER_DEGREE/3600,B.toRadians=function(e){return e*B.RADIANS_PER_DEGREE},B.toDegrees=function(e){return e*B.DEGREES_PER_RADIAN},B.convertLongitudeRange=function(e){var t=B.TWO_PI,e=e-Math.floor(e/t)*t;return e<-Math.PI?e+t:e>=Math.PI?e-t:e},B.clampToLatitudeRange=function(e){return B.clamp(e,-1*B.PI_OVER_TWO,B.PI_OVER_TWO)},B.negativePiToPi=function(e){return B.zeroToTwoPi(e+B.PI)-B.PI},B.zeroToTwoPi=function(e){var t=B.mod(e,B.TWO_PI);return Math.abs(t)<B.EPSILON14&&Math.abs(e)>B.EPSILON14?B.TWO_PI:t},B.mod=function(e,t){return(e%t+t)%t},B.equalsEpsilon=function(e,t,r,n){r=C(r,0),n=C(n,r);var o=Math.abs(e-t);return o<=n||o<=r*Math.max(Math.abs(e),Math.abs(t))},B.lessThan=function(e,t,r){return e-t<-r},B.lessThanOrEquals=function(e,t,r){return e-t<r},B.greaterThan=function(e,t,r){return r<e-t},B.greaterThanOrEquals=function(e,t,r){return-r<e-t};var a=[1];B.factorial=function(e){var t=a.length;if(t<=e)for(var r=a[t-1],n=t;n<=e;n++){var o=r*n;a.push(o),r=o}return a[e]},B.incrementWrap=function(e,t,r){return r=C(r,0),e=t<++e?r:e},B.isPowerOfTwo=function(e){return 0!==e&&0==(e&e-1)},B.nextPowerOfTwo=function(e){return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e},B.clamp=function(e,t,r){return e<t?t:r<e?r:e};var n=new t;function U(e,t,r){this.x=C(e,0),this.y=C(t,0),this.z=C(r,0)}B.setRandomNumberSeed=function(e){n=new t(e)},B.nextRandomNumber=function(){return n.random()},B.randomBetween=function(e,t){return B.nextRandomNumber()*(t-e)+e},B.acosClamped=function(e){return Math.acos(B.clamp(e,-1,1))},B.asinClamped=function(e){return Math.asin(B.clamp(e,-1,1))},B.chordLength=function(e,t){return 2*t*Math.sin(.5*e)},B.logBase=function(e,t){return Math.log(e)/Math.log(t)},B.cbrt=C(Math.cbrt,function(e){var t=Math.pow(Math.abs(e),1/3);return e<0?-t:t}),B.log2=C(Math.log2,function(e){return Math.log(e)*Math.LOG2E}),B.fog=function(e,t){t*=e;return 1-Math.exp(-t*t)},B.fastApproximateAtan=function(e){return e*(-.1784*Math.abs(e)-.0663*e*e+1.0301)},B.fastApproximateAtan2=function(e,t){var r=Math.abs(e),n=Math.abs(t),o=Math.max(r,n);n=Math.min(r,n);r=B.fastApproximateAtan(n/o);return r=Math.abs(t)>Math.abs(e)?B.PI_OVER_TWO-r:r,r=e<0?B.PI-r:r,r=t<0?-r:r},U.fromSpherical=function(e,t){F(t)||(t=new U);var r=e.clock,n=e.cone,o=C(e.magnitude,1),e=o*Math.sin(n);return t.x=e*Math.cos(r),t.y=e*Math.sin(r),t.z=o*Math.cos(n),t},U.fromElements=function(e,t,r,n){return F(n)?(n.x=e,n.y=t,n.z=r,n):new U(e,t,r)},U.fromCartesian4=U.clone=function(e,t){if(F(e))return F(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t):new U(e.x,e.y,e.z)},U.packedLength=3,U.pack=function(e,t,r){return r=C(r,0),t[r++]=e.x,t[r++]=e.y,t[r]=e.z,t},U.unpack=function(e,t,r){return t=C(t,0),(r=!F(r)?new U:r).x=e[t++],r.y=e[t++],r.z=e[t],r},U.packArray=function(e,t){var r=e.length,n=3*r;if(F(t)){if(!Array.isArray(t)&&t.length!==n)throw new i("If result is a typed array, it must have exactly array.length * 3 elements");t.length!==n&&(t.length=n)}else t=new Array(n);for(var o=0;o<r;++o)U.pack(e[o],t,3*o);return t},U.unpackArray=function(e,t){var r=e.length;F(t)?t.length=r/3:t=new Array(r/3);for(var n=0;n<r;n+=3){var o=n/3;t[o]=U.unpack(e,n,t[o])}return t},U.fromArray=U.unpack,U.maximumComponent=function(e){return Math.max(e.x,e.y,e.z)},U.minimumComponent=function(e){return Math.min(e.x,e.y,e.z)},U.minimumByComponent=function(e,t,r){return r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r.z=Math.min(e.z,t.z),r},U.maximumByComponent=function(e,t,r){return r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r.z=Math.max(e.z,t.z),r},U.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z},U.magnitude=function(e){return Math.sqrt(U.magnitudeSquared(e))};var s=new U;U.distance=function(e,t){return U.subtract(e,t,s),U.magnitude(s)},U.distanceSquared=function(e,t){return U.subtract(e,t,s),U.magnitudeSquared(s)},U.normalize=function(e,t){var r=U.magnitude(e);return 0!=r?(t.x=e.x/r,t.y=e.y/r,t.z=e.z/r):U.clone(e,t),Math.abs(t.x)<B.EPSILON8&&(t.x=0),Math.abs(t.y)<B.EPSILON8&&(t.y=0),Math.abs(t.z)<B.EPSILON8&&(t.z=0),t},U.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},U.multiplyComponents=function(e,t,r){return r.x=e.x*t.x,r.y=e.y*t.y,r.z=e.z*t.z,r},U.divideComponents=function(e,t,r){return r.x=e.x/t.x,r.y=e.y/t.y,r.z=e.z/t.z,r},U.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r},U.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r},U.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r},U.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r},U.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t},U.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t};var u=new U;U.lerp=function(e,t,r,n){return U.multiplyByScalar(t,r,u),n=U.multiplyByScalar(e,1-r,n),U.add(u,n,n)};var c=new U,l=new U;U.angleBetween=function(e,t){U.normalize(e,c),U.normalize(t,l);e=U.dot(c,l),t=U.magnitude(U.cross(c,l,c));return Math.atan2(t,e)};var f=new U;U.mostOrthogonalAxis=function(e,t){e=U.normalize(e,f);return U.abs(e,e),t=e.x<=e.y?e.x<=e.z?U.clone(U.UNIT_X,t):U.clone(U.UNIT_Z,t):e.y<=e.z?U.clone(U.UNIT_Y,t):U.clone(U.UNIT_Z,t)},U.projectVector=function(e,t,r){e=U.dot(e,t)/U.dot(t,t);return U.multiplyByScalar(t,e,r)},U.equals=function(e,t){return e===t||F(e)&&F(t)&&Math.abs(e.x-t.x)<1e-10&&Math.abs(e.y-t.y)<1e-10&&Math.abs(e.z-t.z)<1e-10},U.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]&&e.z===t[r+2]},U.equalsEpsilon=function(e,t,r,n){return e===t||F(e)&&F(t)&&B.equalsEpsilon(e.x,t.x,r,n)&&B.equalsEpsilon(e.y,t.y,r,n)&&B.equalsEpsilon(e.z,t.z,r,n)},U.cross=function(e,t,r){var n=e.x,o=e.y,i=e.z,a=t.x,s=t.y,e=t.z,t=i*a-n*e,a=n*s-o*a;return r.x=o*e-i*s,r.y=t,r.z=a,r},U.midpoint=function(e,t,r){return r.x=.5*(e.x+t.x),r.y=.5*(e.y+t.y),r.z=.5*(e.z+t.z),r},U.fromDegrees=function(e,t,r,n,o){return e=B.toRadians(e),t=B.toRadians(t),U.fromRadians(e,t,r,n,o)};var h=new U,p=new U,m=new U(40680631590769,40680631590769,40408299984661.445);U.fromRadians=function(e,t,r,n,o){r=C(r,0);var i=F(n)?n.radiiSquared:m,n=Math.cos(t);h.x=n*Math.cos(e),h.y=n*Math.sin(e),h.z=Math.sin(t),h=U.normalize(h,h),U.multiplyComponents(i,h,p);i=Math.sqrt(U.dot(h,p));return p=U.divideByScalar(p,i,p),h=U.multiplyByScalar(h,r,h),F(o)||(o=new U),U.add(p,h,o)},U.fromDegreesArray=function(e,t,r){var n=e.length;F(r)?r.length=n/2:r=new Array(n/2);for(var o=0;o<n;o+=2){var i=e[o],a=e[o+1],s=o/2;r[s]=U.fromDegrees(i,a,0,t,r[s])}return r},U.fromRadiansArray=function(e,t,r){var n=e.length;F(r)?r.length=n/2:r=new Array(n/2);for(var o=0;o<n;o+=2){var i=e[o],a=e[o+1],s=o/2;r[s]=U.fromRadians(i,a,0,t,r[s])}return r},U.fromDegreesArrayHeights=function(e,t,r){var n=e.length;F(r)?r.length=n/3:r=new Array(n/3);for(var o=0;o<n;o+=3){var i=e[o],a=e[o+1],s=e[o+2],u=o/3;r[u]=U.fromDegrees(i,a,s,t,r[u])}return r},U.fromRadiansArrayHeights=function(e,t,r){var n=e.length;F(r)?r.length=n/3:r=new Array(n/3);for(var o=0;o<n;o+=3){var i=e[o],a=e[o+1],s=e[o+2],u=o/3;r[u]=U.fromRadians(i,a,s,t,r[u])}return r},U.ZERO=Object.freeze(new U(0,0,0)),U.UNIT_X=Object.freeze(new U(1,0,0)),U.UNIT_Y=Object.freeze(new U(0,1,0)),U.UNIT_Z=Object.freeze(new U(0,0,1)),U.prototype.clone=function(e){return U.clone(this,e)},U.prototype.equals=function(e){return U.equals(this,e)},U.prototype.equalsEpsilon=function(e,t,r){return U.equalsEpsilon(this,e,t,r)},U.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},U.prototype.applyMatrix4=function(e,t,r){F(r)||(r=new U);var n=e.x,o=e.y,i=e.z,e=1/(t[3]*n+t[7]*o+t[11]*i+t[15]);return r.x=(t[0]*n+t[4]*o+t[8]*i+t[12])*e,r.y=(t[1]*n+t[5]*o+t[9]*i+t[13])*e,r.z=(t[2]*n+t[6]*o+t[10]*i+t[14])*e,r},U.prototype.set=function(e,t,r){this.x=e,this.y=t,this.z=r},U.prototype.fromArray=function(e,t){return this.x=e[t=void 0===t?0:t],this.y=e[t+1],this.z=e[t+2],this},U.prototype.toArray=function(e,t){return(e=void 0===e?[]:e)[t=void 0===t?0:t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e};var v=new U,I=new U;function d(e,t,r,n,o){var i=e.x,a=e.y,s=e.z,u=t.x,c=t.y,t=t.z,l=i*i*u*u,f=a*a*c*c,h=s*s*t*t,u=l+f+h,c=Math.sqrt(1/u),t=U.multiplyByScalar(e,c,v);if(u<n)return isFinite(c)?U.clone(t,o):void 0;var p=r.x,m=r.y,d=r.z,r=I;r.x=t.x*p*2,r.y=t.y*m*2,r.z=t.z*d*2;var E=(1-c)*U.magnitude(e)/(.5*U.magnitude(r)),y=0;do{var _,g,T,A,R,S,O,y=(O=l*(A=(_=1/(1+(E-=y)*p))*_)+f*(R=(g=1/(1+E*m))*g)+h*(S=(T=1/(1+E*d))*T)-1)/(-2*(l*(A*_)*p+f*(R*g)*m+h*(S*T)*d))}while(Math.abs(O)>B.EPSILON12);return F(o)?(o.x=i*_,o.y=a*g,o.z=s*T,o):new U(i*_,a*g,s*T)}function S(e,t,r){this.longitude=C(e,0),this.latitude=C(t,0),this.height=C(r,0)}S.fromRadians=function(e,t,r,n){return r=C(r,0),F(n)?(n.longitude=e,n.latitude=t,n.height=r,n):new S(e,t,r)},S.fromDegrees=function(e,t,r,n){return e=B.toRadians(e),t=B.toRadians(t),S.fromRadians(e,t,r,n)};var E=new U,y=new U,_=new U,g=new U(1/6378137,1/6378137,1/6356752.314245179),T=new U(1/40680631590769,1/40680631590769,1/40408299984661.445),A=B.EPSILON1;function R(e,t,r,n){t=C(t,0),r=C(r,0),n=C(n,0),e._radii=new U(t,r,n),e._radiiSquared=new U(t*t,r*r,n*n),e._radiiToTheFourth=new U(t*t*t*t,r*r*r*r,n*n*n*n),e._oneOverRadii=new U(0===t?0:1/t,0===r?0:1/r,0===n?0:1/n),e._oneOverRadiiSquared=new U(0===t?0:1/(t*t),0===r?0:1/(r*r),0===n?0:1/(n*n)),e._minimumRadius=Math.min(t,r,n),e._maximumRadius=Math.max(t,r,n),e._centerToleranceSquared=B.EPSILON1,0!==e._radiiSquared.z&&(e._squaredXOverSquaredZ=e._radiiSquared.x/e._radiiSquared.z)}function O(e,t,r){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,R(this,e,t,r)}S.fromCartesian=function(e,t,r){var n=F(t)?t.oneOverRadii:g,o=F(t)?t.oneOverRadiiSquared:T,n=d(e,n,o,F(t)?t._centerToleranceSquared:A,y);if(F(n)){t=U.multiplyComponents(n,o,E),t=U.normalize(t,t),o=U.subtract(e,n,_),n=Math.atan2(t.y,t.x),t=Math.asin(t.z),o=B.sign(U.dot(o,e))*U.magnitude(o);return F(r)?(r.longitude=n,r.latitude=t,r.height=o,r):new S(n,t,o)}},S.toCartesian=function(e,t,r){return U.fromRadians(e.longitude,e.latitude,e.height,t,r)},S.clone=function(e,t){if(F(e))return F(t)?(t.longitude=e.longitude,t.latitude=e.latitude,t.height=e.height,t):new S(e.longitude,e.latitude,e.height)},S.equals=function(e,t){return e===t||F(e)&&F(t)&&e.longitude===t.longitude&&e.latitude===t.latitude&&e.height===t.height},S.equalsEpsilon=function(e,t,r){return r=C(r,0),e===t||F(e)&&F(t)&&Math.abs(e.longitude-t.longitude)<=r&&Math.abs(e.latitude-t.latitude)<=r&&Math.abs(e.height-t.height)<=r},S.ZERO=Object.freeze(new S(0,0,0)),S.prototype.clone=function(e){return S.clone(this,e)},S.prototype.equals=function(e){return S.equals(this,e)},S.prototype.equalsEpsilon=function(e,t){return S.equalsEpsilon(this,e,t)},S.prototype.toString=function(){return"("+this.longitude+", "+this.latitude+", "+this.height+")"},S.geodeticParallelLength=function(e,t,r){return e*r*Math.cos(t)},S.geodeticCircleRadians=function(e,t,r,n){n=Math.cos(t)*Math.cos(n)*Math.cos(e-r)+Math.sin(t)*Math.sin(n);return Math.abs(Math.acos(n))},S.add=function(e,t,r){return r.longitude=e.longitude+t.longitude,r.latitude=e.latitude+t.latitude,r.height=e.height+t.height,r},S.subtract=function(e,t,r){return r.longitude=e.longitude-t.longitude,r.latitude=e.latitude-t.latitude,r.height=e.height-t.height,r},S.multiplyByScalar=function(e,t,r){return r.longitude=e.longitude*t,r.latitude=e.latitude*t,r.height=e.height*t,r},S.divideByScalar=function(e,t,r){return r.longitude=e.longitude/t,r.latitude=e.latitude/t,r.height=e.height/t,r},S.distance=function(e,t){e=new Cartesian2(e.longitude,e.latitude),t=new Cartesian2(t.longitude,t.latitude);return Cartesian2.distance(e,t)},Object.defineProperties(O.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),O.clone=function(e,t){if(F(e)){var r=e._radii;return F(t)?(U.clone(r,t._radii),U.clone(e._radiiSquared,t._radiiSquared),U.clone(e._radiiToTheFourth,t._radiiToTheFourth),U.clone(e._oneOverRadii,t._oneOverRadii),U.clone(e._oneOverRadiiSquared,t._oneOverRadiiSquared),t._minimumRadius=e._minimumRadius,t._maximumRadius=e._maximumRadius,t._centerToleranceSquared=e._centerToleranceSquared,t):new O(r.x,r.y,r.z)}},O.fromCartesian3=function(e,t){return F(t)||(t=new O),F(e)&&R(t,e.x,e.y,e.z),t},O.WGS84=Object.freeze(new O(6378137,6378137,6356752.314245179)),O.UNIT_SPHERE=Object.freeze(new O(1,1,1)),O.MOON=Object.freeze(new O(B.LUNAR_RADIUS,B.LUNAR_RADIUS,B.LUNAR_RADIUS)),O.DATUM_PLANE=-100,O.prototype.clone=function(e){return O.clone(this,e)},O.packedLength=U.packedLength,O.pack=function(e,t,r){return r=C(r,0),U.pack(e._radii,t,r),t},O.unpack=function(e,t,r){t=C(t,0);t=U.unpack(e,t);return O.fromCartesian3(t,r)},O.prototype.geocentricSurfaceNormal=U.normalize,O.prototype.geodeticSurfaceNormalCartographic=function(e,t){var r=e.longitude,n=e.latitude,o=Math.cos(n),e=o*Math.cos(r),r=o*Math.sin(r),n=Math.sin(n);return(t=!F(t)?new U:t).x=e,t.y=r,t.z=n,U.normalize(t,t)},O.prototype.geodeticSurfaceNormal=function(e,t){if(!U.equalsEpsilon(e,U.ZERO,B.EPSILON14))return F(t)||(t=new U),t=U.multiplyComponents(e,this._oneOverRadiiSquared,t),U.normalize(t,t)};var N=new U,w=new U;O.prototype.cartographicToCartesian=function(e,t){var r=N,n=w;this.geodeticSurfaceNormalCartographic(e,r),U.multiplyComponents(this._radiiSquared,r,n);var o=Math.sqrt(U.dot(r,n));return U.divideByScalar(n,o,n),U.multiplyByScalar(r,e.height,r),F(t)||(t=new U),U.add(n,r,t)},O.prototype.cartographicArrayToCartesianArray=function(e,t){var r=e.length;F(t)?t.length=r:t=new Array(r);for(var n=0;n<r;n++)t[n]=this.cartographicToCartesian(e[n],t[n]);return t};var M=new U,b=new U,x=new U;O.prototype.cartesianToCartographic=function(e,t){var r=this.scaleToGeodeticSurface(e,b);if(F(r)){var n=this.geodeticSurfaceNormal(r,M),o=U.subtract(e,r,x),r=Math.atan2(n.y,n.x),n=Math.asin(n.z),o=B.sign(U.dot(o,e))*U.magnitude(o);return F(t)?(t.longitude=r,t.latitude=n,t.height=o,t):new S(r,n,o)}},O.prototype.cartesianArrayToCartographicArray=function(e,t){var r=e.length;F(t)?t.length=r:t=new Array(r);for(var n=0;n<r;++n)t[n]=this.cartesianToCartographic(e[n],t[n]);return t},O.prototype.scaleToGeodeticSurface=function(e,t){return d(e,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,t)},O.prototype.scaleToGeocentricSurface=function(e,t){F(t)||(t=new U);var r=e.x,n=e.y,o=e.z,i=this._oneOverRadiiSquared,i=1/Math.sqrt(r*r*i.x+n*n*i.y+o*o*i.z);return U.multiplyByScalar(e,i,t)},O.prototype.transformPositionToScaledSpace=function(e,t){return F(t)||(t=new U),U.multiplyComponents(e,this._oneOverRadii,t)},O.prototype.transformPositionFromScaledSpace=function(e,t){return F(t)||(t=new U),U.multiplyComponents(e,this._radii,t)},O.prototype.equals=function(e){return this===e||F(e)&&U.equals(this._radii,e._radii)},O.prototype.toString=function(){return this._radii.toString()},O.prototype.getSurfaceNormalIntersectionWithZAxis=function(e,t,r){t=C(t,0);var n=this._squaredXOverSquaredZ;if((r=!F(r)?new U:r).x=0,r.y=0,r.z=e.z*(1-n),!(Math.abs(r.z)>=this._radii.z-t))return r};var P=[.14887433898163,.43339539412925,.67940956829902,.86506336668898,.97390652851717,0],D=[.29552422471475,.26926671930999,.21908636251598,.14945134915058,.066671344308684,0];function L(e,t,r){for(var n=.5*(t+e),o=.5*(t-e),i=0,a=0;a<5;a++){var s=o*P[a];i+=D[a]*(r(n+s)+r(n-s))}return i*=o}function z(e){this._ellipsoid=C(e,O.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}O.prototype.surfaceArea=function(e){for(var t=e.west,o=e.east,r=e.south,n=e.north;o<t;)o+=B.TWO_PI;var e=this._radiiSquared,i=e.x,a=e.y,s=e.z,u=i*a;return L(r,n,function(e){var r=Math.cos(e),n=Math.sin(e);return Math.cos(e)*L(t,o,function(e){var t=Math.cos(e),e=Math.sin(e);return Math.sqrt(u*n*n+s*(a*t*t+i*e*e)*r*r)})})},Object.defineProperties(z.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),z.prototype.project=function(e,t){this._semimajorAxis;var r=e.longitude,n=e.latitude,e=e.height;return F(t)?(t.x=r,t.y=n,t.z=e,t):new U(r,n,e)},z.prototype.unproject=function(e,t){this._oneOverSemimajorAxis;var r=e.x,n=e.y,e=e.z;return F(t)?(t.longitude=r,t.latitude=n,t.height=e,t):new S(r,n,e)};var q=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});function G(e,t){this.start=C(e,0),this.stop=C(t,0)}function j(e,t,r,n,o,i,a,s,u){this[0]=C(e,0),this[1]=C(n,0),this[2]=C(a,0),this[3]=C(t,0),this[4]=C(o,0),this[5]=C(s,0),this[6]=C(r,0),this[7]=C(i,0),this[8]=C(u,0)}j.packedLength=9,j.pack=function(e,t,r){return r=C(r,0),t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t[r++]=e[4],t[r++]=e[5],t[r++]=e[6],t[r++]=e[7],t[r++]=e[8],t},j.unpack=function(e,t,r){return t=C(t,0),(r=!F(r)?new j:r)[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r[4]=e[t++],r[5]=e[t++],r[6]=e[t++],r[7]=e[t++],r[8]=e[t++],r},j.clone=function(e,t){if(F(e))return F(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):new j(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])},j.fromArray=function(e,t,r){return t=C(t,0),(r=!F(r)?new j:r)[0]=e[t],r[1]=e[t+1],r[2]=e[t+2],r[3]=e[t+3],r[4]=e[t+4],r[5]=e[t+5],r[6]=e[t+6],r[7]=e[t+7],r[8]=e[t+8],r},j.fromColumnMajorArray=function(e,t){return j.clone(e,t)},j.fromRowMajorArray=function(e,t){return F(t)?(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t):new j(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},j.fromQuaternion=function(e,t){var r=e.x*e.x,n=e.x*e.y,o=e.x*e.z,i=e.x*e.w,a=e.y*e.y,s=e.y*e.z,u=e.y*e.w,c=e.z*e.z,l=e.z*e.w,f=e.w*e.w,h=r-a-c+f,p=2*(n-l),m=2*(o+u),e=2*(n+l),n=a-r-c+f,l=2*(s-i),u=2*(o-u),i=2*(s+i),f=-r-a+c+f;return F(t)?(t[0]=h,t[1]=e,t[2]=u,t[3]=p,t[4]=n,t[5]=i,t[6]=m,t[7]=l,t[8]=f,t):new j(h,p,m,e,n,l,u,i,f)},j.fromHeadingPitchRoll=function(e,t){var r=Math.cos(-e.pitch),n=Math.cos(-e.heading),o=Math.cos(e.roll),i=Math.sin(-e.pitch),a=Math.sin(-e.heading),s=Math.sin(e.roll),u=r*n,c=-o*a+s*i*n,l=s*a+o*i*n,f=r*a,e=o*n+s*i*a,a=-s*n+o*i*a,i=-i,s=s*r,r=o*r;return F(t)?(t[0]=u,t[1]=f,t[2]=i,t[3]=c,t[4]=e,t[5]=s,t[6]=l,t[7]=a,t[8]=r,t):new j(u,c,l,f,e,a,i,s,r)},j.fromScale=function(e,t){return F(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=e.y,t[5]=0,t[6]=0,t[7]=0,t[8]=e.z,t):new j(e.x,0,0,0,e.y,0,0,0,e.z)},j.fromUniformScale=function(e,t){return F(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=e,t):new j(e,0,0,0,e,0,0,0,e)},j.fromCrossProduct=function(e,t){return F(t)?(t[0]=0,t[1]=e.z,t[2]=-e.y,t[3]=-e.z,t[4]=0,t[5]=e.x,t[6]=e.y,t[7]=-e.x,t[8]=0,t):new j(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0)},j.fromRotationX=function(e,t){var r=Math.cos(e),e=Math.sin(e);return F(t)?(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=r,t[5]=e,t[6]=0,t[7]=-e,t[8]=r,t):new j(1,0,0,0,r,-e,0,e,r)},j.fromRotationY=function(e,t){var r=Math.cos(e),e=Math.sin(e);return F(t)?(t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=1,t[5]=0,t[6]=e,t[7]=0,t[8]=r,t):new j(r,0,e,0,1,0,-e,0,r)},j.fromRotationZ=function(e,t){var r=Math.cos(e),e=Math.sin(e);return F(t)?(t[0]=r,t[1]=e,t[2]=0,t[3]=-e,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new j(r,-e,0,e,r,0,0,0,1)},j.toArray=function(e,t){return F(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},j.getElementIndex=function(e,t){return 3*e+t},j.getColumn=function(e,t,r){var n=3*t,o=e[n],t=e[1+n],n=e[2+n];return r.x=o,r.y=t,r.z=n,r},j.setColumn=function(e,t,r,n){t*=3;return(n=j.clone(e,n))[t]=r.x,n[1+t]=r.y,n[2+t]=r.z,n},j.getRow=function(e,t,r){var n=e[t],o=e[t+3],t=e[t+6];return r.x=n,r.y=o,r.z=t,r},j.setRow=function(e,t,r,n){return(n=j.clone(e,n))[t]=r.x,n[t+3]=r.y,n[t+6]=r.z,n};var H=new U;j.getScale=function(e,t){return t.x=U.magnitude(U.fromElements(e[0],e[1],e[2],H)),t.y=U.magnitude(U.fromElements(e[3],e[4],e[5],H)),t.z=U.magnitude(U.fromElements(e[6],e[7],e[8],H)),t};var V=new U;j.getMaximumScale=function(e){return j.getScale(e,V),U.maximumComponent(V)},j.multiply=function(e,t,r){var n=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],o=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],i=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],a=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],s=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],u=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],c=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],l=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],t=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return r[0]=n,r[1]=o,r[2]=i,r[3]=a,r[4]=s,r[5]=u,r[6]=c,r[7]=l,r[8]=t,r},j.add=function(e,t,r){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r},j.subtract=function(e,t,r){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r},j.multiplyByVector=function(e,t,r){var n=t.x,o=t.y,i=t.z,a=e[0]*n+e[3]*o+e[6]*i,t=e[1]*n+e[4]*o+e[7]*i,i=e[2]*n+e[5]*o+e[8]*i;return r.x=a,r.y=t,r.z=i,r},j.multiplyByScalar=function(e,t,r){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r},j.multiplyByScale=function(e,t,r){return r[0]=e[0]*t.x,r[1]=e[1]*t.x,r[2]=e[2]*t.x,r[3]=e[3]*t.y,r[4]=e[4]*t.y,r[5]=e[5]*t.y,r[6]=e[6]*t.z,r[7]=e[7]*t.z,r[8]=e[8]*t.z,r},j.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t},j.transpose=function(e,t){var r=e[0],n=e[3],o=e[6],i=e[1],a=e[4],s=e[7],u=e[2],c=e[5],e=e[8];return t[0]=r,t[1]=n,t[2]=o,t[3]=i,t[4]=a,t[5]=s,t[6]=u,t[7]=c,t[8]=e,t};var W=new U(1,1,1);j.getRotation=function(e,t){var r=U.divideComponents(W,j.getScale(e,V),V);return t=j.multiplyByScale(e,r,t)};var Y=[1,0,0],X=[2,2,1];var k=new j,K=new j;function Z(e){var t;this.name="RuntimeError",this.message=e;try{throw new Error}catch(e){t=e.stack}this.stack=t}function J(e,t,r,n){this.x=C(e,0),this.y=C(t,0),this.z=C(r,0),this.w=C(n,0)}j.computeEigenDecomposition=function(e,t){for(var r=B.EPSILON20,n=0,o=0,i=(t=!F(t)?{}:t).unitary=j.clone(j.IDENTITY,t.unitary),a=t.diagonal=j.clone(e,t.diagonal),s=r*function(e){for(var t=0,r=0;r<9;++r){var n=e[r];t+=n*n}return Math.sqrt(t)}(a);o<10&&function(e){for(var t=0,r=0;r<3;++r){var n=e[j.getElementIndex(X[r],Y[r])];t+=2*n*n}return Math.sqrt(t)}(a)>s;)!function(e,t){for(var r=B.EPSILON15,n=0,o=1,i=0;i<3;++i){var a=Math.abs(e[j.getElementIndex(X[i],Y[i])]);n<a&&(o=i,n=a)}var s=1,u=0,c=Y[o],l=X[o];Math.abs(e[j.getElementIndex(l,c)])>r&&(u=(r=(r=(e[j.getElementIndex(l,l)]-e[j.getElementIndex(c,c)])/2/e[j.getElementIndex(l,c)])<0?-1/(-r+Math.sqrt(1+r*r)):1/(r+Math.sqrt(1+r*r)))*(s=1/Math.sqrt(1+r*r))),(t=j.clone(j.IDENTITY,t))[j.getElementIndex(c,c)]=t[j.getElementIndex(l,l)]=s,t[j.getElementIndex(l,c)]=u,t[j.getElementIndex(c,l)]=-u}(a,k),j.transpose(k,K),j.multiply(a,k,a),j.multiply(K,a,a),j.multiply(i,k,i),2<++n&&(++o,n=0);return t},j.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t},j.determinant=function(e){var t=e[0],r=e[3],n=e[6],o=e[1],i=e[4],a=e[7],s=e[2],u=e[5],e=e[8];return t*(i*e-u*a)+o*(u*n-r*e)+s*(r*a-i*n)},j.inverse=function(e,t){var r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],e=j.determinant(e);return t[0]=a*l-c*s,t[1]=c*o-n*l,t[2]=n*s-a*o,t[3]=u*s-i*l,t[4]=r*l-u*o,t[5]=i*o-r*s,t[6]=i*c-u*a,t[7]=u*n-r*c,t[8]=r*a-i*n,j.multiplyByScalar(t,1/e,t)},j.equals=function(e,t){return e===t||F(e)&&F(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},j.equalsEpsilon=function(e,t,r){return r=C(r,0),e===t||F(e)&&F(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r},j.IDENTITY=Object.freeze(new j(1,0,0,0,1,0,0,0,1)),j.ZERO=Object.freeze(new j(0,0,0,0,0,0,0,0,0)),j.COLUMN0ROW0=0,j.COLUMN0ROW1=1,j.COLUMN0ROW2=2,j.COLUMN1ROW0=3,j.COLUMN1ROW1=4,j.COLUMN1ROW2=5,j.COLUMN2ROW0=6,j.COLUMN2ROW1=7,j.COLUMN2ROW2=8,Object.defineProperties(j.prototype,{length:{get:function(){return j.packedLength}}}),j.prototype.clone=function(e){return j.clone(this,e)},j.prototype.equals=function(e){return j.equals(this,e)},j.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]},j.prototype.equalsEpsilon=function(e,t){return j.equalsEpsilon(this,e,t)},j.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+")\n("+this[1]+", "+this[4]+", "+this[7]+")\n("+this[2]+", "+this[5]+", "+this[8]+")"},F(Object.create)&&((Z.prototype=Object.create(Error.prototype)).constructor=Z),Z.prototype.toString=function(){var e=this.name+": "+this.message;return F(this.stack)&&(e+="\n"+this.stack.toString()),e},J.fromElements=function(e,t,r,n,o){return F(o)?(o.x=e,o.y=t,o.z=r,o.w=n,o):new J(e,t,r,n)},J.fromColor=function(e,t){return F(t)?(t.x=e.red,t.y=e.green,t.z=e.blue,t.w=e.alpha,t):new J(e.red,e.green,e.blue,e.alpha)},J.clone=function(e,t){if(F(e))return F(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new J(e.x,e.y,e.z,e.w)},J.packedLength=4,J.pack=function(e,t,r){return r=C(r,0),t[r++]=e.x,t[r++]=e.y,t[r++]=e.z,t[r]=e.w,t},J.unpack=function(e,t,r){return t=C(t,0),(r=!F(r)?new J:r).x=e[t++],r.y=e[t++],r.z=e[t++],r.w=e[t],r},J.packArray=function(e,t){var r=e.length,n=4*r;if(F(t)){if(!Array.isArray(t)&&t.length!==n)throw new i("If result is a typed array, it must have exactly array.length * 4 elements");t.length!==n&&(t.length=n)}else t=new Array(n);for(var o=0;o<r;++o)J.pack(e[o],t,4*o);return t},J.unpackArray=function(e,t){var r=e.length;F(t)?t.length=r/4:t=new Array(r/4);for(var n=0;n<r;n+=4){var o=n/4;t[o]=J.unpack(e,n,t[o])}return t},J.fromArray=J.unpack,J.maximumComponent=function(e){return Math.max(e.x,e.y,e.z,e.w)},J.minimumComponent=function(e){return Math.min(e.x,e.y,e.z,e.w)},J.minimumByComponent=function(e,t,r){return r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r.z=Math.min(e.z,t.z),r.w=Math.min(e.w,t.w),r},J.maximumByComponent=function(e,t,r){return r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r.z=Math.max(e.z,t.z),r.w=Math.max(e.w,t.w),r},J.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},J.magnitude=function(e){return Math.sqrt(J.magnitudeSquared(e))};var Q=new J;J.distance=function(e,t){return J.subtract(e,t,Q),J.magnitude(Q)},J.distanceSquared=function(e,t){return J.subtract(e,t,Q),J.magnitudeSquared(Q)},J.normalize=function(e,t){var r=J.magnitude(e);return 0!=r?(t.x=e.x/r,t.y=e.y/r,t.z=e.z/r,t.w=e.w/r):J.clone(e,t),Math.abs(t.x)<B.EPSILON8&&(t.x=0),Math.abs(t.y)<B.EPSILON8&&(t.y=0),Math.abs(t.z)<B.EPSILON8&&(t.z=0),Math.abs(t.w)<B.EPSILON8&&(t.w=0),t},J.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},J.multiplyComponents=function(e,t,r){return r.x=e.x*t.x,r.y=e.y*t.y,r.z=e.z*t.z,r.w=e.w*t.w,r},J.divideComponents=function(e,t,r){return r.x=e.x/t.x,r.y=e.y/t.y,r.z=e.z/t.z,r.w=e.w/t.w,r},J.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r},J.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},J.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},J.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},J.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},J.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t.w=Math.abs(e.w),t};var $=new J;J.lerp=function(e,t,r,n){return J.multiplyByScalar(t,r,$),n=J.multiplyByScalar(e,1-r,n),J.add($,n,n)};var ee=new J;J.mostOrthogonalAxis=function(e,t){e=J.normalize(e,ee);return J.abs(e,e),t=e.x<=e.y?e.x<=e.z?e.x<=e.w?J.clone(J.UNIT_X,t):J.clone(J.UNIT_W,t):e.z<=e.w?J.clone(J.UNIT_Z,t):J.clone(J.UNIT_W,t):e.y<=e.z?e.y<=e.w?J.clone(J.UNIT_Y,t):J.clone(J.UNIT_W,t):e.z<=e.w?J.clone(J.UNIT_Z,t):J.clone(J.UNIT_W,t)},J.equals=function(e,t){return e===t||F(e)&&F(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},J.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]&&e.z===t[r+2]&&e.w===t[r+3]},J.equalsEpsilon=function(e,t,r,n){return e===t||F(e)&&F(t)&&B.equalsEpsilon(e.x,t.x,r,n)&&B.equalsEpsilon(e.y,t.y,r,n)&&B.equalsEpsilon(e.z,t.z,r,n)&&B.equalsEpsilon(e.w,t.w,r,n)},J.ZERO=Object.freeze(new J(0,0,0,0)),J.UNIT_X=Object.freeze(new J(1,0,0,0)),J.UNIT_Y=Object.freeze(new J(0,1,0,0)),J.UNIT_Z=Object.freeze(new J(0,0,1,0)),J.UNIT_W=Object.freeze(new J(0,0,0,1)),J.WHITE=Object.freeze(new J(1,1,1,1)),J.prototype.clone=function(e){return J.clone(this,e)},J.prototype.equals=function(e){return J.equals(this,e)},J.prototype.equalsEpsilon=function(e,t,r){return J.equalsEpsilon(this,e,t,r)},J.prototype.toString=function(e){if(F(e)&&16==e){var t=parseInt(255*this.x).toString(16),r=parseInt(255*this.y).toString(16),e=parseInt(255*this.z).toString(16);return"00".substring(0,2-t.length)+t+"00".substring(0,2-r.length)+r+"00".substring(0,2-e.length)+e}return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var te=new Float32Array(1);function re(e,t,r,n,o,i,a,s,u,c,l,f,h,p,m,d){this[0]=C(e,0),this[1]=C(o,0),this[2]=C(u,0),this[3]=C(h,0),this[4]=C(t,0),this[5]=C(i,0),this[6]=C(c,0),this[7]=C(p,0),this[8]=C(r,0),this[9]=C(a,0),this[10]=C(l,0),this[11]=C(m,0),this[12]=C(n,0),this[13]=C(s,0),this[14]=C(f,0),this[15]=C(d,0)}J.packFloat=function(e,t){if(F(t)||(t=new J),te[0]=e,0===(e=te[0]))return J.clone(J.ZERO,t);var r,n=e<0?1:0;isFinite(e)?(e=Math.abs(e),r=Math.floor(B.logBase(e,10))+1,e/=Math.pow(10,r)):(e=.1,r=38);e*=256;return t.x=Math.floor(e),e=256*(e-t.x),t.y=Math.floor(e),e=256*(e-t.y),t.z=Math.floor(e),t.w=2*(r+38)+n,t},J.unpackFloat=function(e){var t=e.w/2,r=Math.floor(t),n=-(n=2*(n=2*(t-r))-1);if(38<=(r-=38))return n<0?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY;t=n*e.x*(1/256);return t+=n*e.y*(1/65536),(t+=n*e.z*(1/16777216))*Math.pow(10,r)},re.packedLength=16,re.pack=function(e,t,r){return r=C(r,0),t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t[r++]=e[4],t[r++]=e[5],t[r++]=e[6],t[r++]=e[7],t[r++]=e[8],t[r++]=e[9],t[r++]=e[10],t[r++]=e[11],t[r++]=e[12],t[r++]=e[13],t[r++]=e[14],t[r]=e[15],t},re.unpack=function(e,t,r){return t=C(t,0),(r=!F(r)?new re:r)[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r[4]=e[t++],r[5]=e[t++],r[6]=e[t++],r[7]=e[t++],r[8]=e[t++],r[9]=e[t++],r[10]=e[t++],r[11]=e[t++],r[12]=e[t++],r[13]=e[t++],r[14]=e[t++],r[15]=e[t],r},re.clone=function(e,t){if(F(e))return F(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):new re(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},re.fromArray=re.unpack,re.fromColumnMajorArray=function(e,t){return re.clone(e,t)},re.fromRowMajorArray=function(e,t){return F(t)?(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t):new re(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},re.fromRotationTranslation=function(e,t,r){return t=C(t,U.ZERO),F(r)?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=0,r[4]=e[3],r[5]=e[4],r[6]=e[5],r[7]=0,r[8]=e[6],r[9]=e[7],r[10]=e[8],r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,r):new re(e[0],e[3],e[6],t.x,e[1],e[4],e[7],t.y,e[2],e[5],e[8],t.z,0,0,0,1)},re.fromTranslationQuaternionRotationScale=function(e,t,r,n){F(n)||(n=new re);var o=r.x,i=r.y,a=r.z,s=t.x*t.x,u=t.x*t.y,c=t.x*t.z,l=t.x*t.w,f=t.y*t.y,h=t.y*t.z,p=t.y*t.w,m=t.z*t.z,d=t.z*t.w,E=t.w*t.w,y=2*(u-d),r=2*(c+p),t=2*(u+d),u=f-s-m+E,d=2*(h-l),p=2*(c-p),h=2*(h+l),l=-s-f+m+E;return n[0]=(s-f-m+E)*o,n[1]=t*o,n[2]=p*o,n[3]=0,n[4]=y*i,n[5]=u*i,n[6]=h*i,n[7]=0,n[8]=r*a,n[9]=d*a,n[10]=l*a,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,n},re.fromTranslationRotationScale=function(e,t){return re.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t)},re.fromTranslation=function(e,t){return re.fromRotationTranslation(j.IDENTITY,e,t)},re.fromScale=function(e,t){return F(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e.y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e.z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new re(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},re.fromUniformScale=function(e,t){return F(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new re(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)};var ne=new U,oe=new U,ie=new U;re.fromObserver=function(e,t){var r=e.position,n=e.direction,o=e.up;U.normalize(n,ne),U.normalize(U.cross(ne,o,oe),oe),U.normalize(U.cross(oe,ne,ie),ie);var i=oe.x,a=oe.y,s=oe.z,u=ne.x,c=ne.y,l=ne.z,f=ie.x,h=ie.y,p=ie.z,m=r.x,e=r.y,n=r.z,o=i*-m+a*-e+s*-n,r=f*-m+h*-e+p*-n,n=u*m+c*e+l*n;return F(t)?(t[0]=i,t[1]=f,t[2]=-u,t[3]=0,t[4]=a,t[5]=h,t[6]=-c,t[7]=0,t[8]=s,t[9]=p,t[10]=-l,t[11]=0,t[12]=o,t[13]=r,t[14]=n,t[15]=1,t):new re(i,a,s,o,f,h,p,r,-u,-c,-l,n,0,0,0,1)},re.computePerspectiveFieldOfView=function(e,t,r,n,o){var i=1/Math.tan(.5*e),e=(n+r)/(r-n),n=2*n*r/(r-n);return o[0]=i/t,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=i,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=e,o[11]=-1,o[12]=0,o[13]=0,o[14]=n,o[15]=0,o},re.computeOrthographicOffCenter=function(e,t,r,n,o,i,a){var s=1/(t-e),u=1/(n-r),c=1/(i-o),e=-(t+e)*s,r=-(n+r)*u,o=-(i+o)*c;return u*=2,c*=-2,a[0]=s*=2,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=u,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=c,a[11]=0,a[12]=e,a[13]=r,a[14]=o,a[15]=1,a},re.computePerspectiveOffCenter=function(e,t,r,n,o,i,a){var s=2*o/(n-r),u=(t+e)/(t-e),n=(n+r)/(n-r),r=-(i+o)/(i-o),i=-2*i*o/(i-o);return a[0]=2*o/(t-e),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=s,a[6]=0,a[7]=0,a[8]=u,a[9]=n,a[10]=r,a[11]=-1,a[12]=0,a[13]=0,a[14]=i,a[15]=0,a},re.computeInfinitePerspectiveOffCenter=function(e,t,r,n,o,i){var a=2*o/(n-r),s=(t+e)/(t-e),n=(n+r)/(n-r),r=-2*o;return i[0]=2*o/(t-e),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=a,i[6]=0,i[7]=0,i[8]=s,i[9]=n,i[10]=-1,i[11]=-1,i[12]=0,i[13]=0,i[14]=r,i[15]=0,i},re.computeViewportTransformation=function(e,t,r,n){F(n)||(n=new re),e=C(e,C.EMPTY_OBJECT);var o=C(e.x,0),i=C(e.y,0),a=C(e.width,0),s=C(e.height,0);t=C(t,0);var u=.5*a,e=.5*s,a=.5*((r=C(r,1))-t),s=e,r=a,o=o+u,e=i+e,a=t+a;return n[0]=u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=r,n[11]=0,n[12]=o,n[13]=e,n[14]=a,n[15]=1,n},re.computeView=function(e,t,r,n,o){return o[0]=n.x,o[1]=r.x,o[2]=-t.x,o[3]=0,o[4]=n.y,o[5]=r.y,o[6]=-t.y,o[7]=0,o[8]=n.z,o[9]=r.z,o[10]=-t.z,o[11]=0,o[12]=-U.dot(n,e),o[13]=-U.dot(r,e),o[14]=U.dot(t,e),o[15]=1,o};var ae=new U,se=new U,ue=new U;re.computeViewByLookAt=function(e,t,r,n){var o=ae,i=se,a=ue;return U.subtract(e,t,o),U.normalize(o,o),U.cross(r,o,a),U.normalize(a,a),U.cross(o,a,i),U.normalize(i,i),re.computeView(e,o,i,a,n)},re.computeViewByLookAtEx=function(e,t,r,n){var o=ae,i=se,a=ue;return U.subtract(t,e,o),U.normalize(o,o),U.cross(r,o,a),U.normalize(a,a),U.cross(o,a,i),U.normalize(i,i),re.computeView(e,o,i,a,n)},re.toArray=function(e,t){return F(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},re.getElementIndex=function(e,t){return 4*e+t},re.getColumn=function(e,t,r){var n=4*t,o=e[n],i=e[1+n],t=e[2+n],n=e[3+n];return r.x=o,r.y=i,r.z=t,r.w=n,r},re.setColumn=function(e,t,r,n){t*=4;return(n=re.clone(e,n))[t]=r.x,n[1+t]=r.y,n[2+t]=r.z,n[3+t]=r.w,n},re.setTranslation=function(e,t,r){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=e[15],r};var ce=new U;re.setScale=function(e,t,r){var n=re.getScale(e,ce),n=U.divideComponents(t,n,ce);return re.multiplyByScale(e,n,r)},re.getRow=function(e,t,r){var n=e[t],o=e[t+4],i=e[t+8],t=e[t+12];return r.x=n,r.y=o,r.z=i,r.w=t,r},re.setRow=function(e,t,r,n){return(n=re.clone(e,n))[t]=r.x,n[t+4]=r.y,n[t+8]=r.z,n[t+12]=r.w,n};var le=new U;re.getScale=function(e,t){return t.x=U.magnitude(U.fromElements(e[0],e[1],e[2],le)),t.y=U.magnitude(U.fromElements(e[4],e[5],e[6],le)),t.z=U.magnitude(U.fromElements(e[8],e[9],e[10],le)),t};var fe=new U;re.getMaximumScale=function(e){return re.getScale(e,fe),U.maximumComponent(fe)},re.multiply=function(e,t,r){var n=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],m=e[11],d=e[12],E=e[13],y=e[14],_=e[15],g=t[0],T=t[1],A=t[2],R=t[3],S=t[4],O=t[5],v=t[6],I=t[7],N=t[8],w=t[9],C=t[10],M=t[11],b=t[12],x=t[13],P=t[14],D=t[15],L=o*g+u*T+h*A+E*R,F=i*g+c*T+p*A+y*R,U=a*g+l*T+m*A+_*R,z=n*S+s*O+f*v+d*I,e=o*S+u*O+h*v+E*I,t=i*S+c*O+p*v+y*I,S=a*S+l*O+m*v+_*I,O=n*N+s*w+f*C+d*M,v=o*N+u*w+h*C+E*M,I=i*N+c*w+p*C+y*M,C=a*N+l*w+m*C+_*M,M=n*b+s*x+f*P+d*D,E=o*b+u*x+h*P+E*D,y=i*b+c*x+p*P+y*D,D=a*b+l*x+m*P+_*D;return r[0]=n*g+s*T+f*A+d*R,r[1]=L,r[2]=F,r[3]=U,r[4]=z,r[5]=e,r[6]=t,r[7]=S,r[8]=O,r[9]=v,r[10]=I,r[11]=C,r[12]=M,r[13]=E,r[14]=y,r[15]=D,r},re.add=function(e,t,r){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r[9]=e[9]+t[9],r[10]=e[10]+t[10],r[11]=e[11]+t[11],r[12]=e[12]+t[12],r[13]=e[13]+t[13],r[14]=e[14]+t[14],r[15]=e[15]+t[15],r},re.subtract=function(e,t,r){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r[9]=e[9]-t[9],r[10]=e[10]-t[10],r[11]=e[11]-t[11],r[12]=e[12]-t[12],r[13]=e[13]-t[13],r[14]=e[14]-t[14],r[15]=e[15]-t[15],r},re.multiplyTransformation=function(e,t,r){var n=e[0],o=e[1],i=e[2],a=e[4],s=e[5],u=e[6],c=e[8],l=e[9],f=e[10],h=e[12],p=e[13],m=e[14],d=t[0],E=t[1],y=t[2],_=t[4],g=t[5],T=t[6],A=t[8],R=t[9],S=t[10],O=t[12],v=t[13],I=t[14],N=o*d+s*E+l*y,w=i*d+u*E+f*y,e=n*_+a*g+c*T,t=o*_+s*g+l*T,_=i*_+u*g+f*T,g=n*A+a*R+c*S,T=o*A+s*R+l*S,S=i*A+u*R+f*S,h=n*O+a*v+c*I+h,p=o*O+s*v+l*I+p,m=i*O+u*v+f*I+m;return r[0]=n*d+a*E+c*y,r[1]=N,r[2]=w,r[3]=0,r[4]=e,r[5]=t,r[6]=_,r[7]=0,r[8]=g,r[9]=T,r[10]=S,r[11]=0,r[12]=h,r[13]=p,r[14]=m,r[15]=1,r},re.multiplyByMatrix3=function(e,t,r){var n=e[0],o=e[1],i=e[2],a=e[4],s=e[5],u=e[6],c=e[8],l=e[9],f=e[10],h=t[0],p=t[1],m=t[2],d=t[3],E=t[4],y=t[5],_=t[6],g=t[7],T=t[8],A=o*h+s*p+l*m,R=i*h+u*p+f*m,S=n*d+a*E+c*y,t=o*d+s*E+l*y,E=i*d+u*E+f*y,y=n*_+a*g+c*T,l=o*_+s*g+l*T,T=i*_+u*g+f*T;return r[0]=n*h+a*p+c*m,r[1]=A,r[2]=R,r[3]=0,r[4]=S,r[5]=t,r[6]=E,r[7]=0,r[8]=y,r[9]=l,r[10]=T,r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},re.multiplyByTranslation=function(e,t,r){var n=t.x,o=t.y,i=t.z,a=n*e[0]+o*e[4]+i*e[8]+e[12],t=n*e[1]+o*e[5]+i*e[9]+e[13],i=n*e[2]+o*e[6]+i*e[10]+e[14];return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=a,r[13]=t,r[14]=i,r[15]=e[15],r};var he=new U;re.multiplyByUniformScale=function(e,t,r){return he.x=t,he.y=t,he.z=t,re.multiplyByScale(e,he,r)},re.multiplyByScale=function(e,t,r){var n=t.x,o=t.y,t=t.z;return 1===n&&1===o&&1===t?re.clone(e,r):(r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=0,r[4]=o*e[4],r[5]=o*e[5],r[6]=o*e[6],r[7]=0,r[8]=t*e[8],r[9]=t*e[9],r[10]=t*e[10],r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=1,r)},re.multiplyByVector=function(e,t,r){var n=t.x,o=t.y,i=t.z,a=F(t.w)?t.w:1,s=e[0]*n+e[4]*o+e[8]*i+e[12]*a,u=e[1]*n+e[5]*o+e[9]*i+e[13]*a,t=e[2]*n+e[6]*o+e[10]*i+e[14]*a,a=e[3]*n+e[7]*o+e[11]*i+e[15]*a;return r.x=s,r.y=u,r.z=t,F(r.w)&&(r.w=a),r},re.multiplyByPointAsVector=function(e,t,r){var n=t.x,o=t.y,i=t.z,a=e[0]*n+e[4]*o+e[8]*i,t=e[1]*n+e[5]*o+e[9]*i,i=e[2]*n+e[6]*o+e[10]*i;return r.x=a,r.y=t,r.z=i,r},re.multiplyByPoint=function(e,t,r){var n=t.x,o=t.y,i=t.z,a=e[0]*n+e[4]*o+e[8]*i+e[12],t=e[1]*n+e[5]*o+e[9]*i+e[13],e=e[2]*n+e[6]*o+e[10]*i+e[14];return r.x=a,r.y=t,r.z=e,r},re.multiplyByScalar=function(e,t,r){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12]*t,r[13]=e[13]*t,r[14]=e[14]*t,r[15]=e[15]*t,r},re.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},re.transpose=function(e,t){var r=e[1],n=e[2],o=e[3],i=e[6],a=e[7],s=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=i,t[10]=e[10],t[11]=e[14],t[12]=o,t[13]=a,t[14]=s,t[15]=e[15],t},re.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t[9]=Math.abs(e[9]),t[10]=Math.abs(e[10]),t[11]=Math.abs(e[11]),t[12]=Math.abs(e[12]),t[13]=Math.abs(e[13]),t[14]=Math.abs(e[14]),t[15]=Math.abs(e[15]),t},re.equals=function(e,t){return e===t||F(e)&&F(t)&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[3]===t[3]&&e[7]===t[7]&&e[11]===t[11]&&e[15]===t[15]},re.equalsEpsilon=function(e,t,r){return r=C(r,0),e===t||F(e)&&F(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r&&Math.abs(e[9]-t[9])<=r&&Math.abs(e[10]-t[10])<=r&&Math.abs(e[11]-t[11])<=r&&Math.abs(e[12]-t[12])<=r&&Math.abs(e[13]-t[13])<=r&&Math.abs(e[14]-t[14])<=r&&Math.abs(e[15]-t[15])<=r},re.getTranslation=function(e,t){return t.x=e[12],t.y=e[13],t.z=e[14],t},re.getMatrix3=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t};var pe=new j,me=new j,de=new J,Ee=new J(0,0,0,1);function ye(e,t,r,n,o,i){this.west=C(e,Math.PI),this.south=C(t,Math.PI/2),this.east=C(r,-Math.PI),this.north=C(n,-Math.PI/2),this.minHeight=C(o,0),this.maxHeight=C(i,0)}re.inverse=function(e,t){var r=e[0],n=e[4],o=e[8],i=e[12],a=e[1],s=e[5],u=e[9],c=e[13],l=e[2],f=e[6],h=e[10],p=e[14],m=e[3],d=e[7],E=e[11],y=e[15],_=h*y,g=p*E,T=f*y,A=p*d,R=f*E,S=h*d,O=l*y,v=p*m,I=l*E,N=h*m,w=l*d,C=f*m,M=_*s+A*u+R*c-(g*s+T*u+S*c),b=g*a+O*u+N*c-(_*a+v*u+I*c),x=T*a+v*s+w*c-(A*a+O*s+C*c),P=S*a+I*s+C*u-(R*a+N*s+w*u),D=g*n+T*o+S*i-(_*n+A*o+R*i),L=_*r+v*o+I*i-(g*r+O*o+N*i),F=A*r+O*n+C*i-(T*r+v*n+w*i),U=R*r+N*n+w*o-(S*r+I*n+C*o),z=(_=o*c)*d+(A=i*s)*E+(R=n*u)*y-((g=i*u)*d+(T=n*c)*E+(S=o*s)*y),u=g*m+(O=r*c)*E+(N=o*a)*y-(_*m+(v=i*a)*E+(I=r*u)*y),y=T*m+v*d+(w=r*s)*y-(A*m+O*d+(C=n*a)*y),d=S*m+I*d+C*E-(R*m+N*d+w*E),E=T*h+S*p+g*f-(R*p+_*f+A*h),g=I*p+_*l+v*h-(O*h+N*p+g*l),v=O*f+C*p+A*l-(w*p+T*l+v*f),l=w*h+R*l+N*f-(I*f+C*h+S*l),i=r*M+n*b+o*x+i*P;return Math.abs(i)<B.EPSILON21&&j.equalsEpsilon(re.getMatrix3(e,pe),me,B.EPSILON7)&&J.equals(re.getRow(e,3,de),Ee)?(t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=1):(t[0]=M*(i=1/i),t[1]=b*i,t[2]=x*i,t[3]=P*i,t[4]=D*i,t[5]=L*i,t[6]=F*i,t[7]=U*i,t[8]=z*i,t[9]=u*i,t[10]=y*i,t[11]=d*i,t[12]=E*i,t[13]=g*i,t[14]=v*i,t[15]=l*i),t},re.inverseTransformation=function(e,t){var r=e[0],n=e[1],o=e[2],i=e[4],a=e[5],s=e[6],u=e[8],c=e[9],l=e[10],f=e[12],h=e[13],p=e[14],m=-r*f-n*h-o*p,e=-i*f-a*h-s*p,p=-u*f-c*h-l*p;return t[0]=r,t[1]=i,t[2]=u,t[3]=0,t[4]=n,t[5]=a,t[6]=c,t[7]=0,t[8]=o,t[9]=s,t[10]=l,t[11]=0,t[12]=m,t[13]=e,t[14]=p,t[15]=1,t},re.IDENTITY=Object.freeze(new re(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),re.ZERO=Object.freeze(new re(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),re.TRANSYZ=Object.freeze(new re(1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1)),re.COLUMN0ROW0=0,re.COLUMN0ROW1=1,re.COLUMN0ROW2=2,re.COLUMN0ROW3=3,re.COLUMN1ROW0=4,re.COLUMN1ROW1=5,re.COLUMN1ROW2=6,re.COLUMN1ROW3=7,re.COLUMN2ROW0=8,re.COLUMN2ROW1=9,re.COLUMN2ROW2=10,re.COLUMN2ROW3=11,re.COLUMN3ROW0=12,re.COLUMN3ROW1=13,re.COLUMN3ROW2=14,re.COLUMN3ROW3=15,Object.defineProperties(re.prototype,{length:{get:function(){return re.packedLength}}}),re.prototype.clone=function(e){return re.clone(this,e)},re.prototype.equals=function(e){return re.equals(this,e)},re.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]&&e[9]===t[r+9]&&e[10]===t[r+10]&&e[11]===t[r+11]&&e[12]===t[r+12]&&e[13]===t[r+13]&&e[14]===t[r+14]&&e[15]===t[r+15]},re.prototype.equalsEpsilon=function(e,t){return re.equalsEpsilon(this,e,t)},re.prototype.toString=function(){return"("+this[0]+", "+this[4]+", "+this[8]+", "+this[12]+")\n("+this[1]+", "+this[5]+", "+this[9]+", "+this[13]+")\n("+this[2]+", "+this[6]+", "+this[10]+", "+this[14]+")\n("+this[3]+", "+this[7]+", "+this[11]+", "+this[15]+")"},re.from_tnbp=function(e,t,r,n,o){return F(o)?(o[0]=e.x,o[4]=t.x,o[8]=r.x,o[12]=n.x,o[1]=e.y,o[5]=t.y,o[9]=r.y,o[13]=n.y,o[2]=e.z,o[6]=t.z,o[10]=r.z,o[14]=n.z,o[3]=0,o[7]=0,o[11]=0,o[15]=1):o=new re(e.x,t.x,r.x,n.x,e.y,t.y,r.y,n.y,e.z,t.z,r.z,n.z,0,0,0,1),o},re.rotate_axis_rh=function(e,t,r){var n=re.clone(re.IDENTITY),o=U.distance(t,e),i=Math.cos(r),a=1-i,s=Math.sin(r),u=(t.x-e.x)/o,r=(t.y-e.y)/o,o=(t.z-e.z)/o;n[0]=u*u*a+i,n[1]=u*r*a-o*s,n[2]=u*o*a+r*s,n[4]=r*u*a+o*s,n[5]=r*r*a+i,n[6]=r*o*a-u*s,n[8]=o*u*a-r*s,n[9]=o*r*a+u*s,n[10]=o*o*a+i;i=re.translation(-e.x,-e.y,-e.z),e=re.translation(e.x,e.y,e.z);return re.multiply(e,re.multiply(n,i,new re),new re)},re.rotate_axis_lh=function(e,t,r){var n=re.clone(re.IDENTITY),o=U.distance(t,e),i=Math.cos(r),a=1-i,s=Math.sin(r),u=(t.x-e.x)/o,r=(t.y-e.y)/o,o=(t.z-e.z)/o;n[0]=u*u*a+i,n[1]=u*r*a+o*s,n[2]=u*o*a-r*s,n[4]=r*u*a-o*s,n[5]=r*r*a+i,n[6]=r*o*a+u*s,n[8]=o*u*a+r*s,n[9]=o*r*a-u*s,n[10]=o*o*a+i;i=re.translation(-e.x,-e.y,-e.z),e=re.translation(e.x,e.y,e.z);return re.multiply(i,re.multiply(n,e,new re),new re)},re.translation=function(e,t,r,n){n=re.clone(re.IDENTITY,n);return n[12]=e,n[13]=t,n[14]=r,n},re.scaling=function(e,t,r,n){n=re.clone(re.IDENTITY,n);return n[0]=e,n[5]=t,n[10]=r,n},re.rotate_y=function(e){var t=re.clone(re.IDENTITY);return t[0]=t[10]=Math.cos(e),t[2]=t[8]=Math.sin(e),t[2]=-t[2],t},re.perspective=function(e,t,r,n,o){var i=1/Math.tan(.5*e),e=n/(n-r),n=n*r/(r-n);return o[0]=i/t,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=i,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=e,o[11]=-1,o[12]=0,o[13]=0,o[14]=n,o[15]=0,o},re.prototype.makeRotationAxis=function(e,t,r){F(r)||(r=new re);var n=Math.cos(t),o=Math.sin(t),i=1-n,a=e.x,s=e.y,u=e.z,t=i*a,e=i*s;return r[0]=t*a+n,r[1]=t*s+o*u,r[2]=t*u-o*s,r[3]=0,r[4]=t*s-o*u,r[5]=e*s+n,r[6]=e*u+o*a,r[7]=0,r[8]=t*u+o*s,r[9]=e*u-o*a,r[10]=i*u*u+n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},re.transformNormal=function(e,t,r){F(r)||(r=new U);var n=new U;n.x=t[0]*e.x+t[4]*e.y+t[8]*e.z+t[12],n.y=t[1]*e.x+t[5]*e.y+t[9]*e.z+t[13],n.z=t[2]*e.x+t[6]*e.y+t[10]*e.z+t[14];t=t[3]*e.x+t[7]*e.y+t[11]*e.z+t[15];return n.x*=t=1/t,n.y*=t,n.z*=t,U.clone(n,r),r},re.rotate_normal=function(e,t,r){F(r)||(r=new U);var n=new U;return n.x=t[0]*e.x+t[4]*e.y+t[8]*e.z,n.y=t[1]*e.x+t[5]*e.y+t[9]*e.z,n.z=t[2]*e.x+t[6]*e.y+t[10]*e.z,U.clone(n,r),n},re.fromQuaternion=function(e,t){void 0===t&&(t=new re),t=re.clone(re.IDENTITY,t);var r=e.x*e.x,n=e.x*e.y,o=e.x*e.z,i=e.x*e.w,a=e.y*e.y,s=e.y*e.z,u=e.y*e.w,c=e.z*e.z,e=e.z*e.w;return t[0]=1-2*(a+c),t[1]=2*(n+e),t[2]=2*(o-u),t[4]=2*(n-e),t[5]=1-2*(r+c),t[6]=2*(s+i),t[8]=2*(o+u),t[9]=2*(s-i),t[10]=1-2*(r+a),t[3]=t[7]=t[11]=t[12]=t[13]=t[14]=0,t[15]=1,t},Object.defineProperties(ye.prototype,{width:{get:function(){return ye.computeWidth(this)}},height:{get:function(){return ye.computeHeight(this)}}}),ye.packedLength=4,ye.pack=function(e,t,r){return r=C(r,0),t[r++]=e.west,t[r++]=e.south,t[r++]=e.east,t[r]=e.north,t},ye.unpack=function(e,t,r){return t=C(t,0),(r=!F(r)?new ye:r).west=e[t++],r.south=e[t++],r.east=e[t++],r.north=e[t],r},ye.computeWidth=function(e){var t=e.east,e=e.west;return t<e&&(t+=B.TWO_PI),t-e},ye.computeHeight=function(e){return e.north-e.south},ye.fromDegrees=function(e,t,r,n,o){return e=B.toRadians(C(e,0)),t=B.toRadians(C(t,0)),r=B.toRadians(C(r,0)),n=B.toRadians(C(n,0)),F(o)?(o.west=e,o.south=t,o.east=r,o.north=n,o):new ye(e,t,r,n)},ye.fromRadians=function(e,t,r,n,o){return F(o)?(o.west=C(e,0),o.south=C(t,0),o.east=C(r,0),o.north=C(n,0),o):new ye(e,t,r,n)},ye.fromCartographicArray=function(e,t){for(var r=Number.MAX_VALUE,n=-Number.MAX_VALUE,o=Number.MAX_VALUE,i=-Number.MAX_VALUE,a=Number.MAX_VALUE,s=-Number.MAX_VALUE,u=0,c=e.length;u<c;u++)var l=e[u],r=Math.min(r,l.longitude),n=Math.max(n,l.longitude),a=Math.min(a,l.latitude),s=Math.max(s,l.latitude),l=0<=l.longitude?l.longitude:l.longitude+B.TWO_PI,o=Math.min(o,l),i=Math.max(i,l);return i-o<n-r&&(r=o,(n=i)>B.PI&&(n-=B.TWO_PI),r>B.PI&&(r-=B.TWO_PI)),F(t)?(t.west=r,t.south=a,t.east=n,t.north=s,t):new ye(r,a,n,s)},ye.fromCartesianArray=function(e,t,r){t=C(t,O.WGS84);for(var n=Number.MAX_VALUE,o=-Number.MAX_VALUE,i=Number.MAX_VALUE,a=-Number.MAX_VALUE,s=Number.MAX_VALUE,u=-Number.MAX_VALUE,c=Number.MAX_VALUE,l=-Number.MAX_VALUE,f=0,h=e.length;f<h;f++)var p=t.cartesianToCartographic(e[f]),n=Math.min(n,p.longitude),o=Math.max(o,p.longitude),s=Math.min(s,p.latitude),u=Math.max(u,p.latitude),c=Math.min(c,p.height),l=Math.max(l,p.height),p=0<=p.longitude?p.longitude:p.longitude+B.TWO_PI,i=Math.min(i,p),a=Math.max(a,p);return a-i<o-n&&(n=i,(o=a)>B.PI&&(o-=B.TWO_PI),n>B.PI&&(n-=B.TWO_PI)),F(r)?(r.west=n,r.south=s,r.east=o,r.north=u,r.minHeight=c,r.maxHeight=l,r):new ye(n,s,o,u,c,l)},ye.clone=function(e,t){if(F(e))return F(t)?(t.west=e.west,t.south=e.south,t.east=e.east,t.north=e.north,t.minHeight=e.minHeight,t.maxHeight=e.maxHeight,t):new ye(e.west,e.south,e.east,e.north,e.minHeight,e.maxHeight)},ye.equalsEpsilon=function(e,t,r){return r=C(r,0),e===t||F(e)&&F(t)&&Math.abs(e.west-t.west)<=r&&Math.abs(e.south-t.south)<=r&&Math.abs(e.east-t.east)<=r&&Math.abs(e.north-t.north)<=r&&Math.abs(e.minHeight-t.minHeight)<=r&&Math.abs(e.maxHeight-t.maxHeight)<=r},ye.prototype.clone=function(e){return ye.clone(this,e)},ye.prototype.equals=function(e){return ye.equals(this,e)},ye.prototype.intersect=function(e){return ye.intersect(this,e)},ye.equals=function(e,t){return e===t||F(e)&&F(t)&&e.west===t.west&&e.south===t.south&&e.east===t.east&&e.north===t.north},ye.prototype.equalsEpsilon=function(e,t){return ye.equalsEpsilon(this,e,t)},ye.validate=function(e){},ye.southwest=function(e,t){return F(t)?(t.longitude=e.west,t.latitude=e.south,t.height=0,t):new S(e.west,e.south)},ye.northwest=function(e,t){return F(t)?(t.longitude=e.west,t.latitude=e.north,t.height=0,t):new S(e.west,e.north)},ye.northeast=function(e,t){return F(t)?(t.longitude=e.east,t.latitude=e.north,t.height=0,t):new S(e.east,e.north)},ye.southeast=function(e,t){return F(t)?(t.longitude=e.east,t.latitude=e.south,t.height=0,t):new S(e.east,e.south)},ye.center=function(e,t){var r=e.east,n=e.west;r<n&&(r+=B.TWO_PI);r=B.negativePiToPi(.5*(n+r)),e=.5*(e.south+e.north);return F(t)?(t.longitude=r,t.latitude=e,t.height=0,t):new S(r,e)},ye.intersection=function(e,t,r){var n=e.east,o=e.west,i=t.east,a=t.west;n<o&&0<i?n+=B.TWO_PI:i<a&&0<n&&(i+=B.TWO_PI),n<o&&a<0?a+=B.TWO_PI:i<a&&o<0&&(o+=B.TWO_PI);a=B.negativePiToPi(Math.max(o,a)),n=B.negativePiToPi(Math.min(n,i));if(!((e.west<e.east||t.west<t.east)&&n<=a)){i=Math.max(e.south,t.south),t=Math.min(e.north,t.north);if(!(t<=i))return F(r)?(r.west=a,r.south=i,r.east=n,r.north=t,r):new ye(a,i,n,t)}},ye.simpleIntersection=function(e,t,r){var n=Math.max(e.west,t.west),o=Math.max(e.south,t.south),i=Math.min(e.east,t.east),t=Math.min(e.north,t.north);if(!(t<=o||i<=n))return F(r)?(r.west=n,r.south=o,r.east=i,r.north=t,r):new ye(n,o,i,t)},ye.union=function(e,t,r){F(r)||(r=new ye);var n=e.east,o=e.west,i=t.east,a=t.west;n<o&&0<i?n+=B.TWO_PI:i<a&&0<n&&(i+=B.TWO_PI),n<o&&a<0?a+=B.TWO_PI:i<a&&o<0&&(o+=B.TWO_PI);a=B.convertLongitudeRange(Math.min(o,a)),i=B.convertLongitudeRange(Math.max(n,i));return r.west=a,r.south=Math.min(e.south,t.south),r.east=i,r.north=Math.max(e.north,t.north),r},ye.expand=function(e,t,r){return(r=!F(r)?new ye:r).west=Math.min(e.west,t.longitude),r.south=Math.min(e.south,t.latitude),r.east=Math.max(e.east,t.longitude),r.north=Math.max(e.north,t.latitude),r},ye.contains=function(e,t){var r=t.longitude,n=t.latitude,o=e.west,t=e.east;return t<o&&(t+=B.TWO_PI,r<0&&(r+=B.TWO_PI)),(o<r||B.equalsEpsilon(r,o,B.EPSILON14))&&(r<t||B.equalsEpsilon(r,t,B.EPSILON14))&&n>=e.south&&n<=e.north};var _e=new S;function ge(e,t){this.center=U.clone(C(e,U.ZERO)),this.radius=C(t,0)}ye.subsample=function(e,t,r,n){t=C(t,O.WGS84),r=C(r,0),F(n)||(n=[]);var o=0,i=e.north,a=e.south,s=e.east,u=e.west,c=_e;c.height=r,c.longitude=u,c.latitude=i,n[o]=t.cartographicToCartesian(c,n[o]),o++,c.longitude=s,n[o]=t.cartographicToCartesian(c,n[o]),o++,c.latitude=a,n[o]=t.cartographicToCartesian(c,n[o]),o++,c.longitude=u,n[o]=t.cartographicToCartesian(c,n[o]),o++,c.latitude=i<0?i:0<a?a:0;for(var l=1;l<8;++l)c.longitude=-Math.PI+l*B.PI_OVER_TWO,ye.contains(e,c)&&(n[o]=t.cartographicToCartesian(c,n[o]),o++);return 0===c.latitude&&(c.longitude=u,n[o]=t.cartographicToCartesian(c,n[o]),o++,c.longitude=s,n[o]=t.cartographicToCartesian(c,n[o]),o++),n.length=o,n},ye.intersect=function(e,t){return e.north>=t.south&&e.south<=t.north&&e.east>=t.west&&e.west<=t.east},ye.intersect_lon_lat_region=function(e,t){for(var r=t.get_count(),n=0;n<r;n++)if(ye.check_rect_line(e,t.getItem(n),t.getItem((n+1)%r)))return!0;return!!t.containRect(e)},ye.check_rect_line_vertical=function(e,t,r,n,o){if(r<e.longitude&&r<t.longitude)return!1;if(r>e.longitude&&r>t.longitude)return!1;if(e.longitude==t.longitude)return r==e.longitude&&(!(e.latitude<n&&t.latitude<n)&&!(e.latitude>o&&t.latitude>o));e=(t.latitude-e.latitude)*(r-e.longitude)/(t.longitude-e.longitude)+e.latitude;return n<=e&&e<=o},ye.check_rect_line_horizontal=function(e,t,r,n,o){if(r<e.latitude&&r<t.latitude)return!1;if(r>e.latitude&&r>t.latitude)return!1;if(e.latitude==t.latitude)return r==e.latitude&&(!(e.longitude<n&&t.longitude<n)&&!(e.longitude>o&&t.longitude>o));e=(t.longitude-e.longitude)*(r-e.latitude)/(t.latitude-e.latitude)+e.longitude;return n<=e&&e<=o},ye.check_rect_line=function(e,t,r){var n=!1;return ye.containPoint(e,t)||ye.containPoint(e,r)?n=!0:(n|=ye.check_rect_line_horizontal(t,r,e.north,e.west,e.east),n|=ye.check_rect_line_horizontal(t,r,e.south,e.west,e.east),n|=ye.check_rect_line_vertical(t,r,e.west,e.south,e.north),n|=ye.check_rect_line_vertical(t,r,e.east,e.south,e.north)),n},ye.intersectAabb=function(e,t){for(var r=new ye,n=t.get_corners(),o=new S,i=0;i<8;i++){var a=S.fromCartesian(n[i],void 0,o);ye.combine(r,a)}return ye.intersect(e,r)},ye.fromGeoAabb=function(e){for(var t=new ye,r=e.get_corners(),n=new S,o=0;o<8;o++){var i=S.fromCartesian(r[o],void 0,n);ye.combine(t,i)}return t},ye.containsRect=function(e,t){var r=B.EPSILON6;return t.east<=e.east+r&&t.west>=e.west-r&&t.north<=e.north+r&&t.south>=e.south-r},ye.combine=function(e,t){e.west>t.longitude&&(e.west=t.longitude),e.east<t.longitude&&(e.east=t.longitude),e.north<t.latitude&&(e.north=t.latitude),e.south>t.latitude&&(e.south=t.latitude),e.maxHeight<t.height&&(e.maxHeight=t.height),e.minHeight>t.height&&(e.minHeight=t.height)},ye.fromAabb=function(e,t){var r=t.minimum,n=t.maximum,o=n.z/O.WGS84.maximumRadius*1e3,t=r.z/O.WGS84.maximumRadius*1e3,n=n.x/O.WGS84.maximumRadius*1e3,r=r.x/O.WGS84.maximumRadius*1e3;return new ye(e.longitude+r,e.latitude+t,e.longitude+n,e.latitude+o)},ye.containPoint=function(e,t){return t.longitude<=e.east&&t.longitude>=e.west&&t.latitude<=e.north&&t.latitude>=e.south},ye.MAX_VALUE=Object.freeze(new ye(-Math.PI,-B.PI_OVER_TWO,Math.PI,B.PI_OVER_TWO));var Te=new U,Ae=new U,Re=new U,Se=new U,Oe=new U,ve=new U,Ie=new U,Ne=new U,we=new U,Ce=new U,Me=new U,be=new U,xe=4/3*B.PI;ge.fromPoints=function(e,t){if(F(t)||(t=new ge),!F(e)||0===e.length)return t.center=U.clone(U.ZERO,t.center),t.radius=0,t;for(var r=U.clone(e[0],Ie),n=U.clone(r,Te),o=U.clone(r,Ae),i=U.clone(r,Re),a=U.clone(r,Se),s=U.clone(r,Oe),u=U.clone(r,ve),c=e.length,l=1;l<c;l++){U.clone(e[l],r);var f=r.x,h=r.y,p=r.z;f<n.x&&U.clone(r,n),f>a.x&&U.clone(r,a),h<o.y&&U.clone(r,o),h>s.y&&U.clone(r,s),p<i.z&&U.clone(r,i),p>u.z&&U.clone(r,u)}var m=U.magnitudeSquared(U.subtract(a,n,Ne)),d=U.magnitudeSquared(U.subtract(s,o,Ne)),E=U.magnitudeSquared(U.subtract(u,i,Ne)),y=n,_=a,g=m;m<d&&(g=d,y=o,_=s),g<E&&(g=E,y=i,_=u);var T=we;T.x=.5*(y.x+_.x),T.y=.5*(y.y+_.y),T.z=.5*(y.z+_.z);var A=U.magnitudeSquared(U.subtract(_,T,Ne)),R=Math.sqrt(A),y=Ce;y.x=n.x,y.y=o.y,y.z=i.z;_=Me;_.x=a.x,_.y=s.y,_.z=u.z;var S=U.midpoint(y,_,be),O=0;for(l=0;l<c;l++){U.clone(e[l],r);var v=U.magnitude(U.subtract(r,S,Ne));O<v&&(O=v);var I=U.magnitudeSquared(U.subtract(r,T,Ne));A<I&&(A=(R=.5*(R+(v=Math.sqrt(I))))*R,T.x=(R*T.x+(I=v-R)*r.x)/v,T.y=(R*T.y+I*r.y)/v,T.z=(R*T.z+I*r.z)/v)}return R<O?(U.clone(T,t.center),t.radius=R):(U.clone(S,t.center),t.radius=O),t};var Pe=new z,De=new U,Le=new U,Fe=new S,Ue=new S;ge.fromRectangle2D=function(e,t,r){return ge.fromRectangleWithHeights2D(e,t,0,0,r)},ge.fromRectangleWithHeights2D=function(e,t,r,n,o){if(F(o)||(o=new ge),!F(e))return o.center=U.clone(U.ZERO,o.center),o.radius=0,o;t=C(t,Pe),ye.southwest(e,Fe),Fe.height=r,ye.northeast(e,Ue),Ue.height=n;var i=t.project(Fe,De),r=t.project(Ue,Le),e=r.x-i.x,n=r.y-i.y,t=r.z-i.z;o.radius=.5*Math.sqrt(e*e+n*n+t*t);r=o.center;return r.x=i.x+.5*e,r.y=i.y+.5*n,r.z=i.z+.5*t,o};var ze=[];ge.fromRectangle3D=function(e,t,r,n){if(t=C(t,O.WGS84),r=C(r,0),F(n)||(n=new ge),!F(e))return n.center=U.clone(U.ZERO,n.center),n.radius=0,n;r=ye.subsample(e,t,r,ze);return ge.fromPoints(r,n)},ge.fromVertices=function(e,t,r,n){if(F(n)||(n=new ge),!F(e)||0===e.length)return n.center=U.clone(U.ZERO,n.center),n.radius=0,n;t=C(t,U.ZERO),r=C(r,3);var o=Ie;o.x=e[0]+t.x,o.y=e[1]+t.y,o.z=e[2]+t.z;for(var i=U.clone(o,Te),a=U.clone(o,Ae),s=U.clone(o,Re),u=U.clone(o,Se),c=U.clone(o,Oe),l=U.clone(o,ve),f=e.length,h=0;h<f;h+=r){var p=e[h]+t.x,m=e[h+1]+t.y,d=e[h+2]+t.z;o.x=p,o.y=m,o.z=d,p<i.x&&U.clone(o,i),p>u.x&&U.clone(o,u),m<a.y&&U.clone(o,a),m>c.y&&U.clone(o,c),d<s.z&&U.clone(o,s),d>l.z&&U.clone(o,l)}var E=U.magnitudeSquared(U.subtract(u,i,Ne)),y=U.magnitudeSquared(U.subtract(c,a,Ne)),_=U.magnitudeSquared(U.subtract(l,s,Ne)),g=i,T=u,A=E;E<y&&(A=y,g=a,T=c),A<_&&(A=_,g=s,T=l);var R=we;R.x=.5*(g.x+T.x),R.y=.5*(g.y+T.y),R.z=.5*(g.z+T.z);var S=U.magnitudeSquared(U.subtract(T,R,Ne)),O=Math.sqrt(S),g=Ce;g.x=i.x,g.y=a.y,g.z=s.z;T=Me;T.x=u.x,T.y=c.y,T.z=l.z;var v=U.midpoint(g,T,be),I=0;for(h=0;h<f;h+=r){o.x=e[h]+t.x,o.y=e[h+1]+t.y,o.z=e[h+2]+t.z;var N=U.magnitude(U.subtract(o,v,Ne));I<N&&(I=N);var w=U.magnitudeSquared(U.subtract(o,R,Ne));S<w&&(S=(O=.5*(O+(N=Math.sqrt(w))))*O,R.x=(O*R.x+(w=N-O)*o.x)/N,R.y=(O*R.y+w*o.y)/N,R.z=(O*R.z+w*o.z)/N)}return O<I?(U.clone(R,n.center),n.radius=O):(U.clone(v,n.center),n.radius=I),n},ge.fromEncodedCartesianVertices=function(e,t,r){if(F(r)||(r=new ge),!F(e)||!F(t)||e.length!==t.length||0===e.length)return r.center=U.clone(U.ZERO,r.center),r.radius=0,r;var n=Ie;n.x=e[0]+t[0],n.y=e[1]+t[1],n.z=e[2]+t[2];for(var o=U.clone(n,Te),i=U.clone(n,Ae),a=U.clone(n,Re),s=U.clone(n,Se),u=U.clone(n,Oe),c=U.clone(n,ve),l=e.length,f=0;f<l;f+=3){var h=e[f]+t[f],p=e[f+1]+t[f+1],m=e[f+2]+t[f+2];n.x=h,n.y=p,n.z=m,h<o.x&&U.clone(n,o),h>s.x&&U.clone(n,s),p<i.y&&U.clone(n,i),p>u.y&&U.clone(n,u),m<a.z&&U.clone(n,a),m>c.z&&U.clone(n,c)}var d=U.magnitudeSquared(U.subtract(s,o,Ne)),E=U.magnitudeSquared(U.subtract(u,i,Ne)),y=U.magnitudeSquared(U.subtract(c,a,Ne)),_=o,g=s,T=d;d<E&&(T=E,_=i,g=u),T<y&&(T=y,_=a,g=c);var A=we;A.x=.5*(_.x+g.x),A.y=.5*(_.y+g.y),A.z=.5*(_.z+g.z);var R=U.magnitudeSquared(U.subtract(g,A,Ne)),S=Math.sqrt(R),_=Ce;_.x=o.x,_.y=i.y,_.z=a.z;g=Me;g.x=s.x,g.y=u.y,g.z=c.z;var O=U.midpoint(_,g,be),v=0;for(f=0;f<l;f+=3){n.x=e[f]+t[f],n.y=e[f+1]+t[f+1],n.z=e[f+2]+t[f+2];var I=U.magnitude(U.subtract(n,O,Ne));v<I&&(v=I);var N=U.magnitudeSquared(U.subtract(n,A,Ne));R<N&&(R=(S=.5*(S+(I=Math.sqrt(N))))*S,A.x=(S*A.x+(N=I-S)*n.x)/I,A.y=(S*A.y+N*n.y)/I,A.z=(S*A.z+N*n.z)/I)}return S<v?(U.clone(A,r.center),r.radius=S):(U.clone(O,r.center),r.radius=v),r},ge.fromCornerPoints=function(e,t,r){F(r)||(r=new ge);e=U.midpoint(e,t,r.center);return r.radius=U.distance(e,t),r},ge.fromEllipsoid=function(e,t){return F(t)||(t=new ge),U.clone(U.ZERO,t.center),t.radius=e.maximumRadius,t};var Be=new U;ge.fromBoundingSpheres=function(e,t){if(F(t)||(t=new ge),!F(e)||0===e.length)return t.center=U.clone(U.ZERO,t.center),t.radius=0,t;var r=e.length;if(1===r)return ge.clone(e[0],t);if(2===r)return ge.union(e[0],e[1],t);for(var n=[],o=0;o<r;o++)n.push(e[o].center);var i=(t=ge.fromPoints(n,t)).center,a=t.radius;for(o=0;o<r;o++)var s=e[o],a=Math.max(a,U.distance(i,s.center,Be)+s.radius);return t.radius=a,t};var qe=new U,Ge=new U,je=new U;ge.fromOrientedBoundingBox=function(e,t){F(t)||(t=new ge);var r=e.halfAxes,n=j.getColumn(r,0,qe),o=j.getColumn(r,1,Ge),r=j.getColumn(r,2,je);return U.add(n,o,n),U.add(n,r,n),t.center=U.clone(e.center,t.center),t.radius=U.magnitude(n),t},ge.clone=function(e,t){if(F(e))return F(t)?(t.center=U.clone(e.center,t.center),t.radius=e.radius,t):new ge(e.center,e.radius)},ge.packedLength=4,ge.pack=function(e,t,r){r=C(r,0);var n=e.center;return t[r++]=n.x,t[r++]=n.y,t[r++]=n.z,t[r]=e.radius,t},ge.unpack=function(e,t,r){t=C(t,0);var n=(r=!F(r)?new ge:r).center;return n.x=e[t++],n.y=e[t++],n.z=e[t++],r.radius=e[t],r};var He=new U,Ve=new U;ge.union=function(e,t,r){F(r)||(r=new ge);var n=e.center,o=e.radius,i=t.center,a=t.radius,s=U.subtract(i,n,He),i=U.magnitude(s);if(i+a<=o)return e.clone(r),r;if(i+o<=a)return t.clone(r),r;a=.5*(o+i+a),i=U.multiplyByScalar(s,(a-o)/i,Ve);return U.add(i,n,i),U.clone(i,r.center),r.radius=a,r};var We=new U;ge.expand=function(e,t,r){r=ge.clone(e,r);t=U.magnitude(U.subtract(t,r.center,We));return t>r.radius&&(r.radius=t),r},ge.intersectPlane=function(e,t){var r=e.center,n=e.radius,e=t.normal,t=U.dot(e,r)+t.distance;return t<-n?q.OUTSIDE:t<n?q.INTERSECTING:q.INSIDE},ge.intersectRay=function(e,t,r){var n=U.subtract(t.origin,e.center,new U),o=U.dot(n,n),i=o-e.radius*e.radius;if(i<=0){var a=U.dot(n,t.direction),o=Math.sqrt(e.radius*e.radius-(o-a*a));return r=U.multiplyByScalar(t.direction,o-a,r),r=U.subtract(t.origin,r,r),q.INTERSECTING}n=U.dot(t.direction,n);if(0<=n)return q.OUTSIDE;i=n*n-i;if(i<0)return q.OUTSIDE;if(i>=B.EPSILON10){a=-n-Math.sqrt(i);return r=U.multiplyByScalar(t.direction,a,r),r=U.add(t.origin,r,r),q.INTERSECTING}return r=U.multiplyByScalar(t.direction,n,r),r=U.subtract(t.origin,r,r),q.INTERSECTING},ge.transform=function(e,t,r){return(r=!F(r)?new ge:r).center=re.multiplyByPoint(t,e.center,r.center),r.radius=re.getMaximumScale(t)*e.radius,r};var Ye=new U;ge.distanceSquaredTo=function(e,t){t=U.subtract(e.center,t,Ye);return U.magnitudeSquared(t)-e.radius*e.radius},ge.transformWithoutScale=function(e,t,r){return(r=!F(r)?new ge:r).center=re.multiplyByPoint(t,e.center,r.center),r.radius=e.radius,r};var Xe=new U;ge.computePlaneDistances=function(e,t,r,n){F(n)||(n=new G);t=U.subtract(e.center,t,Xe),t=U.dot(r,t);return n.start=t-e.radius,n.stop=t+e.radius,n};for(var ke=new U,Ke=new U,Ze=new U,Je=new U,Qe=new U,$e=new S,et=new Array(8),e=0;e<8;++e)et[e]=new U;var tt=new z;function rt(e){this._ellipsoid=C(e,O.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}ge.projectTo2D=function(e,t,r){var n=(t=C(t,tt)).ellipsoid,o=e.center,i=e.radius,a=U.equals(o,U.ZERO)?U.clone(U.UNIT_X,ke):n.geodeticSurfaceNormal(o,ke),s=U.cross(U.UNIT_Z,a,Ke);U.normalize(s,s);var u=U.cross(a,s,Ze);U.normalize(u,u),U.multiplyByScalar(a,i,a),U.multiplyByScalar(u,i,u),U.multiplyByScalar(s,i,s);var c=U.negate(u,Qe),e=U.negate(s,Je),l=et,i=l[0];U.add(a,u,i),U.add(i,s,i),i=l[1],U.add(a,u,i),U.add(i,e,i),i=l[2],U.add(a,c,i),U.add(i,e,i),i=l[3],U.add(a,c,i),U.add(i,s,i),U.negate(a,a),i=l[4],U.add(a,u,i),U.add(i,s,i),i=l[5],U.add(a,u,i),U.add(i,e,i),i=l[6],U.add(a,c,i),U.add(i,e,i),i=l[7],U.add(a,c,i),U.add(i,s,i);for(var f=l.length,h=0;h<f;++h){var p=l[h];U.add(o,p,p);var m=n.cartesianToCartographic(p,$e);t.project(m,p)}c=(o=(r=ge.fromPoints(l,r)).center).x,s=o.y,i=o.z;return o.x=i,o.y=c,o.z=s,r},ge.isOccluded=function(e,t){return!t.isBoundingSphereVisible(e)},ge.equals=function(e,t){return e===t||F(e)&&F(t)&&U.equals(e.center,t.center)&&e.radius===t.radius},ge.prototype.intersectPlane=function(e){return ge.intersectPlane(this,e)},ge.prototype.intersectRay=function(e,t){return ge.intersectRay(this,e,t)},ge.prototype.distanceSquaredTo=function(e){return ge.distanceSquaredTo(this,e)},ge.prototype.computePlaneDistances=function(e,t,r){return ge.computePlaneDistances(this,e,t,r)},ge.prototype.isOccluded=function(e){return ge.isOccluded(this,e)},ge.prototype.equals=function(e){return ge.equals(this,e)},ge.prototype.clone=function(e){return ge.clone(this,e)},ge.prototype.volume=function(){var e=this.radius;return xe*e*e*e},ge.prototype.project_area=function(e){return this.radius*this.radius*B.PI},ge.prototype.height=function(e){return 2*this.radius},Object.defineProperties(rt.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),rt.mercatorAngleToGeodeticLatitude=function(e){return B.PI_OVER_TWO-2*Math.atan(Math.exp(-e))},rt.geodeticLatitudeToMercatorAngle=function(e){rt.MaximumLatitude<e?e=rt.MaximumLatitude:e<-rt.MaximumLatitude&&(e=-rt.MaximumLatitude);e=Math.sin(e);return.5*Math.log((1+e)/(1-e))},rt.MaximumLatitude=rt.mercatorAngleToGeodeticLatitude(Math.PI),rt.prototype.project=function(e,t){var r=this._semimajorAxis,n=e.longitude*r,r=rt.geodeticLatitudeToMercatorAngle(e.latitude)*r,e=e.height;return F(t)?(t.x=n,t.y=r,t.z=e,t):new U(n,r,e)},rt.prototype.unproject=function(e,t){var r=this._oneOverSemimajorAxis,n=e.x*r,r=rt.mercatorAngleToGeodeticLatitude(e.y*r),e=e.z;return F(t)?(t.longitude=n,t.latitude=r,t.height=e,t):new S(n,r,e)};var nt=Object.freeze({DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,HALF_FLOAT_OES:36193,DOUBLE:5130,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,COLOR:6144,DEPTH:6145,STENCIL:6146,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,MAX_3D_TEXTURE_SIZE:32883,UNSIGNED_INT_2_10_10_10_REV:33640,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,MAX_TEXTURE_LOD_BIAS:34045,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,VERTEX_ATTRIB_ARRAY_INTEGER:35069,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,UNSIGNED_INT_10F_11F_11F_REV:35899,RGB9_E5:35901,UNSIGNED_INT_5_9_9_9_REV:35902,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,RASTERIZER_DISCARD:35977,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,UNSIGNED_INT_24_8:34042,DEPTH24_STENCIL8:35056,UNSIGNED_NORMALIZED:35863,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,MAX_SAMPLES:36183,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,VERTEX_ARRAY_BINDING:34229,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,SIGNED_NORMALIZED:36764,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,INVALID_INDEX:4294967295,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,SAMPLER_BINDING:35097,RGB10_A2UI:36975,INT_2_10_10_10_REV:36255,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,TEXTURE_IMMUTABLE_FORMAT:37167,MAX_ELEMENT_INDEX:36203,TEXTURE_IMMUTABLE_LEVELS:33503,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047}),ot={BYTE:nt.BYTE,UNSIGNED_BYTE:nt.UNSIGNED_BYTE,SHORT:nt.SHORT,UNSIGNED_SHORT:nt.UNSIGNED_SHORT,INT:nt.INT,UNSIGNED_INT:nt.UNSIGNED_INT,FLOAT:nt.FLOAT,DOUBLE:nt.DOUBLE,getSizeInBytes:function(e){switch(e){case ot.BYTE:return Int8Array.BYTES_PER_ELEMENT;case ot.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case ot.SHORT:return Int16Array.BYTES_PER_ELEMENT;case ot.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case ot.INT:return Int32Array.BYTES_PER_ELEMENT;case ot.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case ot.FLOAT:return Float32Array.BYTES_PER_ELEMENT;case ot.DOUBLE:return Float64Array.BYTES_PER_ELEMENT}},fromTypedArray:function(e){return e instanceof Int8Array?ot.BYTE:e instanceof Uint8Array?ot.UNSIGNED_BYTE:e instanceof Int16Array?ot.SHORT:e instanceof Uint16Array?ot.UNSIGNED_SHORT:e instanceof Int32Array?ot.INT:e instanceof Uint32Array?ot.UNSIGNED_INT:e instanceof Float32Array?ot.FLOAT:e instanceof Float64Array?ot.DOUBLE:void 0},validate:function(e){return F(e)&&(e===ot.BYTE||e===ot.UNSIGNED_BYTE||e===ot.SHORT||e===ot.UNSIGNED_SHORT||e===ot.INT||e===ot.UNSIGNED_INT||e===ot.FLOAT||e===ot.DOUBLE)},createTypedArray:function(e,t){switch(e){case ot.BYTE:return new Int8Array(t);case ot.UNSIGNED_BYTE:return new Uint8Array(t);case ot.SHORT:return new Int16Array(t);case ot.UNSIGNED_SHORT:return new Uint16Array(t);case ot.INT:return new Int32Array(t);case ot.UNSIGNED_INT:return new Uint32Array(t);case ot.FLOAT:return new Float32Array(t);case ot.DOUBLE:return new Float64Array(t)}},createArrayBufferView:function(e,t,r,n){switch(r=C(r,0),n=C(n,(t.byteLength-r)/ot.getSizeInBytes(e)),e){case ot.BYTE:return new Int8Array(t,r,n);case ot.UNSIGNED_BYTE:return new Uint8Array(t,r,n);case ot.SHORT:return new Int16Array(t,r,n);case ot.UNSIGNED_SHORT:return new Uint16Array(t,r,n);case ot.INT:return new Int32Array(t,r,n);case ot.UNSIGNED_INT:return new Uint32Array(t,r,n);case ot.FLOAT:return new Float32Array(t,r,n);case ot.DOUBLE:return new Float64Array(t,r,n)}},fromName:function(e){switch(e){case"BYTE":return ot.BYTE;case"UNSIGNED_BYTE":return ot.UNSIGNED_BYTE;case"SHORT":return ot.SHORT;case"UNSIGNED_SHORT":return ot.UNSIGNED_SHORT;case"INT":return ot.INT;case"UNSIGNED_INT":return ot.UNSIGNED_INT;case"FLOAT":return ot.FLOAT;case"DOUBLE":return ot.DOUBLE}}},it=Object.freeze(ot);function at(e,t){this.x=C(e,0),this.y=C(t,0)}at.fromElements=function(e,t,r){return F(r)?(r.x=e,r.y=t,r):new at(e,t)},at.fromCartesian3=at.clone=function(e,t){if(F(e))return F(t)?(t.x=e.x,t.y=e.y,t):new at(e.x,e.y)},at.fromCartesian4=at.clone,at.packedLength=2,at.pack=function(e,t,r){return r=C(r,0),t[r++]=e.x,t[r]=e.y,t},at.unpack=function(e,t,r){return t=C(t,0),(r=!F(r)?new at:r).x=e[t++],r.y=e[t],r},at.packArray=function(e,t){var r=e.length,n=2*r;if(F(t)){if(!Array.isArray(t)&&t.length!==n)throw new i("If result is a typed array, it must have exactly array.length * 2 elements");t.length!==n&&(t.length=n)}else t=new Array(n);for(var o=0;o<r;++o)at.pack(e[o],t,2*o);return t},at.unpackArray=function(e,t){var r=e.length;F(t)?t.length=r/2:t=new Array(r/2);for(var n=0;n<r;n+=2){var o=n/2;t[o]=at.unpack(e,n,t[o])}return t},at.fromArray=at.unpack,at.maximumComponent=function(e){return Math.max(e.x,e.y)},at.minimumComponent=function(e){return Math.min(e.x,e.y)},at.minimumByComponent=function(e,t,r){return r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r},at.maximumByComponent=function(e,t,r){return r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r},at.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},at.magnitude=function(e){return Math.sqrt(at.magnitudeSquared(e))};var st=new at;at.distance=function(e,t){return at.subtract(e,t,st),at.magnitude(st)},at.distanceSquared=function(e,t){return at.subtract(e,t,st),at.magnitudeSquared(st)},at.normalize=function(e,t){var r=at.magnitude(e);return 0!=r?(t.x=e.x/r,t.y=e.y/r):at.clone(e,t),Math.abs(t.x)<B.EPSILON8&&(t.x=0),Math.abs(t.y)<B.EPSILON8&&(t.y=0),t},at.dot=function(e,t){return e.x*t.x+e.y*t.y},at.multiplyComponents=function(e,t,r){return r.x=e.x*t.x,r.y=e.y*t.y,r},at.divideComponents=function(e,t,r){return r.x=e.x/t.x,r.y=e.y/t.y,r},at.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r},at.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r},at.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r},at.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r},at.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t},at.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t};var ut=new at;at.lerp=function(e,t,r,n){return at.multiplyByScalar(t,r,ut),n=at.multiplyByScalar(e,1-r,n),at.add(ut,n,n)};var ct=new at,lt=new at;at.angleBetween=function(e,t){return at.normalize(e,ct),at.normalize(t,lt),B.acosClamped(at.dot(ct,lt))};var ft=new at;function ht(e,t,r,n){this[0]=C(e,0),this[1]=C(r,0),this[2]=C(t,0),this[3]=C(n,0)}at.mostOrthogonalAxis=function(e,t){e=at.normalize(e,ft);return at.abs(e,e),t=e.x<=e.y?at.clone(at.UNIT_X,t):at.clone(at.UNIT_Y,t)},at.equals=function(e,t){return e===t||F(e)&&F(t)&&e.x===t.x&&e.y===t.y},at.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]},at.equalsEpsilon=function(e,t,r,n){return e===t||F(e)&&F(t)&&B.equalsEpsilon(e.x,t.x,r,n)&&B.equalsEpsilon(e.y,t.y,r,n)},at.ZERO=Object.freeze(new at(0,0)),at.UNIT_X=Object.freeze(new at(1,0)),at.UNIT_Y=Object.freeze(new at(0,1)),at.prototype.clone=function(e){return at.clone(this,e)},at.prototype.equals=function(e){return at.equals(this,e)},at.prototype.equalsEpsilon=function(e,t,r){return at.equalsEpsilon(this,e,t,r)},at.prototype.toString=function(){return"("+this.x+", "+this.y+")"},at.prototype.set=function(e,t){this.x=e,this.y=t},at.prototype.fromArray=function(e,t){return this.x=e[t=void 0===t?0:t],this.y=e[t+1],this},at.prototype.toArray=function(e,t){return(e=void 0===e?[]:e)[t=void 0===t?0:t]=this.x,e[t+1]=this.y,e},ht.packedLength=4,ht.pack=function(e,t,r){return r=C(r,0),t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t},ht.unpack=function(e,t,r){return t=C(t,0),(r=!F(r)?new ht:r)[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r},ht.clone=function(e,t){if(F(e))return F(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):new ht(e[0],e[2],e[1],e[3])},ht.fromArray=function(e,t,r){return t=C(t,0),(r=!F(r)?new ht:r)[0]=e[t],r[1]=e[t+1],r[2]=e[t+2],r[3]=e[t+3],r},ht.fromColumnMajorArray=function(e,t){return ht.clone(e,t)},ht.fromRowMajorArray=function(e,t){return F(t)?(t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3],t):new ht(e[0],e[1],e[2],e[3])},ht.fromScale=function(e,t){return F(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=e.y,t):new ht(e.x,0,0,e.y)},ht.fromUniformScale=function(e,t){return F(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=e,t):new ht(e,0,0,e)},ht.fromRotation=function(e,t){var r=Math.cos(e),e=Math.sin(e);return F(t)?(t[0]=r,t[1]=e,t[2]=-e,t[3]=r,t):new ht(r,-e,e,r)},ht.toArray=function(e,t){return F(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):[e[0],e[1],e[2],e[3]]},ht.getElementIndex=function(e,t){return 2*e+t},ht.getColumn=function(e,t,r){var n=2*t,t=e[n],n=e[1+n];return r.x=t,r.y=n,r},ht.setColumn=function(e,t,r,n){t*=2;return(n=ht.clone(e,n))[t]=r.x,n[1+t]=r.y,n},ht.getRow=function(e,t,r){var n=e[t],t=e[t+2];return r.x=n,r.y=t,r},ht.setRow=function(e,t,r,n){return(n=ht.clone(e,n))[t]=r.x,n[t+2]=r.y,n};var pt=new at;ht.getScale=function(e,t){return t.x=at.magnitude(at.fromElements(e[0],e[1],pt)),t.y=at.magnitude(at.fromElements(e[2],e[3],pt)),t};var mt,dt,Et=new at;function yt(e,t,r,n){return _t(e).then(t,r,n)}function _t(e){var t,r,e=e instanceof gt?e:Rt(e)?(t=At(),e.then(function(e){t.resolve(e)},function(e){t.reject(e)},function(e){t.progress(e)}),t.promise):(r=e,new gt(function(e){try{return _t(e?e(r):r)}catch(e){return Tt(e)}}));return e}function gt(e){this.then=e}function Tt(r){return new gt(function(e,t){try{return t?_t(t(r)):Tt(r)}catch(e){return Tt(e)}})}function At(){var e=new gt(o),a=[],s=[],n=function(t,r,n){var o=At(),i="function"==typeof n?function(e){try{o.progress(n(e))}catch(e){o.progress(e)}}:function(e){o.progress(e)};return a.push(function(e){e.then(t,r).then(o.resolve,o.reject,i)}),s.push(i),o.promise},t=function(e){return It(s,e),e},r=function(e){return e=_t(e),n=e.then,r=_t,t=Nt,It(a,e),s=a=mt,e};return{then:o,resolve:i,reject:u,progress:c,promise:e,resolver:{resolve:i,reject:u,progress:c}};function o(e,t,r){return n(e,t,r)}function i(e){return r(e)}function u(e){return r(Tt(e))}function c(e){return t(e)}}function Rt(e){return e&&"function"==typeof e.then}function St(e,p,m,d,E){return yt(e,function(e){var t,r,n,o,i=e.length>>>0,a=Math.max(0,Math.min(p,i)),s=[],u=i-a+1,c=[],l=At();if(a)for(n=l.progress,r=function(e){c.push(e),--u||(t=r=Nt,l.reject(c))},t=function(e){s.push(e),--a||(t=r=Nt,l.resolve(s))},o=0;o<i;++o)o in e&&yt(e[o],h,f,n);else l.resolve(s);return l.then(m,d,E);function f(e){r(e)}function h(e){t(e)}})}function Ot(e,t,r,n){return vt(e,wt).then(t,r,n)}function vt(e,s){return yt(e,function(e){var t,r,n,o=t=e.length>>>0,i=[],a=At();if(o)for(r=function(e,t){yt(e,s).then(function(e){i[t]=e,--o||a.resolve(i)},a.reject)},n=0;n<t;n++)n in e?r(e[n],n):--o;else a.resolve(i);return a.promise})}function It(e,t){for(var r,n=0;r=e[n++];)r(t)}function Nt(){}function wt(e){return e}ht.getMaximumScale=function(e){return ht.getScale(e,Et),at.maximumComponent(Et)},ht.multiply=function(e,t,r){var n=e[0]*t[0]+e[2]*t[1],o=e[0]*t[2]+e[2]*t[3],i=e[1]*t[0]+e[3]*t[1],t=e[1]*t[2]+e[3]*t[3];return r[0]=n,r[1]=i,r[2]=o,r[3]=t,r},ht.add=function(e,t,r){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r},ht.subtract=function(e,t,r){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r},ht.multiplyByVector=function(e,t,r){var n=e[0]*t.x+e[2]*t.y,t=e[1]*t.x+e[3]*t.y;return r.x=n,r.y=t,r},ht.multiplyByScalar=function(e,t,r){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r},ht.multiplyByScale=function(e,t,r){return r[0]=e[0]*t.x,r[1]=e[1]*t.x,r[2]=e[2]*t.y,r[3]=e[3]*t.y,r},ht.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},ht.transpose=function(e,t){var r=e[0],n=e[2],o=e[1],e=e[3];return t[0]=r,t[1]=n,t[2]=o,t[3]=e,t},ht.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t},ht.equals=function(e,t){return e===t||F(e)&&F(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},ht.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]},ht.equalsEpsilon=function(e,t,r){return r=C(r,0),e===t||F(e)&&F(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r},ht.IDENTITY=Object.freeze(new ht(1,0,0,1)),ht.ZERO=Object.freeze(new ht(0,0,0,0)),ht.COLUMN0ROW0=0,ht.COLUMN0ROW1=1,ht.COLUMN1ROW0=2,ht.COLUMN1ROW1=3,Object.defineProperties(ht.prototype,{length:{get:function(){return ht.packedLength}}}),ht.prototype.clone=function(e){return ht.clone(this,e)},ht.prototype.equals=function(e){return ht.equals(this,e)},ht.prototype.equalsEpsilon=function(e,t){return ht.equalsEpsilon(this,e,t)},ht.prototype.toString=function(){return"("+this[0]+", "+this[2]+")\n("+this[1]+", "+this[3]+")"},yt.defer=At,yt.resolve=_t,yt.reject=function(e){return yt(e,Tt)},yt.join=function(){return vt(arguments,wt)},yt.all=Ot,yt.map=vt,yt.reduce=function(e,i){var t=Yt.call(arguments,1);return yt(e,function(e){var o=e.length;return t[0]=function(e,r,n){return yt(e,function(t){return yt(r,function(e){return i(t,e,n,o)})})},Xt.apply(e,t)})},yt.any=function(e,t,r,n){return St(e,1,function(e){return t?t(e[0]):e[0]},r,n)},yt.some=St,yt.chain=function(e,t,r){var n=2<arguments.length;return yt(e,function(e){return t.resolve(e=n?r:e),e},function(e){return t.reject(e),Tt(e)},t.progress)},yt.isPromise=Rt,gt.prototype={always:function(e,t){return this.then(e,e,t)},otherwise:function(e){return this.then(mt,e)},yield:function(e){return this.then(function(){return e})},spread:function(t){return this.then(function(e){return Ot(e,function(e){return t.apply(mt,e)})})}};var Ct,Mt,bt,xt,Pt,Dt,Lt,Ft,Ut,zt,Bt,qt,Gt,jt,Ht,Vt,Wt,Yt=[].slice,Xt=[].reduce||function(e){var t,r=0,n=Object(this),o=n.length>>>0,i=arguments;if(i.length<=1)for(;;){if(r in n){t=n[r++];break}if(++r>=o)throw new TypeError}else t=i[1];for(;r<o;++r)r in n&&(t=e(t,n[r],r,n));return t},kt={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},Kt={};function Zt(e){for(var t=e.split("."),r=0,n=t.length;r<n;++r)t[r]=parseInt(t[r],10);return t}function Jt(){var e;return F(Mt)||(Mt=!1,tr()||null!==(e=/ Chrome\/([\.0-9]+)/.exec(Ct.userAgent))&&(Mt=!0,bt=Zt(e[1]))),Mt}function Qt(){var e;return F(xt)||(xt=!1,Jt()||tr()||!/ Safari\/[\.0-9]+/.test(Ct.userAgent)||null!==(e=/ Version\/([\.0-9]+)/.exec(Ct.userAgent))&&(xt=!0,Pt=Zt(e[1]))),xt}function $t(){var e;return F(Dt)||(Dt=!1,null!==(e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(Ct.userAgent))&&(Dt=!0,(Lt=Zt(e[1])).isNightly=!!e[2])),Dt}function er(){var e;return F(Ft)||(Ft=!1,"Microsoft Internet Explorer"===Ct.appName?null!==(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(Ct.userAgent))&&(Ft=!0,Ut=Zt(e[1])):"Netscape"===Ct.appName&&null!==(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(Ct.userAgent))&&(Ft=!0,Ut=Zt(e[1]))),Ft}function tr(){var e;return F(zt)||(zt=!1,null!==(e=/ Edge\/([\.0-9]+)/.exec(Ct.userAgent))&&(zt=!0,Bt=Zt(e[1]))),zt}function rr(){var e;return F(qt)||(qt=!1,null!==(e=/Firefox\/([\.0-9]+)/.exec(Ct.userAgent))&&(qt=!0,Gt=Zt(e[1]))),qt}function nr(){var e;return F(Wt)||((e=document.createElement("canvas")).setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;"),e=e.style.imageRendering,(Wt=F(e)&&""!==e)&&(Vt=e)),Wt}function or(){return or._result}Object.defineProperties(Kt,{element:{get:function(){if(Kt.supportsFullscreen())return document[kt.fullscreenElement]}},changeEventName:{get:function(){if(Kt.supportsFullscreen())return kt.fullscreenchange}},errorEventName:{get:function(){if(Kt.supportsFullscreen())return kt.fullscreenerror}},enabled:{get:function(){if(Kt.supportsFullscreen())return document[kt.fullscreenEnabled]}},fullscreen:{get:function(){if(Kt.supportsFullscreen())return null!==Kt.element}}}),Kt.supportsFullscreen=function(){if(F(dt))return dt;dt=!1;var e=document.body;if("function"==typeof e.requestFullscreen)return kt.requestFullscreen="requestFullscreen",kt.exitFullscreen="exitFullscreen",kt.fullscreenEnabled="fullscreenEnabled",kt.fullscreenElement="fullscreenElement",kt.fullscreenchange="fullscreenchange",kt.fullscreenerror="fullscreenerror",dt=!0;for(var t=["webkit","moz","o","ms","khtml"],r=0,n=t.length;r<n;++r){var o,i=t[r];"function"!=typeof e[o=i+"RequestFullscreen"]&&"function"!=typeof e[o=i+"RequestFullScreen"]||(kt.requestFullscreen=o,dt=!0),o=i+"ExitFullscreen","function"==typeof document[o]?kt.exitFullscreen=o:(o=i+"CancelFullScreen","function"==typeof document[o]&&(kt.exitFullscreen=o)),o=i+"FullscreenEnabled",void 0!==document[o]?kt.fullscreenEnabled=o:(o=i+"FullScreenEnabled",void 0!==document[o]&&(kt.fullscreenEnabled=o)),o=i+"FullscreenElement",void 0!==document[o]?kt.fullscreenElement=o:(o=i+"FullScreenElement",void 0!==document[o]&&(kt.fullscreenElement=o)),o=i+"fullscreenchange",void 0!==document["on"+o]&&(kt.fullscreenchange=o="ms"===i?"MSFullscreenChange":o),o=i+"fullscreenerror",void 0!==document["on"+o]&&(kt.fullscreenerror=o="ms"===i?"MSFullscreenError":o)}return dt},Kt.requestFullscreen=function(e,t){Kt.supportsFullscreen()&&e[kt.requestFullscreen]({vrDisplay:t})},Kt.exitFullscreen=function(){Kt.supportsFullscreen()&&document[kt.exitFullscreen]()},Kt._names=kt,Ct="undefined"!=typeof navigator?navigator:{},or._promise=void 0,or._result=void 0,or.initialize=function(){if(F(or._promise))return or._promise;var e=yt.defer();if(or._promise=e.promise,tr())return or._result=!1,e.resolve(or._result),e.promise;var t=new Image;return t.onload=function(){or._result=0<t.width&&0<t.height,e.resolve(or._result)},t.onerror=function(){or._result=!1,e.resolve(or._result)},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.promise},Object.defineProperties(or,{initialized:{get:function(){return F(or._result)}}});var ir=[];"undefined"!=typeof ArrayBuffer&&(ir.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&ir.push(Uint8ClampedArray),"undefined"!=typeof Uint8ClampedArray&&ir.push(Uint8ClampedArray));var ar={isChrome:Jt,chromeVersion:function(){return Jt()&&bt},isSafari:Qt,safariVersion:function(){return Qt()&&Pt},isWebkit:$t,webkitVersion:function(){return $t()&&Lt},isInternetExplorer:er,internetExplorerVersion:function(){return er()&&Ut},isEdge:tr,edgeVersion:function(){return tr()&&Bt},isFirefox:rr,firefoxVersion:function(){return rr()&&Gt},isWindows:function(){return jt=!F(jt)?/Windows/i.test(Ct.appVersion):jt},hardwareConcurrency:C(Ct.hardwareConcurrency,3),supportsPointerEvents:function(){return Ht=!F(Ht)?!rr()&&"undefined"!=typeof PointerEvent&&(!F(Ct.pointerEnabled)||Ct.pointerEnabled):Ht},supportsImageRenderingPixelated:nr,supportsWebP:or,imageRenderingValue:function(){return nr()?Vt:void 0},typedArrayTypes:ir};function sr(e,t,r,n){this.x=C(e,0),this.y=C(t,0),this.z=C(r,0),this.w=C(n,0)}ar.supportsFullscreen=function(){return Kt.supportsFullscreen()},ar.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer},ar.supportsWebWorkers=function(){return"undefined"!=typeof Worker},ar.supportsWebAssembly=function(){return"undefined"!=typeof WebAssembly&&!ar.isEdge()};var ur=new U;sr.fromAxisAngle=function(e,t,r){var n=t/2,o=Math.sin(n),t=(ur=U.normalize(e,ur)).x*o,e=ur.y*o,o=ur.z*o,n=Math.cos(n);return F(r)?(r.x=t,r.y=e,r.z=o,r.w=n,r):new sr(t,e,o,n)};var cr=[1,2,0],lr=new Array(3);sr.fromRotationMatrix=function(e,t){var r,n,o,i,a=e[j.COLUMN0ROW0],s=e[j.COLUMN1ROW1],u=e[j.COLUMN2ROW2],c=a+s+u,l=0<c?(o=.5*(i=Math.sqrt(c+1)),r=(e[j.COLUMN1ROW2]-e[j.COLUMN2ROW1])*(i=.5/i),n=(e[j.COLUMN2ROW0]-e[j.COLUMN0ROW2])*i,(e[j.COLUMN0ROW1]-e[j.COLUMN1ROW0])*i):(s=cr[a=cr[u=a<u&&s<u?2:a<s?1:0]],i=Math.sqrt(e[j.getElementIndex(u,u)]-e[j.getElementIndex(a,a)]-e[j.getElementIndex(s,s)]+1),(l=lr)[u]=.5*i,i=.5/i,o=(e[j.getElementIndex(s,a)]-e[j.getElementIndex(a,s)])*i,l[a]=(e[j.getElementIndex(a,u)]+e[j.getElementIndex(u,a)])*i,l[s]=(e[j.getElementIndex(s,u)]+e[j.getElementIndex(u,s)])*i,r=-l[0],n=-l[1],-l[2]);return F(t)?(t.x=r,t.y=n,t.z=l,t.w=o,t):new sr(r,n,l,o)};var fr,hr,pr,mr=new sr;new sr,new sr,new sr;sr.fromHeadingPitchRoll=function(e,t){return pr=sr.fromAxisAngle(U.UNIT_X,e.roll,mr),hr=sr.fromAxisAngle(U.UNIT_Y,-e.pitch,t),t=sr.multiply(hr,pr,hr),fr=sr.fromAxisAngle(U.UNIT_Z,-e.heading,mr),sr.multiply(fr,t,t)};var dr=new U,Er=new U;sr.fromNormal=function(e,t,r){var n=U.add(e,t,dr);U.normalize(n,n);var o,i,a,s,u=U.dot(e,n),t=u;return s=0!=u?(i=(o=U.cross(e,n,Er)).x,a=o.y,o.z):Math.abs(e.x)>=Math.abs(e.y)?(s=1/Math.sqrt(e.x*e.x+e.z*e.z),i=-e.z*s,a=0,e.x*s):(s=1/Math.sqrt(e.x*e.x+e.z*e.z),i=0,a=e.z*s,-e.y*s),F(r)?(r.x=i,r.y=a,r.z=s,r.w=t,r):new sr(i,a,s,t)};var yr=new U,_r=new U,gr=new sr,Tr=new sr,Ar=new sr;sr.packedLength=4,sr.pack=function(e,t,r){return r=C(r,0),t[r++]=e.x,t[r++]=e.y,t[r++]=e.z,t[r]=e.w,t},sr.unpack=function(e,t,r){return t=C(t,0),(r=!F(r)?new sr:r).x=e[t],r.y=e[t+1],r.z=e[t+2],r.w=e[t+3],r},sr.packedInterpolationLength=3,sr.convertPackedArrayForInterpolation=function(e,t,r,n){sr.unpack(e,4*r,Ar),sr.conjugate(Ar,Ar);for(var o=0,i=r-t+1;o<i;o++){var a=3*o;sr.unpack(e,4*(t+o),gr),sr.multiply(gr,Ar,gr),gr.w<0&&sr.negate(gr,gr),sr.computeAxis(gr,yr);var s=sr.computeAngle(gr);(n=!F(n)?[]:n)[a]=yr.x*s,n[1+a]=yr.y*s,n[2+a]=yr.z*s}},sr.unpackInterpolationResult=function(e,t,r,n,o){F(o)||(o=new sr),U.fromArray(e,0,_r);e=U.magnitude(_r);return sr.unpack(t,4*n,Tr),0===e?sr.clone(sr.IDENTITY,gr):sr.fromAxisAngle(_r,e,gr),sr.multiply(gr,Tr,o)},sr.clone=function(e,t){if(F(e))return F(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new sr(e.x,e.y,e.z,e.w)},sr.conjugate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},sr.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},sr.magnitude=function(e){return Math.sqrt(sr.magnitudeSquared(e))},sr.normalize=function(e,t){var r=1/sr.magnitude(e),n=e.x*r,o=e.y*r,i=e.z*r,r=e.w*r;return t.x=n,t.y=o,t.z=i,t.w=r,t},sr.inverse=function(e,t){var r=sr.magnitudeSquared(e);return t=sr.conjugate(e,t),sr.multiplyByScalar(t,1/r,t)},sr.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r},sr.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},sr.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},sr.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},sr.multiply=function(e,t,r){var n=e.x,o=e.y,i=e.z,a=e.w,s=t.x,u=t.y,c=t.z,l=t.w,f=a*u-n*c+o*l+i*s,e=a*c+n*u-o*s+i*l,t=a*l-n*s-o*u-i*c;return r.x=a*s+n*l+o*c-i*u,r.y=f,r.z=e,r.w=t,r},sr.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},sr.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},sr.computeAxis=function(e,t){var r=e.w;if(Math.abs(r-1)<B.EPSILON6)return t.x=t.y=t.z=0,t;r=1/Math.sqrt(1-r*r);return t.x=e.x*r,t.y=e.y*r,t.z=e.z*r,t},sr.computeAngle=function(e){return Math.abs(e.w-1)<B.EPSILON6?0:2*Math.acos(e.w)};var Rr=new sr;sr.lerp=function(e,t,r,n){return Rr=sr.multiplyByScalar(t,r,Rr),n=sr.multiplyByScalar(e,1-r,n),sr.add(Rr,n,n)};var Sr=new sr,Or=new sr,vr=new sr;sr.slerp=function(e,t,r,n){var o=sr.dot(e,t),i=t;if(o<0&&(o=-o,i=Sr=sr.negate(t,Sr)),1-o<B.EPSILON6)return sr.lerp(e,i,r,n);o=Math.acos(o);return Or=sr.multiplyByScalar(e,Math.sin((1-r)*o),Or),vr=sr.multiplyByScalar(i,Math.sin(r*o),vr),n=sr.add(Or,vr,n),sr.multiplyByScalar(n,1/Math.sin(o),n)},sr.log=function(e,t){var r=B.acosClamped(e.w),n=0;return 0!==r&&(n=r/Math.sin(r)),U.multiplyByScalar(e,n,t)},sr.exp=function(e,t){var r=U.magnitude(e),n=0;return 0!==r&&(n=Math.sin(r)/r),t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=Math.cos(r),t};var Ir=new U,Nr=new U,wr=new sr,Cr=new sr;sr.computeInnerQuadrangle=function(e,t,r,n){var o=sr.conjugate(t,wr);sr.multiply(o,r,Cr);r=sr.log(Cr,Ir);sr.multiply(o,e,Cr);e=sr.log(Cr,Nr);return U.add(r,e,r),U.multiplyByScalar(r,.25,r),U.negate(r,r),sr.exp(r,wr),sr.multiply(t,wr,n)},sr.squad=function(e,t,r,n,o,i){t=sr.slerp(e,t,o,wr),n=sr.slerp(r,n,o,Cr);return sr.slerp(t,n,2*o*(1-o),i)};for(var Mr=new sr,ir=1.9011074535173003,br=ar.supportsTypedArrays()?new Float32Array(8):[],xr=ar.supportsTypedArrays()?new Float32Array(8):[],Pr=ar.supportsTypedArrays()?new Float32Array(8):[],Dr=ar.supportsTypedArrays()?new Float32Array(8):[],Lr=0;Lr<7;++Lr){var Fr=Lr+1,Ur=2*Fr+1;br[Lr]=1/(Fr*Ur),xr[Lr]=Fr/Ur}function zr(e,t,r){this.heading=C(e,0),this.pitch=C(t,0),this.roll=C(r,0)}function Br(e,t,r){for(var n,o,i=0,a=e.length-1;i<=a;)if((o=r(e[n=~~((i+a)/2)],t))<0)i=1+n;else{if(!(0<o))return n;a=n-1}return~(a+1)}function qr(){function g(e,t,r,n,o,i,a){var s=e>>>0;return e=(r=r&&s&&{2:"0b",8:"0",16:"0x"}[t]||"")+S(s.toString(t),i||0,"0",!1),O(e,r,n,o,a)}function T(e,t,r,n,o,i){return null!=n&&(e=e.slice(0,n)),O(e,"",t,r,o,i)}var A=arguments,R=0,e=A[R++],S=function(e,t,r,n){r=r||" ";r=e.length>=t?"":Array(1+t-e.length>>>0).join(r);return n?e+r:r+e},O=function(e,t,r,n,o,i){var a=n-e.length;return e=0<a?r||!o?S(e,n,i,r):e.slice(0,t.length)+S("",a,"0",!0)+e.slice(t.length):e};return e.replace(/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,function(e,t,r,n,o,i,a){var s,u,c,l,f;if("%%"==e)return"%";for(var h=!1,p="",m=!1,d=!1,E=" ",y=r.length,_=0;r&&_<y;_++)switch(r.charAt(_)){case" ":p=" ";break;case"+":p="+";break;case"-":h=!0;break;case"'":E=r.charAt(_+1);break;case"0":m=!0;break;case"#":d=!0}switch((n=n?"*"==n?+A[R++]:"*"==n.charAt(0)?+A[n.slice(1,-1)]:+n:0)<0&&(n=-n,h=!0),i=i?"*"==i?+A[R++]:"*"==i.charAt(0)?+A[i.slice(1,-1)]:+i:-1<"fFeE".indexOf(a)?6:"d"==a?0:void 0,f=t?A[t.slice(0,-1)]:A[R++],a){case"s":return T(String(f),h,n,i,m,E);case"c":return T(String.fromCharCode(+f),h,n,i,m);case"b":return g(f,2,d,h,n,i,m);case"o":return g(f,8,d,h,n,i,m);case"x":return g(f,16,d,h,n,i,m);case"X":return g(f,16,d,h,n,i,m).toUpperCase();case"u":return g(f,10,d,h,n,i,m);case"i":case"d":return s=+f||0,f=(u=(s=Math.round(s-s%1))<0?"-":p)+S(String(Math.abs(s)),i,"0",!1),O(f,u,h,n,m);case"e":case"E":case"f":case"F":case"g":case"G":return u=(s=+f)<0?"-":p,c=["toExponential","toFixed","toPrecision"]["efg".indexOf(a.toLowerCase())],l=["toString","toUpperCase"]["eEfFgG".indexOf(a)%2],f=u+Math.abs(s)[c](i),O(f,u,h,n,m)[l]();default:return e}})}function Gr(e,t,r,n,o,i,a,s){this.year=e,this.month=t,this.day=r,this.hour=n,this.minute=o,this.second=i,this.millisecond=a,this.isLeapSecond=s}function jr(e){return e%4==0&&e%100!=0||e%400==0}function Hr(e,t){this.julianDate=e,this.offset=t}br[7]=ir/136,xr[7]=8*ir/17,sr.fastSlerp=function(e,t,r,n){var o,i=sr.dot(e,t);0<=i?o=1:(o=-1,i=-i);for(var a=i-1,i=1-r,s=r*r,u=i*i,c=7;0<=c;--c)Pr[c]=(br[c]*s-xr[c])*a,Dr[c]=(br[c]*u-xr[c])*a;r=o*r*(1+Pr[0]*(1+Pr[1]*(1+Pr[2]*(1+Pr[3]*(1+Pr[4]*(1+Pr[5]*(1+Pr[6]*(1+Pr[7])))))))),i*=1+Dr[0]*(1+Dr[1]*(1+Dr[2]*(1+Dr[3]*(1+Dr[4]*(1+Dr[5]*(1+Dr[6]*(1+Dr[7]))))))),i=sr.multiplyByScalar(e,i,Mr);return sr.multiplyByScalar(t,r,n),sr.add(i,n,n)},sr.fastSquad=function(e,t,r,n,o,i){t=sr.fastSlerp(e,t,o,wr),n=sr.fastSlerp(r,n,o,Cr);return sr.fastSlerp(t,n,2*o*(1-o),i)},sr.equals=function(e,t){return e===t||F(e)&&F(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},sr.equalsEpsilon=function(e,t,r){return r=C(r,0),e===t||F(e)&&F(t)&&Math.abs(e.x-t.x)<=r&&Math.abs(e.y-t.y)<=r&&Math.abs(e.z-t.z)<=r&&Math.abs(e.w-t.w)<=r},sr.ZERO=Object.freeze(new sr(0,0,0,0)),sr.IDENTITY=Object.freeze(new sr(0,0,0,1)),sr.prototype.clone=function(e){return sr.clone(this,e)},sr.prototype.equals=function(e){return sr.equals(this,e)},sr.prototype.equalsEpsilon=function(e,t){return sr.equalsEpsilon(this,e,t)},sr.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},sr.from_euler=function(e,t,r,n){var o=Math.cos(.5*t),i=Math.cos(.5*r),a=Math.cos(.5*e),s=Math.sin(.5*t),u=Math.sin(.5*r),c=Math.sin(.5*e),t=o*i*a-s*u*c,r=s*u*a+o*i*c,e=s*i*a+o*u*c,c=o*u*a-s*i*c;return F(n)?(n.x=r,n.y=e,n.z=c,n.w=t,n):n=new sr(r,e,c,t)},sr.to_euler=function(e,t){F(t)||(t=new U);var r=e.w,n=e.x,o=e.y,i=e.z,a=n*n,s=o*o,u=i*i,e=n*o+i*r;return.499<e?(t.x=0,t.y=2*Math.atan2(n,r),t.z=B.PI_OVER_TWO):e<-.499?(t.x=0,t.y=2*-Math.atan2(n,r),t.z=-B.PI_OVER_TWO):(t.y=Math.atan2(2*o*r-2*n*i,1-2*s-2*u),t.z=Math.asin(2*n*o+2*i*r),t.x=Math.atan2(2*n*r-2*o*i,1-2*a-2*u)),t},zr.fromQuaternion=function(e,t){F(t)||(t=new zr);var r=2*(e.w*e.y-e.z*e.x),n=1-2*(e.x*e.x+e.y*e.y),o=2*(e.w*e.x+e.y*e.z),i=1-2*(e.y*e.y+e.z*e.z),e=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(e,i),t.roll=Math.atan2(o,n),t.pitch=-B.asinClamped(r),t},zr.fromDegrees=function(e,t,r,n){return(n=!F(n)?new zr:n).heading=e*B.RADIANS_PER_DEGREE,n.pitch=t*B.RADIANS_PER_DEGREE,n.roll=r*B.RADIANS_PER_DEGREE,n},zr.clone=function(e,t){if(F(e))return F(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new zr(e.heading,e.pitch,e.roll)},zr.equals=function(e,t){return e===t||F(e)&&F(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll},zr.equalsEpsilon=function(e,t,r,n){return e===t||F(e)&&F(t)&&B.equalsEpsilon(e.heading,t.heading,r,n)&&B.equalsEpsilon(e.pitch,t.pitch,r,n)&&B.equalsEpsilon(e.roll,t.roll,r,n)},zr.prototype.clone=function(e){return zr.clone(this,e)},zr.prototype.equals=function(e){return zr.equals(this,e)},zr.prototype.equalsEpsilon=function(e,t,r){return zr.equalsEpsilon(this,e,t,r)},zr.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var Vr=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),Wr=Object.freeze({UTC:0,TAI:1}),Yr=new Gr,Xr=[31,28,31,30,31,30,31,31,30,31,30,31];function kr(e,t){return cn.compare(e.julianDate,t.julianDate)}var Kr=new Hr;function Zr(e){Kr.julianDate=e;var t=cn.leapSeconds,r=Br(t,Kr,kr),n=t[r=(r=r<0?~r:r)>=t.length?t.length-1:r].offset;0<r&&n<cn.secondsDifference(t[r].julianDate,e)&&(n=t[--r].offset),cn.addSeconds(e,n,e)}function Jr(e,t){Kr.julianDate=e;var r=cn.leapSeconds,n=Br(r,Kr,kr);if(0===(n=n<0?~n:n))return cn.addSeconds(e,-r[0].offset,t);if(n>=r.length)return cn.addSeconds(e,-r[n-1].offset,t);var o=cn.secondsDifference(r[n].julianDate,e);return 0===o?cn.addSeconds(e,-r[n].offset,t):o<=1?void 0:cn.addSeconds(e,-r[--n].offset,t)}function Qr(e,t,r){var n=t/Vr.SECONDS_PER_DAY|0;return e+=n,(t-=Vr.SECONDS_PER_DAY*n)<0&&(e--,t+=Vr.SECONDS_PER_DAY),r.dayNumber=e,r.secondsOfDay=t,r}function $r(e,t,r,n,o,i,a){var s=(t-14)/12|0,e=e+4800+s,r=(1461*e/4|0)+(367*(t-2-12*s)/12|0)-(3*((e+100)/100|0)/4|0)+r-32075;(n-=12)<0&&(n+=24);a=i+(n*Vr.SECONDS_PER_HOUR+o*Vr.SECONDS_PER_MINUTE+a*Vr.SECONDS_PER_MILLISECOND);return 43200<=a&&--r,[r,a]}var en=/^(\d{4})$/,tn=/^(\d{4})-(\d{2})$/,rn=/^(\d{4})-?(\d{3})$/,nn=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,on=/^(\d{4})-?(\d{2})-?(\d{2})$/,ir=/([Z+\-])?(\d{2})?:?(\d{2})?$/,an=/^(\d{2})(\.\d+)?/.source+ir.source,sn=/^(\d{2}):?(\d{2})(\.\d+)?/.source+ir.source,un=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+ir.source;function cn(e,t,r){this.dayNumber=void 0,this.secondsOfDay=void 0,e=C(e,0),t=C(t,0),r=C(r,Wr.UTC);var n=0|e;Qr(n,t+=(e-n)*Vr.SECONDS_PER_DAY,this),r===Wr.UTC&&Zr(this)}cn.fromGregorianDate=function(e,t){e=$r(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return F(t)?(Qr(e[0],e[1],t),Zr(t),t):new cn(e[0],e[1],Wr.UTC)},cn.fromDate=function(e,t){e=$r(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return F(t)?(Qr(e[0],e[1],t),Zr(t),t):new cn(e[0],e[1],Wr.UTC)},cn.fromIso8601=function(e,t){var r,n,o,i,a,s=(e=e.replace(",",".")).split("T"),u=1,c=1,l=0,f=0,h=0,p=0,m=s[0],e=s[1];if(null!==(s=m.match(on))?(o=+s[1],u=+s[2],c=+s[3]):null!==(s=m.match(tn))?(o=+s[1],u=+s[2]):null!==(s=m.match(en))?o=+s[1]:(null!==(s=m.match(rn))?(o=+s[1],i=+s[2],n=jr(o)):null!==(s=m.match(nn))&&(o=+s[1],i=7*+s[2]+(+s[3]||0)-new Date(Date.UTC(o,0,4)).getUTCDay()-3),(r=new Date(Date.UTC(o,0,1))).setUTCDate(i),u=r.getUTCMonth()+1,c=r.getUTCDate()),n=jr(o),F(e)){null!==(s=e.match(un))?(l=+s[1],f=+s[2],h=+s[3],p=1e3*+(s[4]||0),a=5):null!==(s=e.match(sn))?(l=+s[1],f=+s[2],h=60*+(s[3]||0),a=4):null!==(s=e.match(an))&&(l=+s[1],f=60*+(s[2]||0),a=3);var d=s[a],E=+s[a+1],y=+(s[a+2]||0);switch(d){case"+":l-=E,f-=y;break;case"-":l+=E,f+=y;break;case"Z":break;default:f+=new Date(Date.UTC(o,u-1,c,l,f)).getTimezoneOffset()}}d=60===h;for(d&&h--;60<=f;)f-=60,l++;for(;24<=l;)l-=24,c++;for(r=n&&2===u?29:Xr[u-1];r<c;)c-=r,12<++u&&(u-=12,o++),r=n&&2===u?29:Xr[u-1];for(;f<0;)f+=60,l--;for(;l<0;)l+=24,c--;for(;c<1;)--u<1&&(u+=12,o--),c+=r=n&&2===u?29:Xr[u-1];p=$r(o,u,c,l,f,h,p);return F(t)?(Qr(p[0],p[1],t),Zr(t)):t=new cn(p[0],p[1],Wr.UTC),d&&cn.addSeconds(t,1,t),t},cn.now=function(e){return cn.fromDate(new Date,e)};var ln=new cn(0,0,Wr.TAI);function fn(e,t){if(null===e||"object"!=typeof e)return e;t=C(t,!1);var r,n,o=new e.constructor;for(r in e)e.hasOwnProperty(r)&&(n=e[r],t&&(n=fn(n,t)),o[r]=n);return o}function hn(e,t,r){r=C(r,!1);var n,o,i,a={},s=F(e),u=F(t);if(s)for(n in e)e.hasOwnProperty(n)&&(o=e[n],u&&r&&"object"==typeof o&&t.hasOwnProperty(n)?(i=t[n],a[n]="object"==typeof i?hn(o,i,r):o):a[n]=o);if(u)for(n in t)t.hasOwnProperty(n)&&!a.hasOwnProperty(n)&&(i=t[n],a[n]=i);return a}function pn(e){e instanceof pn?(this.scheme=e.scheme,this.authority=e.authority,this.path=e.path,this.query=e.query,this.fragment=e.fragment):e&&(0<e.indexOf("/sde?/")&&(e=e.replace("/sde?/","/sde/")),e=mn.exec(e),this.scheme=e[1],this.authority=e[2],this.path=e[3],this.query=e[4],this.fragment=e[5],-1<this.path.indexOf("/sde/")&&(this.path=this.path.replace("/sde/","/sde?/")))}cn.toGregorianDate=function(e,t){var r=!1,n=Jr(e,ln);F(n)||(cn.addSeconds(e,-1,ln),n=Jr(ln,ln),r=!0);var o=n.dayNumber,i=n.secondsOfDay;43200<=i&&(o+=1);var a=o+68569|0,s=4*a/146097|0,u=4e3*(1+(a=a-((146097*s+3)/4|0)|0))/1461001|0,e=80*(a=a-(1461*u/4|0)+31|0)/2447|0,n=a-(2447*e/80|0)|0,o=2+e-12*(a=e/11|0)|0,e=100*(s-49)+u+a|0,s=i/Vr.SECONDS_PER_HOUR|0,u=i-s*Vr.SECONDS_PER_HOUR,a=u/Vr.SECONDS_PER_MINUTE|0,i=0|(u-=a*Vr.SECONDS_PER_MINUTE),u=(u-i)/Vr.SECONDS_PER_MILLISECOND;return 23<(s+=12)&&(s-=24),r&&(i+=1),F(t)?(t.year=e,t.month=o,t.day=n,t.hour=s,t.minute=a,t.second=i,t.millisecond=u,t.isLeapSecond=r,t):new Gr(e,o,n,s,a,i,u,r)},cn.toDate=function(e){var t=cn.toGregorianDate(e,Yr),e=t.second;return t.isLeapSecond&&--e,new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,e,t.millisecond))},cn.toIso8601=function(e,t){var r=cn.toGregorianDate(e,Yr),n=r.year,o=r.month,i=r.day,a=r.hour,s=r.minute,e=r.second,r=r.millisecond;return 1e4===n&&1===o&&1===i&&0===a&&0===s&&0===e&&0===r&&(n=9999,o=12,i=31,a=24),F(t)||0===r?F(t)&&0!==t?qr("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",n,o,i,a,s,e,(.01*r).toFixed(t).replace(".","").slice(0,t)):qr("%04d-%02d-%02dT%02d:%02d:%02dZ",n,o,i,a,s,e):qr("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",n,o,i,a,s,e,(.01*r).toString().replace(".",""))},cn.clone=function(e,t){if(F(e))return F(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new cn(e.dayNumber,e.secondsOfDay,Wr.TAI)},cn.compare=function(e,t){var r=e.dayNumber-t.dayNumber;return 0!=r?r:e.secondsOfDay-t.secondsOfDay},cn.equals=function(e,t){return e===t||F(e)&&F(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay},cn.equalsEpsilon=function(e,t,r){return r=C(r,0),e===t||F(e)&&F(t)&&Math.abs(cn.secondsDifference(e,t))<=r},cn.totalDays=function(e){return e.dayNumber+e.secondsOfDay/Vr.SECONDS_PER_DAY},cn.secondsDifference=function(e,t){return(e.dayNumber-t.dayNumber)*Vr.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)},cn.daysDifference=function(e,t){return e.dayNumber-t.dayNumber+(e.secondsOfDay-t.secondsOfDay)/Vr.SECONDS_PER_DAY},cn.computeTaiMinusUtc=function(e){Kr.julianDate=e;var t=cn.leapSeconds,e=Br(t,Kr,kr);return e<0&&(e=~e,--e<0&&(e=0)),t[e].offset},cn.addSeconds=function(e,t,r){return Qr(e.dayNumber,e.secondsOfDay+t,r)},cn.addMinutes=function(e,t,r){t=e.secondsOfDay+t*Vr.SECONDS_PER_MINUTE;return Qr(e.dayNumber,t,r)},cn.addHours=function(e,t,r){t=e.secondsOfDay+t*Vr.SECONDS_PER_HOUR;return Qr(e.dayNumber,t,r)},cn.addDays=function(e,t,r){return Qr(e.dayNumber+t,e.secondsOfDay,r)},cn.lessThan=function(e,t){return cn.compare(e,t)<0},cn.lessThanOrEquals=function(e,t){return cn.compare(e,t)<=0},cn.greaterThan=function(e,t){return 0<cn.compare(e,t)},cn.greaterThanOrEquals=function(e,t){return 0<=cn.compare(e,t)},cn.prototype.clone=function(e){return cn.clone(this,e)},cn.prototype.equals=function(e){return cn.equals(this,e)},cn.prototype.equalsEpsilon=function(e,t){return cn.equalsEpsilon(this,e,t)},cn.prototype.toString=function(){return cn.toIso8601(this)},cn.leapSeconds=[new Hr(new cn(2441317,43210,Wr.TAI),10),new Hr(new cn(2441499,43211,Wr.TAI),11),new Hr(new cn(2441683,43212,Wr.TAI),12),new Hr(new cn(2442048,43213,Wr.TAI),13),new Hr(new cn(2442413,43214,Wr.TAI),14),new Hr(new cn(2442778,43215,Wr.TAI),15),new Hr(new cn(2443144,43216,Wr.TAI),16),new Hr(new cn(2443509,43217,Wr.TAI),17),new Hr(new cn(2443874,43218,Wr.TAI),18),new Hr(new cn(2444239,43219,Wr.TAI),19),new Hr(new cn(2444786,43220,Wr.TAI),20),new Hr(new cn(2445151,43221,Wr.TAI),21),new Hr(new cn(2445516,43222,Wr.TAI),22),new Hr(new cn(2446247,43223,Wr.TAI),23),new Hr(new cn(2447161,43224,Wr.TAI),24),new Hr(new cn(2447892,43225,Wr.TAI),25),new Hr(new cn(2448257,43226,Wr.TAI),26),new Hr(new cn(2448804,43227,Wr.TAI),27),new Hr(new cn(2449169,43228,Wr.TAI),28),new Hr(new cn(2449534,43229,Wr.TAI),29),new Hr(new cn(2450083,43230,Wr.TAI),30),new Hr(new cn(2450630,43231,Wr.TAI),31),new Hr(new cn(2451179,43232,Wr.TAI),32),new Hr(new cn(2453736,43233,Wr.TAI),33),new Hr(new cn(2454832,43234,Wr.TAI),34),new Hr(new cn(2456109,43235,Wr.TAI),35),new Hr(new cn(2457204,43236,Wr.TAI),36),new Hr(new cn(2457754,43237,Wr.TAI),37)],pn.prototype.scheme=null,pn.prototype.authority=null,pn.prototype.path="",pn.prototype.query=null,pn.prototype.fragment=null;var mn=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$");pn.prototype.getScheme=function(){return this.scheme},pn.prototype.getAuthority=function(){return this.authority},pn.prototype.getPath=function(){return this.path},pn.prototype.getQuery=function(){return this.query},pn.prototype.getFragment=function(){return this.fragment},pn.prototype.isAbsolute=function(){return!!this.scheme&&!this.fragment},pn.prototype.isSameDocumentAs=function(e){return e.scheme==this.scheme&&e.authority==this.authority&&e.path==this.path&&e.query==this.query},pn.prototype.equals=function(e){return this.isSameDocumentAs(e)&&e.fragment==this.fragment},pn.prototype.normalize=function(){this.removeDotSegments(),this.scheme&&(this.scheme=this.scheme.toLowerCase()),this.authority&&(this.authority=this.authority.replace(yn,gn).replace(dn,_n)),this.path&&(this.path=this.path.replace(dn,_n)),this.query&&(this.query=this.query.replace(dn,_n)),this.fragment&&(this.fragment=this.fragment.replace(dn,_n))};var dn=/%[0-9a-z]{2}/gi,En=/[a-zA-Z0-9\-\._~]/,yn=/(.*@)?([^@:]*)(:.*)?/;function _n(e){var t=unescape(e);return En.test(t)?t:e.toUpperCase()}function gn(e,t,r,n){return(t||"")+r.toLowerCase()+(n||"")}function Tn(e,t){var r;return"undefined"!=typeof document&&(r=document),Tn._implementation(e,t,r)}pn.prototype.resolve=function(e){var t=new pn;return this.scheme?(t.scheme=this.scheme,t.authority=this.authority,t.path=this.path,t.query=this.query):(t.scheme=e.scheme,this.authority?(t.authority=this.authority,t.path=this.path,t.query=this.query):(t.authority=e.authority,""==this.path?(t.path=e.path,t.query=this.query||e.query):("/"==this.path.charAt(0)?t.path=this.path:e.authority&&""==e.path?t.path="/"+this.path:t.path=e.path.substring(0,e.path.lastIndexOf("/")+1)+this.path,t.removeDotSegments(),t.query=this.query))),t.fragment=this.fragment,t},pn.prototype.removeDotSegments=function(){var e,t=this.path.split("/"),r=[],n=""==t[0];for(n&&t.shift(),""==t[0]&&t.shift();t.length;)".."==(e=t.shift())?r.pop():"."!=e&&r.push(e);"."!=e&&".."!=e||r.push(""),n&&r.unshift(""),this.path=r.join("/")},pn.prototype.toString=function(){var e="";return this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+this.authority),e+=this.path,this.query&&(e+="?"+this.query),this.fragment&&(e+="#"+this.fragment),e},Tn._implementation=function(e,t,r){if(!F(t)){if(void 0===r)return e;t=C(r.baseURI,r.location.href)}t=new pn(t);return new pn(e).resolve(t).toString()};var An,Rn=/^blob:/i;function Sn(e){return Rn.test(e)}var On=/^data:/i;function vn(e){return On.test(e)}var In,Nn,wn={},Cn={};function Mn(e,t,r){return r<0&&(r+=1),1<r&&--r,6*r<1?e+6*(t-e)*r:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function bn(e,t,r,n){this.red=C(e,1),this.green=C(t,1),this.blue=C(r,1),this.alpha=C(n,1)}wn.add=function(e,t){t=e.toLowerCase()+":"+t;F(Cn[t])||(Cn[t]=!0)},wn.remove=function(e,t){t=e.toLowerCase()+":"+t;F(Cn[t])&&delete Cn[t]},wn.contains=function(e){e=function(e){var t=new pn(e);if(t.normalize(),F(e=t.getAuthority())){if(-1===(e=-1!==e.indexOf("@")?e.split("@")[1]:e).indexOf(":")){t=t.getScheme();if("http"===(t=!F(t)?(t=window.location.protocol).substring(0,t.length-1):t))e+=":80";else{if("https"!==t)return;e+=":443"}}return e}}(e);return!(!F(e)||!F(Cn[e]))},wn.clear=function(){Cn={}},bn.fromCartesian4=function(e,t){return F(t)?(t.red=e.x,t.green=e.y,t.blue=e.z,t.alpha=e.w,t):new bn(e.x,e.y,e.z,e.w)},bn.fromBytes=function(e,t,r,n,o){return e=bn.byteToFloat(C(e,255)),t=bn.byteToFloat(C(t,255)),r=bn.byteToFloat(C(r,255)),n=bn.byteToFloat(C(n,255)),F(o)?(o.red=e,o.green=t,o.blue=r,o.alpha=n,o):new bn(e,t,r,n)},bn.fromAlpha=function(e,t,r){return F(r)?(r.red=e.red,r.green=e.green,r.blue=e.blue,r.alpha=t,r):new bn(e.red,e.green,e.blue,t)},ar.supportsTypedArrays()&&(ir=new ArrayBuffer(4),In=new Uint32Array(ir),Nn=new Uint8Array(ir)),bn.fromRgba=function(e,t){return In[0]=e,bn.fromBytes(Nn[0],Nn[1],Nn[2],Nn[3],t)},bn.fromArgb=function(e,t){return In[0]=e,bn.fromBytes(Nn[2],Nn[1],Nn[0],Nn[3],t)},bn.fromMapserver=function(e,t){return In[0]=e,bn.fromBytes(Nn[3],Nn[2],Nn[1],Nn[0],t)},bn.fromHsl=function(e,t,r,n,o){e=C(e,0)%1,t=C(t,0),r=C(r,0),n=C(n,1);var i=r,a=r,s=r;return 0!==t&&(i=Mn(t=2*r-(r=r<.5?r*(1+t):r+t-r*t),r,e+1/3),a=Mn(t,r,e),s=Mn(t,r,e-1/3)),F(o)?(o.red=i,o.green=a,o.blue=s,o.alpha=n,o):new bn(i,a,s,n)},bn.fromRandom=function(e,t){var r=(e=C(e,C.EMPTY_OBJECT)).red;F(r)||(n=C(e.minimumRed,0),o=C(e.maximumRed,1),r=n+B.nextRandomNumber()*(o-n));var n,o=e.green;F(o)||(i=C(e.minimumGreen,0),n=C(e.maximumGreen,1),o=i+B.nextRandomNumber()*(n-i));var i=e.blue;F(i)||(a=C(e.minimumBlue,0),s=C(e.maximumBlue,1),i=a+B.nextRandomNumber()*(s-a));var a,s=e.alpha;return F(s)||(a=C(e.minimumAlpha,0),e=C(e.maximumAlpha,1),s=a+B.nextRandomNumber()*(e-a)),F(t)?(t.red=r,t.green=o,t.blue=i,t.alpha=s,t):new bn(r,o,i,s)};var xn=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,Pn=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,Dn=/^rgba?\(\s*([0-9.]+%?)\s*,\s*([0-9.]+%?)\s*,\s*([0-9.]+%?)(?:\s*,\s*([0-9.]+))?\s*\)$/i,Ln=/^hsla?\(\s*([0-9.]+)\s*,\s*([0-9.]+%)\s*,\s*([0-9.]+%)(?:\s*,\s*([0-9.]+))?\s*\)$/i;bn.fromCssColorString=function(e,t){F(t)||(t=new bn);var r=bn[(e=e.replace(/\s/g,"")).toUpperCase()];if(F(r))return bn.clone(r,t),t;r=xn.exec(e);return null!==r?(t.red=parseInt(r[1],16)/15,t.green=parseInt(r[2],16)/15,t.blue=parseInt(r[3],16)/15,t.alpha=parseInt(C(r[4],"f"),16)/15,t):null!==(r=Pn.exec(e))?(t.red=parseInt(r[1],16)/255,t.green=parseInt(r[2],16)/255,t.blue=parseInt(r[3],16)/255,t.alpha=parseInt(C(r[4],"ff"),16)/255,t):null!==(r=Dn.exec(e))?(t.red=parseFloat(r[1])/("%"===r[1].substr(-1)?100:255),t.green=parseFloat(r[2])/("%"===r[2].substr(-1)?100:255),t.blue=parseFloat(r[3])/("%"===r[3].substr(-1)?100:255),t.alpha=parseFloat(C(r[4],"1.0")),t):null!==(r=Ln.exec(e))?bn.fromHsl(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,parseFloat(C(r[4],"1.0")),t):t=void 0},bn.packedLength=4,bn.pack=function(e,t,r){return r=C(r,0),t[r++]=e.red,t[r++]=e.green,t[r++]=e.blue,t[r]=e.alpha,t},bn.unpack=function(e,t,r){return t=C(t,0),(r=!F(r)?new bn:r).red=e[t++],r.green=e[t++],r.blue=e[t++],r.alpha=e[t],r},bn.byteToFloat=function(e){return e/255},bn.floatToByte=function(e){return 1===e?255:256*e|0},bn.clone=function(e,t){if(F(e))return F(t)?(t.red=e.red,t.green=e.green,t.blue=e.blue,t.alpha=e.alpha,t):new bn(e.red,e.green,e.blue,e.alpha)},bn.equals=function(e,t){return e===t||F(e)&&F(t)&&e.red===t.red&&e.green===t.green&&e.blue===t.blue&&e.alpha===t.alpha},bn.equalsArray=function(e,t,r){return e.red===t[r]&&e.green===t[r+1]&&e.blue===t[r+2]&&e.alpha===t[r+3]},bn.prototype.clone=function(e){return bn.clone(this,e)},bn.prototype.equals=function(e){return bn.equals(this,e)},bn.prototype.equalsEpsilon=function(e,t){return this===e||F(e)&&Math.abs(this.red-e.red)<=t&&Math.abs(this.green-e.green)<=t&&Math.abs(this.blue-e.blue)<=t&&Math.abs(this.alpha-e.alpha)<=t},bn.prototype.toString=function(){return"("+this.red+", "+this.green+", "+this.blue+", "+this.alpha+")"},bn.prototype.toUint16=function(){var e=[];return this.toBytes(e),"0x"+e[3].toString(16)+(e[0]<16?"0":"")+e[0].toString(16)+(e[1]<16?"0":"")+e[1].toString(16)+(e[2]<16?"0":"")+e[2].toString(16)},bn.prototype.toUint16MapServerString=function(){var e=[];return this.toBytes(e),'"#'+(e[0]<16?"0":"")+e[0].toString(16)+(e[1]<16?"0":"")+e[1].toString(16)+(e[2]<16?"0":"")+e[2].toString(16)+(e[3]<16?"0":"")+e[3].toString(16)+'"'},bn.prototype.toCssColorString=function(){var e=bn.floatToByte(this.red),t=bn.floatToByte(this.green),r=bn.floatToByte(this.blue);return 1===this.alpha?"rgb("+e+","+t+","+r+")":"rgba("+e+","+t+","+r+","+this.alpha+")"},bn.prototype.toCssHexString=function(){var e=bn.floatToByte(this.red).toString(16);e.length<2&&(e="0"+e);var t=bn.floatToByte(this.green).toString(16);t.length<2&&(t="0"+t);var r=bn.floatToByte(this.blue).toString(16);if(r.length<2&&(r="0"+r),this.alpha<1){var n=bn.floatToByte(this.alpha).toString(16);return"#"+e+t+r+(n=n.length<2?"0"+n:n)}return"#"+e+t+r},bn.prototype.toBytes=function(e){var t=bn.floatToByte(this.red),r=bn.floatToByte(this.green),n=bn.floatToByte(this.blue),o=bn.floatToByte(this.alpha);return F(e)?(e[0]=t,e[1]=r,e[2]=n,e[3]=o,e):[t,r,n,o]},bn.prototype.toRgba=function(){return Nn[0]=bn.floatToByte(this.red),Nn[1]=bn.floatToByte(this.green),Nn[2]=bn.floatToByte(this.blue),Nn[3]=bn.floatToByte(this.alpha),In[0]},bn.prototype.toArgb=function(){return Nn[3]=bn.floatToByte(this.alpha),Nn[2]=bn.floatToByte(this.red),Nn[1]=bn.floatToByte(this.green),Nn[0]=bn.floatToByte(this.blue),In[0]},bn.prototype.brighten=function(e,t){return t.red=1-(1-this.red)*(e=1-e),t.green=1-(1-this.green)*e,t.blue=1-(1-this.blue)*e,t.alpha=this.alpha,t},bn.prototype.darken=function(e,t){return t.red=this.red*(e=1-e),t.green=this.green*e,t.blue=this.blue*e,t.alpha=this.alpha,t},bn.prototype.withAlpha=function(e,t){return bn.fromAlpha(this,e,t)},bn.add=function(e,t,r){return r.red=e.red+t.red,r.green=e.green+t.green,r.blue=e.blue+t.blue,r.alpha=e.alpha+t.alpha,r},bn.subtract=function(e,t,r){return r.red=e.red-t.red,r.green=e.green-t.green,r.blue=e.blue-t.blue,r.alpha=e.alpha-t.alpha,r},bn.multiply=function(e,t,r){return r.red=e.red*t.red,r.green=e.green*t.green,r.blue=e.blue*t.blue,r.alpha=e.alpha*t.alpha,r},bn.divide=function(e,t,r){return r.red=e.red/t.red,r.green=e.green/t.green,r.blue=e.blue/t.blue,r.alpha=e.alpha/t.alpha,r},bn.mod=function(e,t,r){return r.red=e.red%t.red,r.green=e.green%t.green,r.blue=e.blue%t.blue,r.alpha=e.alpha%t.alpha,r},bn.lerp=function(e,t,r,n){return n.red=B.lerp(e.red,t.red,r),n.green=B.lerp(e.green,t.green,r),n.blue=B.lerp(e.blue,t.blue,r),n.alpha=B.lerp(e.alpha,t.alpha,r),n},bn.multiplyByScalar=function(e,t,r){return r.red=e.red*t,r.green=e.green*t,r.blue=e.blue*t,r.alpha=e.alpha*t,r},bn.divideByScalar=function(e,t,r){return r.red=e.red/t,r.green=e.green/t,r.blue=e.blue/t,r.alpha=e.alpha/t,r},bn.ALICEBLUE=Object.freeze(bn.fromCssColorString("#F0F8FF")),bn.ANTIQUEWHITE=Object.freeze(bn.fromCssColorString("#FAEBD7")),bn.AQUA=Object.freeze(bn.fromCssColorString("#00FFFF")),bn.AQUAMARINE=Object.freeze(bn.fromCssColorString("#7FFFD4")),bn.AZURE=Object.freeze(bn.fromCssColorString("#F0FFFF")),bn.BEIGE=Object.freeze(bn.fromCssColorString("#F5F5DC")),bn.BISQUE=Object.freeze(bn.fromCssColorString("#FFE4C4")),bn.BLACK=Object.freeze(bn.fromCssColorString("#000000")),bn.BLANCHEDALMOND=Object.freeze(bn.fromCssColorString("#FFEBCD")),bn.BLUE=Object.freeze(bn.fromCssColorString("#0000FF")),bn.BLUEVIOLET=Object.freeze(bn.fromCssColorString("#8A2BE2")),bn.BROWN=Object.freeze(bn.fromCssColorString("#A52A2A")),bn.BURLYWOOD=Object.freeze(bn.fromCssColorString("#DEB887")),bn.CADETBLUE=Object.freeze(bn.fromCssColorString("#5F9EA0")),bn.CHARTREUSE=Object.freeze(bn.fromCssColorString("#7FFF00")),bn.CHOCOLATE=Object.freeze(bn.fromCssColorString("#D2691E")),bn.CORAL=Object.freeze(bn.fromCssColorString("#FF7F50")),bn.CORNFLOWERBLUE=Object.freeze(bn.fromCssColorString("#6495ED")),bn.CORNSILK=Object.freeze(bn.fromCssColorString("#FFF8DC")),bn.CRIMSON=Object.freeze(bn.fromCssColorString("#DC143C")),bn.CYAN=Object.freeze(bn.fromCssColorString("#00FFFF")),bn.DARKBLUE=Object.freeze(bn.fromCssColorString("#00008B")),bn.DARKCYAN=Object.freeze(bn.fromCssColorString("#008B8B")),bn.DARKGOLDENROD=Object.freeze(bn.fromCssColorString("#B8860B")),bn.DARKGRAY=Object.freeze(bn.fromCssColorString("#A9A9A9")),bn.DARKGREEN=Object.freeze(bn.fromCssColorString("#006400")),bn.DARKGREY=bn.DARKGRAY,bn.DARKKHAKI=Object.freeze(bn.fromCssColorString("#BDB76B")),bn.DARKMAGENTA=Object.freeze(bn.fromCssColorString("#8B008B")),bn.DARKOLIVEGREEN=Object.freeze(bn.fromCssColorString("#556B2F")),bn.DARKORANGE=Object.freeze(bn.fromCssColorString("#FF8C00")),bn.DARKORCHID=Object.freeze(bn.fromCssColorString("#9932CC")),bn.DARKRED=Object.freeze(bn.fromCssColorString("#8B0000")),bn.DARKSALMON=Object.freeze(bn.fromCssColorString("#E9967A")),bn.DARKSEAGREEN=Object.freeze(bn.fromCssColorString("#8FBC8F")),bn.DARKSLATEBLUE=Object.freeze(bn.fromCssColorString("#483D8B")),bn.DARKSLATEGRAY=Object.freeze(bn.fromCssColorString("#2F4F4F")),bn.DARKSLATEGREY=bn.DARKSLATEGRAY,bn.DARKTURQUOISE=Object.freeze(bn.fromCssColorString("#00CED1")),bn.DARKVIOLET=Object.freeze(bn.fromCssColorString("#9400D3")),bn.DEEPPINK=Object.freeze(bn.fromCssColorString("#FF1493")),bn.DEEPSKYBLUE=Object.freeze(bn.fromCssColorString("#00BFFF")),bn.DIMGRAY=Object.freeze(bn.fromCssColorString("#696969")),bn.DIMGREY=bn.DIMGRAY,bn.DODGERBLUE=Object.freeze(bn.fromCssColorString("#1E90FF")),bn.FIREBRICK=Object.freeze(bn.fromCssColorString("#B22222")),bn.FLORALWHITE=Object.freeze(bn.fromCssColorString("#FFFAF0")),bn.FORESTGREEN=Object.freeze(bn.fromCssColorString("#228B22")),bn.FUCHSIA=Object.freeze(bn.fromCssColorString("#FF00FF")),bn.GAINSBORO=Object.freeze(bn.fromCssColorString("#DCDCDC")),bn.GHOSTWHITE=Object.freeze(bn.fromCssColorString("#F8F8FF")),bn.GOLD=Object.freeze(bn.fromCssColorString("#FFD700")),bn.GOLDENROD=Object.freeze(bn.fromCssColorString("#DAA520")),bn.GRAY=Object.freeze(bn.fromCssColorString("#808080")),bn.GREEN=Object.freeze(bn.fromCssColorString("#008000")),bn.GREENYELLOW=Object.freeze(bn.fromCssColorString("#ADFF2F")),bn.GREY=bn.GRAY,bn.HONEYDEW=Object.freeze(bn.fromCssColorString("#F0FFF0")),bn.HOTPINK=Object.freeze(bn.fromCssColorString("#FF69B4")),bn.INDIANRED=Object.freeze(bn.fromCssColorString("#CD5C5C")),bn.INDIGO=Object.freeze(bn.fromCssColorString("#4B0082")),bn.IVORY=Object.freeze(bn.fromCssColorString("#FFFFF0")),bn.KHAKI=Object.freeze(bn.fromCssColorString("#F0E68C")),bn.LAVENDER=Object.freeze(bn.fromCssColorString("#E6E6FA")),bn.LAVENDAR_BLUSH=Object.freeze(bn.fromCssColorString("#FFF0F5")),bn.LAWNGREEN=Object.freeze(bn.fromCssColorString("#7CFC00")),bn.LEMONCHIFFON=Object.freeze(bn.fromCssColorString("#FFFACD")),bn.LIGHTBLUE=Object.freeze(bn.fromCssColorString("#ADD8E6")),bn.LIGHTCORAL=Object.freeze(bn.fromCssColorString("#F08080")),bn.LIGHTCYAN=Object.freeze(bn.fromCssColorString("#E0FFFF")),bn.LIGHTGOLDENRODYELLOW=Object.freeze(bn.fromCssColorString("#FAFAD2")),bn.LIGHTGRAY=Object.freeze(bn.fromCssColorString("#D3D3D3")),bn.LIGHTGREEN=Object.freeze(bn.fromCssColorString("#90EE90")),bn.LIGHTGREY=bn.LIGHTGRAY,bn.LIGHTPINK=Object.freeze(bn.fromCssColorString("#FFB6C1")),bn.LIGHTSEAGREEN=Object.freeze(bn.fromCssColorString("#20B2AA")),bn.LIGHTSKYBLUE=Object.freeze(bn.fromCssColorString("#87CEFA")),bn.LIGHTSLATEGRAY=Object.freeze(bn.fromCssColorString("#778899")),bn.LIGHTSLATEGREY=bn.LIGHTSLATEGRAY,bn.LIGHTSTEELBLUE=Object.freeze(bn.fromCssColorString("#B0C4DE")),bn.LIGHTYELLOW=Object.freeze(bn.fromCssColorString("#FFFFE0")),bn.LIME=Object.freeze(bn.fromCssColorString("#00FF00")),bn.LIMEGREEN=Object.freeze(bn.fromCssColorString("#32CD32")),bn.LINEN=Object.freeze(bn.fromCssColorString("#FAF0E6")),bn.MAGENTA=Object.freeze(bn.fromCssColorString("#FF00FF")),bn.MAROON=Object.freeze(bn.fromCssColorString("#800000")),bn.MEDIUMAQUAMARINE=Object.freeze(bn.fromCssColorString("#66CDAA")),bn.MEDIUMBLUE=Object.freeze(bn.fromCssColorString("#0000CD")),bn.MEDIUMORCHID=Object.freeze(bn.fromCssColorString("#BA55D3")),bn.MEDIUMPURPLE=Object.freeze(bn.fromCssColorString("#9370DB")),bn.MEDIUMSEAGREEN=Object.freeze(bn.fromCssColorString("#3CB371")),bn.MEDIUMSLATEBLUE=Object.freeze(bn.fromCssColorString("#7B68EE")),bn.MEDIUMSPRINGGREEN=Object.freeze(bn.fromCssColorString("#00FA9A")),bn.MEDIUMTURQUOISE=Object.freeze(bn.fromCssColorString("#48D1CC")),bn.MEDIUMVIOLETRED=Object.freeze(bn.fromCssColorString("#C71585")),bn.MIDNIGHTBLUE=Object.freeze(bn.fromCssColorString("#191970")),bn.MINTCREAM=Object.freeze(bn.fromCssColorString("#F5FFFA")),bn.MISTYROSE=Object.freeze(bn.fromCssColorString("#FFE4E1")),bn.MOCCASIN=Object.freeze(bn.fromCssColorString("#FFE4B5")),bn.NAVAJOWHITE=Object.freeze(bn.fromCssColorString("#FFDEAD")),bn.NAVY=Object.freeze(bn.fromCssColorString("#000080")),bn.OLDLACE=Object.freeze(bn.fromCssColorString("#FDF5E6")),bn.OLIVE=Object.freeze(bn.fromCssColorString("#808000")),bn.OLIVEDRAB=Object.freeze(bn.fromCssColorString("#6B8E23")),bn.ORANGE=Object.freeze(bn.fromCssColorString("#FFA500")),bn.ORANGERED=Object.freeze(bn.fromCssColorString("#FF4500")),bn.ORCHID=Object.freeze(bn.fromCssColorString("#DA70D6")),bn.PALEGOLDENROD=Object.freeze(bn.fromCssColorString("#EEE8AA")),bn.PALEGREEN=Object.freeze(bn.fromCssColorString("#98FB98")),bn.PALETURQUOISE=Object.freeze(bn.fromCssColorString("#AFEEEE")),bn.PALEVIOLETRED=Object.freeze(bn.fromCssColorString("#DB7093")),bn.PAPAYAWHIP=Object.freeze(bn.fromCssColorString("#FFEFD5")),bn.PEACHPUFF=Object.freeze(bn.fromCssColorString("#FFDAB9")),bn.PERU=Object.freeze(bn.fromCssColorString("#CD853F")),bn.PINK=Object.freeze(bn.fromCssColorString("#FFC0CB")),bn.PLUM=Object.freeze(bn.fromCssColorString("#DDA0DD")),bn.POWDERBLUE=Object.freeze(bn.fromCssColorString("#B0E0E6")),bn.PURPLE=Object.freeze(bn.fromCssColorString("#800080")),bn.RED=Object.freeze(bn.fromCssColorString("#FF0000")),bn.ROSYBROWN=Object.freeze(bn.fromCssColorString("#BC8F8F")),bn.ROYALBLUE=Object.freeze(bn.fromCssColorString("#4169E1")),bn.SADDLEBROWN=Object.freeze(bn.fromCssColorString("#8B4513")),bn.SALMON=Object.freeze(bn.fromCssColorString("#FA8072")),bn.SANDYBROWN=Object.freeze(bn.fromCssColorString("#F4A460")),bn.SEAGREEN=Object.freeze(bn.fromCssColorString("#2E8B57")),bn.SEASHELL=Object.freeze(bn.fromCssColorString("#FFF5EE")),bn.SIENNA=Object.freeze(bn.fromCssColorString("#A0522D")),bn.SILVER=Object.freeze(bn.fromCssColorString("#C0C0C0")),bn.SKYBLUE=Object.freeze(bn.fromCssColorString("#87CEEB")),bn.SLATEBLUE=Object.freeze(bn.fromCssColorString("#6A5ACD")),bn.SLATEGRAY=Object.freeze(bn.fromCssColorString("#708090")),bn.SLATEGREY=bn.SLATEGRAY,bn.SNOW=Object.freeze(bn.fromCssColorString("#FFFAFA")),bn.SPRINGGREEN=Object.freeze(bn.fromCssColorString("#00FF7F")),bn.STEELBLUE=Object.freeze(bn.fromCssColorString("#4682B4")),bn.TAN=Object.freeze(bn.fromCssColorString("#D2B48C")),bn.TEAL=Object.freeze(bn.fromCssColorString("#008080")),bn.THISTLE=Object.freeze(bn.fromCssColorString("#D8BFD8")),bn.TOMATO=Object.freeze(bn.fromCssColorString("#FF6347")),bn.TURQUOISE=Object.freeze(bn.fromCssColorString("#40E0D0")),bn.VIOLET=Object.freeze(bn.fromCssColorString("#EE82EE")),bn.WHEAT=Object.freeze(bn.fromCssColorString("#F5DEB3")),bn.WHITE=Object.freeze(bn.fromCssColorString("#FFFFFF")),bn.WHITESMOKE=Object.freeze(bn.fromCssColorString("#F5F5F5")),bn.YELLOW=Object.freeze(bn.fromCssColorString("#FFFF00")),bn.YELLOWGREEN=Object.freeze(bn.fromCssColorString("#9ACD32")),bn.TRANSPARENT=Object.freeze(new bn(0,0,0,0));var Fn={_minimumDisableDepthTestDistance:0,_farToNearRatio:1e3,_logarithmicDepthFarToNearRatio:1e9,_nearToFarDistance2D:175e4,_observerEventWaitTime:500,_terrainExaggeration:1,_max_fps:65,_min_fps:60,_max_frame_time:1e3/60,_create_terrain_num:2,_reclaim_memory_size:1024<<20,_resource_life_time:1e3,_max_range:100,_min_range:8,_drawSpread:.58,_drawDistance:8,_min_observer_height:1,_max_observer_height:12e6,_underground_mode:!1,_camera_height:0,_auxplane_elevation:0,_auxplane_elevation_relative:0,_auxplane_elevation_max:0,_draw_dem_skirt:!0,_auxplane_grid_size:.1,_first_person_height:1.6,_highlight_continue_time:10,_highlight_interval_time:.5,_highlight_color:3372209817,_skyline_valid_distance:1200,_enable_globe_cursor:!0,_default_highlight:!0,_port_list:[],_modelLodRange:{level21:120,level20:450,level19:600},_baseUrlString:"",_server_ip:"",_enable_pack_bim:!1,_waterAnimationSpeed:.004,_waterAmplitude:2};Object.defineProperties(Fn,{minimumDisableDepthTestDistance:{get:function(){return Fn._minimumDisableDepthTestDistance},set:function(e){Fn._minimumDisableDepthTestDistance=e}},farToNearRatio:{get:function(){return Fn._farToNearRatio},set:function(e){Fn._farToNearRatio=e}},logarithmicDepthFarToNearRatio:{get:function(){return Fn._logarithmicDepthFarToNearRatio},set:function(e){Fn._logarithmicDepthFarToNearRatio=e}},nearToFarDistance2D:{get:function(){return Fn._nearToFarDistance2D},set:function(e){Fn._nearToFarDistance2D=e}},observerEventWaitTime:{get:function(){return Fn._observerEventWaitTime},set:function(e){Fn._observerEventWaitTime=e}},terrainExaggeration:{get:function(){return Fn._terrainExaggeration},set:function(e){Fn._terrainExaggeration=e}},max_fps:{get:function(){return Fn._max_fps},set:function(e){Fn._max_fps=e}},min_fps:{get:function(){return Fn._min_fps},set:function(e){e!=Fn._min_fps&&(Fn._min_fps=e,Fn._max_frame_time=1e3/e)}},create_terrain_num:{get:function(){return Fn._create_terrain_num},set:function(e){Fn._create_terrain_num=e}},reclaim_memory_size:{get:function(){return Fn._reclaim_memory_size},set:function(e){Fn._reclaim_memory_size=e}},resource_life_time:{get:function(){return Fn._resource_life_time},set:function(e){Fn._resource_life_time=e}},max_range:{get:function(){return Fn._max_range},set:function(e){Fn._max_range=e}},min_range:{get:function(){return Fn._min_range},set:function(e){Fn._min_range=e}},drawSpread:{get:function(){return Fn._drawSpread},set:function(e){Fn._drawSpread=e}},drawDistance:{get:function(){return Fn._drawDistance},set:function(e){Fn._drawDistance=e}},auxplaneElevationMax:{get:function(){return Fn._auxplane_elevation_max},set:function(e){Fn._auxplane_elevation_max=e}},minObserverHeight:{get:function(){return Fn._min_observer_height},set:function(e){Fn._min_observer_height=e}},maxObserverHeight:{get:function(){return Fn._max_observer_height},set:function(e){Fn._max_observer_height=e}},undergroundMode:{get:function(){return Fn._underground_mode},set:function(e){Fn._underground_mode=e}},cameraHeight:{get:function(){return Fn._camera_height},set:function(e){Fn._camera_height=e}},auxplaneElevation:{get:function(){return Fn._auxplane_elevation},set:function(e){Fn._auxplane_elevation=e}},auxplaneElevationRelative:{get:function(){return Fn._auxplane_elevation_relative},set:function(e){Fn._auxplane_elevation_relative=e}},drawDemSkirt:{get:function(){return Fn._draw_dem_skirt},set:function(e){Fn._draw_dem_skirt=e}},auxplaneGridSize:{get:function(){return Fn._auxplane_grid_size},set:function(e){Fn._auxplane_grid_size=e}},first_person_height:{get:function(){return Fn._first_person_height},set:function(e){Fn._first_person_height=e}},highlight_continue_time:{get:function(){return Fn._highlight_continue_time},set:function(e){Fn._highlight_continue_time=e}},highlight_interval_time:{get:function(){return Fn._highlight_interval_time},set:function(e){Fn._highlight_interval_time=e}},highlight_color:{get:function(){return Fn._highlight_color},set:function(e){Fn._highlight_color=e}},skyline_valid_distance:{get:function(){return Fn._skyline_valid_distance},set:function(e){Fn._skyline_valid_distance=e}},enable_globe_cursor:{get:function(){return Fn._enable_globe_cursor},set:function(e){Fn._enable_globe_cursor=e}},default_highlight:{get:function(){return Fn._default_highlight},set:function(e){Fn._default_highlight=e}},opaqueFrustumNearOffset:{get:function(){return.9999}},port_list:{get:function(){return Fn._port_list}},modelLodRange:{get:function(){return Fn._modelLodRange},set:function(e){null!=e&&(Fn._modelLodRange.level19=e.level19,Fn._modelLodRange.level20=e.level20,Fn._modelLodRange.level21=e.level21)}},baseUrlString:{get:function(){return Fn._baseUrlString},set:function(e){null!=e&&(Fn._baseUrlString=e)}},server_ip:{get:function(){return Fn._server_ip},set:function(e){null!=e&&(Fn._server_ip=e)}},enable_pack_bim:{get:function(){return Fn._enable_pack_bim},set:function(e){null!=e&&(Fn._enable_pack_bim=e)}},waterAnimationSpeed:{get:function(){return Fn._waterAnimationSpeed},set:function(e){Fn._waterAnimationSpeed=e}},waterAmplitude:{get:function(){return Fn._waterAmplitude},set:function(e){Fn._waterAmplitude=e}}});var Un=Object.freeze({UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5}),zn=Object.freeze({TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3});function Bn(e){e=C(e,C.EMPTY_OBJECT);var t=C(e.throttleByServer,!1),r=C(e.throttle,!1);this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=C(e.priority,0),this.throttle=r,this.throttleByServer=t,this.type=C(e.type,zn.OTHER),this.serverKey=e.serverKey,this.state=Un.UNISSUED,this.deferred=void 0,this.cancelled=!1,this.geoServer=C(e.geoServer,!1)}function qn(e){this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function Gn(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function jn(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}function Hn(e,t){return t-e}Bn.prototype.cancel=function(){this.cancelled=!0},Bn.prototype.clone=function(e){return F(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=this.RequestState.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new Bn(this)},Object.defineProperties(qn.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){var t=this._length;if(e<t){for(var r=this._array,n=e;n<t;++n)r[n]=void 0;this._length=e,r.length=e}this._maximumLength=e}},comparator:{get:function(){return this._comparator}}}),qn.prototype.reserve=function(e){e=C(e,this._length),this._array.length=e},qn.prototype.heapify=function(e){e=C(e,0);for(var t=this._length,r=this._comparator,n=this._array,o=-1,i=!0;i;){var a=2*(e+1),s=a-1,o=s<t&&r(n[s],n[e])<0?s:e;(o=a<t&&r(n[a],n[o])<0?a:o)!==e?(Gn(n,o,e),e=o):i=!1}},qn.prototype.resort=function(){for(var e=this._length,t=Math.ceil(e/2);0<=t;--t)this.heapify(t)},qn.prototype.insert=function(e){var t,r=this._array,n=this._comparator,o=this._maximumLength,i=this._length++;for(i<r.length?r[i]=e:r.push(e);0!==i;){var a=Math.floor((i-1)/2);if(!(n(r[i],r[a])<0))break;Gn(r,i,a),i=a}return F(o)&&this._length>o&&(t=r[o],this._length=o),t},qn.prototype.pop=function(e){if(e=C(e,0),0!==this._length){var t=this._array,r=t[e];return Gn(t,e,--this._length),this.heapify(e),t[this._length]=void 0,r}},Object.defineProperties(jn.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}}),jn.prototype.addEventListener=function(e,t){this._listeners.push(e),this._scopes.push(t);var r=this;return function(){r.removeEventListener(e,t)}},jn.prototype.removeEventListener=function(e,t){for(var r=this._listeners,n=this._scopes,o=-1,i=0;i<r.length;i++)if(r[i]===e&&n[i]===t){o=i;break}return-1!==o&&(this._insideRaiseEvent?(this._toRemove.push(o),r[o]=void 0,n[o]=void 0):(r.splice(o,1),n.splice(o,1)),!0)},jn.prototype.raiseEvent=function(){this._insideRaiseEvent=!0;for(var e=this._listeners,t=this._scopes,r=e.length,n=0;n<r;n++)F(e[n])&&e[n].apply(t[n],arguments);var o=this._toRemove;if(0<(r=o.length)){for(o.sort(Hn),n=0;n<r;n++){var i=o[n];e.splice(i,1),t.splice(i,1)}o.length=0}this._insideRaiseEvent=!1};var Vn={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},Wn=20,Yn=new qn({comparator:function(e,t){return e.priority-t.priority}});Yn.maximumLength=Wn,Yn.reserve(Wn);var Xn=[],kn={},Kn="undefined"!=typeof document?new pn(document.location.href):new pn,Zn=new jn;function Jn(){}function Qn(e){F(e.priorityFunction)&&(e.priority=e.priorityFunction())}function $n(e){var t=C(Jn.requestsByServer[e],Jn.maximumRequestsPerServer);return kn[e]<t}function eo(e){return e.state===Un.UNISSUED&&(e.state=Un.ISSUED,e.deferred=yt.defer()),e.deferred.promise}function to(e){var t,r,n=eo(e);return e.state=Un.ACTIVE,Xn.push(e),++Vn.numberOfActiveRequests,++Vn.numberOfActiveRequestsEver,++kn[e.serverKey],e.requestFunction().then((r=e,function(e){var t;r.state!==Un.CANCELLED&&(t=r.deferred,--Vn.numberOfActiveRequests,--kn[r.serverKey],Zn.raiseEvent(),r.state=Un.RECEIVED,r.deferred=void 0,t.resolve(e))})).otherwise((t=e,function(e){t.state!==Un.CANCELLED&&(++Vn.numberOfFailedRequests,--Vn.numberOfActiveRequests,--kn[t.serverKey],Zn.raiseEvent(e),t.state=Un.FAILED,t.deferred.reject(e))})),n}function ro(e){var t,r=e.state===Un.ACTIVE;e.state=Un.CANCELLED,++Vn.numberOfCancelledRequests,F(e.deferred)&&(t=e.deferred,e.deferred=void 0,t.reject()),r&&(--Vn.numberOfActiveRequests,--kn[e.serverKey],++Vn.numberOfCancelledActiveRequests),F(e.cancelFunction)&&e.cancelFunction()}function no(e,t,r){this.statusCode=e,this.response=t,this.responseHeaders=r,"string"==typeof this.responseHeaders&&(this.responseHeaders=function(e){var t={};if(!e)return t;for(var r=e.split("\r\n"),n=0;n<r.length;++n){var o,i=r[n],a=i.indexOf(": ");0<a&&(o=i.substring(0,a),a=i.substring(a+2),t[o]=a)}return t}(this.responseHeaders))}Jn.maximumRequests=50,Jn.maximumRequestsPerServer=6,Jn.requestsByServer={"api.cesium.com:443":18,"assets.cesium.com:443":18},Jn.throttleRequests=!0,Jn.debugShowStatistics=!1,Jn.requestCompletedEvent=Zn,Object.defineProperties(Jn,{statistics:{get:function(){return Vn}},priorityHeapLength:{get:function(){return Wn},set:function(e){if(e<Wn)for(;Yn.length>e;)ro(Yn.pop());Wn=e,Yn.maximumLength=e,Yn.reserve(e)}}}),Jn.get_active_request_count=function(){return null==Xn?0:Xn.length},Jn.update=function(){for(var e,t=0,r=Xn.length,n=0;n<r;++n)(e=Xn[n]).cancelled&&ro(e),e.state===Un.ACTIVE?0<t&&(Xn[n-t]=e):++t;Xn.length-=t;var o=Yn.internalArray,i=Yn.length;for(n=0;n<i;++n)Qn(o[n]);Yn.resort();for(var a=Math.max(Jn.maximumRequests-Xn.length,0),s=0;s<a&&0<Yn.length;)!(e=Yn.pop()).cancelled&&(!e.throttleByServer||$n(e.serverKey))?(to(e),++s):ro(e);Jn.debugShowStatistics&&(0===Vn.numberOfActiveRequests&&0<Vn.lastNumberOfActiveRequests&&(0<Vn.numberOfAttemptedRequests&&(console.log("Number of attempted requests: "+Vn.numberOfAttemptedRequests),Vn.numberOfAttemptedRequests=0),0<Vn.numberOfCancelledRequests&&(console.log("Number of cancelled requests: "+Vn.numberOfCancelledRequests),Vn.numberOfCancelledRequests=0),0<Vn.numberOfCancelledActiveRequests&&(console.log("Number of cancelled active requests: "+Vn.numberOfCancelledActiveRequests),Vn.numberOfCancelledActiveRequests=0),0<Vn.numberOfFailedRequests&&(console.log("Number of failed requests: "+Vn.numberOfFailedRequests),Vn.numberOfFailedRequests=0)),Vn.lastNumberOfActiveRequests=Vn.numberOfActiveRequests)},Jn.getServerKey=function(e){var t=new pn(e).resolve(Kn);t.normalize();e=t.authority;return/:/.test(e)||(e=e+":"+("https"===t.scheme?"443":"80")),F(kn[e])||(kn[e]=0),e},Jn.request=function(e){if(vn(e.url)||Sn(e.url))return Zn.raiseEvent(),e.state=Un.RECEIVED,e.requestFunction();if(++Vn.numberOfAttemptedRequests,F(e.serverKey)||(e.serverKey=Jn.getServerKey(e.url)),!Jn.throttleRequests||!e.throttleByServer||$n(e.serverKey)){if(!Jn.throttleRequests||!e.throttle)return to(e);if(!(Xn.length>=Jn.maximumRequests)){Qn(e);var t=Yn.insert(e);if(F(t)){if(t===e)return;ro(t)}return eo(e)}}},Jn.clearForSpecs=function(){for(;0<Yn.length;)ro(Yn.pop());for(var e=Xn.length,t=0;t<e;++t)ro(Xn[t]);Xn.length=0,kn={},Vn.numberOfAttemptedRequests=0,Vn.numberOfActiveRequests=0,Vn.numberOfCancelledRequests=0,Vn.numberOfCancelledActiveRequests=0,Vn.numberOfFailedRequests=0,Vn.numberOfActiveRequestsEver=0,Vn.lastNumberOfActiveRequests=0},Jn.numberOfActiveRequestsByServer=function(e){return kn[e]},Jn.requestHeap=Yn,no.prototype.toString=function(){var e="Request has failed.";return F(this.statusCode)&&(e+=" Status Code: "+this.statusCode),e};var oo=function(){try{var e=new XMLHttpRequest;return e.open("GET","#",!0),(e.responseType="blob")===e.responseType}catch(e){return!1}}();function io(e,t,r,n){var o,i=e.query;if(!F(i)||0===i.length)return 1;i=-1===i.indexOf("=")?((o={})[i]=void 0,o):function(e){var t={};if(""===e)return t;for(var r=e.replace(/\+/g,"%20").split(/[&;]/),n=0,o=r.length;n<o;++n){var i=r[n].split("="),a=decodeURIComponent(i[0]),s=F(s=i[1])?decodeURIComponent(s):"",i=t[a];"string"==typeof i?t[a]=[i,s]:Array.isArray(i)?i.push(s):t[a]=s}return t}(i),t._queryParameters=r?co(i,t._queryParameters,n):i,e.query=void 0}function ao(e,t){var r=t._queryParameters,t=Object.keys(r);1!==t.length||F(r[t[0]])?e.query=function(e){var t,r="";for(t in e)if(e.hasOwnProperty(t)){var n=e[t],o=encodeURIComponent(t)+"=";if(Array.isArray(n))for(var i=0,a=n.length;i<a;++i)r+=o+encodeURIComponent(n[i])+"&";else r+=o+encodeURIComponent(n)+"&"}return r=r.slice(0,-1)}(r):e.query=t[0]}function so(e,t){return F(e)?F(e.clone)?e.clone():fn(e):t}function uo(e){e.state=Un.UNISSUED,e.deferred=void 0}function co(e,t,r){if(!r)return hn(e,t);var n,o,i,a=fn(e,!0);for(n in t)t.hasOwnProperty(n)&&(o=a[n],i=t[n],F(o)?(Array.isArray(o)||(o=a[n]=[o]),a[n]=o.concat(i)):a[n]=Array.isArray(i)?i.slice():i);return a}var lo,fo=0;function ho(e){var t,r;"db"===(e="string"==typeof(e=C(e,C.EMPTY_OBJECT))?{url:e}:e).url.substring(0,2)&&(e.url="http"+e.url.substring(2,e.url.length)),0<e.url.indexOf("sde?")&&e.url.indexOf("_sde")<0&&e.isSde&&(e.url+="_sde"),0<Fn.port_list.length&&/\/(sde|sde_pack|dcs|geoserver|filedownload)\?/.test(e.url)&&(null!=(t=/^([^:\/]+)(:\/\/)([^\/]+)(\/.+)$/i.exec(e.url))&&5==t.length&&(/:/.test(t[3])&&(r=t[3].indexOf(":"),t[3]=t[3].substring(0,r)),t[3]=t[3]+":"+Fn.port_list[fo],fo=(fo+1)%Fn.port_list.length,e.url=t[1]+t[2]+t[3]+t[4])),this._version=e.version,this._url=void 0,this._templateValues=so(e.templateValues,{}),this._queryParameters=so(e.queryParameters,{}),this.headers=so(e.headers,{}),this.request=C(e.request,new Bn),this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=C(e.retryAttempts,3),this._retryCount=0;e=new pn(e.url);io(e,this,!0,!0),e.fragment=void 0,this._url=e.toString(),this.preDownload=void 0}function po(r){var n=r.resource,o=r.flipY,i=r.preferImageBitmap,a=n.request;a.url=n.url,a.requestFunction=function(){F(r.preDownload)&&n.preDownload();var e=!1;n.isDataUri||n.isBlobUri||(e=n.isCrossOriginUrl);var t=yt.defer();return ho._Implementations.createImage(a,e,t,o,i),t.promise};var e=Jn.request(a);if(F(e))return e.otherwise(function(t){return a.state!==Un.FAILED?yt.reject(t):n.retryOnError(t).then(function(e){return e?(a.state=Un.UNISSUED,a.deferred=void 0,po({resource:n,flipY:o,preferImageBitmap:i})):yt.reject(t)})})}ho.createIfNeeded=function(e,t,r){return e instanceof ho?e.getDerivedResource({request:e.request}):"string"!=typeof e?e:new ho({url:e,version:t,isSde:!F(r)||r})},ho.supportsImageBitmapOptions=function(){if(F(lo))return lo;if("function"!=typeof createImageBitmap)return lo=yt.resolve(!1);return lo=ho.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWP4////fwAJ+wP9CNHoHgAAAABJRU5ErkJggg=="}).then(function(e){return createImageBitmap(e,{imageOrientation:"flipY",premultiplyAlpha:"none"})}).then(function(e){return!0}).otherwise(function(){return!1})},Object.defineProperties(ho,{isBlobSupported:{get:function(){return oo}}}),Object.defineProperties(ho.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){var e=this.getUrlComponent(!0,!0);return null!=this._version&&(e+="&version="+this._version),e},set:function(e){e=new pn(e);io(e,this,!1),e.fragment=void 0,this._url=e.toString()}},extension:{get:function(){return e=this._url,(t=new pn(e)).normalize(),e=t.path,e=-1===(t=(e=-1!==(t=e.lastIndexOf("/"))?e.substr(t+1):e).lastIndexOf("."))?"":e.substr(t+1);var e,t}},isDataUri:{get:function(){return vn(this._url)}},isBlobUri:{get:function(){return Sn(this._url)}},isCrossOriginUrl:{get:function(){return function(e){(An=!F(An)?document.createElement("a"):An).href=window.location.href;var t=An.host,r=An.protocol;return An.href=e,An.href=An.href,r!==An.protocol||t!==An.host}(this._url)}},hasHeaders:{get:function(){return 0<Object.keys(this.headers).length}}}),ho.prototype.toString=function(){return this.getUrlComponent(!0,!0)},ho.prototype.getUrlComponent=function(e,t){if(this.isDataUri)return this._url;var r=new pn(this._url);e&&ao(r,this);var r=r.toString().replace(/%7B/g,"{").replace(/%7D/g,"}"),n=this._templateValues,r=r.replace(/{(.*?)}/g,function(e,t){t=n[t];return F(t)?encodeURIComponent(t):e});return r=t&&F(this.proxy)?this.proxy.getURL(r):r},ho.prototype.setQueryParameters=function(e,t){this._queryParameters=t?co(this._queryParameters,e,!1):co(e,this._queryParameters,!1)},ho.prototype.appendQueryParameters=function(e){this._queryParameters=co(e,this._queryParameters,!0)},ho.prototype.setTemplateValues=function(e,t){this._templateValues=t?hn(this._templateValues,e):hn(e,this._templateValues)},ho.prototype.getDerivedResource=function(e){var t,r=this.clone();return r._retryCount=0,F(e.url)&&(io(t=new pn(e.url),r,!0,C(e.preserveQueryParameters,!1)),t.fragment=void 0,r._url=t.resolve(new pn(Tn(this._url))).toString(),r._url.indexOf("base64")<0&&0<r._url.indexOf("/sde?/")&&r._url.indexOf("_sde")<0&&(r._url+="_sde")),F(e.queryParameters)&&(r._queryParameters=hn(e.queryParameters,r._queryParameters)),F(e.templateValues)&&(r._templateValues=hn(e.templateValues,r.templateValues)),F(e.headers)&&(r.headers=hn(e.headers,r.headers)),F(e.proxy)&&(r.proxy=e.proxy),F(e.request)&&(r.request=e.request),F(e.retryCallback)&&(r.retryCallback=e.retryCallback),F(e.retryAttempts)&&(r.retryAttempts=e.retryAttempts),r},ho.prototype.retryOnError=function(e){var t=this.retryCallback;if("function"!=typeof t||this._retryCount>=this.retryAttempts)return yt(!1);var r=this;return yt(t(this,e)).then(function(e){return++r._retryCount,e})},ho.prototype.clone=function(e){return(e=!F(e)?new ho({url:this._url}):e)._url=this._url,e._queryParameters=fn(this._queryParameters),e._templateValues=fn(this._templateValues),e.headers=fn(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e},ho.prototype.getBaseUri=function(e){return t=this.getUrlComponent(e),r=e,n="",-1!==(e=t.lastIndexOf("/"))&&(n=t.substring(0,e+1)),r&&(F((t=new pn(t)).query)&&(n+="?"+t.query),F(t.fragment)&&(n+="#"+t.fragment)),n;var t,r,n},ho.prototype.appendForwardSlash=function(){var e;this._url=(0!==(e=this._url).length&&"/"===e[e.length-1]||(e+="/"),e)},ho.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},ho.fetchArrayBuffer=function(e){return new ho(e).fetchArrayBuffer()},ho.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},ho.fetchBlob=function(e){return new ho(e).fetchBlob()},ho.prototype.fetchImage=function(e){e=C(e,C.EMPTY_OBJECT);var t=C(e.preferImageBitmap,!1),r=C(e.preferBlob,!1),n=C(e.flipY,!1);if(uo(this.request),!oo||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!r)return po({resource:this,flipY:n,preferImageBitmap:t});var o,i,a,s=this.fetchBlob();return F(s)?ho.supportsImageBitmapOptions().then(function(e){return o=e&&t,s}).then(function(e){if(F(e)){if(a=e,o)return ho.createImageBitmapFromBlob(e,{flipY:n,premultiplyAlpha:!1});e=window.URL.createObjectURL(e);return po({resource:i=new ho({url:e}),flipY:n,preferImageBitmap:!1})}}).then(function(e){if(F(e))return e.blob=a,o||window.URL.revokeObjectURL(i.url),e}).otherwise(function(e){return F(i)&&window.URL.revokeObjectURL(i.url),e.blob=a,yt.reject(e)}):void 0},ho.fetchImage=function(e){return new ho(e).fetchImage({flipY:e.flipY,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})},ho.prototype.fetchText=function(){return this.fetch({responseType:"text"})},ho.fetchText=function(e){return new ho(e).fetchText()},ho.prototype.fetchJson=function(){var e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(F(e))return e.then(function(e){if(F(e))return JSON.parse(e)})},ho.fetchJson=function(e){return new ho(e).fetchJson()},ho.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},ho.fetchXML=function(e){return new ho(e).fetchXML()},ho.prototype.fetchJsonp=function(e){var t;for(e=C(e,"callback"),uo(this.request);t="loadJsonp"+Math.random().toString().substring(2,8),F(window[t]););return function r(n,o,i){var e={};e[o]=i;n.setQueryParameters(e);var a=n.request;a.url=n.url;a.requestFunction=function(){F(n.preDownload)&&n.preDownload();var t=yt.defer();return window[i]=function(e){t.resolve(e);try{delete window[i]}catch(e){window[i]=void 0}},ho._Implementations.loadAndExecuteScript(n.url,i,t),t.promise};e=Jn.request(a);if(!F(e))return;return e.otherwise(function(t){return a.state!==Un.FAILED?yt.reject(t):n.retryOnError(t).then(function(e){return e?(a.state=Un.UNISSUED,a.deferred=void 0,r(n,o,i)):yt.reject(t)})})}(this,e,t)},ho.fetchJsonp=function(e){return new ho(e).fetchJsonp(e.callbackParameterName)},ho.prototype._makeRequest=function(s){var u=this;uo(u.request);var c=u.request;c.url=u.url,c.requestFunction=function(){F(u.preDownload)&&u.preDownload();var e=s.responseType,t=hn(s.headers,u.headers),r=s.overrideMimeType,n=s.method,o=s.data,i=yt.defer(),a=ho._Implementations.loadWithXhr(u.url,e,n,o,t,i,r);return F(a)&&F(a.abort)&&(c.cancelFunction=function(){a.abort()}),i.promise};var e=Jn.request(c);if(F(e))return e.then(function(e){return c.cancelFunction=void 0,e}).otherwise(function(t){return c.cancelFunction=void 0,c.state!==Un.FAILED?yt.reject(t):u.retryOnError(t).then(function(e){return e?(c.state=Un.UNISSUED,c.deferred=void 0,u.fetch(s)):yt.reject(t)})})};var mo=/^data:(.*?)(;base64)?,(.*)$/;function Eo(e,t){t=decodeURIComponent(t);return e?atob(t):t}function yo(e,t){for(var r=Eo(e,t),t=new ArrayBuffer(r.length),n=new Uint8Array(t),o=0;o<r.length;o++)n[o]=r.charCodeAt(o);return t}function _o(e,t){switch(t){case"text":return e.toString("utf8");case"json":return JSON.parse(e.toString("utf8"));default:return new Uint8Array(e).buffer}}ho.prototype.fetch=function(e){return(e=so(e,{})).method="GET",this._makeRequest(e)},ho.fetch=function(e){return new ho(e).fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},ho.prototype.delete=function(e){return(e=so(e,{})).method="DELETE",this._makeRequest(e)},ho.delete=function(e){return new ho(e).delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})},ho.prototype.head=function(e){return(e=so(e,{})).method="HEAD",this._makeRequest(e)},ho.head=function(e){return new ho(e).head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},ho.prototype.options=function(e){return(e=so(e,{})).method="OPTIONS",this._makeRequest(e)},ho.options=function(e){return new ho(e).options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},ho.prototype.post=function(e,t){return(t=so(t,{})).method="POST",t.data=e,this._makeRequest(t)},ho.post=function(e){return new ho(e).post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},ho.prototype.put=function(e,t){return(t=so(t,{})).method="PUT",t.data=e,this._makeRequest(t)},ho.put=function(e){return new ho(e).put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},ho.prototype.patch=function(e,t){return(t=so(t,{})).method="PATCH",t.data=e,this._makeRequest(t)},ho.patch=function(e){return new ho(e).patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},(ho._Implementations={}).createImage=function(i,a,s,u,c){var l=i.url;ho.supportsImageBitmapOptions().then(function(e){if(!e||!c)return n=l,e=a,t=s,(r=new Image).onload=function(){t.resolve(r)},r.onerror=function(e){t.reject(e)},e&&(wn.contains(n)?r.crossOrigin="use-credentials":r.crossOrigin=""),void(r.src=n);var t,r,n=yt.defer(),o=ho._Implementations.loadWithXhr(l,"blob","GET",void 0,void 0,n,void 0,void 0,void 0);return F(o)&&F(o.abort)&&(i.cancelFunction=function(){o.abort()}),n.promise.then(function(e){return F(e)?ho.createImageBitmapFromBlob(e,{flipY:u,premultiplyAlpha:!1}):void s.reject(new Z("Successfully retrieved "+l+" but it contained no content."))}).then(s.resolve)}).otherwise(s.reject)},ho.createImageBitmapFromBlob=function(e,t){return createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"none",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none"})};var go="undefined"==typeof XMLHttpRequest;function To(e,t,r,n,o){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=r,this.yPoleOffset=n,this.ut1MinusUtc=o}function Ao(e){var t,r;e=C(e,C.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=C(e.addNewLeapSeconds,!0),F(e.data)?So(this,e.data):F(e.url)?(t=ho.createIfNeeded(e.url),(r=this)._downloadPromise=t.fetchJson().then(function(e){So(r,e)}).otherwise(function(){r._dataError="An error occurred while retrieving the EOP data from the URL "+t.url+"."})):So(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function Ro(e,t){return cn.compare(e.julianDate,t)}function So(e,t){if(F(t.columnNames))if(F(t.samples)){var r=t.columnNames.indexOf("modifiedJulianDateUtc"),n=t.columnNames.indexOf("xPoleWanderRadians"),o=t.columnNames.indexOf("yPoleWanderRadians"),i=t.columnNames.indexOf("ut1MinusUtcSeconds"),a=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),s=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),u=t.columnNames.indexOf("taiMinusUtcSeconds");if(r<0||n<0||o<0||i<0||a<0||s<0||u<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var c,l=e._samples=t.samples,f=e._dates=[];e._dateColumn=r,e._xPoleWanderRadiansColumn=n,e._yPoleWanderRadiansColumn=o,e._ut1MinusUtcSecondsColumn=i,e._xCelestialPoleOffsetRadiansColumn=a,e._yCelestialPoleOffsetRadiansColumn=s,e._taiMinusUtcSecondsColumn=u,e._columnCount=t.columnNames.length,e._lastIndex=void 0;for(var h=e._addNewLeapSeconds,p=0,m=l.length;p<m;p+=e._columnCount){var d,E=l[p+r],y=l[p+u],_=new cn(E+Vr.MODIFIED_JULIAN_DATE_DIFFERENCE,y,Wr.TAI);f.push(_),h&&(y===c||!F(c)||(E=Br(d=cn.leapSeconds,_,Ro))<0&&(_=new Hr(_,y),d.splice(~E,0,_)),c=y)}}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function Oo(e,t,r,n,o){n*=r;o.xPoleWander=t[n+e._xPoleWanderRadiansColumn],o.yPoleWander=t[n+e._yPoleWanderRadiansColumn],o.xPoleOffset=t[n+e._xCelestialPoleOffsetRadiansColumn],o.yPoleOffset=t[n+e._yCelestialPoleOffsetRadiansColumn],o.ut1MinusUtc=t[n+e._ut1MinusUtcSecondsColumn]}function vo(e,t,r){return t+e*(r-t)}function Io(e,t,r,n,o,i,a){var s=e._columnCount;if(i>t.length-1)return a.xPoleWander=0,a.yPoleWander=0,a.xPoleOffset=0,a.yPoleOffset=0,a.ut1MinusUtc=0,a;var u=t[o],c=t[i];if(u.equals(c)||n.equals(u))return Oo(e,r,o,s,a),a;if(n.equals(c))return Oo(e,r,i,s,a),a;var l=cn.secondsDifference(n,u)/cn.secondsDifference(c,u),f=o*s,t=i*s,u=r[f+e._ut1MinusUtcSecondsColumn],o=r[t+e._ut1MinusUtcSecondsColumn],i=o-u;return!(.5<i||i<-.5)||(s=r[f+e._taiMinusUtcSecondsColumn])!==(i=r[t+e._taiMinusUtcSecondsColumn])&&(c.equals(n)?u=o:o-=i-s),a.xPoleWander=vo(l,r[f+e._xPoleWanderRadiansColumn],r[t+e._xPoleWanderRadiansColumn]),a.yPoleWander=vo(l,r[f+e._yPoleWanderRadiansColumn],r[t+e._yPoleWanderRadiansColumn]),a.xPoleOffset=vo(l,r[f+e._xCelestialPoleOffsetRadiansColumn],r[t+e._xCelestialPoleOffsetRadiansColumn]),a.yPoleOffset=vo(l,r[f+e._yCelestialPoleOffsetRadiansColumn],r[t+e._yCelestialPoleOffsetRadiansColumn]),a.ut1MinusUtc=vo(l,u,o),a}function No(e,t,r){this.x=e,this.y=t,this.s=r}ho._Implementations.loadWithXhr=function(e,o,i,t,r,a,n){var s=mo.exec(e);if(null===s){if(go)return u=e,c=o,l=i,f=r,h=a,p=require("url").parse(u),u="https:"===p.protocol?require("https"):require("http"),m=require("zlib"),f={protocol:p.protocol,hostname:p.hostname,port:p.port,path:p.path,query:p.query,method:l,headers:f},void u.request(f).on("response",function(t){var r;t.statusCode<200||300<=t.statusCode?h.reject(new no(t.statusCode,t,t.headers)):(r=[],t.on("data",function(e){r.push(e)}),t.on("end",function(){var e=Buffer.concat(r);"gzip"===t.headers["content-encoding"]?m.gunzip(e,function(e,t){e?h.reject(new Z("Error decompressing response.")):h.resolve(_o(t,c))}):h.resolve(_o(e,c))}))}).on("error",function(e){h.reject(new no)}).end();var u,c,l,f,h,p,m,d=new XMLHttpRequest;if(wn.contains(e)&&(d.withCredentials=!0),d.open(i,e,!0),F(n)&&F(d.overrideMimeType)&&d.overrideMimeType(n),F(r))for(var E in r)r.hasOwnProperty(E)&&d.setRequestHeader(E,r[E]);F(o)&&(d.responseType=o);var y=!1;return"string"==typeof e&&(y=0===e.indexOf("file://")||"undefined"!=typeof window&&"file://"===window.location.origin),d.onload=function(){if(!(d.status<200||300<=d.status)||y&&0===d.status){var e=d.response,t=d.responseType;if("HEAD"===i||"OPTIONS"===i){var r=d.getAllResponseHeaders().trim().split(/[\r\n]+/),n={};return r.forEach(function(e){var t=e.split(": "),e=t.shift();n[e]=t.join(": ")}),void a.resolve(n)}if(204===d.status)a.resolve();else if(!F(e)||F(o)&&t!==o)if("json"===o&&"string"==typeof e)try{a.resolve(JSON.parse(e))}catch(e){a.reject(e)}else(""===t||"document"===t)&&F(d.responseXML)&&d.responseXML.hasChildNodes()?a.resolve(d.responseXML):""!==t&&"text"!==t||!F(d.responseText)?a.reject(new Z("Invalid XMLHttpRequest response type.")):a.resolve(d.responseText);else a.resolve(e)}else a.reject(new no(d.status,d.response,d.getAllResponseHeaders()))},d.onerror=function(e){a.reject(new no)},d.send(t),d}a.resolve(function(e,t){t=C(t,"");var r=e[1],n=!!e[2],o=e[3];switch(t){case"":case"text":return Eo(n,o);case"arraybuffer":return yo(n,o);case"blob":var i=yo(n,o);return new Blob([i],{type:r});case"document":return(new DOMParser).parseFromString(Eo(n,o),r);case"json":return JSON.parse(Eo(n,o))}}(s,o))},ho._Implementations.loadAndExecuteScript=function(e,t,r){return function(e){var t=yt.defer(),r=document.createElement("script");r.async=!0,r.src=e;var n=document.getElementsByTagName("head")[0];return r.onload=function(){r.onload=void 0,n.removeChild(r),t.resolve()},r.onerror=function(e){t.reject(e)},n.appendChild(r),t.promise}(e).otherwise(r.reject)},(ho._DefaultImplementations={}).createImage=ho._Implementations.createImage,ho._DefaultImplementations.loadWithXhr=ho._Implementations.loadWithXhr,ho._DefaultImplementations.loadAndExecuteScript=ho._Implementations.loadAndExecuteScript,ho.DEFAULT=Object.freeze(new ho({url:"undefined"==typeof document?"":document.location.href.split("?")[0]})),Ao.NONE=Object.freeze({getPromiseToLoad:function(){return yt.resolve()},compute:function(e,t){return F(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new To(0,0,0,0,0),t}}),Ao.prototype.getPromiseToLoad=function(){return yt(this._downloadPromise)},Ao.prototype.compute=function(e,t){if(F(this._samples)){if(F(t)||(t=new To(0,0,0,0,0)),0===this._samples.length)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;var r=this._dates,n=this._lastIndex,o=0,i=0;if(F(n)){var a=r[n],s=r[n+1],u=cn.lessThanOrEquals(a,e),c=!F(s),a=c||cn.greaterThanOrEquals(s,e);if(u&&a)return o=n,!c&&s.equals(e)&&++o,Io(this,r,this._samples,e,o,i=o+1,t),t}s=Br(r,e,cn.compare,this._dateColumn);return 0<=s?(s<r.length-1&&r[s+1].equals(e)&&++s,i=o=s):(o=(i=~s)-1)<0&&(o=0),this._lastIndex=o,Io(this,r,this._samples,e,o,i,t),t}};var wo,Co,Mo,bo=/((?:.*\/)|^)Cesium\.js(?:\?|\#|$)/;function xo(e){return"undefined"==typeof document?e:((wo=!F(wo)?document.createElement("a"):wo).href=e,wo.href=wo.href,wo.href)}function Po(){if(F(Co))return Co;var e=void 0!==Fn.baseUrlString?Fn.baseUrlString:"object"==typeof define&&F(define.amd)&&!define.amd.toUrlUndefined&&F(require.toUrl)?Tn("..",Fo("lib_ax/utility/lib_core/resource/buildModuleUrl.js")):function(){for(var e=document.getElementsByTagName("script"),t=0,r=e.length;t<r;++t){var n=e[t].getAttribute("src"),n=bo.exec(n);if(null!==n)return n[1]}}();return(Co=new ho({url:xo(e)})).appendForwardSlash(),Co}function Do(e){return xo(require.toUrl("../"+e))}function Lo(e){return Po().getDerivedResource({url:e}).url}function Fo(e){return(Mo=!F(Mo)?"object"==typeof define&&F(define.amd)&&!define.amd.toUrlUndefined&&F(require.toUrl)?Do:Lo:Mo)(e)}function Uo(e){e=C(e,C.EMPTY_OBJECT),this._xysFileUrlTemplate=ho.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=C(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=C(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new cn(this._sampleZeroJulianEphemerisDate,0,Wr.TAI),this._stepSizeDays=C(e.stepSizeDays,1),this._samplesPerXysFile=C(e.samplesPerXysFile,1e3),this._totalSamples=C(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var t=this._interpolationOrder,r=this._denominators=new Array(t+1),n=this._xTable=new Array(t+1),o=Math.pow(this._stepSizeDays,t),i=0;i<=t;++i){r[i]=o,n[i]=i*this._stepSizeDays;for(var a=0;a<=t;++a)a!==i&&(r[i]*=i-a);r[i]=1/r[i]}this._work=new Array(t+1),this._coef=new Array(t+1)}Fo._cesiumScriptRegex=bo,Fo._buildModuleUrlFromBaseUrl=Lo,Fo._clearBaseResource=function(){Co=void 0},Fo.setBaseUrl=function(e){Co=ho.DEFAULT.getDerivedResource({url:e})},Fo.getCesiumBaseUrl=Po;var zo=new cn(0,0,Wr.TAI);function Bo(e,t,r){var n=zo;return n.dayNumber=t,n.secondsOfDay=r,cn.daysDifference(n,e._sampleZeroDateTT)}function qo(a,s){if(a._chunkDownloadsInProgress[s])return a._chunkDownloadsInProgress[s];var u=yt.defer();a._chunkDownloadsInProgress[s]=u;var e=a._xysFileUrlTemplate;return yt((F(e)?e.getDerivedResource({templateValues:{0:s}}):new ho({url:Fo("Assets/IAU2006_XYS/IAU2006_XYS_"+s+".json")})).fetchJson(),function(e){a._chunkDownloadsInProgress[s]=!1;for(var t=a._samples,r=e.samples,n=s*a._samplesPerXysFile*3,o=0,i=r.length;o<i;++o)t[n+o]=r[o];u.resolve()}),u.promise}Uo.prototype.preload=function(e,t,r,n){t=Bo(this,e,t),n=Bo(this,r,n),t=t/this._stepSizeDays-this._interpolationOrder/2|0,n=n/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;n>=this._totalSamples&&(n=this._totalSamples-1);for(var t=(t=t<0?0:t)/this._samplesPerXysFile|0,o=n/this._samplesPerXysFile|0,i=[],a=t;a<=o;++a)i.push(qo(this,a));return yt.all(i)},Uo.prototype.computeXysRadians=function(e,t,r){var n=Bo(this,e,t);if(!(n<0)){e=n/this._stepSizeDays|0;if(!(e>=this._totalSamples)){var o=this._interpolationOrder,i=e-(o/2|0),t=(i=i<0?0:i)+o;t>=this._totalSamples&&(i=(t=this._totalSamples-1)-o)<0&&(i=0);var e=!1,a=this._samples;if(F(a[3*i])||(qo(this,i/this._samplesPerXysFile|0),e=!0),F(a[3*t])||(qo(this,t/this._samplesPerXysFile|0),e=!0),!e){F(r)?(r.x=0,r.y=0,r.s=0):r=new No(0,0,0);for(var s,u=n-i*this._stepSizeDays,c=this._work,l=this._denominators,f=this._coef,h=this._xTable,p=0;p<=o;++p)c[p]=u-h[p];for(p=0;p<=o;++p){for(f[p]=1,s=0;s<=o;++s)s!==p&&(f[p]*=c[s]);f[p]*=l[p];var m=3*(i+p);r.x+=f[p]*a[m++],r.y+=f[p]*a[m++],r.s+=f[p]*a[m]}return r}}}};var Go={},jo={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},Ho={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Vo={},Wo={east:new U,north:new U,up:new U,west:new U,south:new U,down:new U},Yo=new U,Xo=new U,ko=new U;Go.localFrameToFixedFrameGenerator=function(o,i){var e,a=jo[o][i],t=o+i;return F(Vo[t])?e=Vo[t]:(e=function(e,t,r){var n;return F(r)||(r=new re),U.equalsEpsilon(e,U.ZERO,B.EPSILON14)?(U.unpack(Ho[o],0,Yo),U.unpack(Ho[i],0,Xo),U.unpack(Ho[a],0,ko)):B.equalsEpsilon(e.x,0,B.EPSILON14)&&B.equalsEpsilon(e.y,0,B.EPSILON14)?(n=B.sign(e.z),U.unpack(Ho[o],0,Yo),"east"!==o&&"west"!==o&&U.multiplyByScalar(Yo,n,Yo),U.unpack(Ho[i],0,Xo),"east"!==i&&"west"!==i&&U.multiplyByScalar(Xo,n,Xo),U.unpack(Ho[a],0,ko),"east"!==a&&"west"!==a&&U.multiplyByScalar(ko,n,ko)):((t=C(t,O.WGS84)).geodeticSurfaceNormal(e,Wo.up),n=Wo.up,(t=Wo.east).x=-e.y,t.y=e.x,t.z=0,U.normalize(t,Wo.east),U.cross(n,t,Wo.north),U.multiplyByScalar(Wo.up,-1,Wo.down),U.multiplyByScalar(Wo.east,-1,Wo.west),U.multiplyByScalar(Wo.north,-1,Wo.south),Yo=Wo[o],Xo=Wo[i],ko=Wo[a]),r[0]=Yo.x,r[1]=Yo.y,r[2]=Yo.z,r[3]=0,r[4]=Xo.x,r[5]=Xo.y,r[6]=Xo.z,r[7]=0,r[8]=ko.x,r[9]=ko.y,r[10]=ko.z,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,r},Vo[t]=e),e},Go.eastNorthUpToFixedFrame=Go.localFrameToFixedFrameGenerator("east","north"),Go.northEastDownToFixedFrame=Go.localFrameToFixedFrameGenerator("north","east"),Go.northUpEastToFixedFrame=Go.localFrameToFixedFrameGenerator("north","up"),Go.northWestUpToFixedFrame=Go.localFrameToFixedFrameGenerator("north","west");var Ko=new sr,Zo=new U(1,1,1),Jo=new re;Go.headingPitchRollToFixedFrame=function(e,t,r,n,o){n=C(n,Go.eastNorthUpToFixedFrame);t=sr.fromHeadingPitchRoll(t,Ko),t=re.fromTranslationQuaternionRotationScale(U.ZERO,t,Zo,Jo);return o=n(e,r,o),re.multiply(o,t,o)};var Qo=new re,$o=new j;Go.headingPitchRollQuaternion=function(e,t,r,n,o){n=Go.headingPitchRollToFixedFrame(e,t,r,n,Qo),n=re.getMatrix3(n,$o);return sr.fromRotationMatrix(n,o)};var ei=new U(1,1,1),ti=new U,ri=new re,ni=new re,oi=new j,ii=new sr;Go.fixedFrameToHeadingPitchRoll=function(e,t,r,n){t=C(t,O.WGS84),r=C(r,Go.eastNorthUpToFixedFrame),F(n)||(n=new zr);var o=re.getTranslation(e,ti);if(U.equals(o,U.ZERO))return n.heading=0,n.pitch=0,n.roll=0,n;t=re.inverseTransformation(r(o,t,ri),ri),e=re.setScale(e,ei,ni),e=re.setTranslation(e,U.ZERO,e),t=re.multiply(t,e,t),t=sr.fromRotationMatrix(re.getMatrix3(t,oi),ii),t=sr.normalize(t,t);return zr.fromQuaternion(t,n)};var ai=B.TWO_PI/86400,si=new cn;Go.computeTemeToPseudoFixedMatrix=function(e,t){var r=(si=cn.addSeconds(e,-cn.computeTaiMinusUtc(e),si)).dayNumber,n=si.secondsOfDay,e=r-2451545,e=43200<=n?(.5+e)/Vr.DAYS_PER_JULIAN_CENTURY:(e-.5)/Vr.DAYS_PER_JULIAN_CENTURY,r=(24110.54841+e*(8640184.812866+e*(.093104+-62e-7*e)))*ai%B.TWO_PI+(72921158553e-15+11772758384668e-32*(r-2451545.5))*((n+.5*Vr.SECONDS_PER_DAY)%Vr.SECONDS_PER_DAY),n=Math.cos(r),r=Math.sin(r);return F(t)?(t[0]=n,t[1]=-r,t[2]=0,t[3]=r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new j(n,r,0,-r,n,0,0,0,1)},Go.iau2006XysData=new Uo,Go.earthOrientationParameters=Ao.NONE;var ui=32.184;Go.preloadIcrfFixed=function(e){var t=e.start.dayNumber,r=e.start.secondsOfDay+ui,n=e.stop.dayNumber,e=e.stop.secondsOfDay+ui,n=Go.iau2006XysData.preload(t,r,n,e),e=Go.earthOrientationParameters.getPromiseToLoad();return yt.all([n,e])},Go.computeIcrfToFixedMatrix=function(e,t){F(t)||(t=new j);e=Go.computeFixedToIcrfMatrix(e,t);if(F(e))return j.transpose(e,t)};var ci=new No(0,0,0),li=new To(0,0,0,0,0),fi=new j,hi=new j;Go.computeFixedToIcrfMatrix=function(e,t){F(t)||(t=new j);var r=Go.earthOrientationParameters.compute(e,li);if(F(r)){var n=e.dayNumber,o=e.secondsOfDay+ui,i=Go.iau2006XysData.computeXysRadians(n,o,ci);if(F(i)){var a=i.x+r.xPoleOffset,s=i.y+r.yPoleOffset,u=1/(1+Math.sqrt(1-a*a-s*s)),c=fi;c[0]=1-u*a*a,c[3]=-u*a*s,c[6]=a,c[1]=-u*a*s,c[4]=1-u*s*s,c[7]=s,c[2]=-a,c[5]=-s,c[8]=1-u*(a*a+s*s);a=j.fromRotationZ(-i.s,hi),s=j.multiply(c,a,fi),i=e.dayNumber,c=(e.secondsOfDay-cn.computeTaiMinusUtc(e)+r.ut1MinusUtc)/Vr.SECONDS_PER_DAY,a=(a=.779057273264+c+.00273781191135448*(i-2451545+c))%1*B.TWO_PI,e=j.fromRotationZ(a,hi),i=j.multiply(s,e,fi),c=Math.cos(r.xPoleWander),a=Math.cos(r.yPoleWander),s=Math.sin(r.xPoleWander),e=Math.sin(r.yPoleWander),r=n-2451545+o/Vr.SECONDS_PER_DAY,n=-47e-6*(r/=36525)*B.RADIANS_PER_DEGREE/3600,o=Math.cos(n),r=Math.sin(n),n=hi;return n[0]=c*o,n[1]=c*r,n[2]=s,n[3]=-a*r+e*s*o,n[4]=a*o+e*s*r,n[5]=-e*c,n[6]=-e*r-a*s*o,n[7]=e*o-a*s*r,n[8]=a*c,j.multiply(i,n,t)}}};var pi=new J;Go.pointToWindowCoordinates=function(e,t,r,n){return(n=Go.pointToGLWindowCoordinates(e,t,r,n)).y=2*t[5]-n.y,n},Go.pointToGLWindowCoordinates=function(e,t,r,n){F(n)||(n=new at);var o=pi;return re.multiplyByVector(e,J.fromElements(r.x,r.y,r.z,1,o),o),J.multiplyByScalar(o,1/o.w,o),re.multiplyByVector(t,o,o),at.fromCartesian4(o,n)};var mi=new U,di=new U,Ei=new U;Go.rotationMatrixFromPositionVelocity=function(e,t,r,n){r=C(r,O.WGS84).geodeticSurfaceNormal(e,mi),e=U.cross(t,r,di);U.equalsEpsilon(e,U.ZERO,B.EPSILON6)&&(e=U.clone(U.UNIT_X,e));r=U.cross(e,t,Ei);return U.normalize(r,r),U.cross(t,r,e),U.negate(e,e),U.normalize(e,e),(n=!F(n)?new j:n)[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=e.x,n[4]=e.y,n[5]=e.z,n[6]=r.x,n[7]=r.y,n[8]=r.z,n};var yi=new re(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),_i=new S,gi=new U,Ti=new U,Ai=new j,Ri=new re,Si=new re;Go.basisTo2D=function(e,t,r){var n=re.getTranslation(t,Ti),o=e.ellipsoid,i=o.cartesianToCartographic(n,_i),i=e.project(i,gi);U.fromElements(i.z,i.x,i.y,i);o=Go.eastNorthUpToFixedFrame(n,o,Ri),o=re.inverseTransformation(o,Si),t=re.getMatrix3(t,Ai),t=re.multiplyByMatrix3(o,t,r);return re.multiply(yi,t,r),re.setTranslation(r,i,r),r},Go.wgs84To2DModelMatrix=function(e,t,r){var n=e.ellipsoid,o=Go.eastNorthUpToFixedFrame(t,n,Ri),o=re.inverseTransformation(o,Si),t=n.cartesianToCartographic(t,_i),t=e.project(t,gi);U.fromElements(t.z,t.x,t.y,t);t=re.fromTranslation(t,Ri);return re.multiply(yi,o,r),re.multiply(t,r,r),r};var Oi=Object.freeze({NONE:0,TRIANGLES:1,LINES:2,POLYLINES:3}),vi={POINTS:nt.POINTS,LINES:nt.LINES,LINE_LOOP:nt.LINE_LOOP,LINE_STRIP:nt.LINE_STRIP,TRIANGLES:nt.TRIANGLES,TRIANGLE_STRIP:nt.TRIANGLE_STRIP,TRIANGLE_FAN:nt.TRIANGLE_FAN,validate:function(e){return e===vi.POINTS||e===vi.LINES||e===vi.LINE_LOOP||e===vi.LINE_STRIP||e===vi.TRIANGLES||e===vi.TRIANGLE_STRIP||e===vi.TRIANGLE_FAN}},Ii=Object.freeze(vi);function Ni(e){e=C(e,C.EMPTY_OBJECT),this.attributes=e.attributes,this.indices=e.indices,this.primitiveType=C(e.primitiveType,Ii.TRIANGLES),this.boundingSphere=e.boundingSphere,this.geometryType=C(e.geometryType,Oi.NONE),this.boundingSphereCV=e.boundingSphereCV,this.offsetAttribute=e.offsetAttribute}Ni.computeNumberOfVertices=function(e){var t,r,n=-1;for(t in e.attributes)e.attributes.hasOwnProperty(t)&&F(e.attributes[t])&&F(e.attributes[t].values)&&(n=(r=e.attributes[t]).values.length/r.componentsPerAttribute);return n};var wi=new S,Ci=new U,Mi=new re,bi=[new S,new S,new S],xi=[new at,new at,new at],Pi=[new at,new at,new at],Di=new U,Li=new sr,Fi=new re,Ui=new ht;function zi(e){e=C(e,C.EMPTY_OBJECT),this.componentDatatype=e.componentDatatype,this.componentsPerAttribute=e.componentsPerAttribute,this.normalize=C(e.normalize,!1),this.values=e.values}function Bi(e){e=C(e,C.EMPTY_OBJECT),this.position=e.position,this.normal=e.normal,this.st=e.st,this.bitangent=e.bitangent,this.tangent=e.tangent,this.color=e.color}Ni._textureCoordinateRotationPoints=function(e,t,r,n){var o=ye.center(n,wi),i=S.toCartesian(o,r,Ci),o=Go.eastNorthUpToFixedFrame(i,r,Mi),a=re.inverse(o,Mi),s=xi,u=bi;u[0].longitude=n.west,u[0].latitude=n.south,u[1].longitude=n.west,u[1].latitude=n.north,u[2].longitude=n.east,u[2].latitude=n.south;for(var c=Di,l=0;l<3;l++)S.toCartesian(u[l],r,c),c=re.multiplyByPointAsVector(a,c,c),s[l].x=c.x,s[l].y=c.y;var i=sr.fromAxisAngle(U.UNIT_Z,-t,Li),f=j.fromQuaternion(i,Fi),h=e.length,p=Number.POSITIVE_INFINITY,m=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,E=Number.NEGATIVE_INFINITY;for(l=0;l<h;l++)c=re.multiplyByPointAsVector(a,e[l],c),c=j.multiplyByVector(f,c,c),p=Math.min(p,c.x),m=Math.min(m,c.y),d=Math.max(d,c.x),E=Math.max(E,c.y);var y=ht.fromRotation(t,Ui),_=Pi;_[0].x=p,_[0].y=m,_[1].x=p,_[1].y=E,_[2].x=d,_[2].y=m;var g=s[0],T=s[2].x-g.x,A=s[1].y-g.y;for(l=0;l<3;l++){var R=_[l];ht.multiplyByVector(y,R,R),R.x=(R.x-g.x)/T,R.y=(R.y-g.y)/A}o=_[0],n=_[1],i=_[2],t=new Array(6);return at.pack(o,t),at.pack(n,t,2),at.pack(i,t,4),t};var qi={};function Gi(e,t){this.normal=U.clone(e),this.distance=t}qi.calculateACMR=function(e){var t=(e=C(e,C.EMPTY_OBJECT)).indices,r=e.maximumIndex,n=C(e.cacheSize,24),o=t.length;if(!F(r))for(var r=0,i=0,a=t[i];i<o;)r<a&&(r=a),a=t[++i];for(var s=[],u=0;u<r+1;u++)s[u]=0;for(var c=n+1,l=0;l<o;++l)c-s[t[l]]>n&&(s[t[l]]=c,++c);return(c-n+1)/(o/3)},qi.tipsify=function(e){var t=(e=C(e,C.EMPTY_OBJECT)).indices,r=e.maximumIndex,n=C(e.cacheSize,24);function o(e,t,r,n,o,i,a){for(var s,u=-1,c=-1,l=0;l<r.length;){var f=r[l];n[f].numLiveTriangles&&(s=0,(c<(s=o-n[f].timeStamp+2*n[f].numLiveTriangles<=t?o-n[f].timeStamp:s)||-1===c)&&(c=s,u=f)),++l}return-1===u?function(e,t,r){for(;1<=t.length;){var n=t[t.length-1];if(t.splice(t.length-1,1),0<e[n].numLiveTriangles)return n}for(;m<r;){if(0<e[m].numLiveTriangles)return++m-1;++m}return-1}(n,i,a):u}var e=t.length,i=0,a=t[O=0],s=e;if(F(r))i=r+1;else{for(;O<s;)i<a&&(i=a),a=t[++O];if(-1===i)return 0;++i}for(var u=[],c=0;c<i;c++)u[c]={numLiveTriangles:0,timeStamp:0,vertexTriangles:[]};for(var l=O=0;O<s;)u[t[O]].vertexTriangles.push(l),++u[t[O]].numLiveTriangles,u[t[O+1]].vertexTriangles.push(l),++u[t[O+1]].numLiveTriangles,u[t[O+2]].vertexTriangles.push(l),++u[t[O+2]].numLiveTriangles,++l,O+=3;var f,h=0,p=n+1,m=1,d=[],E=[],y=0,_=[],g=e/3,T=[];for(c=0;c<g;c++)T[c]=!1;for(;-1!==h;){for(var A,d=[],R=(A=u[h]).vertexTriangles.length,S=0;S<R;++S)if(!T[l=A.vertexTriangles[S]]){T[l]=!0;for(var O=l+l+l,v=0;v<3;++v)f=t[O],d.push(f),E.push(f),_[y]=f,++y,--(f=u[f]).numLiveTriangles,p-f.timeStamp>n&&(f.timeStamp=p,++p),++O}h=o(0,n,d,u,p,E,i)}return _},Gi.fromPointNormal=function(e,t,r){e=-U.dot(t,e);return F(r)?(U.clone(t,r.normal),r.distance=e,r):new Gi(t,e)};var ji=new U;Gi.fromCartesian4=function(e,t){var r=U.fromCartesian4(e,ji),e=e.w;return F(t)?(U.clone(r,t.normal),t.distance=e,t):new Gi(r,e)},Gi.fromPoints=function(e,t,r,n){var o=U.subtract(t,e,new U),t=U.subtract(r,t,new U);U.normalize(o,o),U.normalize(t,t);t=U.cross(o,t,new U);U.normalize(t,t);e=-U.dot(t,e);return F(n)?(U.clone(t,n.normal),n.distance=e,n):new Gi(t,e)},Gi.getPointDistance=function(e,t){return U.dot(e.normal,t)+e.distance};var Hi=new U;Gi.projectPointOntoPlane=function(e,t,r){F(r)||(r=new U);var n=Gi.getPointDistance(e,t),n=U.multiplyByScalar(e.normal,n,Hi);return U.subtract(t,n,r)},Gi.projection=function(e,t,r){var n=U.dot(t,e.normal),n=U.multiplyByScalar(e.normal,n,Hi);return F(r)||(r=new U),U.subtract(t,n,r)};var Vi=new U;Gi.transform=function(e,t,r){return re.multiplyByPointAsVector(t,e.normal,ji),U.normalize(ji,ji),U.multiplyByScalar(e.normal,-e.distance,Vi),re.multiplyByPoint(t,Vi,Vi),Gi.fromPointNormal(Vi,ji,r)},Gi.clone=function(e,t){return F(t)?(U.clone(e.normal,t.normal),t.distance=e.distance,t):new Gi(e.normal,e.distance)},Gi.equals=function(e,t){return e.distance===t.distance&&U.equals(e.normal,t.normal)},Gi.prototype.intersect=function(e,t){F(t)||(t=new U);var r,n=e.origin,o=e.direction,e=U.dot(o,this.normal);return Math.abs(e)<B.EPSILON15?(r=n.x*this.normal.x*n.y*this.normal.y+n.z*this.normal.z+this.distance)<B.EPSILON15?(U.clone(n,t),t):void 0:(r=-(this.normal.x*n.x+this.normal.y*n.y+this.normal.z*n.z+this.distance),t=U.multiplyByScalar(o,r/=e,t),t=U.add(n,t,t))},Gi.ORIGIN_XY_PLANE=Object.freeze(new Gi(U.UNIT_Z,0)),Gi.ORIGIN_YZ_PLANE=Object.freeze(new Gi(U.UNIT_X,0)),Gi.ORIGIN_ZX_PLANE=Object.freeze(new Gi(U.UNIT_Y,0));var Wi={};function Yi(e,t,r){var n=e+t;return B.sign(e)!==B.sign(t)&&Math.abs(n/Math.max(Math.abs(e),Math.abs(t)))<r?0:n}Wi.computeDiscriminant=function(e,t,r){return t*t-4*e*r},Wi.computeRealRoots=function(e,t,r){if(0===e)return 0===t?[]:[-r/t];if(0===t){if(0===r)return[0,0];var n=Math.abs(r),o=Math.abs(e);if(n<o&&n/o<B.EPSILON14)return[0,0];if(o<n&&o/n<B.EPSILON14)return[];if((o=-r/e)<0)return[];n=Math.sqrt(o);return[-n,n]}if(0===r)return(o=-t/e)<0?[o,0]:[0,o];o=Yi(t*t,-(4*e*r),B.EPSILON14);if(o<0)return[];o=-.5*Yi(t,B.sign(t)*Math.sqrt(o),B.EPSILON14);return 0<t?[o/e,r/o]:[r/o,o/e]};var Xi={};function ki(e,t,r,n){var o=e,i=t/3,a=r/3,s=n,u=o*a,c=i*s,l=i*i,f=a*a,h=o*a-l,e=o*s-i*a,t=i*s-f,r=4*h*t-e*e;if(r<0){var n=u*f<=l*c?-2*i*(d=h)+(m=o)*e:-(m=s)*e+2*a*(d=t),p=-(n<0?-1:1)*Math.abs(m)*Math.sqrt(-r),m=(E=p-n)/2,m=m<0?-Math.pow(-m,1/3):Math.pow(m,1/3),p=E===p?-m:-d/m,p=d<=0?m+p:-n/(m*m+p*p+d);return u*f<=l*c?[(p-i)/o]:[-s/(p+a)]}var d=h,u=-2*i*h+o*e,f=t,l=-s*e+2*a*t,c=Math.sqrt(r),h=Math.sqrt(3)/2,e=Math.abs(Math.atan2(o*c,-u)/3);p=2*Math.sqrt(-d);t=Math.cos(e);E=p*t;var r=p*(-t/2-h*Math.sin(e)),u=2*i<E+r?E-i:r-i,d=o,o=u/d,e=Math.abs(Math.atan2(s*c,-l)/3),s=-s,e=(E=(p=2*Math.sqrt(-f))*(t=Math.cos(e)))+(r=p*(-t/2-h*Math.sin(e)))<2*a?E+a:r+a,E=s/e,r=-u*e-d*s,e=(a*r-i*(u*s))/(-i*r+a*(d*e));return o<=e?o<=E?e<=E?[o,e,E]:[o,E,e]:[E,o,e]:o<=E?[e,o,E]:e<=E?[e,E,o]:[E,e,o]}Xi.computeDiscriminant=function(e,t,r,n){var o=t*t,i=r*r;return 18*e*t*r*n+o*i-27*(e*e)*(n*n)-4*(e*i*r+o*t*n)},Xi.computeRealRoots=function(e,t,r,n){var o;if(0===e)return Wi.computeRealRoots(t,r,n);if(0!==t)return 0===r?0===n?(i=-t/e)<0?[i,0,0]:[0,0,i]:ki(e,t,0,n):0===n?0===(o=Wi.computeRealRoots(e,t,r)).length?[0]:o[1]<=0?[o[0],o[1],0]:0<=o[0]?[0,o[0],o[1]]:[o[0],0,o[1]]:ki(e,t,r,n);if(0!==r)return 0===n?0===(o=Wi.computeRealRoots(e,0,r)).Length?[0]:[o[0],0,o[1]]:ki(e,0,r,n);if(0===n)return[0,0,0];var i=(i=-n/e)<0?-Math.pow(-i,1/3):Math.pow(i,1/3);return[i,i,i]};var Ki={};function Zi(e,t,r,n){var o=e*e,i=t-3*o/8,a=r-t*e/2+o*e/8,n=n-r*e/4+t*o/16-3*o*o/256,r=Xi.computeRealRoots(1,2*i,i*i-4*n,-a*a);if(0<r.length){t=-e/4,o=r[r.length-1];if(Math.abs(o)<B.EPSILON14){e=Wi.computeRealRoots(1,i,n);if(2===e.length){var r=e[0],s=e[1];if(0<=r&&0<=s){n=Math.sqrt(r),e=Math.sqrt(s);return[t-e,t-n,t+n,t+e]}if(0<=r&&s<0)return[t-(u=Math.sqrt(r)),t+u];if(r<0&&0<=s)return[t-(u=Math.sqrt(s)),t+u]}return[]}if(0<o){var s=Math.sqrt(o),u=(i+o+a/s)/2,a=Wi.computeRealRoots(1,s,(i+o-a/s)/2),u=Wi.computeRealRoots(1,-s,u);return 0!==a.length?(a[0]+=t,a[1]+=t,0!==u.length?(u[0]+=t,u[1]+=t,a[1]<=u[0]?[a[0],a[1],u[0],u[1]]:u[1]<=a[0]?[u[0],u[1],a[0],a[1]]:a[0]>=u[0]&&a[1]<=u[1]?[u[0],a[0],a[1],u[1]]:u[0]>=a[0]&&u[1]<=a[1]?[a[0],u[0],u[1],a[1]]:a[0]>u[0]&&a[0]<u[1]?[u[0],a[0],u[1],a[1]]:[a[0],u[0],a[1],u[1]]):a):0!==u.length?(u[0]+=t,u[1]+=t,u):[]}}return[]}function Ji(e,t,r,n){var o=e*e,i=Xi.computeRealRoots(1,-2*t,r*e+t*t-4*n,o*n-r*t*e+r*r);if(0<i.length){var a,s,u,c,l=i[0],f=t-l,h=f*f,p=e/2,i=f/2,t=h-4*n,f=h+4*Math.abs(n),h=o-4*l,o=o+4*Math.abs(l);s=l<0||t*o<h*f?(a=(h=Math.sqrt(h))/2,0===h?0:(e*i-r)/h):(a=0===(s=Math.sqrt(t))?0:(e*i-r)/s,s/2),0==p&&0===a?c=u=0:B.sign(p)===B.sign(a)?c=l/(u=p+a):u=l/(c=p-a),0==i&&0===s?d=m=0:B.sign(i)===B.sign(s)?d=n/(m=i+s):m=n/(d=i-s);var m=Wi.computeRealRoots(1,u,m),d=Wi.computeRealRoots(1,c,d);if(0!==m.length)return 0!==d.length?m[1]<=d[0]?[m[0],m[1],d[0],d[1]]:d[1]<=m[0]?[d[0],d[1],m[0],m[1]]:m[0]>=d[0]&&m[1]<=d[1]?[d[0],m[0],m[1],d[1]]:d[0]>=m[0]&&d[1]<=m[1]?[m[0],d[0],d[1],m[1]]:m[0]>d[0]&&m[0]<d[1]?[d[0],m[0],d[1],m[1]]:[m[0],d[0],m[1],d[1]]:m;if(0!==d.length)return d}return[]}function Qi(e,t){t=U.clone(C(t,U.ZERO)),U.equals(t,U.ZERO)||U.normalize(t,t),this.origin=U.clone(C(e,U.ZERO)),this.direction=t}Ki.computeDiscriminant=function(e,t,r,n,o){var i=e*e,a=t*t,s=a*t,u=r*r,c=u*r,l=n*n,f=l*n,h=o*o;return a*u*l-4*s*f-4*e*c*l+18*e*t*r*f-27*i*l*l+256*(i*e)*(h*o)+o*(18*s*r*n-4*a*c+16*e*u*u-80*e*t*u*n-6*e*a*l+144*i*r*l)+h*(144*e*a*r-27*a*a-128*i*u-192*i*t*n)},Ki.computeRealRoots=function(e,t,r,n,o){if(Math.abs(e)<B.EPSILON15)return Xi.computeRealRoots(t,r,n,o);var i=t/e,a=r/e,s=n/e,u=o/e,e=i<0?1:0;switch(e+=a<0?e+1:e,e+=s<0?e+1:e,e+=u<0?e+1:e){case 0:return Zi(i,a,s,u);case 1:case 2:return Ji(i,a,s,u);case 3:case 4:return Zi(i,a,s,u);case 5:return Ji(i,a,s,u);case 6:case 7:return Zi(i,a,s,u);case 8:return Ji(i,a,s,u);case 9:case 10:return Zi(i,a,s,u);case 11:return Ji(i,a,s,u);case 12:case 13:case 14:case 15:return Zi(i,a,s,u);default:return}},Qi.clone=function(e,t){if(F(e))return F(t)?(t.origin=U.clone(e.origin),t.direction=U.clone(e.direction),t):new Qi(e.origin,e.direction)},Qi.getPoint=function(e,t,r){return F(r)||(r=new U),r=U.multiplyByScalar(e.direction,t,r),U.add(e.origin,r,r)};var $i={rayPlane:function(e,t,r){F(r)||(r=new U);var n=e.origin,o=e.direction,i=t.normal,e=U.dot(i,o);if(!(Math.abs(e)<B.EPSILON15)){e=(-t.distance-U.dot(i,n))/e;if(!(e<0))return r=U.multiplyByScalar(o,e,r),U.add(n,r,r)}}},ea=new U,ta=new U,ra=new U,na=new U,oa=new U;$i.rayTriangleParametric=function(e,t,r,n,o){o=C(o,!1);var i,a,s,u=e.origin,c=e.direction,l=U.subtract(r,t,ea),e=U.subtract(n,t,ta),r=U.cross(c,e,ra),n=U.dot(l,r);if(o){if(n<B.EPSILON6)return;if(h=U.subtract(u,t,na),(f=U.dot(h,r))<0||n<f)return;if(i=U.cross(h,l,oa),(a=U.dot(c,i))<0||n<f+a)return;s=U.dot(e,i)/n}else{if(Math.abs(n)<B.EPSILON6)return;var f,n=1/n,h=U.subtract(u,t,na);if((f=U.dot(h,r)*n)<0||1<f)return;if(i=U.cross(h,l,oa),(a=U.dot(c,i)*n)<0||1<f+a)return;s=U.dot(e,i)*n}return s},$i.rayTriangle=function(e,t,r,n,o,i){o=$i.rayTriangleParametric(e,t,r,n,o);if(F(o)&&!(o<0))return F(i)||(i=new U),U.multiplyByScalar(e.direction,o,i),U.add(e.origin,i,i)};var ia=new Qi;$i.lineSegmentTriangle=function(e,t,r,n,o,i,a){var s=ia;U.clone(e,s.origin),U.subtract(t,e,s.direction),U.normalize(s.direction,s.direction);i=$i.rayTriangleParametric(s,r,n,o,i);if(!(!F(i)||i<0||i>U.distance(e,t)))return F(a)||(a=new U),U.multiplyByScalar(s.direction,i,a),U.add(s.origin,a,a)};var aa={root0:0,root1:0};function sa(e,t,r){F(r)||(r=new G);var n=e.origin,o=e.direction,e=t.center,t=t.radius*t.radius,e=U.subtract(n,e,ra),t=function(e,t,r,n){if(!((i=t*t-4*e*r)<0)){if(0<i){var o=1/(2*e),r=Math.sqrt(i),i=(-t+r)*o,o=(-t-r)*o;return i<o?(n.root0=i,n.root1=o):(n.root0=o,n.root1=i),n}e=-t/(2*e);if(0!=e)return n.root0=n.root1=e,n}}(U.dot(o,o),2*U.dot(o,e),U.magnitudeSquared(e)-t,aa);if(F(t))return r.start=t.root0,r.stop=t.root1,r}$i.raySphere=function(e,t,r){if(F(r=sa(e,t,r))&&!(r.stop<0))return r.start=Math.max(r.start,0),r};var ua=new Qi;$i.lineSegmentSphere=function(e,t,r,n){var o=ua;U.clone(e,o.origin);t=U.subtract(t,e,o.direction),e=U.magnitude(t);if(U.normalize(t,t),!(!F(n=sa(o,r,n))||n.stop<0||n.start>e))return n.start=Math.max(n.start,0),n.stop=Math.min(n.stop,e),n};var ca=new U,la=new U;function fa(e,t,r){var n=e+t;return B.sign(e)!==B.sign(t)&&Math.abs(n/Math.max(Math.abs(e),Math.abs(t)))<r?0:n}$i.rayEllipsoid=function(e,t){var r=t.oneOverRadii,n=U.multiplyComponents(r,e.origin,ca),t=U.multiplyComponents(r,e.direction,la),r=U.magnitudeSquared(n),e=U.dot(n,t);if(1<r){if(0<=e)return;var o,i,n=e*e,a=r-1;if(n<(i=(o=U.magnitudeSquared(t))*a))return;if(i<n){var s,u=e*e-i,c=(s=-e+Math.sqrt(u))/o,n=a/s;return c<n?new G(c,n):{start:n,stop:c}}c=Math.sqrt(a/o);return new G(c,c)}return r<1?(a=r-1,u=e*e-(i=(o=U.magnitudeSquared(t))*a),new G(0,(s=-e+Math.sqrt(u))/o)):e<0?new G(0,-e/(o=U.magnitudeSquared(t))):void 0};var ha=new U,pa=new U,ma=new U,da=new U,Ea=new U,ya=new j,_a=new j,ga=new j,Ta=new j,Aa=new j,Ra=new j,Sa=new j,Oa=new U,va=new U,Ia=new S;$i.grazingAltitudeLocation=function(e,t){var r=e.origin,n=e.direction;if(!U.equals(r,U.ZERO)){var o=t.geodeticSurfaceNormal(r,ha);if(0<=U.dot(n,o))return r}var i=F(this.rayEllipsoid(e,t)),a=t.transformPositionToScaledSpace(n,ha),o=U.normalize(a,a),e=U.mostOrthogonalAxis(a,da),a=U.normalize(U.cross(e,o,pa),pa),e=U.normalize(U.cross(o,a,ma),ma),s=ya;s[0]=o.x,s[1]=o.y,s[2]=o.z,s[3]=a.x,s[4]=a.y,s[5]=a.z,s[6]=e.x,s[7]=e.y,s[8]=e.z;var o=j.transpose(s,_a),u=j.fromScale(t.radii,ga),a=j.fromScale(t.oneOverRadii,Ta),e=Aa;e[0]=0,e[1]=-n.z,e[2]=n.y,e[3]=n.z,e[4]=0,e[5]=-n.x,e[6]=-n.y,e[7]=n.x,e[8]=0;var a=j.multiply(j.multiply(o,a,Ra),e,Ra),e=j.multiply(j.multiply(a,u,Sa),s,Sa),a=j.multiplyByVector(a,r,Ea),c=function(e,t,r,n,o){var i=n*n,a=o*o,s=(e[j.COLUMN1ROW1]-e[j.COLUMN2ROW2])*a,u=o*(n*fa(e[j.COLUMN1ROW0],e[j.COLUMN0ROW1],B.EPSILON15)+t.y),c=e[j.COLUMN0ROW0]*i+e[j.COLUMN2ROW2]*a+n*t.x+r,l=a*fa(e[j.COLUMN2ROW1],e[j.COLUMN1ROW2],B.EPSILON15),f=o*(n*fa(e[j.COLUMN2ROW0],e[j.COLUMN0ROW2])+t.z),h=[];if(0==f&&0==l){if(0===(y=Wi.computeRealRoots(s,u,c)).length)return h;var p=y[0],m=Math.sqrt(Math.max(1-p*p,0));return h.push(new U(n,o*p,o*-m)),h.push(new U(n,o*p,o*m)),2===y.length&&(d=y[1],E=Math.sqrt(Math.max(1-d*d,0)),h.push(new U(n,o*d,o*-E)),h.push(new U(n,o*d,o*E))),h}var d=s*s+(p=l*l),E=2*(u*s+(m=f*l)),p=2*c*s+u*u-p+(t=f*f),m=2*(c*u-m);if(0==d&&0==E&&0==p&&0==m)return h;var y,_=(y=Ki.computeRealRoots(d,E,p,m,c*c-t)).length;if(0===_)return h;for(var g=0;g<_;++g){var T=y[g],A=T*T,R=Math.max(1-A,0),R=Math.sqrt(R),A=B.sign(s)===B.sign(c)?fa(s*A+c,u*T,B.EPSILON12):B.sign(c)===B.sign(u*T)?fa(s*A,u*T+c,B.EPSILON12):fa(s*A+u*T,c,B.EPSILON12),A=A*fa(l*T,f,B.EPSILON15);A<0?h.push(new U(n,o*T,o*R)):0<A?h.push(new U(n,o*T,o*-R)):0!==R?(h.push(new U(n,o*T,o*-R)),h.push(new U(n,o*T,o*R)),++g):h.push(new U(n,o*T,o*R))}return h}(e,U.negate(a,ha),0,0,1),l=c.length;if(0<l){for(var f=U.clone(U.ZERO,va),h=Number.NEGATIVE_INFINITY,p=0;p<l;++p){var m=j.multiplyByVector(u,j.multiplyByVector(s,c[p],Oa),Oa),d=U.normalize(U.subtract(m,r,da),da),d=U.dot(d,n);h<d&&(h=d,f=U.clone(m,f))}e=t.cartesianToCartographic(f,Ia),h=B.clamp(h,0,1),a=U.magnitude(U.subtract(f,r,da))*Math.sqrt(1-h*h);return e.height=a=i?-a:a,t.cartographicToCartesian(e,new U)}};var Na=new U;function wa(){this.high=U.clone(U.ZERO),this.low=U.clone(U.ZERO)}$i.lineSegmentPlane=function(e,t,r,n){F(n)||(n=new U);var o=U.subtract(t,e,Na),i=r.normal,t=U.dot(i,o);if(!(Math.abs(t)<B.EPSILON6)){i=U.dot(i,e),t=-(r.distance+i)/t;if(!(t<0||1<t))return U.multiplyByScalar(o,t,n),U.add(e,n,n),n}},$i.trianglePlaneIntersection=function(e,t,r,n){var o,i,a=n.normal,s=n.distance,u=U.dot(a,e)+s<0,c=U.dot(a,t)+s<0,a=U.dot(a,r)+s<0,s=0;if(s+=u?1:0,s+=c?1:0,1!=(s+=a?1:0)&&2!=s||(o=new U,i=new U),1==s){if(u)return $i.lineSegmentPlane(e,t,n,o),$i.lineSegmentPlane(e,r,n,i),{positions:[e,t,r,o,i],indices:[0,3,4,1,2,4,1,4,3]};if(c)return $i.lineSegmentPlane(t,r,n,o),$i.lineSegmentPlane(t,e,n,i),{positions:[e,t,r,o,i],indices:[1,3,4,2,0,4,2,4,3]};if(a)return $i.lineSegmentPlane(r,e,n,o),$i.lineSegmentPlane(r,t,n,i),{positions:[e,t,r,o,i],indices:[2,3,4,0,1,4,0,4,3]}}else if(2==s){if(!u)return $i.lineSegmentPlane(t,e,n,o),$i.lineSegmentPlane(r,e,n,i),{positions:[e,t,r,o,i],indices:[1,2,4,1,4,3,0,3,4]};if(!c)return $i.lineSegmentPlane(r,t,n,o),$i.lineSegmentPlane(e,t,n,i),{positions:[e,t,r,o,i],indices:[2,0,4,2,4,3,1,3,4]};if(!a)return $i.lineSegmentPlane(e,r,n,o),$i.lineSegmentPlane(t,r,n,i),{positions:[e,t,r,o,i],indices:[0,1,4,0,4,3,2,3,4]}}},wa.encode=function(e,t){var r;return F(t)||(t={high:0,low:0}),0<=e?(r=65536*Math.floor(e/65536),t.high=r,t.low=e-r):(r=65536*Math.floor(-e/65536),t.high=-r,t.low=e+r),t};var Ca={high:0,low:0};wa.fromCartesian=function(e,t){var r=(t=!F(t)?new wa:t).high,n=t.low;return wa.encode(e.x,Ca),r.x=Ca.high,n.x=Ca.low,wa.encode(e.y,Ca),r.y=Ca.high,n.y=Ca.low,wa.encode(e.z,Ca),r.z=Ca.high,n.z=Ca.low,t};var Ma=new wa;wa.writeElements=function(e,t,r){wa.fromCartesian(e,Ma);var n=Ma.high,e=Ma.low;t[r]=n.x,t[r+1]=n.y,t[r+2]=n.z,t[r+3]=e.x,t[r+4]=e.y,t[r+5]=e.z};var ba={octEncodeInRange:function(e,t,r){var n;return r.x=e.x/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),r.y=e.y/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),e.z<0&&(n=r.x,e=r.y,r.x=(1-Math.abs(e))*B.signNotZero(n),r.y=(1-Math.abs(n))*B.signNotZero(e)),r.x=B.toSNorm(r.x,t),r.y=B.toSNorm(r.y,t),r},octEncode:function(e,t){return ba.octEncodeInRange(e,255,t)}},xa=new at,Pa=new Uint8Array(1);function Da(e){return Pa[0]=e,Pa[0]}ba.octEncodeToCartesian4=function(e,t){return ba.octEncodeInRange(e,65535,xa),t.x=Da(xa.x*(1/256)),t.y=Da(xa.x),t.z=Da(xa.y*(1/256)),t.w=Da(xa.y),t},ba.octDecodeInRange=function(e,t,r,n){return n.x=B.fromSNorm(e,r),n.y=B.fromSNorm(t,r),n.z=1-(Math.abs(n.x)+Math.abs(n.y)),n.z<0&&(r=n.x,n.x=(1-Math.abs(n.y))*B.signNotZero(r),n.y=(1-Math.abs(r))*B.signNotZero(n.y)),U.normalize(n,n)},ba.octDecode=function(e,t,r){return ba.octDecodeInRange(e,t,255,r)},ba.octDecodeFromCartesian4=function(e,t){var r=e.x,n=e.y,o=e.z,e=e.w;return ba.octDecodeInRange(256*r+n,256*o+e,65535,t)},ba.octPackFloat=function(e){return 256*e.x+e.y};var La=new at;function Fa(e){return e>>1^-(1&e)}ba.octEncodeFloat=function(e){return ba.octEncode(e,La),ba.octPackFloat(La)},ba.octDecodeFloat=function(e,t){var r=e/256,e=Math.floor(r);return ba.octDecode(e,256*(r-e),t)},ba.octPack=function(e,t,r,n){e=ba.octEncodeFloat(e),t=ba.octEncodeFloat(t),r=ba.octEncode(r,La);return n.x=65536*r.x+e,n.y=65536*r.y+t,n},ba.octUnpack=function(e,t,r,n){var o=e.x/65536,i=Math.floor(o),a=65536*(o-i),o=e.y/65536,e=Math.floor(o),o=65536*(o-e);ba.octDecodeFloat(a,t),ba.octDecodeFloat(o,r),ba.octDecode(i,e,n)},ba.compressTextureCoordinates=function(e){return 4096*(4095*e.x|0)+(4095*e.y|0)},ba.decompressTextureCoordinates=function(e,t){var r=Math.floor(e/4096);return t.x=r/4095,t.y=(e-4096*r)/4095,t},ba.zigZagDeltaDecode=function(e,t,r){for(var n=e.length,o=0,i=0,a=0,s=0;s<n;++s)o+=Fa(e[s]),i+=Fa(t[s]),e[s]=o,t[s]=i,F(r)&&(a+=Fa(r[s]),r[s]=a)};var Ua=new U,za=new U,Ba=new U;var qa={UNSIGNED_BYTE:nt.UNSIGNED_BYTE,UNSIGNED_SHORT:nt.UNSIGNED_SHORT,UNSIGNED_INT:nt.UNSIGNED_INT,getSizeInBytes:function(e){switch(e){case qa.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case qa.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case qa.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT}},fromSizeInBytes:function(e){switch(e){case 2:return qa.UNSIGNED_SHORT;case 4:return qa.UNSIGNED_INT;case 1:return qa.UNSIGNED_BYTE}},validate:function(e){return F(e)&&(e===qa.UNSIGNED_BYTE||e===qa.UNSIGNED_SHORT||e===qa.UNSIGNED_INT)},createTypedArray:function(e,t){return new(e>=B.SIXTY_FOUR_KILOBYTES?Uint32Array:Uint16Array)(t)},createTypedArrayFromArrayBuffer:function(e,t,r,n){return new(e>=B.SIXTY_FOUR_KILOBYTES?Uint32Array:Uint16Array)(t,r,n)}},Ga=Object.freeze(qa),ja={};function Ha(e,t,r,n,o){e[t++]=r,e[t++]=n,e[t++]=n,e[t++]=o,e[t++]=o,e[t]=r}function Va(e){var t,r,n={};for(t in e)e.hasOwnProperty(t)&&F(e[t])&&F(e[t].values)&&(r=e[t],n[t]=new zi({componentDatatype:r.componentDatatype,componentsPerAttribute:r.componentsPerAttribute,normalize:r.normalize,values:[]}));return n}ja.toWireframe=function(e){var t=e.indices;if(F(t)){switch(e.primitiveType){case Ii.TRIANGLES:e.indices=function(e){for(var t=e.length,r=Ga.createTypedArray(t,t/3*6),n=0,o=0;o<t;o+=3,n+=6)Ha(r,n,e[o],e[o+1],e[o+2]);return r}(t);break;case Ii.TRIANGLE_STRIP:e.indices=function(e){var t=e.length;if(3<=t){var r=Ga.createTypedArray(t,6*(t-2));Ha(r,0,e[0],e[1],e[2]);for(var n=6,o=3;o<t;++o,n+=6)Ha(r,n,e[o-1],e[o],e[o-2]);return r}return new Uint16Array}(t);break;case Ii.TRIANGLE_FAN:e.indices=function(e){if(0<e.length){for(var t=e.length-1,r=Ga.createTypedArray(t,6*(t-1)),n=e[0],o=0,i=1;i<t;++i,o+=6)Ha(r,o,n,e[i],e[i+1]);return r}return new Uint16Array}(t)}e.primitiveType=Ii.LINES}return e},ja.createLineSegmentsForVectors=function(e,t,r){t=C(t,"normal"),r=C(r,1e4);for(var n,o=e.attributes.position.values,i=e.attributes[t].values,a=o.length,s=new Float64Array(2*a),u=0,c=0;c<a;c+=3)s[u++]=o[c],s[u++]=o[c+1],s[u++]=o[c+2],s[u++]=o[c]+i[c]*r,s[u++]=o[c+1]+i[c+1]*r,s[u++]=o[c+2]+i[c+2]*r;e=e.boundingSphere;return F(e)&&(n=new ge(e.center,e.radius+r)),new Ni({attributes:{position:new zi({componentDatatype:it.DOUBLE,componentsPerAttribute:3,values:s})},primitiveType:Ii.LINES,boundingSphere:n})},ja.createAttributeLocations=function(e){for(var t,r=["position","positionHigh","positionLow","position3DHigh","position3DLow","position2DHigh","position2DLow","pickColor","normal","st","tangent","bitangent","extrudeDirection","compressedAttributes"],n=e.attributes,o={},i=0,a=r.length,s=0;s<a;++s){var u=r[s];F(n[u])&&(o[u]=i++)}for(t in n)n.hasOwnProperty(t)&&!F(o[t])&&(o[t]=i++);return o},ja.reorderForPreVertexCache=function(e){var t=Ni.computeNumberOfVertices(e),r=e.indices;if(F(r)){for(var n=new Int32Array(t),o=0;o<t;o++)n[o]=-1;for(var i,a=r,s=a.length,u=Ga.createTypedArray(t,s),c=0,l=0,f=0;c<s;)-1!==(i=n[a[c]])?u[l]=i:(n[i=a[c]]=f,u[l]=f,++f),++c,++l;e.indices=u;var h,p=e.attributes;for(h in p)if(p.hasOwnProperty(h)&&F(p[h])&&F(p[h].values)){for(var m=p[h],d=m.values,E=0,y=m.componentsPerAttribute,_=it.createTypedArray(m.componentDatatype,f*y);E<t;){var g=n[E];if(-1!==g)for(var T=0;T<y;T++)_[y*g+T]=d[y*E+T];++E}m.values=_}}return e},ja.reorderForPostVertexCache=function(e,t){var r=e.indices;if(e.primitiveType===Ii.TRIANGLES&&F(r)){for(var n=r.length,o=0,i=0;i<n;i++)r[i]>o&&(o=r[i]);e.indices=qi.tipsify({indices:r,maximumIndex:o,cacheSize:t})}return e},ja.fitToUnsignedShortIndices=function(e){var t=[],r=Ni.computeNumberOfVertices(e);if(F(e.indices)&&r>=B.SIXTY_FOUR_KILOBYTES){var n,o=[],i=[],a=0,s=Va(e.attributes),u=e.indices,c=u.length;e.primitiveType===Ii.TRIANGLES?n=3:e.primitiveType===Ii.LINES?n=2:e.primitiveType===Ii.POINTS&&(n=1);for(var l=0;l<c;l+=n){for(var f=0;f<n;++f){var h=u[l+f],p=o[h];F(p)||(p=a++,o[h]=p,function(e,t,r){for(var n in t)if(t.hasOwnProperty(n)&&F(t[n])&&F(t[n].values))for(var o=t[n],i=0;i<o.componentsPerAttribute;++i)e[n].values.push(o.values[r*o.componentsPerAttribute+i])}(s,e.attributes,h)),i.push(p)}a+n>=B.SIXTY_FOUR_KILOBYTES&&(t.push(new Ni({attributes:s,indices:i,primitiveType:e.primitiveType,boundingSphere:e.boundingSphere,boundingSphereCV:e.boundingSphereCV})),o=[],i=[],a=0,s=Va(e.attributes))}0!==i.length&&t.push(new Ni({attributes:s,indices:i,primitiveType:e.primitiveType,boundingSphere:e.boundingSphere,boundingSphereCV:e.boundingSphereCV}))}else t.push(e);return t};var Wa=new U,Ya=new S;ja.projectTo2D=function(e,t,r,n,o){for(var i=e.attributes[t],a=(o=F(o)?o:new z).ellipsoid,s=i.values,u=new Float64Array(s.length),c=0,l=0;l<s.length;l+=3){var f=U.fromArray(s,l,Wa),f=a.cartesianToCartographic(f,Ya),f=o.project(f,Wa);u[c++]=f.x,u[c++]=f.y,u[c++]=f.z}return e.attributes[r]=i,e.attributes[n]=new zi({componentDatatype:it.DOUBLE,componentsPerAttribute:3,values:u}),delete e.attributes[t],e};var Xa={high:0,low:0};ja.encodeAttribute=function(e,t,r,n){for(var o=e.attributes[t],i=o.values,a=i.length,s=new Float32Array(a),u=new Float32Array(a),c=0;c<a;++c)wa.encode(i[c],Xa),s[c]=Xa.high,u[c]=Xa.low;o=o.componentsPerAttribute;return e.attributes[r]=new zi({componentDatatype:it.FLOAT,componentsPerAttribute:o,values:s}),e.attributes[n]=new zi({componentDatatype:it.FLOAT,componentsPerAttribute:o,values:u}),delete e.attributes[t],e};var ka=new U;function Ka(e,t){if(F(t))for(var r=t.values,n=r.length,o=0;o<n;o+=3)U.unpack(r,o,ka),re.multiplyByPoint(e,ka,ka),U.pack(ka,r,o)}function Za(e,t){if(F(t))for(var r=t.values,n=r.length,o=0;o<n;o+=3)U.unpack(r,o,ka),j.multiplyByVector(e,ka,ka),ka=U.normalize(ka,ka),U.pack(ka,r,o)}var Ja=new re,Qa=new j;ja.transformToWorldCoordinates=function(e){var t=e.modelMatrix;if(re.equals(t,re.IDENTITY))return e;var r=e.geometry.attributes;Ka(t,r.position),Ka(t,r.prevPosition),Ka(t,r.nextPosition),(F(r.normal)||F(r.tangent)||F(r.bitangent))&&(re.inverse(t,Ja),re.transpose(Ja,Ja),re.getMatrix3(Ja,Qa),Za(Qa,r.normal),Za(Qa,r.tangent),Za(Qa,r.bitangent));r=e.geometry.boundingSphere;return F(r)&&(e.geometry.boundingSphere=ge.transform(r,t,r)),e.modelMatrix=re.clone(re.IDENTITY),e};var $a=new U;function es(e,t){var r,n,o=e.length;e[0].modelMatrix;var i,a,s,u=F(e[0][t].indices),c=e[0][t].primitiveType,l=function(e,t){var r,n=e.length,o={},i=e[0][t].attributes;for(r in i)if(i.hasOwnProperty(r)&&F(i[r])&&F(i[r].values)){for(var a=i[r],s=a.values.length,u=!0,c=1;c<n;++c){var l=e[c][t].attributes[r];if(!F(l)||a.componentDatatype!==l.componentDatatype||a.componentsPerAttribute!==l.componentsPerAttribute||a.normalize!==l.normalize){u=!1;break}s+=l.values.length}u&&(o[r]=new zi({componentDatatype:a.componentDatatype,componentsPerAttribute:a.componentsPerAttribute,normalize:a.normalize,values:it.createTypedArray(a.componentDatatype,s)}))}return o}(e,t);for(r in l)if(l.hasOwnProperty(r))for(i=l[r].values,h=g=0;h<o;++h)for(s=(a=e[h][t].attributes[r].values).length,n=0;n<s;++n)i[g++]=a[n];if(u){for(var f=0,h=0;h<o;++h)f+=e[h][t].indices.length;var p=Ni.computeNumberOfVertices(new Ni({attributes:l,primitiveType:Ii.POINTS})),m=Ga.createTypedArray(p,f),d=0,E=0;for(h=0;h<o;++h){for(var y=e[h][t].indices,_=y.length,g=0;g<_;++g)m[d++]=E+y[g];E+=Ni.computeNumberOfVertices(e[h][t])}p=m}var T=new U,A=0;for(h=0;h<o;++h){if(!F(R=e[h][t].boundingSphere)){T=void 0;break}U.add(R.center,T,T)}if(F(T))for(U.divideByScalar(T,o,T),h=0;h<o;++h){var R=e[h][t].boundingSphere,S=U.magnitude(U.subtract(R.center,T,$a))+R.radius;A<S&&(A=S)}return new Ni({attributes:l,indices:p,primitiveType:c,boundingSphere:F(T)?new ge(T,A):void 0})}ja.combineInstances=function(e){for(var t=[],r=[],n=e.length,o=0;o<n;++o){var i=e[o];F(i.geometry)?t.push(i):F(i.westHemisphereGeometry)&&F(i.eastHemisphereGeometry)&&r.push(i)}var a=[];return 0<t.length&&a.push(es(t,"geometry")),0<r.length&&(a.push(es(r,"westHemisphereGeometry")),a.push(es(r,"eastHemisphereGeometry"))),a};var ts=new U,rs=new U,ns=new U,os=new U;ja.computeNormal=function(e){for(var t=e.indices,r=e.attributes,n=r.position.values,o=r.position.values.length/3,i=t.length,a=new Array(o),s=new Array(i/3),u=new Array(i),c=0;c<o;c++)a[c]={indexOffset:0,count:0,currentCount:0};var l=0;for(c=0;c<i;c+=3){var f=t[c],h=t[c+1],p=t[c+2],m=3*f,d=3*h,E=3*p;rs.x=n[m],rs.y=n[1+m],rs.z=n[2+m],ns.x=n[d],ns.y=n[1+d],ns.z=n[2+d],os.x=n[E],os.y=n[1+E],os.z=n[2+E],a[f].count++,a[h].count++,a[p].count++,U.subtract(ns,rs,ns),U.subtract(os,rs,os),s[l]=U.cross(ns,os,new U),l++}var y,_=0;for(c=0;c<o;c++)a[c].indexOffset+=_,_+=a[c].count;for(c=l=0;c<i;c+=3)u[(y=a[t[c]]).indexOffset+y.currentCount]=l,y.currentCount++,u[(y=a[t[c+1]]).indexOffset+y.currentCount]=l,y.currentCount++,u[(y=a[t[c+2]]).indexOffset+y.currentCount]=l,y.currentCount++,l++;var g=new Float32Array(3*o);for(c=0;c<o;c++){var T=3*c;if(y=a[c],U.clone(U.ZERO,ts),0<y.count){for(l=0;l<y.count;l++)U.add(ts,s[u[y.indexOffset+l]],ts);U.equalsEpsilon(U.ZERO,ts,B.EPSILON10)&&U.clone(s[u[y.indexOffset]],ts)}U.equalsEpsilon(U.ZERO,ts,B.EPSILON10)&&(ts.z=1),U.normalize(ts,ts),g[T]=ts.x,g[1+T]=ts.y,g[2+T]=ts.z}return e.attributes.normal=new zi({componentDatatype:it.FLOAT,componentsPerAttribute:3,values:g}),e};var is=new U,as=new U,ss=new U;ja.computeTangentAndBitangent=function(e){e.attributes;for(var t=e.indices,r=e.attributes.position.values,n=e.attributes.normal.values,o=e.attributes.st.values,i=e.attributes.position.values.length/3,a=t.length,s=new Array(3*i),u=0;u<s.length;u++)s[u]=0;for(u=0;u<a;u+=3){var c,l=t[u],f=t[u+1],h=t[u+2],p=3*f,m=3*h,d=2*l,E=2*f,y=2*h,_=r[c=3*l],g=r[c+1],f=r[c+2],h=o[d],l=o[1+d],d=o[1+E]-l,l=o[1+y]-l,h=1/((o[E]-h)*l-(o[y]-h)*d),_=(l*(r[p]-_)-d*(r[m]-_))*h,g=(l*(r[p+1]-g)-d*(r[m+1]-g))*h,h=(l*(r[p+2]-f)-d*(r[m+2]-f))*h;s[c]+=_,s[c+1]+=g,s[c+2]+=h,s[p]+=_,s[p+1]+=g,s[p+2]+=h,s[m]+=_,s[m+1]+=g,s[m+2]+=h}var T=new Float32Array(3*i),A=new Float32Array(3*i);for(u=0;u<i;u++){p=(c=3*u)+1,m=c+2;var R=U.fromArray(n,c,is),S=U.fromArray(s,c,ss),O=U.dot(R,S);U.multiplyByScalar(R,O,as),U.normalize(U.subtract(S,as,S),S),T[c]=S.x,T[p]=S.y,T[m]=S.z,U.normalize(U.cross(R,S,S),S),A[c]=S.x,A[p]=S.y,A[m]=S.z}return e.attributes.tangent=new zi({componentDatatype:it.FLOAT,componentsPerAttribute:3,values:T}),e.attributes.bitangent=new zi({componentDatatype:it.FLOAT,componentsPerAttribute:3,values:A}),e};var us=new at,cs=new U,ls=new U,fs=new U,hs=new at;function ps(e){switch(e.primitiveType){case Ii.TRIANGLE_FAN:return function(e){var t=Ni.computeNumberOfVertices(e),r=Ga.createTypedArray(t,3*(t-2));r[0]=1,r[1]=0,r[2]=2;for(var n=3,o=3;o<t;++o)r[n++]=o-1,r[n++]=0,r[n++]=o;return e.indices=r,e.primitiveType=Ii.TRIANGLES,e}(e);case Ii.TRIANGLE_STRIP:return function(e){var t=Ni.computeNumberOfVertices(e),r=Ga.createTypedArray(t,3*(t-2));r[0]=0,r[1]=1,r[2]=2,3<t&&(r[3]=0,r[4]=2,r[5]=3);for(var n=6,o=3;o<t-1;o+=2)r[n++]=o,r[n++]=o-1,r[n++]=o+1,o+2<t&&(r[n++]=o,r[n++]=o+1,r[n++]=o+2);return e.indices=r,e.primitiveType=Ii.TRIANGLES,e}(e);case Ii.TRIANGLES:return function(e){if(F(e.indices))return e;for(var t=Ni.computeNumberOfVertices(e),r=Ga.createTypedArray(t,t),n=0;n<t;++n)r[n]=n;return e.indices=r,e}(e);case Ii.LINE_STRIP:return function(e){var t=Ni.computeNumberOfVertices(e),r=Ga.createTypedArray(t,2*(t-1));r[0]=0,r[1]=1;for(var n=2,o=2;o<t;++o)r[n++]=o-1,r[n++]=o;return e.indices=r,e.primitiveType=Ii.LINES,e}(e);case Ii.LINE_LOOP:return function(e){var t=Ni.computeNumberOfVertices(e),r=Ga.createTypedArray(t,2*t);r[0]=0,r[1]=1;for(var n=2,o=2;o<t;++o)r[n++]=o-1,r[n++]=o;return r[n++]=t-1,r[n]=0,e.indices=r,e.primitiveType=Ii.LINES,e}(e);case Ii.LINES:return function(e){if(F(e.indices))return e;for(var t=Ni.computeNumberOfVertices(e),r=Ga.createTypedArray(t,t),n=0;n<t;++n)r[n]=n;return e.indices=r,e}(e)}return e}function ms(e,t){Math.abs(e.y)<B.EPSILON6&&(e.y=t?-B.EPSILON6:B.EPSILON6)}ja.compressVertices=function(e){var t=e.attributes.extrudeDirection;if(F(t)){for(var r=t.values,n=r.length/3,o=new Float32Array(2*n),i=0,a=0;a<n;++a)U.fromArray(r,3*a,cs),U.equals(cs,U.ZERO)?i+=2:(hs=ba.octEncodeInRange(cs,65535,hs),o[i++]=hs.x,o[i++]=hs.y);return e.attributes.compressedAttributes=new zi({componentDatatype:it.FLOAT,componentsPerAttribute:2,values:o}),delete e.attributes.extrudeDirection,e}var s=e.attributes.normal,u=e.attributes.st,c=F(s),l=F(u);if(!c&&!l)return e;var f,h,p,m,d=e.attributes.tangent,t=e.attributes.bitangent,E=F(d),y=F(t);c&&(f=s.values),l&&(h=u.values),E&&(p=d.values),y&&(m=t.values);d=n=(c?f:h).length/(c?3:2),t=l&&c?2:1;d*=t+=E||y?1:0;var _=new Float32Array(d),g=0;for(a=0;a<n;++a){l&&(at.fromArray(h,2*a,us),_[g++]=ba.compressTextureCoordinates(us));var T=3*a;c&&F(p)&&F(m)?(U.fromArray(f,T,cs),U.fromArray(p,T,ls),U.fromArray(m,T,fs),ba.octPack(cs,ls,fs,us),_[g++]=us.x,_[g++]=us.y):(c&&(U.fromArray(f,T,cs),_[g++]=ba.octEncodeFloat(cs)),E&&(U.fromArray(p,T,cs),_[g++]=ba.octEncodeFloat(cs)),y&&(U.fromArray(m,T,cs),_[g++]=ba.octEncodeFloat(cs)))}return e.attributes.compressedAttributes=new zi({componentDatatype:it.FLOAT,componentsPerAttribute:t,values:_}),c&&delete e.attributes.normal,l&&delete e.attributes.st,y&&delete e.attributes.bitangent,E&&delete e.attributes.tangent,e};var ds=new U;function Es(e,t,r,n){U.add(e,U.multiplyByScalar(U.subtract(t,e,ds),e.y/(e.y-t.y),ds),r),U.clone(r,n),ms(r,!0),ms(n,!1)}var ys=new U,_s=new U,gs=new U,Ts=new U,As={positions:new Array(7),indices:new Array(9)};function Rs(e,t,r){if(!(0<=e.x||0<=t.x||0<=r.x)){!function(e,t,r){if(0!==e.y&&0!==t.y&&0!==r.y)return ms(e,e.y<0),ms(t,t.y<0),ms(r,r.y<0);var n=Math.abs(e.y),o=Math.abs(t.y),i=Math.abs(r.y),o=o<n?i<n?B.sign(e.y):B.sign(r.y):i<o?B.sign(t.y):B.sign(r.y);ms(e,o=o<0),ms(t,o),ms(r,o)}(e,t,r);var n=e.y<0,o=t.y<0,i=r.y<0,a=0;a+=n?1:0,a+=o?1:0;var s=As.indices;1==(a+=i?1:0)?(s[1]=3,s[2]=4,s[5]=6,s[7]=6,s[8]=5,n?(Es(e,t,ys,gs),Es(e,r,_s,Ts),s[0]=0,s[3]=1,s[4]=2,s[6]=1):o?(Es(t,r,ys,gs),Es(t,e,_s,Ts),s[0]=1,s[3]=2,s[4]=0,s[6]=2):i&&(Es(r,e,ys,gs),Es(r,t,_s,Ts),s[0]=2,s[3]=0,s[4]=1,s[6]=0)):2==a&&(s[2]=4,s[4]=4,s[5]=3,s[7]=5,s[8]=6,n?o?i||(Es(r,e,ys,gs),Es(r,t,_s,Ts),s[0]=0,s[1]=1,s[3]=0,s[6]=2):(Es(t,r,ys,gs),Es(t,e,_s,Ts),s[0]=2,s[1]=0,s[3]=2,s[6]=1):(Es(e,t,ys,gs),Es(e,r,_s,Ts),s[0]=1,s[1]=2,s[3]=1,s[6]=0));s=As.positions;return s[0]=e,s[1]=t,s[2]=r,s.length=3,1!=a&&2!=a||(s[3]=ys,s[4]=_s,s[5]=gs,s[6]=Ts,s.length=7),As}}function Ss(e,t){var r=e.attributes;if(0!==r.position.values.length){for(var n in r)r.hasOwnProperty(n)&&F(r[n])&&F(r[n].values)&&((n=r[n]).values=it.createTypedArray(n.componentDatatype,n.values));var o=Ni.computeNumberOfVertices(e);return e.indices=Ga.createTypedArray(o,e.indices),t&&(e.boundingSphere=ge.fromVertices(r.position.values)),e}}function Os(e){var t,r,n=e.attributes,o={};for(t in n)n.hasOwnProperty(t)&&F(n[t])&&F(n[t].values)&&(r=n[t],o[t]=new zi({componentDatatype:r.componentDatatype,componentsPerAttribute:r.componentsPerAttribute,normalize:r.normalize,values:[]}));return new Ni({attributes:o,indices:[],primitiveType:e.primitiveType})}function vs(e,t,r){var n=F(e.geometry.boundingSphere);t=Ss(t,n),F(r=Ss(r,n))&&!F(t)?e.geometry=r:!F(r)&&F(t)?e.geometry=t:(e.westHemisphereGeometry=t,e.eastHemisphereGeometry=r,e.geometry=void 0)}function Is(u,c){var l=new u,f=new u,h=new u;return function(e,t,r,n,o,i,a,s){e=u.fromArray(o,e*c,l),t=u.fromArray(o,t*c,f),r=u.fromArray(o,r*c,h);u.multiplyByScalar(e,n.x,e),u.multiplyByScalar(t,n.y,t),u.multiplyByScalar(r,n.z,r);e=u.add(e,t,e);u.add(e,r,e),s&&u.normalize(e,e),u.pack(e,i,a*c)}}var Ns=Is(J,4),ws=Is(U,3),Cs=Is(at,2),Ms=function(e,t,r,n,o,i,a){e=o[e]*n.x,t=o[t]*n.y,n=o[r]*n.z;i[a]=e+t+n>B.EPSILON6?1:0},bs=new U,xs=new U,Ps=new U,Ds=new U;function Ls(e,t,r,n,o,i,a,s,u,c,l,f,h,p,m,d){if(F(i)||F(a)||F(s)||F(u)||F(c)||0!==p){var E,y=function(e,t,r,n,o){var i,a,s,u,c,l,f;if(F(o)||(o=new U),F(t.z)){if(U.equalsEpsilon(e,t,B.EPSILON14))return U.clone(U.UNIT_X,o);if(U.equalsEpsilon(e,r,B.EPSILON14))return U.clone(U.UNIT_Y,o);if(U.equalsEpsilon(e,n,B.EPSILON14))return U.clone(U.UNIT_Z,o);i=U.subtract(r,t,Ua),a=U.subtract(n,t,za),s=U.subtract(e,t,Ba),u=U.dot(i,i),h=U.dot(i,a),c=U.dot(i,s),l=U.dot(a,a),f=U.dot(a,s)}else{if(at.equalsEpsilon(e,t,B.EPSILON14))return U.clone(U.UNIT_X,o);if(at.equalsEpsilon(e,r,B.EPSILON14))return U.clone(U.UNIT_Y,o);if(at.equalsEpsilon(e,n,B.EPSILON14))return U.clone(U.UNIT_Z,o);i=at.subtract(r,t,Ua),a=at.subtract(n,t,za),s=at.subtract(e,t,Ba),u=at.dot(i,i),h=at.dot(i,a),c=at.dot(i,s),l=at.dot(a,a),f=at.dot(a,s)}o.y=l*c-h*f,o.z=u*f-h*c;var h=u*l-h*h;return 0!==o.y&&(o.y/=h),0!==o.z&&(o.z/=h),o.x=1-o.y-o.z,o}(n,U.fromArray(o,3*e,bs),U.fromArray(o,3*t,xs),U.fromArray(o,3*r,Ps),Ds);if(F(i)&&ws(e,t,r,y,i,f.normal.values,d,!0),F(c)&&(o=U.fromArray(c,3*e,bs),i=U.fromArray(c,3*t,xs),c=U.fromArray(c,3*r,Ps),U.multiplyByScalar(o,y.x,o),U.multiplyByScalar(i,y.y,i),U.multiplyByScalar(c,y.z,c),U.equals(o,U.ZERO)&&U.equals(i,U.ZERO)&&U.equals(c,U.ZERO)?((E=bs).x=0,E.y=0,E.z=0):(E=U.add(o,i,o),U.add(E,c,E),U.normalize(E,E)),U.pack(E,f.extrudeDirection.values,3*d)),F(l)&&Ms(e,t,r,y,l,f.applyOffset.values,d),F(a)&&ws(e,t,r,y,a,f.tangent.values,d,!0),F(s)&&ws(e,t,r,y,s,f.bitangent.values,d,!0),F(u)&&Cs(e,t,r,y,u,f.st.values,d),0<p)for(var _=0;_<p;_++){var g=h[_];!function(e,t,r,n,o,i,a){var s=i.componentsPerAttribute,u=i.values,c=a.values;switch(s){case 4:Ns(e,t,r,n,u,c,o,!1);break;case 3:ws(e,t,r,n,u,c,o,!1);break;case 2:Cs(e,t,r,n,u,c,o,!1);break;default:c[o]=u[e]*n.x+u[t]*n.y+u[r]*n.z}}(e,t,r,y,d,m[g],f[g])}}}function Fs(e,t,r,n,o,i){var a=e.position.values.length/3;if(-1===o)return e.position.values.push(i.x,i.y,i.z),t.push(a),a;n=n[o],o=r[n];return-1===o?(r[n]=a,e.position.values.push(i.x,i.y,i.z),t.push(a),a):(t.push(o),o)}var Us={position:!0,normal:!0,bitangent:!0,tangent:!0,st:!0,extrudeDirection:!0,applyOffset:!0};function zs(e){var t,r=e.geometry,n=r.attributes,o=n.position.values,i=F(n.normal)?n.normal.values:void 0,a=F(n.bitangent)?n.bitangent.values:void 0,s=F(n.tangent)?n.tangent.values:void 0,u=F(n.st)?n.st.values:void 0,c=F(n.extrudeDirection)?n.extrudeDirection.values:void 0,l=F(n.applyOffset)?n.applyOffset.values:void 0,f=r.indices,h=[];for(t in n)n.hasOwnProperty(t)&&!Us[t]&&F(n[t])&&h.push(t);var p,m,d=h.length,E=Os(r),y=Os(r),_=[];_.length=o.length/3;var g=[];for(g.length=o.length/3,A=0;A<_.length;++A)_[A]=-1,g[A]=-1;for(var T=f.length,A=0;A<T;A+=3){var R=f[A],S=f[A+1],O=f[A+2],v=U.fromArray(o,3*R),I=U.fromArray(o,3*S),N=U.fromArray(o,3*O),w=Rs(v,I,N);if(F(w)&&3<w.positions.length)for(var C=w.positions,M=w.indices,b=M.length,x=0;x<b;++x){var P=M[x],D=C[P],L=D.y<0?(p=y.attributes,m=y.indices,_):(p=E.attributes,m=E.indices,g);Ls(R,S,O,D,o,i,s,a,u,c,l,p,h,d,n,Fs(p,m,L,f,P<3?A+P:-1,D))}else F(w)&&(v=w.positions[0],I=w.positions[1],N=w.positions[2]),L=v.y<0?(p=y.attributes,m=y.indices,_):(p=E.attributes,m=E.indices,g),Ls(R,S,O,v,o,i,s,a,u,c,l,p,h,d,n,Fs(p,m,L,f,A,v)),Ls(R,S,O,I,o,i,s,a,u,c,l,p,h,d,n,Fs(p,m,L,f,A+1,I)),Ls(R,S,O,N,o,i,s,a,u,c,l,p,h,d,n,Fs(p,m,L,f,A+2,N))}vs(e,y,E)}var Bs=Gi.fromPointNormal(U.ZERO,U.UNIT_Y),qs=new U,Gs=new U;function js(e,t,r,n,o,i,a){F(a)&&(n=U.fromArray(n,3*e,bs),U.equalsEpsilon(n,r,B.EPSILON10)?i.applyOffset.values[o]=a[e]:i.applyOffset.values[o]=a[t])}function Hs(e){var t,r=e.geometry,n=r.attributes,o=n.position.values,i=F(n.applyOffset)?n.applyOffset.values:void 0,a=r.indices,s=Os(r),u=Os(r),c=a.length,l=[];l.length=o.length/3;var f=[];for(f.length=o.length/3,t=0;t<l.length;++t)l[t]=-1,f[t]=-1;for(t=0;t<c;t+=2){var h=a[t],p=a[t+1],m=U.fromArray(o,3*h,bs),d=U.fromArray(o,3*p,xs);Math.abs(m.y)<B.EPSILON6&&(m.y<0?m.y=-B.EPSILON6:m.y=B.EPSILON6),Math.abs(d.y)<B.EPSILON6&&(d.y<0?d.y=-B.EPSILON6:d.y=B.EPSILON6);var E,y,_,g,T=s.attributes,A=s.indices,R=f,S=u.attributes,O=u.indices,v=l,I=$i.lineSegmentPlane(m,d,Bs,Ps);F(I)?(E=U.multiplyByScalar(U.UNIT_Y,5*B.EPSILON9,qs),m.y<0&&(U.negate(E,E),T=u.attributes,A=u.indices,R=l,S=s.attributes,O=s.indices,v=f),y=U.add(I,E,Gs),js(h,p,m,o,Fs(T,A,R,a,t,m),T,i),js(h,p,y,o,Fs(T,A,R,a,-1,y),T,i),U.negate(E,E),U.add(I,E,y),js(h,p,y,o,Fs(S,O,v,a,-1,y),S,i),js(h,p,d,o,Fs(S,O,v,a,t+1,d),S,i)):(S=m.y<0?(_=u.attributes,g=u.indices,l):(_=s.attributes,g=s.indices,f),js(h,p,m,o,Fs(_,g,S,a,t,m),_,i),js(h,p,d,o,Fs(_,g,S,a,t+1,d),_,i))}vs(e,u,s)}var Vs=new at,Ws=new at,Ys=new U,Xs=new U,ks=new U,Ks=new U,Zs=new U,Js=new U,Qs=new J;function $s(e){for(var e=e.attributes,t=e.position.values,r=e.prevPosition.values,n=e.nextPosition.values,o=t.length,i=0;i<o;i+=3){var a,s=U.unpack(t,i,Ys);0<s.x||(a=U.unpack(r,i,Xs),(s.y<0&&0<a.y||0<s.y&&a.y<0)&&(0<i-3?(r[i]=t[i-3],r[i+1]=t[i-2],r[i+2]=t[i-1]):U.pack(s,r,i)),a=U.unpack(n,i,ks),(s.y<0&&0<a.y||0<s.y&&a.y<0)&&(i+3<o?(n[i]=t[i+3],n[i+1]=t[i+4],n[i+2]=t[i+5]):U.pack(s,n,i)))}}var eu=5*B.EPSILON9,tu=B.EPSILON6;function ru(e,t,r){e=C(e,0),t=C(t,0),r=C(r,0),this.value=new Float32Array([e,t,r])}function nu(e,t){var r=e.attributes,e=r.position,n=e.values.length/e.componentsPerAttribute;r.batchId=new zi({componentDatatype:it.FLOAT,componentsPerAttribute:1,values:new Float32Array(n)});for(var o=r.batchId.values,i=0;i<n;++i)o[i]=t}function ou(e){var t=e.instances,r=e.projection,n=e.elementIndexUintSupported,o=e.scene3DOnly,i=e.vertexCacheOptimize,a=e.compressVertices,e=e.modelMatrix,s=t.length;for(E=0;E<s;++E)if(F(t[E].geometry)){t[E].geometry.primitiveType;break}if(!function(e,t,r){var n=!r,o=e.length;if(!n&&1<o)for(var i=e[0].modelMatrix,a=1;a<o;++a)if(!re.equals(i,e[a].modelMatrix)){n=!0;break}if(n)for(a=0;a<o;++a)F(e[a].geometry)&&ja.transformToWorldCoordinates(e[a]);else re.multiplyTransformation(t,e[0].modelMatrix,t)}(t,e,o),!o)for(E=0;E<s;++E)F(t[E].geometry)&&ja.splitLongitude(t[E]);if(!function(e){for(var t=e.length,r=0;r<t;++r){var n=e[r];F(n.geometry)?nu(n.geometry,r):F(n.westHemisphereGeometry)&&F(n.eastHemisphereGeometry)&&(nu(n.westHemisphereGeometry,r),nu(n.eastHemisphereGeometry,r))}}(t),i)for(E=0;E<s;++E){var u=t[E];F(u.geometry)?(ja.reorderForPostVertexCache(u.geometry),ja.reorderForPreVertexCache(u.geometry)):F(u.westHemisphereGeometry)&&F(u.eastHemisphereGeometry)&&(ja.reorderForPostVertexCache(u.westHemisphereGeometry),ja.reorderForPreVertexCache(u.westHemisphereGeometry),ja.reorderForPostVertexCache(u.eastHemisphereGeometry),ja.reorderForPreVertexCache(u.eastHemisphereGeometry))}var c=ja.combineInstances(t);for(s=c.length,E=0;E<s;++E){var l,f,h,p,m=(l=c[E]).attributes;if(o)for(f in m)m.hasOwnProperty(f)&&m[f].componentDatatype===it.DOUBLE&&ja.encodeAttribute(l,f,f+"3DHigh",f+"3DLow");else for(f in m)m.hasOwnProperty(f)&&m[f].componentDatatype===it.DOUBLE&&(ja.projectTo2D(l,f,h=f+"3D",p=f+"2D",r),F(l.boundingSphere)&&"position"===f&&(l.boundingSphereCV=ge.fromVertices(l.attributes.position2D.values)),ja.encodeAttribute(l,h,h+"High",h+"Low"),ja.encodeAttribute(l,p,p+"High",p+"Low"));a&&ja.compressVertices(l)}if(!n){for(var d=[],s=c.length,E=0;E<s;++E)l=c[E],d=d.concat(ja.fitToUnsignedShortIndices(l));c=d}return c}function iu(e,t,r,n){var o,i,a,s=n.length-1;a=0<=s?(o=(s=n[s]).offset+s.count,r[i=s.index].indices.length):r[i=o=0].indices.length;for(var u=e.length,c=0;c<u;++c){var l=e[c][t];F(l)&&(a<o+(l=l.indices.length)&&(o=0,a=r[++i].indices.length),n.push({index:i,offset:o,count:l}),o+=l)}}ja.splitLongitude=function(e){var t=e.geometry,r=t.boundingSphere;if(F(r)&&(0<r.center.x-r.radius||ge.intersectPlane(r,Gi.ORIGIN_ZX_PLANE)!==q.INTERSECTING))return e;if(t.geometryType!==Oi.NONE)switch(t.geometryType){case Oi.POLYLINES:!function(e){for(var t=e.geometry,r=t.attributes,n=r.position.values,o=r.prevPosition.values,i=r.nextPosition.values,a=r.expandAndWidth.values,s=F(r.st)?r.st.values:void 0,u=F(r.color)?r.color.values:void 0,c=Os(t),l=Os(t),f=!1,h=n.length/3,p=0;p<h;p+=4){var m=p,d=p+2,E=U.fromArray(n,3*m,Ys),y=U.fromArray(n,3*d,Xs);if(Math.abs(E.y)<tu)for(E.y=tu*(y.y<0?-1:1),n[3*p+1]=E.y,n[3*(p+1)+1]=E.y,w=3*m;w<3*m+12;w+=3)o[w]=n[3*p],o[w+1]=n[3*p+1],o[w+2]=n[3*p+2];if(Math.abs(y.y)<tu)for(y.y=tu*(E.y<0?-1:1),n[3*(p+2)+1]=y.y,n[3*(p+3)+1]=y.y,w=3*m;w<3*m+12;w+=3)i[w]=n[3*(p+2)],i[w+1]=n[3*(p+2)+1],i[w+2]=n[3*(p+2)+2];var _=c.attributes,g=c.indices,T=l.attributes,A=l.indices,R=$i.lineSegmentPlane(E,y,Bs,Ks);if(F(R)){var f=!0,S=U.multiplyByScalar(U.UNIT_Y,eu,Zs);E.y<0&&(U.negate(S,S),_=l.attributes,g=l.indices,T=c.attributes,A=c.indices);var O=U.add(R,S,Js);_.position.values.push(E.x,E.y,E.z,E.x,E.y,E.z),_.position.values.push(O.x,O.y,O.z),_.position.values.push(O.x,O.y,O.z),_.prevPosition.values.push(o[3*m],o[3*m+1],o[3*m+2]),_.prevPosition.values.push(o[3*m+3],o[3*m+4],o[3*m+5]),_.prevPosition.values.push(E.x,E.y,E.z,E.x,E.y,E.z),_.nextPosition.values.push(O.x,O.y,O.z),_.nextPosition.values.push(O.x,O.y,O.z),_.nextPosition.values.push(O.x,O.y,O.z),_.nextPosition.values.push(O.x,O.y,O.z),U.negate(S,S),U.add(R,S,O),T.position.values.push(O.x,O.y,O.z),T.position.values.push(O.x,O.y,O.z),T.position.values.push(y.x,y.y,y.z,y.x,y.y,y.z),T.prevPosition.values.push(O.x,O.y,O.z),T.prevPosition.values.push(O.x,O.y,O.z),T.prevPosition.values.push(O.x,O.y,O.z),T.prevPosition.values.push(O.x,O.y,O.z),T.nextPosition.values.push(y.x,y.y,y.z,y.x,y.y,y.z),T.nextPosition.values.push(i[3*d],i[3*d+1],i[3*d+2]),T.nextPosition.values.push(i[3*d+3],i[3*d+4],i[3*d+5]);var v=at.fromArray(a,2*m,Vs),I=Math.abs(v.y);_.expandAndWidth.values.push(-1,I,1,I),_.expandAndWidth.values.push(-1,-I,1,-I),T.expandAndWidth.values.push(-1,I,1,I),T.expandAndWidth.values.push(-1,-I,1,-I);S=U.magnitudeSquared(U.subtract(R,E,ks));if(S/=U.magnitudeSquared(U.subtract(y,E,ks)),F(u)){for(var O=J.fromArray(u,4*m,Qs),N=J.fromArray(u,4*d,Qs),v=B.lerp(O.x,N.x,S),I=B.lerp(O.y,N.y,S),R=B.lerp(O.z,N.z,S),N=B.lerp(O.w,N.w,S),w=4*m;w<4*m+8;++w)_.color.values.push(u[w]);for(_.color.values.push(v,I,R,N),_.color.values.push(v,I,R,N),T.color.values.push(v,I,R,N),T.color.values.push(v,I,R,N),w=4*d;w<4*d+8;++w)T.color.values.push(u[w])}if(F(s)){var N=at.fromArray(s,2*m,Vs),C=at.fromArray(s,2*(p+3),Ws),S=B.lerp(N.x,C.x,S);for(w=2*m;w<2*m+4;++w)_.st.values.push(s[w]);for(_.st.values.push(S,N.y),_.st.values.push(S,C.y),T.st.values.push(S,N.y),T.st.values.push(S,C.y),w=2*d;w<2*d+4;++w)T.st.values.push(s[w])}C=_.position.values.length/3-4,g.push(C,C+2,C+1),g.push(C+1,C+2,C+3),C=T.position.values.length/3-4,A.push(C,C+2,C+1),A.push(C+1,C+2,C+3)}else{var M,A=E.y<0?(M=l.attributes,l.indices):(M=c.attributes,c.indices);for(M.position.values.push(E.x,E.y,E.z),M.position.values.push(E.x,E.y,E.z),M.position.values.push(y.x,y.y,y.z),M.position.values.push(y.x,y.y,y.z),w=3*p;w<3*p+12;++w)M.prevPosition.values.push(o[w]),M.nextPosition.values.push(i[w]);for(w=2*p;w<2*p+8;++w)M.expandAndWidth.values.push(a[w]),F(s)&&M.st.values.push(s[w]);if(F(u))for(w=4*p;w<4*p+16;++w)M.color.values.push(u[w]);C=M.position.values.length/3-4,A.push(C,C+2,C+1),A.push(C+1,C+2,C+3)}}f&&($s(l),$s(c)),vs(e,l,c)}(e);break;case Oi.TRIANGLES:zs(e);break;case Oi.LINES:Hs(e)}else ps(t),t.primitiveType===Ii.TRIANGLES?zs(e):t.primitiveType===Ii.LINES&&Hs(e);return e},Object.defineProperties(ru.prototype,{componentDatatype:{get:function(){return it.FLOAT}},componentsPerAttribute:{get:function(){return 3}},normalize:{get:function(){return!1}}}),ru.fromCartesian3=function(e){return new ru(e.x,e.y,e.z)},ru.toValue=function(e,t){return(t=!F(t)?new Float32Array([e.x,e.y,e.z]):t)[0]=e.x,t[1]=e.y,t[2]=e.z,t};var au={};function su(e,t){for(var r=e.length,n=0;n<r;++n)!function(e,t){var r,n,o=e.attributes;for(r in o)!o.hasOwnProperty(r)||F(n=o[r])&&F(n.values)&&t.push(n.values.buffer);F(e.indices)&&t.push(e.indices.buffer)}(e[n],t)}function uu(e){var t=e.length,r=new Float32Array(1+(ge.packedLength+1)*t),n=0;r[n++]=t;for(var o=0;o<t;++o)F(e[o])?(r[n++]=1,ge.pack(e[o],r,n)):r[n++]=0,n+=ge.packedLength;return r}function cu(e){for(var t=new Array(e[0]),r=0,n=1;n<e.length;)1===e[n++]&&(t[r]=ge.unpack(e,n)),++r,n+=ge.packedLength;return t}au.combineGeometry=function(e){var t,r,n,o,i,a,s=e.instances,u=s.length,c=!1;0<u&&(0<(t=ou(e)).length&&(r=ja.createAttributeLocations(t[0]),e.createPickOffsets&&(iu(o=s,"geometry",i=t,a=[]),iu(o,"westHemisphereGeometry",i,a),iu(o,"eastHemisphereGeometry",i,a),a=a)),F(s[0].attributes)&&F(s[0].attributes.offset)&&(n=new Array(u),c=!0));for(var l=new Array(u),f=new Array(u),h=0;h<u;++h){var p=s[h],m=p.geometry;F(m)&&(l[h]=m.boundingSphere,f[h]=m.boundingSphereCV,c&&(n[h]=p.geometry.offsetAttribute));m=p.eastHemisphereGeometry,p=p.westHemisphereGeometry;F(m)&&F(p)&&(F(m.boundingSphere)&&F(p.boundingSphere)&&(l[h]=ge.union(m.boundingSphere,p.boundingSphere)),F(m.boundingSphereCV)&&F(p.boundingSphereCV)&&(f[h]=ge.union(m.boundingSphereCV,p.boundingSphereCV)))}return{geometries:t,modelMatrix:e.modelMatrix,attributeLocations:r,pickOffsets:a,offsetInstanceExtend:n,boundingSpheres:l,boundingSpheresCV:f}},au.packCreateGeometryResults=function(e,t){var r=new Float64Array(function(e){for(var t=1,r=e.length,n=0;n<r;n++){var o=e[n];if(++t,F(o)){var i,a=o.attributes;for(i in t+=7+2*ge.packedLength+(F(o.indices)?o.indices.length:0),a)a.hasOwnProperty(i)&&F(a[i])&&(t+=5+a[i].values.length)}}return t}(e)),n=[],o={},i=e.length,a=0;r[a++]=i;for(var s=0;s<i;s++){var u=e[s],c=F(u);if(r[a++]=c?1:0,c){r[a++]=u.primitiveType,r[a++]=u.geometryType,r[a++]=C(u.offsetAttribute,-1);c=F(u.boundingSphere)?1:0;(r[a++]=c)&&ge.pack(u.boundingSphere,r,a),a+=ge.packedLength;c=F(u.boundingSphereCV)?1:0;(r[a++]=c)&&ge.pack(u.boundingSphereCV,r,a),a+=ge.packedLength;var l,f=u.attributes,h=[];for(l in f)f.hasOwnProperty(l)&&F(f[l])&&(h.push(l),F(o[l])||(o[l]=n.length,n.push(l)));r[a++]=h.length;for(var p=0;p<h.length;p++){var m=h[p],d=f[m];r[a++]=o[m],r[a++]=d.componentDatatype,r[a++]=d.componentsPerAttribute,r[a++]=d.normalize?1:0,r[a++]=d.values.length,r.set(d.values,a),a+=d.values.length}c=F(u.indices)?u.indices.length:0;0<(r[a++]=c)&&(r.set(u.indices,a),a+=c)}}return t.push(r.buffer),{stringTable:n,packedData:r}},au.unpackCreateGeometryResults=function(e){for(var t=e.stringTable,r=e.packedData,n=new Array(r[0]),o=0,i=1;i<r.length;)if(1===r[i++]){var a,s,u=r[i++],c=r[i++],l=r[i++];-1===l&&(l=void 0),1===r[i++]&&(a=ge.unpack(r,i)),i+=ge.packedLength,1===r[i++]&&(s=ge.unpack(r,i)),i+=ge.packedLength;var f=new Bi,h=r[i++];for(R=0;R<h;R++){for(var p=t[r[i++]],m=r[i++],d=r[i++],E=0!==r[i++],y=r[i++],_=it.createTypedArray(m,y),g=0;g<y;g++)_[g]=r[i++];f[p]=new zi({componentDatatype:m,componentsPerAttribute:d,normalize:E,values:_})}if(0<(y=r[i++]))for(var T=_.length/d,A=Ga.createTypedArray(T,y),R=0;R<y;R++)A[R]=r[i++];n[o++]=new Ni({primitiveType:u,geometryType:c,boundingSphere:a,boundingSphereCV:s,indices:A,attributes:f,offsetAttribute:l})}else n[o++]=void 0;return n},au.packCombineGeometryParameters=function(e,t){for(var r=e.createGeometryResults,n=r.length,o=0;o<n;o++)t.push(r[o].packedData.buffer);return{createGeometryResults:e.createGeometryResults,packedInstances:function(e,t){var r=e.length,n=new Float64Array(1+19*r),o=0;n[o++]=r;for(var i=0;i<r;i++){var a=e[i];re.pack(a.modelMatrix,n,o),o+=re.packedLength,F(a.attributes)&&F(a.attributes.offset)&&(a=a.attributes.offset.value,n[o]=a[0],n[o+1]=a[1],n[o+2]=a[2]),o+=3}return t.push(n.buffer),n}(e.instances,t),ellipsoid:e.ellipsoid,isGeographic:e.projection instanceof z,elementIndexUintSupported:e.elementIndexUintSupported,scene3DOnly:e.scene3DOnly,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e.createPickOffsets}},au.unpackCombineGeometryParameters=function(e){for(var t=function(e){for(var t=e,r=new Array(t[0]),n=0,o=1;o<t.length;){var i,a=re.unpack(t,o);F(t[o+=re.packedLength])&&(i={offset:new ru(t[o],t[o+1],t[o+2])}),o+=3,r[n++]={modelMatrix:a,attributes:i}}return r}(e.packedInstances),r=e.createGeometryResults,n=r.length,o=0,i=0;i<n;i++)for(var a=au.unpackCreateGeometryResults(r[i]),s=a.length,u=0;u<s;u++){var c=a[u];t[o].geometry=c,++o}var l=O.clone(e.ellipsoid);return{instances:t,ellipsoid:l,projection:new(e.isGeographic?z:rt)(l),elementIndexUintSupported:e.elementIndexUintSupported,scene3DOnly:e.scene3DOnly,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:re.clone(e.modelMatrix),createPickOffsets:e.createPickOffsets}},au.packCombineGeometryResults=function(e,t){F(e.geometries)&&su(e.geometries,t);var r=uu(e.boundingSpheres),n=uu(e.boundingSpheresCV);return t.push(r.buffer,n.buffer),{geometries:e.geometries,attributeLocations:e.attributeLocations,modelMatrix:e.modelMatrix,pickOffsets:e.pickOffsets,offsetInstanceExtend:e.offsetInstanceExtend,boundingSpheres:r,boundingSpheresCV:n}},au.unpackCombineGeometryResults=function(e){return{geometries:e.geometries,attributeLocations:e.attributeLocations,modelMatrix:e.modelMatrix,pickOffsets:e.pickOffsets,offsetInstanceExtend:e.offsetInstanceExtend,boundingSpheres:cu(e.boundingSpheres),boundingSpheresCV:cu(e.boundingSpheresCV)}};var lu,fu,hu={};return lu=function(e,t){for(var r=e.subTasks,n=r.length,o=new Array(n),i=0;i<n;i++){var a=r[i],s=a.geometry,u=a.moduleName;F(u)?(u=function(e){var t=hu[e];return F(t)||("object"==typeof exports?hu[t]=t=require("Workers/"+e):require(["Workers/"+e],function(e){hu[t=e]=e})),t}(u),o[i]=u(s,a.offset)):o[i]=s}return yt.all(o,function(e){return au.packCreateGeometryResults(e,t)})},function(e){var o=e.data,i=[],a={id:o.id,result:void 0,error:void 0};return yt(function(e,t,r){try{return e(t,r)}catch(e){return yt.reject(e)}}(lu,o.parameters,i)).then(function(e){a.result=e}).otherwise(function(e){e instanceof Error?a.error={name:e.name,message:e.message,stack:e.stack}:a.error=e}).always(function(){F(fu)||(fu=C(self.webkitPostMessage,self.postMessage)),o.canTransferArrayBuffer||(i.length=0);try{fu(a,i)}catch(e){a.result=void 0,a.error="postMessage failed with error: "+(r=(t=e).name,n=t.message,n=F(r)&&F(n)?r+": "+n:t.toString(),F(t=t.stack)&&(n+="\n"+t),n)+"\n    with responseMessage: "+JSON.stringify(a),fu(a)}var t,r,n})}});
